<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>All Posts - siwei.io</title>
        <link>https://siwei.io/en/posts/</link>
        <description>All Posts | siwei.io</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><managingEditor>weyl.gu@gmail.com (Wey Gu)</managingEditor>
            <webMaster>weyl.gu@gmail.com (Wey Gu)</webMaster><lastBuildDate>Tue, 19 Apr 2022 17:19:11 &#43;0800</lastBuildDate><atom:link href="https://siwei.io/en/posts/" rel="self" type="application/rss+xml" /><item>
    <title>Nebula Graph on Pi</title>
    <link>https://siwei.io/en/nebula-graph-on-pi/</link>
    <pubDate>Wed, 23 Mar 2022 22:11:03 &#43;0800</pubDate><author>
        <name>Wey Gu</name>
    </author><guid>https://siwei.io/en/nebula-graph-on-pi/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/featured-image.webp" referrerpolicy="no-referrer">
            </div><blockquote>
<p>With the ARM64 Docker Image of Nebula Graph, it&rsquo;s actually quite easy to run it on SBC/Respberry Pi!</p>
</blockquote>
<h2 id="background" class="headerLink">
    <a href="#background" class="header-mark"></a>1 Background</h2><p>Recently, after Yee from Nebula Graph Community fixed ARM build on <a href="https://github.com/vesoft-inc/nebula-third-party/pull/37" target="_blank" rel="noopener noreffer">nebula-third-party#37</a>, we could play with Nebula Graph on M1 Chip Macbook. While, I didn&rsquo;t get the chance to run it on a SBC/Pi.</p>
<p>A couple of weeks before, in a twitter thread with <a href="https://twitter.com/laixintao" target="_blank" rel="noopener noreffer">@laixintao</a> and <a href="https://twitter.com/andelf/status/1504295476958404608" target="_blank" rel="noopener noreffer">@andelf</a> I decided to purchase a <a href="https://wiki.radxa.com/Rock3/" target="_blank" rel="noopener noreffer">Rock Pi 3A</a>:</p>
<p></p>
<p>And it looks nice!(Even come with a NPU inside)</p>
<p></p>
<h2 id="the-guide-of-running-nebula-graph-on-a-pi-sbc" class="headerLink">
    <a href="#the-guide-of-running-nebula-graph-on-a-pi-sbc" class="header-mark"></a>2 The Guide of running Nebula Graph on a Pi SBC</h2><blockquote>
<p>Actually, since v3.0.0, Nebula comes with a <a href="https://docs.nebula-graph.io/3.0.1/4.deployment-and-installation/standalone-deployment/" target="_blank" rel="noopener noreffer">standalone version</a>, which suits the deep edge deployment more, but today, I will only setup the cluster version as the Docker Image is out of box to be used. I will share more on standalone version in upcoming weeks.</p>
</blockquote>
<p>I put the Ubuntu Server installation steps in the appendix, and now I assumed we already have an ARM64 Linux up and running on a Pi SBC.</p>
<h3 id="step-0-install-docker-compose-on-pi" class="headerLink">
    <a href="#step-0-install-docker-compose-on-pi" class="header-mark"></a>2.1 Step 0, Install Docker-Compose on Pi</h3><p>I am using debian/ubuntu here, while it should be the same for other distros, referring to <a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreffer">https://docs.docker.com/engine/install/</a>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get update
sudo apt-get install <span class="se">\
</span><span class="se"></span>    ca-certificates <span class="se">\
</span><span class="se"></span>    curl <span class="se">\
</span><span class="se"></span>    gnupg <span class="se">\
</span><span class="se"></span>    lsb-release

<span class="nb">echo</span> <span class="se">\
</span><span class="se"></span>  <span class="s2">&#34;deb [arch=</span><span class="k">$(</span>dpkg --print-architecture<span class="k">)</span><span class="s2"> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
</span><span class="s2">  </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> stable&#34;</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null

sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io

<span class="c1"># follow https://docs.docker.com/engine/install/linux-postinstall/</span>
sudo groupadd docker
sudo usermod -aG docker <span class="nv">$USER</span>
<span class="nb">exit</span>
<span class="c1"># login again</span>
newgrp docker
</code></pre></td></tr></table>
</div>
</div><p>After Docker being installed, we install compose here, there could be issues encounterred from the Docker website on Compose installation. While, due to compose is just a python package, let&rsquo;s do it via python3-pip install:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get install -y python3 python3-pip
sudo pip3 install docker-compose
</code></pre></td></tr></table>
</div>
</div><h3 id="step-1-bootstrap-nebula-graph-cluster-on-pi" class="headerLink">
    <a href="#step-1-bootstrap-nebula-graph-cluster-on-pi" class="header-mark"></a>2.2 Step 1, bootstrap Nebula Graph Cluster on Pi</h3><p>We clone the compose file for nebula cluster first:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">git clone https://github.com/vesoft-inc/nebula-docker-compose.git <span class="o">&amp;&amp;</span> <span class="nb">cd</span> nebula-docker-compose
docker-compose up -d
</code></pre></td></tr></table>
</div>
</div><p>Then, let&rsquo;s download the client: nebula-console, and connect to the GraphD service:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">wget https://github.com/vesoft-inc/nebula-console/releases/download/v3.0.0/nebula-console-linux-arm64-v3.0.0
chmod +x nebula-console-linux-arm64-v3.0.0

./nebula-console-linux-arm64-v3.0.0 -addr localhost -port <span class="m">9669</span> -u root -p nebula
</code></pre></td></tr></table>
</div>
</div><p>Activate the storageD services:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">ADD HOSTS <span class="s2">&#34;storaged0&#34;</span>:9779,<span class="s2">&#34;storaged1&#34;</span>:9779,<span class="s2">&#34;storaged2&#34;</span>:9779<span class="p">;</span>
SHOW HOSTS<span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="step-2-play-nebula-graph-on-pi" class="headerLink">
    <a href="#step-2-play-nebula-graph-on-pi" class="header-mark"></a>2.3 Step 2, Play Nebula Graph on Pi</h3><p>WIth the <code>SHOW HOSTS</code> we should see StorageD services are all ONLINE, then we could run this from the console session to load the test dataset.</p>
<blockquote>
<p>Referennce: <a href="https://docs.nebula-graph.io/3.0.1/nebula-console/#import_a_testing_dataset" target="_blank" rel="noopener noreffer">https://docs.nebula-graph.io/3.0.1/nebula-console/#import_a_testing_dataset</a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$:play basketballplayer<span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>The test data will be loaded in around 1 minute. Then, we could query something like:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">USE basketballplayer<span class="p">;</span>

GO FROM <span class="s2">&#34;player100&#34;</span> OVER follow YIELD dst<span class="o">(</span>edge<span class="o">)</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>Check this out and&hellip;</p>
<p>Happy Graphing!</p>
<p></p>
<h2 id="appendix-installing-ubuntu-server-on-rock-pi-3a-sbc" class="headerLink">
    <a href="#appendix-installing-ubuntu-server-on-rock-pi-3a-sbc" class="header-mark"></a>3 Appendix: Installing Ubuntu Server on Rock Pi 3A SBC</h2><ul>
<li>
<p>Get the image from <a href="https://wiki.radxa.com/Rock3/downloads" target="_blank" rel="noopener noreffer">https://wiki.radxa.com/Rock3/downloads</a> decompressing the file into <code>.img</code></p>
</li>
<li>
<p>Write the image to a micro SD card with <a href="https://www.balena.io/etcher/" target="_blank" rel="noopener noreffer">etcher</a></p>
</li>
<li>
<p>Boot it!</p>
</li>
</ul>
<blockquote>
<p>feature image credit: <a href="https://unsplash.com/@_louisreed" target="_blank" rel="noopener noreffer">@_louisreed</a></p>
</blockquote>]]></description>
</item><item>
    <title>What happens to Wordle and Chinese idiom Knowledge Graph?</title>
    <link>https://siwei.io/en/resolve-wordle/</link>
    <pubDate>Mon, 28 Feb 2022 19:18:59 &#43;0800</pubDate><author>
        <name>Wey Gu</name>
    </author><guid>https://siwei.io/en/resolve-wordle/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="/featured-image.webp" referrerpolicy="no-referrer">
            </div><blockquote>
<p>Could I create something between the human brain and the game-cheater/ruiner to make it more of fun? With Knowledge Graph?</p>
</blockquote>
<h2 id="background" class="headerLink">
    <a href="#background" class="header-mark"></a>1 Background</h2><p>You may have seen tweets like this in past months, where the color dots in emoji was shared in SNS randomly.</p>
<blockquote>
<p>Feel free to <a href="https://www.google.com/search?q=wordle" target="_blank" rel="noopener noreffer">Google Wordle</a> first if you don&rsquo;t know its meaning yet.</p>
</blockquote>
<p></p>
<h3 id="wordle-solver" class="headerLink">
    <a href="#wordle-solver" class="header-mark"></a>1.1 Wordle Solver</h3><p>For all magics being used to solve wordle, I am impressed by <a href="https://www.3blue1brown.com/about" target="_blank" rel="noopener noreffer">Grant Sanderson</a>, who explained us the information theory when solving wordle, <a href="https://www.3blue1brown.com/lessons/wordle" target="_blank" rel="noopener noreffer">in an elegent and delightful way</a>.</p>
<h3 id="chinese-wordle-handle" class="headerLink">
    <a href="#chinese-wordle-handle" class="header-mark"></a>1.2 Chinese wordle: &amp;ldquo;handle&amp;rdquo;</h3><p>I am not going create yet another wordle-solver today, instead, it&rsquo;s more about an intresting variant of wordle.</p>
<p>To truly enjoy the fun of wordle, mostly we should be a native speaker, and it is not surprising that there is a <a href="https://twitter.com/search?q=wordle%20es" target="_blank" rel="noopener noreffer">Spanish wordle</a> out there, and still tweets on wordle(es) are being shared literially every second now.</p>
<p>While for non alphabetic languages like Chineses, do we have the luck to have fun with wordling? The answer is yes, while it&rsquo;s a bit different.</p>
<p>For the reason <a href="https://en.wikipedia.org/wiki/Chinese_characters" target="_blank" rel="noopener noreffer">Chinese charactors</a>, also called Hanzi or Han chactors are in from of <a href="https://en.wikipedia.org/wiki/Logogram" target="_blank" rel="noopener noreffer">Logogram</a>, each charactor in Chinese is made up of radicals in quite different forms, each Chinese word can be 2/3/4 charactors. Most of the crossword games in Chinese are idiom, proverb or ancient poetry based: the slot to be filled are one Chinese.</p>
<p></p>
<p>ref: <a href="https://chinese.stackexchange.com/questions/42416/chinese-idiom-puzzle-14-%E4%B8%AD%E6%96%87%E5%A1%AB%E5%AD%97%E9%81%8A%E6%88%B2" target="_blank" rel="noopener noreffer">Chinese idiom puzzle</a></p>
<p>Thus, a wordle but in Chinese idiom will be quite strange, or even hilarious as <a href="https://cheeaun.com/blog/2022/02/chengyu-wordle-is-not-a-love-story/" target="_blank" rel="noopener noreffer">Chee</a> and JinGen discussed in this <a href="https://twitter.com/jg_lim/status/1484506430711697412" target="_blank" rel="noopener noreffer">tweet thread</a>, where you could see the candidate characters are counted in thousands: there is no chance to guess the idiom in 10 attempts!</p>
<p></p>
<p>As one of the fun on playing wordle could be the feedback loop of <code>guess --&gt; result</code> in limited attempts, while the scale of Chinese Charactor had pushed the Chinese wordle variant creators leveraging other aspects of the charactor: pronunciation.</p>
<p>Each charactor in Chinease is monosyllabic without exceptions, and when it comes to its pronunciation, they are all made up from two parts(initial and final, and they could be <a href="https://en.wikipedia.org/wiki/Pinyin" target="_blank" rel="noopener noreffer">written in roman letters</a>), which comes in tens level of possbilities.</p>
<p>There are bounch of Chinese wordle varients asking player to guess idiom leveraging pinyin:</p>
<ul>
<li><a href="https://pinyincaichengyu.com/" target="_blank" rel="noopener noreffer">https://pinyincaichengyu.com/</a></li>
<li><a href="https://cheeaun.github.io/chengyu-wordle/" target="_blank" rel="noopener noreffer">https://cheeaun.github.io/chengyu-wordle/</a></li>
<li><a href="https://apps.apple.com/cn/app/id1606194420" target="_blank" rel="noopener noreffer">https://apps.apple.com/cn/app/id1606194420</a></li>
</ul>
<p>While, to me, a native Chinese speaker, it&rsquo;s either too hard to play with condtions of pronunciation parts(pinyin) or too easy to guess on given around 20 Chinese charactors. Then, the varient stands out here is the &ldquo;<a href="handle/%e6%b1%89%e5%85%9c" rel="">handle/汉兜</a>&quot;(Hanzi-Wordle) created by <a href="https://antfu.me/" target="_blank" rel="noopener noreffer">Antfu</a>.</p>
<p>&ldquo;Handle&rdquo; introduced the tones with genius to add an extra dimension of all charactors per each guess attempt, which helped player to have more information on filtering the knowledge in the brain.</p>
<blockquote>
<p>Note, for each Chinese charactor, there will be a tone in 1 of <a href="https://en.wikipedia.org/wiki/Four_tones_%28Middle_Chinese%29" target="_blank" rel="noopener noreffer">4 tones</a> in its pronunciation.</p>
</blockquote>
<p>Let&rsquo;s see what it&rsquo;s like to play the &ldquo;Handle&rdquo;:</p>
<ul>
<li>There will be 4 Chinese Charactors to be filled in 10 times of guess</li>
<li>Not only the charactor self will be colored in result:
<ul>
<li>For example in first line, the green &ldquo;门&rdquo; in position 2 is correct whereas in second line, the orange &ldquo;仓&rdquo; is corret while the possition should be all but not the first slot.</li>
</ul>
</li>
<li>There will be extra hints on:
<ul>
<li>Pinyin parts for both part1(initial) and part2(final)
<ul>
<li>In third line of the boxes, the green &ldquo;qiao&rdquo; refers to the first charactor is ponouced in &ldquo;qiao&rdquo; with initial:&ldquo;q&rdquo; and final:&ldquo;iao&rdquo;, although we filled the wrong charactor in the writing dimension.</li>
<li>In third line, the orange &ldquo;uo&rdquo; refers to there is one chacarctor in other poisition with the final part of the pinyin as &ldquo;uo&rdquo;.</li>
</ul>
</li>
<li>Tones of the charactor:
<ul>
<li>In third line, the green &ldquo;-&rdquo; stands for the third charactor is in tone-1.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p></p>
<h3 id="the-chinese-wordle-helper" class="headerLink">
    <a href="#the-chinese-wordle-helper" class="header-mark"></a>1.3 The Chinese Wordle Helper</h3><p>As a non-native English speaker, the way I was playing wordle is to <del>cheating</del> relying on helpers:</p>
<p>After knowing on the third letter to be &ldquo;O&rdquo;, I googled and got this: <a href="https://uppolice.org/5-letter-words-with-o-in-the-middle/" target="_blank" rel="noopener noreffer">5-letter-words-with-o-in-the-middle</a> and do the searching 😁.</p>
<p></p>
<p>The way to play with helpers works for me to have fun yet not ruin it by an automated cheat resolver(it&rsquo;s only simulating my brain as a native-speaker!), so that I could somehow experience the same as Millions of people out there without cheating.</p>
<p>While for Chinese &ldquo;Handle&rdquo; players, from my perspective, it&rsquo;s still a bit harder(to find answers in 10 guesses), and the way my wife and I were playing &ldquo;Handle&rdquo; when lining up at the restaurant door ended up googling: idiom list with word &lsquo;foo&rsquo;, yet still having a lot of fun.</p>
<h2 id="chinese-idiom-knowledge-graph" class="headerLink">
    <a href="#chinese-idiom-knowledge-graph" class="header-mark"></a>2 Chinese idiom Knowledge Graph</h2><p>Could I create something between the human brain and the game-cheater/ruiner to make it more of fun?</p>
<p>The answer is yes: a game extension as a secondary brain. For this helper/secondary brain, the solution for &ldquo;handle&rdquo; differenciates from the English wordle, unlike the auto-solver, similar algorithms could help on both cases:</p>
<ul>
<li>
<p>In wordle(English), player searches in their brain or from a helper like the web page: <a href="https://uppolice.org/5-letter-words-with-o-in-the-middle/" target="_blank" rel="noopener noreffer">5-letter-words-with-o-in-the-middle</a>.</p>
</li>
<li>
<p>In handle(Chinese), it&rsquo;s harder to be searching based on hints like tones/initial parts of pinyin in fulltext webpage searching anymore, the reason hehind is that the multidimensional filter condtions are not indexed by normal webpages. As I mentioned, the key of the helper to be leveraged to (not ruining the game) is to be the extension of the brain, then the question is: how does our brain work on handling the knowledge of &ldquo;handle&rdquo;(yes, I was preparing for this pun for so long!)?</p>
</li>
</ul>
<p>Thus, why not do it in a graph/neural network way? And here we go, let&rsquo;s create a knowledge graph of Chinese idiom and see how it goes with the &ldquo;handle&rdquo; game.</p>
<h3 id="tldr" class="headerLink">
    <a href="#tldr" class="header-mark"></a>2.1 TL;DR</h3><p>It&rsquo;s indeed entertaining to me, and I could write Graph Queries[*] by hand or via Visualization tools[**] to help explore things in this graph, because <del>I can</del> we&rsquo;re doing the &ldquo;thinking&rdquo; process the similar way in our own brain, but not so well-informed.</p>
<ul>
<li>
<ul>
<li></li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># There is one Character not in 1st position, with tone-4, final part as &#34;ai&#34;, but is not &#34;爱&#34;
MATCH (char0:character)&lt;-[with_char_0:with_character]-(x:idiom)-[with_pinyin_0:with_pinyin]-&gt;(pinyin_0:character_pinyin)-[:with_pinyin_part]-&gt;(final_part_0:pinyin_part{part_type: &#34;final&#34;})
WHERE id(final_part_0) == &#34;ai&#34; AND pinyin_0.character_pinyin.tone == 4 AND with_pinyin_0.position != 0 AND with_char_0.position != 0 AND id(char0) != &#34;爱&#34;

# There is one Character in tone-1 not in 2nd position
MATCH (x:idiom) -[with_pinyin_1:with_pinyin]-&gt;(pinyin_1:character_pinyin)
WHERE pinyin_1.character_pinyin.tone == 1 AND with_pinyin_1.position != 1

# There is one Character with final part as &#34;ing&#34;, not in 4th position
MATCH (x:idiom) -[with_pinyin_2:with_pinyin]-&gt;(:character_pinyin)-[:with_pinyin_part]-&gt;(final_part_2:pinyin_part{part_type: &#34;final&#34;})
WHERE id(final_part_2) == &#34;ing&#34; AND with_pinyin_2.position != 3

# The 4th Character is tone-2
MATCH (x:idiom) -[with_pinyin_3:with_pinyin]-&gt;(pinyin_3:character_pinyin)
WHERE pinyin_3.character_pinyin.tone == 2 AND with_pinyin_3.position == 3

RETURN x, count(x) as c ORDER BY c DESC
</code></pre></td></tr></table>
</div>
</div><ul>
<li>**</li>
</ul>
<p></p>
<h3 id="the-long-version-of-playing-with-knowledge-graph" class="headerLink">
    <a href="#the-long-version-of-playing-with-knowledge-graph" class="header-mark"></a>2.2 The long version of playing with Knowledge Graph</h3><p>If you are intrested in how you could do it from your side, here are some details. Before getting started, if you would like to hands-on do it, please refer to appendix chapter on getting your own Nebula Graph Database cluster ready, which are a couple of lines commands to be run.</p>
<h4 id="play-handle-with-knowledge-graph" class="headerLink">
    <a href="#play-handle-with-knowledge-graph" class="header-mark"></a>2.2.1 Play Handle with Knowledge Graph</h4><p>So, if we visit the &ldquo;handle&rdquo; game 👉🏻 <a href="https://handle.antfu.me/" target="_blank" rel="noopener noreffer">https://handle.antfu.me/</a>. We could start with one guess i.e. &ldquo;爱憎分明&rdquo;.</p>
<p>We will get hint of the first guess as:</p>
<p></p>
<p>Not bad, we have three of the charactor with informative hints!</p>
<ul>
<li>There is one Character not in 1st position, with tone-4, final part as &ldquo;ai&rdquo;, but is not &ldquo;爱&rdquo;</li>
<li>There is one Character in tone-1 not in 2nd position</li>
<li>There is one Character with final part as &ldquo;ing&rdquo;, not in 4th position</li>
<li>The 4th Character is tone-2</li>
</ul>
<p>Then we just query it from Nebula Graph:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># There is one Character not in 1st position, with tone-4, final part as &#34;ai&#34;, but is not &#34;爱&#34;
MATCH (char0:character)&lt;-[with_char_0:with_character]-(x:idiom)-[with_pinyin_0:with_pinyin]-&gt;(pinyin_0:character_pinyin)-[:with_pinyin_part]-&gt;(final_part_0:pinyin_part{part_type: &#34;final&#34;})
WHERE id(final_part_0) == &#34;ai&#34; AND pinyin_0.character_pinyin.tone == 4 AND with_pinyin_0.position != 0 AND with_char_0.position != 0 AND id(char0) != &#34;爱&#34;

# There is one Character in tone-1 not in 2nd position
MATCH (x:idiom) -[with_pinyin_1:with_pinyin]-&gt;(pinyin_1:character_pinyin)
WHERE pinyin_1.character_pinyin.tone == 1 AND with_pinyin_1.position != 1

# There is one Character with final part as &#34;ing&#34;, not in 4th position
MATCH (x:idiom) -[with_pinyin_2:with_pinyin]-&gt;(:character_pinyin)-[:with_pinyin_part]-&gt;(final_part_2:pinyin_part{part_type: &#34;final&#34;})
WHERE id(final_part_2) == &#34;ing&#34; AND with_pinyin_2.position != 3

# The 4th Character is tone-2
MATCH (x:idiom) -[with_pinyin_3:with_pinyin]-&gt;(pinyin_3:character_pinyin)
WHERE pinyin_3.character_pinyin.tone == 2 AND with_pinyin_3.position == 3

RETURN x, count(x) as c ORDER BY c DESC
</code></pre></td></tr></table>
</div>
</div><p>And there are 7 results left in this single guess for us!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="err">(</span><span class="s2">&#34;惊愚骇俗&#34;</span> <span class="err">:idiom</span><span class="p">{</span><span class="err">pinyin:</span> <span class="nt">&#34;[&#39;jing1&#39;, &#39;yu2&#39;, &#39;hai4&#39;, &#39;su2&#39;]&#34;</span><span class="p">}</span><span class="err">)</span>
<span class="err">(</span><span class="s2">&#34;惊世骇俗&#34;</span> <span class="err">:idiom</span><span class="p">{</span><span class="err">pinyin:</span> <span class="nt">&#34;[&#39;jing1&#39;, &#39;shi4&#39;, &#39;hai4&#39;, &#39;su2&#39;]&#34;</span><span class="p">}</span><span class="err">)</span>
<span class="err">(</span><span class="s2">&#34;惊见骇闻&#34;</span> <span class="err">:idiom</span><span class="p">{</span><span class="err">pinyin:</span> <span class="nt">&#34;[&#39;jing1&#39;, &#39;jian4&#39;, &#39;hai4&#39;, &#39;wen2&#39;]&#34;</span><span class="p">}</span><span class="err">)</span>
<span class="err">(</span><span class="s2">&#34;沽名卖直&#34;</span> <span class="err">:idiom</span><span class="p">{</span><span class="err">pinyin:</span> <span class="nt">&#34;[&#39;gu1&#39;, &#39;ming2&#39;, &#39;mai4&#39;, &#39;zhi2&#39;]&#34;</span><span class="p">}</span><span class="err">)</span>
<span class="err">(</span><span class="s2">&#34;惊心骇神&#34;</span> <span class="err">:idiom</span><span class="p">{</span><span class="err">pinyin:</span> <span class="nt">&#34;[&#39;jing1&#39;, &#39;xin1&#39;, &#39;hai4&#39;, &#39;shen2&#39;]&#34;</span><span class="p">}</span><span class="err">)</span>
<span class="err">(</span><span class="s2">&#34;荆棘载途&#34;</span> <span class="err">:idiom</span><span class="p">{</span><span class="err">pinyin:</span> <span class="nt">&#34;[&#39;jing1&#39;, &#39;ji2&#39;, &#39;zai4&#39;, &#39;tu2&#39;]&#34;</span><span class="p">}</span><span class="err">)</span>
<span class="err">(</span><span class="s2">&#34;出卖灵魂&#34;</span> <span class="err">:idiom</span><span class="p">{</span><span class="err">pinyin:</span> <span class="nt">&#34;[&#39;chu1&#39;, &#39;mai4&#39;, &#39;ling2&#39;, &#39;hun2&#39;]&#34;</span><span class="p">}</span><span class="err">)</span>
</code></pre></td></tr></table>
</div>
</div><p>And as a Chinese native speaker, the common one would be &ldquo;惊世骇俗&rdquo;, and let&rsquo;s give a try!</p>
<p></p>
<h4 id="the-visualization-of-the-query" class="headerLink">
    <a href="#the-visualization-of-the-query" class="header-mark"></a>2.2.2 The Visualization of the Query</h4><p>We could modify our query to make every part of the subquery returned, thus, they could also be renderred visually:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># There is one Character not in 1st position, with tone-4, final part as &#34;ai&#34;, but is not &#34;爱&#34;
MATCH p0=(char0:character)&lt;-[with_char_0:with_character]-(x:idiom)-[with_pinyin_0:with_pinyin]-&gt;(pinyin_0:character_pinyin)-[:with_pinyin_part]-&gt;(final_part_0:pinyin_part{part_type: &#34;final&#34;})
WHERE id(final_part_0) == &#34;ai&#34; AND pinyin_0.character_pinyin.tone == 4 AND with_pinyin_0.position != 0 AND with_char_0.position != 0 AND id(char0) != &#34;爱&#34;

# There is one Character in tone-1 not in 2nd position
MATCH p1=(x:idiom) -[with_pinyin_1:with_pinyin]-&gt;(pinyin_1:character_pinyin)
WHERE pinyin_1.character_pinyin.tone == 1 AND with_pinyin_1.position != 1

# There is one Character with final part as &#34;ing&#34;, not in 4th position
MATCH p2=(x:idiom) -[with_pinyin_2:with_pinyin]-&gt;(:character_pinyin)-[:with_pinyin_part]-&gt;(final_part_2:pinyin_part{part_type: &#34;final&#34;})
WHERE id(final_part_2) == &#34;ing&#34; AND with_pinyin_2.position != 3

# The 4th Character is tone-2
MATCH p3=(x:idiom) -[with_pinyin_3:with_pinyin]-&gt;(pinyin_3:character_pinyin)
WHERE pinyin_3.character_pinyin.tone == 2 AND with_pinyin_3.position == 3

RETURN p0,p1,p2,p3
</code></pre></td></tr></table>
</div>
</div><p>And then we query it in Nebula-Studio-Console, and click &ldquo;View Subgraphs&rdquo; to see how the searching was done like it was in our own brains:</p>
<p></p>
<h2 id="whats-next" class="headerLink">
    <a href="#whats-next" class="header-mark"></a>3 What&amp;rsquo;s Next</h2><p>If you happened to get hands dirty(or being intrested to) on Graph Database, you could checkout the <a href="https://github.com/vesoft-inc/nebula" target="_blank" rel="noopener noreffer">Nebula Graph</a> project now and its <a href="https://docs.nebula-graph.io/" target="_blank" rel="noopener noreffer">Docs</a> to have more fun of it! Also, <a href="https://nebula-graph.io/demo/" target="_blank" rel="noopener noreffer">here</a> are some only playgrounds if you prefer to try it without deployment on your own envrioment.</p>
<p>If you are intrested in the <code>MATCH</code> query syntax and would like to actually do exersices with each daily handle challenge, check below Documents:</p>
<ul>
<li>MATCH <a href="https://docs.nebula-graph.io/3.0.1/3.ngql-guide/7.general-query-statements/2.match/" target="_blank" rel="noopener noreffer">https://docs.nebula-graph.io/3.0.1/3.ngql-guide/7.general-query-statements/2.match/</a></li>
<li>Graph Patterns <a href="https://docs.nebula-graph.io/3.0.1/3.ngql-guide/1.nGQL-overview/3.graph-patterns/" target="_blank" rel="noopener noreffer">https://docs.nebula-graph.io/3.0.1/3.ngql-guide/1.nGQL-overview/3.graph-patterns/</a></li>
<li>nGQL command cheatsheet <a href="https://docs.nebula-graph.io/3.0.1/2.quick-start/6.cheatsheet-for-ngql/" target="_blank" rel="noopener noreffer">https://docs.nebula-graph.io/3.0.1/2.quick-start/6.cheatsheet-for-ngql/</a></li>
</ul>
<p>Happy Graphing!</p>
<h2 id="appendix-setting-up-the-knowledge-graph" class="headerLink">
    <a href="#appendix-setting-up-the-knowledge-graph" class="header-mark"></a>4 Appendix: Setting up the Knowledge Graph</h2><p>I put the code and process here: <a href="https://github.com/wey-gu/chinese-graph" target="_blank" rel="noopener noreffer">https://github.com/wey-gu/chinese-graph</a>, feel free to check that out.</p>
<h3 id="build-the-knowledge-graph" class="headerLink">
    <a href="#build-the-knowledge-graph" class="header-mark"></a>4.1 Build the Knowledge Graph</h3><p>The process would be:</p>
<ul>
<li>Modeling the Knowledge</li>
<li>Preprocessing the data</li>
<li>ETL data to a Graph Database: Nebula Graph</li>
<li>Have fun on Nebula Graph</li>
</ul>
<h3 id="modeling-the-knowledge-graph" class="headerLink">
    <a href="#modeling-the-knowledge-graph" class="header-mark"></a>4.2 Modeling the Knowledge Graph</h3><p>For Graph Modeling, it&rsquo;s actually quite straight forward, the mind model for me was to put the knowledge I cares as vertcies and connect them with their relationships first.</p>
<p>You will come back to iterate or optimize the modeling when you are actually playing with the data afterwards, thus, if you could imagine how the graph will be queried in the first place, the graph modeling could be adopted accordingly. Otherwise, don&rsquo;t over design it, just do it the intuitive way.</p>
<p>Here, I put the vertices with properties as:</p>
<ul>
<li>idiom</li>
<li>character</li>
<li>pinyin
<ul>
<li>tone</li>
</ul>
</li>
<li>pinyin_part
<ul>
<li>type</li>
</ul>
</li>
</ul>
<p>The edges with properteis as:</p>
<ul>
<li>with_character</li>
<li>with_pinyin</li>
<li>with_pinyin_part</li>
</ul>
<p></p>
<h3 id="deploy-nebula-graph" class="headerLink">
    <a href="#deploy-nebula-graph" class="header-mark"></a>4.3 Deploy Nebula Graph</h3><blockquote>
<p>With <a href="https://github.com/wey-gu/nebula-up/" target="_blank" rel="noopener noreffer">Nebula-UP</a>, it&rsquo;s an onliner call</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">curl -fsSL nebula-up.siwei.io/install.sh <span class="p">|</span> bash -s -- v3.0.0
</code></pre></td></tr></table>
</div>
</div><h3 id="load-data" class="headerLink">
    <a href="#load-data" class="header-mark"></a>4.4 Load data</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># clone the code for data genration and data loading</span>
git clone https://github.com/wey-gu/chinese-graph.git <span class="o">&amp;&amp;</span> <span class="nb">cd</span> chinese-graph

python3 graph_data_generator.py <span class="c1"># generate data</span>

<span class="c1"># load data with Nebula-Importer</span>
docker run --rm -ti <span class="se">\
</span><span class="se"></span>    --network<span class="o">=</span>nebula-docker-compose_nebula-net <span class="se">\
</span><span class="se"></span>    -v <span class="si">${</span><span class="nv">PWD</span><span class="si">}</span>/importer_conf.yaml:/root/importer_conf.yaml <span class="se">\
</span><span class="se"></span>    -v <span class="si">${</span><span class="nv">PWD</span><span class="si">}</span>/output:/root <span class="se">\
</span><span class="se"></span>    vesoft/nebula-importer:v3.0.0 <span class="se">\
</span><span class="se"></span>    --config /root/importer_conf.yaml
</code></pre></td></tr></table>
</div>
</div>]]></description>
</item></channel>
</rss>

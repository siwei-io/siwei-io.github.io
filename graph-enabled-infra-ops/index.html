

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <title>å›¾æ•°æ®åº“é©±åŠ¨çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹ - siwei.io</title><meta name="Description" content="å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚"><meta property="og:title" content="å›¾æ•°æ®åº“é©±åŠ¨çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹" />
<meta property="og:description" content="å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://siwei.io/graph-enabled-infra-ops/" /><meta property="og:image" content="https://siwei.io/graph-enabled-infra-ops/featured-image.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-13T22:22:44+08:00" />
<meta property="article:modified_time" content="2023-01-13T22:33:17+08:00" /><meta property="og:site_name" content="siwei.io" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://siwei.io/graph-enabled-infra-ops/featured-image.png"/>
<meta name="twitter:title" content="å›¾æ•°æ®åº“é©±åŠ¨çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹"/>
<meta name="twitter:description" content="å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚"/>
<meta name="twitter:site" content="@wey_gu"/>
<meta name="application-name" content="DoIt">
<meta name="apple-mobile-web-app-title" content="DoIt">

<meta name="theme-color" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><meta name="twitter:creator" content="@wey_gu" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://siwei.io/graph-enabled-infra-ops/" /><link rel="prev" href="https://siwei.io/build-open-communication-infra/" /><link rel="next" href="https://siwei.io/nebulagraph-ai-suite/" />
<link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/color.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/fontawesome-free/all.min.css">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/animate/animate.min.css">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript>
    
    
    
    <meta name="baidu-site-verification" content="code-4R67zl7SwH" /><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "å›¾æ•°æ®åº“é©±åŠ¨çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://siwei.io/graph-enabled-infra-ops/"
        },"image": ["https://siwei.io/images/site-feature-image.webp"],"genre": "posts","keywords": "Nebula Graph, DevOps, OpenStack, æ™ºèƒ½è¿ç»´, RCA","wordcount":  8078 ,
        "url": "https://siwei.io/graph-enabled-infra-ops/","datePublished": "2023-01-13T22:22:44+08:00","dateModified": "2023-01-13T22:33:17+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Wey Gu","logo": "https://siwei.io/images/site-feature-image.webp"},"author": {
                "@type": "Person",
                "name": "Wey Gu"
            },"description": "å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚"
    }
    </script></head>

<body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">
        function setTheme(theme) {document.body.setAttribute('theme', theme); document.documentElement.style.setProperty('color-scheme', theme === 'light' ? 'light' : 'dark'); window.theme = theme;   window.isDark = window.theme !== 'light' }
        function saveTheme(theme) {window.localStorage && localStorage.setItem('theme', theme);}
        function getMeta(metaName) {const metas = document.getElementsByTagName('meta'); for (let i = 0; i < metas.length; i++) if (metas[i].getAttribute('name') === metaName) return metas[i]; return '';}
        if (window.localStorage && localStorage.getItem('theme')) {let theme = localStorage.getItem('theme');theme === 'light' || theme === 'dark' || theme === 'black' ? setTheme(theme) : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light')); } else { if ('auto' === 'light' || 'auto' === 'dark' || 'auto' === 'black') setTheme('auto'), saveTheme('auto'); else saveTheme('auto'), window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light');}
        let metaColors = {'light': '#f8f8f8','dark': '#252627','black': '#000000'}
        getMeta('theme-color').content = metaColors[document.body.getAttribute('theme')];
        window.switchThemeEventSet = new Set()
    </script>
    <div id="back-to-top"></div>
    <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="siwei.io"><span class="header-title-pre"><i class='fas fa-code-branch'></i></span>siwei.io</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/about/"> å…³äº </a><a class="menu-item" href="/projects/"> é¡¹ç›® </a><a class="menu-item" href="/sketch-notes/"> æ‰‹ç»˜ </a><a class="menu-item" href="/posts/"> åšå®¢ </a><a class="menu-item" href="/talk/"> æ¼”è®² </a><a class="menu-item" href="/cources/"> è¯¾ç¨‹ </a><a class="menu-item" href="https://vesoft.com/cn/careers/" rel="noopener noreferrer" target="_blank"> æ‹›è˜ </a><a class="menu-item" href="/about/#%E8%81%94%E7%B3%BB%E6%88%91"> è”ç³» </a><a class="menu-item" href="/path/"> å­¦ä¹ è·¯å¾„ </a><a class="menu-item" href="/podcast/"> æ’­å®¢ </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="é€‰æ‹©è¯­è¨€">ğŸŒ Chinese<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" title="é€‰æ‹©è¯­è¨€" id="language-select-desktop" onchange="location = this.value;"><option value="/graph-enabled-infra-ops/" selected>ğŸŒ Chinese</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-select" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                    <select class="color-theme-select" id="theme-select-desktop" title="åˆ‡æ¢ä¸»é¢˜">
                        <option value="light">æµ…è‰²</option>
                        <option value="dark">æ·±è‰²</option>
                        <option value="black">é»‘è‰²</option>
                        <option value="auto">è·Ÿéšç³»ç»Ÿ</option>
                    </select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="siwei.io"><span class="header-title-pre"><i class='fas fa-code-branch'></i></span>siwei.io</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/about/" title="">å…³äº</a><a class="menu-item" href="/projects/" title="">é¡¹ç›®</a><a class="menu-item" href="/sketch-notes/" title="">æ‰‹ç»˜</a><a class="menu-item" href="/posts/" title="">åšå®¢</a><a class="menu-item" href="/talk/" title="">æ¼”è®²</a><a class="menu-item" href="/cources/" title="">è¯¾ç¨‹</a><a class="menu-item" href="https://vesoft.com/cn/careers/" title="" rel="noopener noreferrer" target="_blank">æ‹›è˜</a><a class="menu-item" href="/about/#%E8%81%94%E7%B3%BB%E6%88%91" title="">è”ç³»</a><a class="menu-item" href="/path/" title="">å­¦ä¹ è·¯å¾„</a><a class="menu-item" href="/podcast/" title="">æ’­å®¢</a><a href="javascript:void(0);" class="menu-item theme-select" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
                <select class="color-theme-select" id="theme-select-mobile" title="åˆ‡æ¢ä¸»é¢˜">
                    <option value="light">æµ…è‰²</option>
                    <option value="dark">æ·±è‰²</option>
                    <option value="black">é»‘è‰²</option>
                    <option value="auto">è·Ÿéšç³»ç»Ÿ</option>
                </select>
            </a><a href="javascript:void(0);" class="menu-item" title="é€‰æ‹©è¯­è¨€">ğŸŒ Chinese<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" title="é€‰æ‹©è¯­è¨€" onchange="location = this.value;"><option value="/graph-enabled-infra-ops/" selected>ğŸŒ Chinese</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
            <div class="container"><div class="toc" id="toc-auto">
        <h2 class="toc-title">ç›®å½•</h2>
        <div class="toc-content" id="toc-content-auto"><nav id="TableOfContents">
  <ol>
    <li><a href="#è¯•éªŒç¯å¢ƒæ­å»º">è¯•éªŒç¯å¢ƒæ­å»º</a>
      <ol>
        <li><a href="#èƒŒæ™¯çŸ¥è¯†">èƒŒæ™¯çŸ¥è¯†</a></li>
        <li><a href="#ç¯å¢ƒå‡†å¤‡æ­å»º">ç¯å¢ƒå‡†å¤‡æ­å»º</a>
          <ol>
            <li><a href="#nebulagraph-é›†ç¾¤">NebulaGraph é›†ç¾¤</a></li>
            <li><a href="#openstack-é›†ç¾¤">OpenStack é›†ç¾¤</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#å›¾è°±å»ºæ¨¡">å›¾è°±å»ºæ¨¡</a></li>
    <li><a href="#åŸºç¡€è®¾æ–½å›¾-etl">åŸºç¡€è®¾æ–½å›¾ ETL</a>
      <ol>
        <li><a href="#push-æ¨¡å¼">push æ¨¡å¼</a></li>
        <li><a href="#pull-æ¨¡å¼">pull æ¨¡å¼</a></li>
        <li><a href="#åŠ è½½æ•°æ®åˆ°-nebulagraph">åŠ è½½æ•°æ®åˆ° NebulaGraph</a></li>
      </ol>
    </li>
    <li><a href="#åŸºäºå›¾è°±çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹">åŸºäºå›¾è°±çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹</a>
      <ol>
        <li><a href="#å‘Šè­¦çŠ¶æ€çš„æ¨ç†ä¸ä¼ å¯¼">å‘Šè­¦ã€çŠ¶æ€çš„æ¨ç†ä¸ä¼ å¯¼</a></li>
        <li><a href="#ç½‘ç»œå¯è¾¾æ£€æµ‹">ç½‘ç»œå¯è¾¾æ£€æµ‹</a></li>
        <li><a href="#é•œåƒäº‘ç›˜å¿«ç…§çš„è¡€ç¼˜">é•œåƒã€äº‘ç›˜ã€å¿«ç…§çš„è¡€ç¼˜</a></li>
        <li><a href="#é«˜ç›¸å…³æ€§è™šæœºé¢„è­¦">é«˜ç›¸å…³æ€§è™šæœºé¢„è­¦</a>
          <ol>
            <li><a href="#åœ¨å­å›¾ä¸Šå¿«é€ŸéªŒè¯æµè§ˆå™¨å†…ç®—æ³•">åœ¨å­å›¾ä¸Šå¿«é€ŸéªŒè¯ï¼šæµè§ˆå™¨å†…ç®—æ³•</a></li>
            <li><a href="#è½åœ°ç®—æ³•ä¸ºåº”ç”¨workflowanalytics">è½åœ°ç®—æ³•ä¸ºåº”ç”¨ï¼šWorkflow+Analytics</a></li>
          </ol>
        </li>
        <li><a href="#å®‰å…¨ç›¸å…³åœºæ™¯">å®‰å…¨ç›¸å…³åœºæ™¯</a>
          <ol>
            <li><a href="#ç§˜é’¥æ³„æ¼é£æ§åˆ†æ">ç§˜é’¥æ³„æ¼é£æ§åˆ†æ</a></li>
            <li><a href="#é•œåƒäº‘ç›˜æ¼æ´èŒƒå›´åˆ†æ">é•œåƒã€äº‘ç›˜æ¼æ´èŒƒå›´åˆ†æ</a></li>
            <li><a href="#æ½œåœ¨å®¿ä¸»æœºé€ƒç¦»å½±å“èŒƒå›´åˆ†æ">æ½œåœ¨å®¿ä¸»æœºé€ƒç¦»å½±å“èŒƒå›´åˆ†æ</a></li>
          </ol>
        </li>
        <li><a href="#é‡ç‚¹å…³æ³¨èµ„æºæ£€æµ‹">é‡ç‚¹å…³æ³¨èµ„æºæ£€æµ‹</a></li>
      </ol>
    </li>
    <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
  </ol>
</nav></div>
    </div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC", "true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">å›¾æ•°æ®åº“é©±åŠ¨çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹</h1><div class="post-meta">
            <div class="post-meta-line">
                <span class="post-author"><span class="author fas fa-user-circle fa-fw"></span><a href="https://siwei.io" title="Author" target="_blank" rel="noopener noreferrer author" class="author">Wey Gu</a>
                </span>&nbsp;<span class="post-category">æ”¶å½•äº </span>&nbsp;<span class="post-category">ç±»åˆ« <a href="/categories/nebula-graph/"><i class="far fa-folder fa-fw"></i>Nebula Graph</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2023-01-13">2023-01-13</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime="2023-01-13">2023-01-13</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 8078 å­—&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 17 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="featured-image"><img
        
        loading="eager"
        src="/graph-enabled-infra-ops/featured-image.webp"
        srcset="/graph-enabled-infra-ops/featured-image.webp, /graph-enabled-infra-ops/featured-image.webp 1.5x, /graph-enabled-infra-ops/featured-image.webp 2x"
        sizes="auto"
        alt="å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚"
        title="å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚" height="882"   width="1738" ></div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ol>
    <li><a href="#è¯•éªŒç¯å¢ƒæ­å»º">è¯•éªŒç¯å¢ƒæ­å»º</a>
      <ol>
        <li><a href="#èƒŒæ™¯çŸ¥è¯†">èƒŒæ™¯çŸ¥è¯†</a></li>
        <li><a href="#ç¯å¢ƒå‡†å¤‡æ­å»º">ç¯å¢ƒå‡†å¤‡æ­å»º</a>
          <ol>
            <li><a href="#nebulagraph-é›†ç¾¤">NebulaGraph é›†ç¾¤</a></li>
            <li><a href="#openstack-é›†ç¾¤">OpenStack é›†ç¾¤</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#å›¾è°±å»ºæ¨¡">å›¾è°±å»ºæ¨¡</a></li>
    <li><a href="#åŸºç¡€è®¾æ–½å›¾-etl">åŸºç¡€è®¾æ–½å›¾ ETL</a>
      <ol>
        <li><a href="#push-æ¨¡å¼">push æ¨¡å¼</a></li>
        <li><a href="#pull-æ¨¡å¼">pull æ¨¡å¼</a></li>
        <li><a href="#åŠ è½½æ•°æ®åˆ°-nebulagraph">åŠ è½½æ•°æ®åˆ° NebulaGraph</a></li>
      </ol>
    </li>
    <li><a href="#åŸºäºå›¾è°±çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹">åŸºäºå›¾è°±çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹</a>
      <ol>
        <li><a href="#å‘Šè­¦çŠ¶æ€çš„æ¨ç†ä¸ä¼ å¯¼">å‘Šè­¦ã€çŠ¶æ€çš„æ¨ç†ä¸ä¼ å¯¼</a></li>
        <li><a href="#ç½‘ç»œå¯è¾¾æ£€æµ‹">ç½‘ç»œå¯è¾¾æ£€æµ‹</a></li>
        <li><a href="#é•œåƒäº‘ç›˜å¿«ç…§çš„è¡€ç¼˜">é•œåƒã€äº‘ç›˜ã€å¿«ç…§çš„è¡€ç¼˜</a></li>
        <li><a href="#é«˜ç›¸å…³æ€§è™šæœºé¢„è­¦">é«˜ç›¸å…³æ€§è™šæœºé¢„è­¦</a>
          <ol>
            <li><a href="#åœ¨å­å›¾ä¸Šå¿«é€ŸéªŒè¯æµè§ˆå™¨å†…ç®—æ³•">åœ¨å­å›¾ä¸Šå¿«é€ŸéªŒè¯ï¼šæµè§ˆå™¨å†…ç®—æ³•</a></li>
            <li><a href="#è½åœ°ç®—æ³•ä¸ºåº”ç”¨workflowanalytics">è½åœ°ç®—æ³•ä¸ºåº”ç”¨ï¼šWorkflow+Analytics</a></li>
          </ol>
        </li>
        <li><a href="#å®‰å…¨ç›¸å…³åœºæ™¯">å®‰å…¨ç›¸å…³åœºæ™¯</a>
          <ol>
            <li><a href="#ç§˜é’¥æ³„æ¼é£æ§åˆ†æ">ç§˜é’¥æ³„æ¼é£æ§åˆ†æ</a></li>
            <li><a href="#é•œåƒäº‘ç›˜æ¼æ´èŒƒå›´åˆ†æ">é•œåƒã€äº‘ç›˜æ¼æ´èŒƒå›´åˆ†æ</a></li>
            <li><a href="#æ½œåœ¨å®¿ä¸»æœºé€ƒç¦»å½±å“èŒƒå›´åˆ†æ">æ½œåœ¨å®¿ä¸»æœºé€ƒç¦»å½±å“èŒƒå›´åˆ†æ</a></li>
          </ol>
        </li>
        <li><a href="#é‡ç‚¹å…³æ³¨èµ„æºæ£€æµ‹">é‡ç‚¹å…³æ³¨èµ„æºæ£€æµ‹</a></li>
      </ol>
    </li>
    <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
  </ol>
</nav></div>
            </div><div class="content" id="content"><blockquote>
<p>å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚</p>
</blockquote>
<p>å› ä¸ºæœ‰ä¸€äº›è¿˜æœªé‡‡ç”¨å›¾æŠ€æœ¯çš„ DevOps/Infra é¢†åŸŸåŒå­¦åœ¨ NebulaGraph ç¤¾åŒºè¯¢é—®å‚è€ƒçš„æ¡ˆä¾‹ï¼Œæˆ‘æœ€è¿‘è¯•ç€å®è·µäº†ä¸€ä¸‹å¦‚ä½•åˆ©ç”¨å›¾çš„èƒ½åŠ›ä¸ä¼˜åŠ¿å»å¸®åŠ©åœ¨å¤æ‚åŸºç¡€è®¾æ–½ä¸Šæ„å»ºè¾…åŠ©è¿ç»´ç³»ç»Ÿï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°æ„Ÿå…´è¶£ Infra Ops é¢†åŸŸã€åŒæ—¶æ„Ÿå…´è¶£å›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„å¤§å®¶ï¼Œå…¨è¿‡ç¨‹éƒ½æ˜¯å¯ä»¥å¤ç°ã€å¹¶ä¸”å¼€æºçš„ã€‚</p>
<p>å¤æ‚çš„åŸºç¡€è®¾æ–½è¿ç»´ç¯å¢ƒé€šå¸¸åŒ…å«éå¸¸å¤šã€ä¸åŒå±‚é¢çš„èµ„æºï¼ˆmanifest)ï¼Œä¸ºäº†èƒ½å¤Ÿå°½é‡è¿˜åŸçœŸå®ä¸–ç•Œçš„å¤æ‚ç¯å¢ƒã€åˆä¿æŒè¿™ä¸ªå®ä¾‹é¡¹ç›®çš„å¤æ‚åº¦ä¸ä¼šå¤±æ§ï¼Œæˆ‘é€‰æ‹©äº†ç”¨ä¸€ä¸ªåŸºç¡€è®¾æ–½å¹³å°ï¼šOpenStack ä½œä¸ºä¾‹å­ã€‚</p>
<p>æœ¬æ–‡å®ç°äº† OpenStack ç³»ç»Ÿä¸Šåˆ†åˆ«åˆ©ç”¨ Push å’Œ Pull ä¸¤ç§æ¨¡å¼å°†èµ„æºä¹‹ä¸­è¢«å›¾è°±å»ºæ¨¡çš„å›¾ä¸­ç‚¹ã€è¾¹ä¿¡æ¯åŠ è½½åˆ° NebulaGraph é‡Œçš„ Graph ETL ç®¡é“çš„è·¯å¾„ã€‚</p>
<p>åœ¨å›¾è°±ä¹‹ä¸Šï¼Œæœ¬æ–‡æ¢ç´¢å¦‚ä¸‹ç”¨ä¾‹ï¼š</p>
<ul>
<li>å‘Šè­¦ã€çŠ¶æ€çš„æ¨ç†ä¸ä¼ å¯¼ï¼›</li>
<li>ç½‘ç»œç›´è¿ä¸äº’è”å…³ç³»ï¼›</li>
<li>é•œåƒã€äº‘ç›˜ã€å¿«ç…§è¡€ç¼˜ç®¡ç†ï¼›</li>
<li>é«˜ç›¸å…³æ€§è™šæœºé¢„è­¦ï¼›</li>
<li>ç§˜é’¥æ³„æ¼çš„å›¾ä¸Šé£æ§åˆ†æï¼›</li>
<li>é•œåƒã€äº‘ç›˜æ¼æ´èŒƒå›´åˆ†æï¼›</li>
<li>å®¿ä¸»æœºé€ƒç¦»å½±å“èŒƒå›´åˆ†æï¼›</li>
<li>è„†å¼±ä¾èµ–èµ„æºæ£€æµ‹ï¼›</li>
</ul>
<h2 id="è¯•éªŒç¯å¢ƒæ­å»º" class="headerLink">
    <a href="#%e8%af%95%e9%aa%8c%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba" class="header-mark"></a>1 è¯•éªŒç¯å¢ƒæ­å»º</h2><h3 id="èƒŒæ™¯çŸ¥è¯†" class="headerLink">
    <a href="#%e8%83%8c%e6%99%af%e7%9f%a5%e8%af%86" class="header-mark"></a>1.1 èƒŒæ™¯çŸ¥è¯†</h3><p>OpenStack æ˜¯ä¸€ä¸ªå¼€æºçš„äº‘è®¡ç®—å¹³å°ï¼Œæä¾›äº†ç±»ä¼¼äº AWS çš„äº‘æœåŠ¡ã€‚å®ƒæä¾›äº†ä¸€ç»„å¯æ’æ‹”çš„æ¨¡å—ï¼ŒåŒ…æ‹¬äº†è®¡ç®—ï¼Œå­˜å‚¨å’Œç½‘ç»œç­‰åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·æ„å»ºå’Œç®¡ç†äº‘ç¯å¢ƒã€‚OpenStacké‡‡ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼Œæ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶å¹³å°ï¼Œå¯ä»¥åœ¨ä¼ä¸šçº§å’ŒæœåŠ¡æä¾›å•†çº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/OpenStack-overview-diagram-new.webp"
        srcset="/graph-enabled-infra-ops/OpenStack-overview-diagram-new.webp, /graph-enabled-infra-ops/OpenStack-overview-diagram-new.webp 1.5x, /graph-enabled-infra-ops/OpenStack-overview-diagram-new.webp 2x"
        sizes="auto"
        alt="OpenStack-overview-diagram-new"
        title="OpenStack-overview-diagram-new" height="1259"   width="1593" ></figure></p>
<p>æœ€åˆç”± <em>NASA</em> å’Œ <em>Rackspace</em> Inc. å‘èµ·çš„ nova ï¼ˆè™šæ‹ŸåŒ–è®¡ç®—é¡¹ç›®ï¼‰å’Œ swift ï¼ˆå…¼å®¹ S3 çš„å¯¹è±¡å­˜å‚¨ï¼‰é¡¹ç›®ç»„æˆï¼ŒOpenStack ç°åœ¨ç”±éå¸¸å¤šä¸åŒçš„å­é¡¹ç›®ç»„æˆï¼š</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/openstack-map-v20221001.webp"
        srcset="/graph-enabled-infra-ops/openstack-map-v20221001.webp, /graph-enabled-infra-ops/openstack-map-v20221001.webp 1.5x, /graph-enabled-infra-ops/openstack-map-v20221001.webp 2x"
        sizes="auto"
        alt="openstack-map-v20221001"
        title="openstack-map-v20221001" height="1080"   width="1920" ></figure></p>
<p>æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬è®¾è®¡çš„ OpenStack ä¸»è¦é¡¹ç›®æœ‰ï¼š</p>
<ul>
<li>Nova æ˜¯ OpenStack çš„è®¡ç®—æœåŠ¡ï¼Œç”¨äºç®¡ç†è™šæ‹Ÿæœºã€‚</li>
<li>Cinder æ˜¯ OpenStack çš„å—å­˜å‚¨æœåŠ¡ï¼Œç”¨äºç®¡ç†äº‘å­˜å‚¨ã€‚</li>
<li>Neutron æ˜¯ OpenStack çš„ç½‘ç»œæœåŠ¡ï¼Œç”¨äºç®¡ç†äº‘ç½‘ç»œã€‚</li>
<li>Glance æ˜¯ OpenStack çš„é•œåƒæœåŠ¡ï¼Œç”¨äºç®¡ç†äº‘é•œåƒã€‚</li>
<li>Horizon æ˜¯ OpenStack çš„å¯è§†åŒ–æ§åˆ¶å°æœåŠ¡ã€‚</li>
</ul>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘è¿˜å¼•å…¥äº† Vitrage é¡¹ç›®è¾…åŠ©æˆ‘ä»¬æ”¶é›†éƒ¨åˆ†èµ„æºæ•°æ®ï¼š</p>
<ul>
<li>Vitrage æ˜¯ OpenStack ä¸­çš„ä¸€ä¸ªé«˜çº§åˆ†æå’Œå¯è§†åŒ–å·¥å…·ï¼Œç”¨äºåˆ†æå’Œå¯è§†åŒ– OpenStack ç¯å¢ƒä¸­çš„èµ„æºå’Œäº‹ä»¶ã€‚å®ƒå¯ä»¥æ±‡é›†æ¥è‡ª OpenStack å„ä¸ªæœåŠ¡çš„æ•°æ®ï¼Œå¹¶ä½¿ç”¨å›¾å½¢åŒ–æ–¹å¼å±•ç¤ºå‡ºæ¥ã€‚Vitrage å‘ç°å’Œè¯Šæ–­é—®é¢˜ï¼Œæé«˜ OpenStack ç¯å¢ƒçš„å¯ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
</ul>
<p>å¾—ç›Šäº OpenStack Decouple çš„è®¾è®¡ç†å¿µï¼ŒVitrage å¯ä»¥å¾ˆå®¹æ˜“ã€æ— ä¾µå…¥å¼ï¼ˆåªéœ€è¦ä¿®æ”¹éœ€è¦æ”¶é›†çš„æœåŠ¡ä¸¤è¡Œé…ç½®ï¼‰å°±å¯ä»¥åœ¨ OpenStack çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­è®¢é˜…èµ„æºä¿¡æ¯çš„ push æ¶ˆæ¯ã€‚</p>
<p>ä¸è¿‡æ¯”è¾ƒé—æ†¾çš„æ˜¯ Vitrage è¿™ä¸ªé¡¹ç›®å·²ç»æœ‰å¥½å¤šä¸ª release cycle æ²¡æœ‰ä»€ä¹ˆå¤§çš„æ›´æ–°äº†ï¼Œåº”è¯¥æ˜¯æ¯”è¾ƒä¸æ´»è·ƒçš„çŠ¶æ€äº†ï¼Œæ¯”å¦‚åœ¨ zed é‡Œï¼Œå®ƒçš„ Vitrage Dashboard ä½œä¸º Horizon æ’ä»¶å·²ç»æ— æ³•æ­£å¸¸å·¥ä½œäº†ï¼Œæœ¬å®éªŒåªåˆ©ç”¨å®ƒçš„èµ„æºæ”¶é›†èƒ½åŠ›ã€‚</p>
<h3 id="ç¯å¢ƒå‡†å¤‡æ­å»º" class="headerLink">
    <a href="#%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87%e6%90%ad%e5%bb%ba" class="header-mark"></a>1.2 ç¯å¢ƒå‡†å¤‡æ­å»º</h3><h4 id="nebulagraph-é›†ç¾¤" class="headerLink">
    <a href="#nebulagraph-%e9%9b%86%e7%be%a4" class="header-mark"></a>1.2.1 NebulaGraph é›†ç¾¤</h4><p>é¦–æ¬¡å¿«é€Ÿè¯•ç©å®‰è£… NebulaGraph çš„è¯ï¼Œæœ‰è¿™ä¹ˆå‡ ä¸ªé€‰é¡¹ï¼š</p>
<ul>
<li>é˜¿é‡Œäº‘ä¸Šçš„ NebulaGraph ä¼ä¸šç‰ˆï¼ˆå¸¦æœ‰ä¼ä¸šç‰ˆç‹¬æœ‰çš„æ»¡è¡€ç‰ˆå¯è§†åŒ–å·¥å…·ï¼šExplorerï¼Œå¯ä»¥å›¾æ¢ç´¢ã€ç”»å¸ƒå†…è·‘å›¾ç®—æ³•ï¼‰ï¼Œå¯ä»¥è·å¾—ä¸€ä¸ªæœˆæ‰€æœ‰èµ„æºå…è´¹ä½¿ç”¨èµ„æ ¼ï¼š
<ul>
<li>è®¿é—® <a href="https://www.siwei.io/try-aliyun" target="_blank" rel="noopener noreferrer">https://www.siwei.io/try-aliyun</a> è·å¾—</li>
</ul>
</li>
<li>Nebula-Up ä¸€é”®å®‰è£… NebulaGraph å¼€æºç¤¾åŒºç‰ˆæœ¬ï¼Œéœ€è¦ä¸€ä¸ªå¸¦æœ‰ Dockerã€Docker Desktop ç¯å¢ƒçš„æœºå™¨
<ul>
<li>è®¿é—® <a href="https://github.com/wey-gu/nebula-up" target="_blank" rel="noopener noreferrer">https://github.com/wey-gu/nebula-up</a></li>
</ul>
</li>
<li>æœ‰ç»éªŒçš„åŒå­¦å¯ä»¥å‚è€ƒæ–‡æ¡£è¿›è¡Œéƒ¨ç½²ï¼š
<ul>
<li>è®¿é—® <a href="https://docs.nebula-graph.com.cn/" target="_blank" rel="noopener noreferrer">https://docs.nebula-graph.com.cn/</a></li>
</ul>
</li>
</ul>
<h4 id="openstack-é›†ç¾¤" class="headerLink">
    <a href="#openstack-%e9%9b%86%e7%be%a4" class="header-mark"></a>1.2.2 OpenStack é›†ç¾¤</h4><blockquote>
<p>æ³¨æ„ï¼šå¦‚æœå¤§å®¶å·²ç»æœ‰ç°æˆçš„ OpenStack é›†ç¾¤ï¼Œè¿™ä¸€æ­¥å¯ä»¥å¿½ç•¥ï¼Œæ‚¨åªéœ€è¦å†å»å®‰è£… OpenStack Vitrage å°±å¥½äº†ã€‚</p>
</blockquote>
<p>æœ¬æ–‡éœ€è¦çš„ OpenStack é›†ç¾¤æ˜¯ä¸€ä¸ªå¤šæœºçš„ç¯å¢ƒï¼Œä¸ºæ­¤ï¼Œæˆ‘å‡†å¤‡äº†åœ¨ Linux Server ä¸Šåˆ©ç”¨ Libvirt å’Œ Linux Bridge æ­å»ºå¤šä¸ªè™šæ‹Ÿæœºç”¨æ¥æ¨¡æ‹Ÿ OpenStack çš„ç‰©ç†æœºï¼Œå¾—ç›Šäº CPU çš„åµŒå¥—è™šæ‹ŸåŒ–å’Œ qemuï¼Œåè¾¹æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨è™šæ‹Ÿæœºæ­å»ºçš„å®éªŒç¯å¢ƒä¸­æ¨¡æ‹Ÿå¯æ­£å¸¸å·¥ä½œçš„ OpenStack nova instance è™šæœºã€‚</p>
<p>æ•´ä¸ªæµç¨‹æˆ‘éƒ½æ”¾åœ¨ <a href="https://github.com/wey-gu/openstack-graph/#environment-setup" target="_blank" rel="noopener noreferrer">https://github.com/wey-gu/openstack-graph/#environment-setup</a> è¿™é‡Œäº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è®¿é—®ã€è·å–ã€‚</p>
<p>è™šæ‹Ÿæœºæ­å»ºä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ¨¡æ‹ŸçœŸå®çš„ Infra ç¯å¢ƒï¼Œåˆ›å»ºå¾ˆå¤šèµ„æºï¼šæ•´ä¸ªè¿‡ç¨‹ä¹Ÿåœ¨ <a href="https://github.com/wey-gu/openstack-graph/#create-resources-on-openstack" target="_blank" rel="noopener noreferrer">https://github.com/wey-gu/openstack-graph/#create-resources-on-openstack</a> æœ‰è¯¦ç»†åˆ—å‡ºï¼Œæƒ³è¦åŠ¨æ‰‹æ“ä½œçš„åŒå­¦å¯ä»¥å‚è€ƒæ¥äº²è‡ªä¸Šæ‰‹ä¸€ä¸‹ã€‚</p>
<p>å‚è€ƒå¦‚ä¸Šæ­¥éª¤æ“ä½œä¹‹åï¼Œæˆ‘ä»¬åº”è¯¥å¯ä»¥é€šè¿‡ Horizon Dashboard æŸ¥çœ‹é›†ç¾¤å’Œèµ„æºï¼š</p>
<p>æˆ‘ä»¬åˆ›å»ºäº†å‡ ä¸ªè™šæ‹Ÿæœºï¼š<figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/nova_instance.webp"
        srcset="/graph-enabled-infra-ops/nova_instance.webp, /graph-enabled-infra-ops/nova_instance.webp 1.5x, /graph-enabled-infra-ops/nova_instance.webp 2x"
        sizes="auto"
        alt="nova_instance"
        title="nova_instance" height="1900"   width="3508" ></figure></p>
<p>å‡ ä¸ªç½‘ç›˜ï¼Œå…¶ä¸­å››ä¸ªæŒ‚è½½åœ¨ä¸åŒçš„è™šæ‹Ÿæœºä¸Š</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/cinder_volume.webp"
        srcset="/graph-enabled-infra-ops/cinder_volume.webp, /graph-enabled-infra-ops/cinder_volume.webp 1.5x, /graph-enabled-infra-ops/cinder_volume.webp 2x"
        sizes="auto"
        alt="cinder_volume"
        title="cinder_volume" height="1900"   width="3508" ></figure></p>
<p>é›†ç¾¤ç§Ÿæˆ·çš„ç½‘ç»œæ‹“æ‰‘ï¼š<figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/neutron_topology.webp"
        srcset="/graph-enabled-infra-ops/neutron_topology.webp, /graph-enabled-infra-ops/neutron_topology.webp 1.5x, /graph-enabled-infra-ops/neutron_topology.webp 2x"
        sizes="auto"
        alt="neutron_topology"
        title="neutron_topology" height="2334"   width="4064" ></figure></p>
<p>æˆ‘ä»¬è¿˜èƒ½é€šè¿‡ OpenStack Vitrage çš„ API/CLI è·å¾—éƒ¨åˆ†ä¸»è¦èµ„æºçš„æ‹“æ‰‘ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">source</span> openrc admin admin
</span></span><span class="line"><span class="cl">vitrage topology show --all-tenants
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ƒçš„ç»“æœæ˜¯ä¸€ä¸ª JSONï¼Œé‡Œè¾¹å·²ç»æŒ‰ç…§è¾¹ï¼ˆlinksï¼‰å’Œç‚¹ï¼ˆnodesï¼‰åºåˆ—åŒ–å›¾ç»“æ„çš„æ•°æ®äº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;directed&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;graph&#34;</span><span class="p">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;links&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_is_deleted&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;relationship_type&#34;</span><span class="p">:</span> <span class="s2">&#34;contains&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;source&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;target&#34;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;key&#34;</span><span class="p">:</span> <span class="s2">&#34;contains&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_is_deleted&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;relationship_type&#34;</span><span class="p">:</span> <span class="s2">&#34;contains&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;source&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;target&#34;</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;key&#34;</span><span class="p">:</span> <span class="s2">&#34;contains&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="err">...</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_is_deleted&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;relationship_type&#34;</span><span class="p">:</span> <span class="s2">&#34;attached&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;source&#34;</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;target&#34;</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;key&#34;</span><span class="p">:</span> <span class="s2">&#34;attached&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;multigraph&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;nodes&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;node0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_type&#34;</span><span class="p">:</span> <span class="s2">&#34;nova.host&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_category&#34;</span><span class="p">:</span> <span class="s2">&#34;RESOURCE&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_is_deleted&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;update_timestamp&#34;</span><span class="p">:</span> <span class="s2">&#34;2023-01-13T08:06:48Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_sample_timestamp&#34;</span><span class="p">:</span> <span class="s2">&#34;2023-01-13T08:06:49Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_is_placeholder&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_id&#34;</span><span class="p">:</span> <span class="s2">&#34;630b4c2c-5347-4073-91a3-255ec18dadfc&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;node0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_cached_id&#34;</span><span class="p">:</span> <span class="s2">&#34;d043d278a6a712909e30e50ca8ec2364&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;is_real_vitrage_id&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_aggregated_state&#34;</span><span class="p">:</span> <span class="s2">&#34;AVAILABLE&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_operational_state&#34;</span><span class="p">:</span> <span class="s2">&#34;OK&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_datasource_name&#34;</span><span class="p">:</span> <span class="s2">&#34;nova.host&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;state&#34;</span><span class="p">:</span> <span class="s2">&#34;available&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;graph_index&#34;</span><span class="p">:</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;nova&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_type&#34;</span><span class="p">:</span> <span class="s2">&#34;nova.zone&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_category&#34;</span><span class="p">:</span> <span class="s2">&#34;RESOURCE&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_is_deleted&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_sample_timestamp&#34;</span><span class="p">:</span> <span class="s2">&#34;2023-01-12T03:06:48Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_is_placeholder&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_id&#34;</span><span class="p">:</span> <span class="s2">&#34;a1e9c808-dac8-4b59-8f80-f21a90e9869d&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_cached_id&#34;</span><span class="p">:</span> <span class="s2">&#34;125f1d8c4451a6385cc2cfa2b0ba45be&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;is_real_vitrage_id&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_aggregated_state&#34;</span><span class="p">:</span> <span class="s2">&#34;AVAILABLE&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_operational_state&#34;</span><span class="p">:</span> <span class="s2">&#34;OK&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;state&#34;</span><span class="p">:</span> <span class="s2">&#34;available&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;update_timestamp&#34;</span><span class="p">:</span> <span class="s2">&#34;2023-01-12T03:06:48Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;nova&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;vitrage_datasource_name&#34;</span><span class="p">:</span> <span class="s2">&#34;nova.zone&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;graph_index&#34;</span><span class="p">:</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="err">...</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;raw&#34;</span><span class="err">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="err">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å›¾è°±å»ºæ¨¡" class="headerLink">
    <a href="#%e5%9b%be%e8%b0%b1%e5%bb%ba%e6%a8%a1" class="header-mark"></a>2 å›¾è°±å»ºæ¨¡</h2><p>æœ¬å®éªŒç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘çº³å…¥å¦‚ä¸‹èµ„æºè¿›å…¥å›¾è°±ï¼š</p>
<ul>
<li>nova instance: æ˜¯NovaæœåŠ¡ä¸­çš„è™šæ‹Ÿæœºå®ä¾‹ï¼Œæ¯ä¸ªnova instanceéƒ½æœ‰è‡ªå·±çš„é…ç½®ä¿¡æ¯ï¼ˆå¦‚CPUã€å†…å­˜ã€ç£ç›˜ç­‰ï¼‰ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å°±å«å®ƒ server æˆ–è€… VMã€è™šæœºã€‚</li>
<li>nova hostæ˜¯NovaæœåŠ¡ä¸­çš„ç‰©ç†ä¸»æœºï¼Œæ˜¯nova instanceè¿è¡Œçš„ç‰©ç†ç¯å¢ƒã€‚nova hostä¸Šé¢ä¼šè¿è¡Œnova-computeæœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡è´Ÿè´£ç®¡ç†å’Œè°ƒåº¦nova instanceã€‚nova hostä¸Šé¢è¿˜å¯èƒ½è¿è¡Œå…¶ä»–æœåŠ¡ï¼Œå¦‚ç½‘ç»œæœåŠ¡ç­‰ã€‚</li>
<li>nova keypair: æ˜¯NovaæœåŠ¡ä¸­çš„å¯†é’¥å¯¹ï¼Œç”¨äºè®¿é—®nova instance</li>
<li>cinder volume: æ˜¯CinderæœåŠ¡ä¸­çš„äº‘å­˜å‚¨å·ï¼Œå¯ä»¥ attach åˆ°nova instanceä¸Šåšä¸ºç¡¬ç›˜</li>
<li>cinder snapshot: æ˜¯CinderæœåŠ¡ä¸­çš„äº‘å­˜å‚¨å¿«ç…§ï¼Œå¯ä»¥åœ¨cinder volumeä¸Šåšå¿«ç…§</li>
<li>glance image: æ˜¯GlanceæœåŠ¡ä¸­çš„é•œåƒï¼Œå¯ä»¥ä½œä¸ºåˆ›å»ºnova instanceæ—¶å€™çš„å¯åŠ¨ç¡¬ç›˜</li>
<li>neutron network: æ˜¯NeutronæœåŠ¡ä¸­çš„ç½‘ç»œï¼Œå¯ä»¥ç”¨äºé…ç½®nova instanceçš„ç½‘ç»œè¿æ¥</li>
<li>neutron port: æ˜¯NeutronæœåŠ¡ä¸­çš„ç«¯å£ï¼Œç”¨æ¥è¿æ¥nova instanceå’Œneutron networkä¹‹é—´ï¼Œåœ¨ nova instance è™šæ‹Ÿæœºä¸Šï¼Œä¸€ä¸ª port å¸¸å¸¸å¯¹åº”ä¸€ä¸ªç½‘å¡ï¼ˆå¦‚æœä¸æ˜¯ trunk port çš„è¯ï¼‰ã€‚</li>
</ul>
<p>ä»–ä»¬ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹ï¼š</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/schema_draft.webp"
        srcset="/graph-enabled-infra-ops/schema_draft.webp, /graph-enabled-infra-ops/schema_draft.webp 1.5x, /graph-enabled-infra-ops/schema_draft.webp 2x"
        sizes="auto"
        alt="schema_draft"
        title="schema_draft" height="1110"   width="1862" ></figure></p>
<h2 id="åŸºç¡€è®¾æ–½å›¾-etl" class="headerLink">
    <a href="#%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd%e5%9b%be-etl" class="header-mark"></a>3 åŸºç¡€è®¾æ–½å›¾ ETL</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬è§£å†³ä»åŸºç¡€è®¾æ–½ä¸­æŠ½å–èµ„æºå…ƒæ•°æ®çš„é—®é¢˜ï¼Œ</p>
<h3 id="push-æ¨¡å¼" class="headerLink">
    <a href="#push-%e6%a8%a1%e5%bc%8f" class="header-mark"></a>3.1 push æ¨¡å¼</h3><p>è¿™é‡Œçš„ push æŒ‡çš„æ˜¯åŸºç¡€è®¾æ–½ä¸ºä¸»è¯­ï¼Œä»èµ„æºæ–¹å‘æˆ‘ä»¬çš„å›¾è°±ç³»ç»Ÿä¸»åŠ¨ã€äº‹ä»¶é©±åŠ¨åœ°å‘å‡ºèµ„æºå˜åŠ¨çš„ä¿¡æ¯ã€‚å®ƒçš„å¥½å¤„æ˜¯èµ„æºä¸­çš„å®æ—¶æ€§å¥½ï¼Œä½†æ˜¯åå¤„æ˜¯ä¾èµ–åŸºç¡€è®¾æ–½è‡ªèº«ï¼Œå¾ˆå¤šéå¸¸ç˜¦çš„ã€è½¯ä»¶å®šä¹‰/å¯ç¼–ç¨‹ç¨‹åº¦ä¸é«˜çš„ç»„ä»¶ã€æ¯”å¦‚æŸäº›ç¡¬ä»¶è®¾å¤‡æ²¡æœ‰ push æœºåˆ¶ï¼Œæˆ–è€…åƒæ˜¯å¤è€çš„è½¯ä»¶ç³»ç»Ÿä¸ä¸€å®šèƒ½å­˜åœ¨ push çš„æ¥å£ï¼Œæ”¹é€ èµ·æ¥æœ‰ä¾µå…¥æ€§ã€‚</p>
<p>å‰è¾¹æåŠè¿‡ï¼ŒOpenStack è‡ªèº«æ˜¯å­˜åœ¨ Push hook çš„æœºåˆ¶çš„ï¼Œå®ƒçš„å­é¡¹ç›® vitrage å°±åˆ©ç”¨è¿™ä¸ªæœºåˆ¶å¾ˆä¼˜é›…åœ°æ”¶é›†ç³»ç»Ÿèµ„æºã€å‘Šè­¦ç­‰ä¿¡æ¯è¿›å…¥å›¾ä¸­ï¼Œç±»ä¼¼çš„æœºåˆ¶åœ¨å…¶ä»–å¹³å°ä¸­ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ã€‚</p>
<p>æœ¬å®éªŒä¸­æˆ‘ä»¬å°±åˆ©ç”¨ vitrage çš„æœºåˆ¶å»æ”¶é›†ä¸€éƒ¨åˆ†å›¾è°±ä¸­çš„èµ„æºä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾ï¼Œå¯ä»¥çœ‹åˆ° vitrage ä¼šåœ¨ OpenStack message bus ä¸­è®¢é˜… nova/cinder/neutron ç­‰æœåŠ¡ä¸­çš„èµ„æºæ—¶é—´ï¼ŒæŠŠäº‹ä»¶ä¼ å…¥ Entity Queueï¼Œç»è¿‡å¤„ç†ï¼Œå­˜å‚¨åˆ° Entity Graph ä¸­ã€‚</p>
<p>åœ¨æ­¤ä¹‹ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ vitrage API è·å–å›¾è°±çš„æ‹“æ‰‘ï¼Œæ¥æ¶ˆè´¹å®ƒã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šå®é™…ä¸Š Vitrage æœåŠ¡è¿˜æä¾›äº†æ¨ç†å‘Šè­¦ã€æ¨ç†çŠ¶æ€ã€å®šä¹‰å†³ç­–äº‹ä»¶çš„èƒ½åŠ›ï¼Œè¿™é‡Œæˆ‘ä»¬å¹¶æ²¡æœ‰é‡‡ç”¨ï¼Œåè¾¹æˆ‘ä»¬åœ¨å›¾ä¸Šåšçš„ä¸€äº›äº‹æƒ…ç”šè‡³è¿˜å’Œå®ƒçš„èƒ½åŠ›æœ‰ä¸€äº›é‡å ã€‚</p>
</blockquote>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/vitrage_arch.webp"
        srcset="/graph-enabled-infra-ops/vitrage_arch.webp, /graph-enabled-infra-ops/vitrage_arch.webp 1.5x, /graph-enabled-infra-ops/vitrage_arch.webp 2x"
        sizes="auto"
        alt="vitrage_arch"
        title="vitrage_arch" height="1520"   width="2346" ></figure></p>
<p>è¿™é‡Œæˆ‘åªæ˜¯ç”¨å®ƒæ¥å±•ç¤º push æ¨¡å¼çš„å·¥ä½œæœºåˆ¶ï¼Œå¦‚æœæ²¡æœ‰ Virtrage è¿™ä¸ªé¡¹ç›®å­˜åœ¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ¯”è¾ƒå®¹æ˜“é€šè¿‡ OpenStack çš„ oslo.messaging è¿™ä¸ªåº“å¾ˆå®¹æ˜“å†™å‡ºåœ¨ Message Busï¼ˆå¯èƒ½æ˜¯ Kafka, RabbitMQ ç­‰ä¸åŒåº•å±‚å®ç°ï¼‰ä¸Šè®¢é˜…èµ„æºæ—¶é—´çš„åº”ç”¨ï¼Œç„¶åæŠŠäº‹ä»¶é€šè¿‡ Flink/ Kafka/ Pulsar ç­‰æ–¹å¼æ¥é©³ NebulaGraphã€‚</p>
<p>å› ä¸º Vitrage çš„å­˜åœ¨ï¼Œæˆ‘å°±å·æ‡’ä¸ç”¨å»å®ç°è¿™éƒ¨åˆ†é€»è¾‘ï¼Œåªæ¶ˆå†™ä¸€å°éƒ¨åˆ†ä»£ç è°ƒç”¨ Vitrage API å–è¿™ä¸ªæ•°æ®å°±å¯ä»¥äº†ï¼Œè®½åˆºçš„æ˜¯ï¼Œä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œè¿™å…¶å®æ˜¯ä¸€ç§ pull çš„æ¨¡å¼äº†ï¼Œä¸ç”¨æ‹˜æ³¥å®ƒæœ¬è´¨ä¸Šç®—æ˜¯å“ªä¸€ç§æ–¹å¼ï¼Œè‡³å°‘åœ¨èµ„æºå‘èµ·æµ‹ï¼Œæˆ‘ä»¬æŠŠå®ƒå½“åš push æ¨¡å¼çš„ä¾‹å­çœ‹å¾…å§ã€‚</p>
<p>è¿™éƒ¨åˆ†ä» Vitrage æŠ“å–çš„ä»£ç æˆ‘æ”¾åœ¨ <a href="https://github.com/wey-gu/openstack-graph/blob/main/utils/vitrage_to_graph.py" target="_blank" rel="noopener noreferrer">https://github.com/wey-gu/openstack-graph/blob/main/utils/vitrage_to_graph.py</a> äº†ï¼Œè°ƒç”¨æ–¹å¼å¾ˆç®€å•ï¼Œåœ¨æœ‰ OpenStack å®¢æˆ·ç«¯çš„ç¯å¢ƒä¸­ï¼Œæ‰§è¡Œå®ƒå°±å¯ä»¥äº†ï¼Œæ¯”å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># è¿åˆ° node0 ä¸Š</span>
</span></span><span class="line"><span class="cl">ssh stack@node0_ip
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># è¿›å…¥ devstack ç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> devstack
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸‹è½½ vitrage ä¸­å›¾æ•°æ®ï¼Œè§£æä¸º NeublaGraph DML/DQL çš„å·¥å…·</span>
</span></span><span class="line"><span class="cl">wget https://raw.githubusercontent.com/wey-gu/openstack-graph/main/utils/vitrage_to_graph.py
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ‰§è¡Œå®ƒ</span>
</span></span><span class="line"><span class="cl">python3 vitrage_to_graph.py
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œä¹‹åï¼Œä¼šç”Ÿæˆå¦‚ä¸‹æ–‡ä»¶ï¼š</p>
<ul>
<li><code>schema.ngql</code> å›¾æ•°æ®çš„ Schema å®šä¹‰</li>
<li><code>vertices/</code> ç‚¹æ•°æ®çš„æ–‡ä»¶å¤¹</li>
<li><code>edges/</code> è¾¹æ•°æ®çš„æ–‡ä»¶å¤¹</li>
</ul>
<h3 id="pull-æ¨¡å¼" class="headerLink">
    <a href="#pull-%e6%a8%a1%e5%bc%8f" class="header-mark"></a>3.2 pull æ¨¡å¼</h3><p>åè¿‡æ¥ï¼Œpull æ¨¡å¼æ˜¯ä»èµ„æºå¤–éƒ¨å®šæœŸæˆ–è€…äº‹ä»¶é©±åŠ¨åœ°æ‹‰å–èµ„æºï¼Œå­˜å…¥å›¾è°±çš„æ–¹å¼ã€‚åˆšå¥½æœ¬å®éªŒä¸­ vitrage æŠ“å–çš„èµ„æºæ˜¯æœ‰é™çš„ï¼Œæœ‰ä¸€äº›é¢å¤–çš„èµ„æºæˆ‘å•ç‹¬å†™äº† python çš„ä»£ç æ¥ä¸»åŠ¨å…¨é‡æŠ“å–ï¼Œpull æ¨¡å¼çš„å¥½å¤„æ˜¯å¯¹èµ„æºæ–¹æ²¡æœ‰ä»»ä½•ä¾µå…¥æ€§ï¼Œåªéœ€è¦è°ƒç”¨å®ƒçš„æ¥å£è·å–ä¿¡æ¯å°±å¯ä»¥äº†ï¼Œåå¤„åˆ™æ˜¯æœ‰çš„ç³»ç»Ÿä¸å¤ªå®¹æ˜“è·å¾—å¢é‡å˜åŒ–ï¼Œå¯èƒ½åªèƒ½å…¨é‡å»å–ã€‚</p>
<p>è¿™éƒ¨åˆ†æˆ‘æŠ“å–çš„å…³ç³»å¦‚ä¸‹ï¼š</p>
<ul>
<li>glance_used_by: <code>image -[:used_by]-&gt; instance (get from instance)</code></li>
<li>glance_created_from: <code>image -[:created_from]-&gt; volume (get from image)</code></li>
<li>nova_keypair_used_by: <code>keypair -[:used_by]-&gt; instance (get from instance)</code></li>
<li>cinder_snapshot_created_from: <code>volume snapshot -[:created_from]-&gt; volume (get from snapshot)</code></li>
<li>cinder_volume_created_from: <code>volume -[:created_from]-&gt; volume snapshot (get from volume)</code></li>
<li>cinder_volume_created_from: <code>volume -[:created_from]-&gt; image (get from volume)</code></li>
</ul>
<p>ç±»ä¼¼çš„ï¼Œå®ƒçš„ä»£ç æ”¾åœ¨ <a href="https://github.com/wey-gu/openstack-graph/blob/main/utils/pull_resources_to_graph.py" target="_blank" rel="noopener noreferrer">https://github.com/wey-gu/openstack-graph/blob/main/utils/pull_resources_to_graph.py</a> ä¹‹ä¸­ï¼Œåœ¨çœŸå®åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç”¨ Apache Airflowã€dagster ç”šè‡³æ˜¯ cron job ç­‰æ–¹å¼å®šæœŸæ‰§è¡Œå®ƒã€‚</p>
<p>æˆ‘ä»¬æ‰‹åŠ¨æ‰§è¡Œçš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># è¿åˆ° node0 ä¸Š</span>
</span></span><span class="line"><span class="cl">ssh stack@node0_ip
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># è¿›å…¥ devstack ç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> devstack
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸‹è½½æŠ“å– OpenStack èµ„æºï¼Œç”Ÿæˆ NeublaGraph DML/DQL çš„å·¥å…·</span>
</span></span><span class="line"><span class="cl">wget https://raw.githubusercontent.com/wey-gu/openstack-graph/main/utils/pull_resources_to_graph.py.py
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ‰§è¡Œå®ƒ</span>
</span></span><span class="line"><span class="cl">python3 pull_resources_to_graph.py
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œä¹‹åï¼Œä¼šç”Ÿæˆç‚¹ã€è¾¹çš„ ngql è¯­å¥åœ¨ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼š</p>
<ul>
<li><code>vertices/</code> ç‚¹æ•°æ®çš„æ–‡ä»¶å¤¹</li>
<li><code>edges/</code> è¾¹æ•°æ®çš„æ–‡ä»¶å¤¹</li>
</ul>
<h3 id="åŠ è½½æ•°æ®åˆ°-nebulagraph" class="headerLink">
    <a href="#%e5%8a%a0%e8%bd%bd%e6%95%b0%e6%8d%ae%e5%88%b0-nebulagraph" class="header-mark"></a>3.3 åŠ è½½æ•°æ®åˆ° NebulaGraph</h3><p>æˆ‘ä»¬åªéœ€è¦åœ¨ NebulaGraph Studio Console, Explorer Console æˆ–è€… NebulaGraph å‘½ä»¤è¡Œ Console ä¸­æ‰§è¡Œä¸Šè¾¹ç”Ÿæˆçš„ <code>.ngql</code> æ–‡ä»¶å°±å¥½äº†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># DDL from vitrage</span>
</span></span><span class="line"><span class="cl">cat schema.ngql
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># DDL and DML for both push and pull mode data</span>
</span></span><span class="line"><span class="cl">cat edges/*.ngql
</span></span><span class="line"><span class="cl">cat vertices/*.ngql
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹åï¼Œåœ¨ NebulaGraph ä¸­æˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªå«åš <code>openstack</code> çš„å›¾ç©ºé—´ï¼Œç”¨è¿™ä¸ªæŸ¥è¯¢å¯ä»¥æŸ¥åˆ°æ‰€æœ‰æ•°æ®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">MATCH (n) WITH n LIMIT 1000
</span></span><span class="line"><span class="cl">OPTIONAL MATCH p=(n)--()
</span></span><span class="line"><span class="cl">RETURN p, n
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åæ¸²æŸ“åœ¨ explorer ä¸­ï¼Œæ‰‹åŠ¨è®¾ç½®ä¸€ä¸‹æ•°æ®çš„å›¾æ ‡ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ OpenStack é›†ç¾¤é‡Œçš„æ‰€æœ‰ç§Ÿæˆ·çš„èµ„æºå›¾äº†ï¼š</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/all_graph_view.webp"
        srcset="/graph-enabled-infra-ops/all_graph_view.webp, /graph-enabled-infra-ops/all_graph_view.webp 1.5x, /graph-enabled-infra-ops/all_graph_view.webp 2x"
        sizes="auto"
        alt="all_graph_view"
        title="all_graph_view" height="2334"   width="4064" ></figure></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç»ˆäºå¯ä»¥åœ¨å›¾ä¸Šçœ‹çœ‹æœ‰æ„æ€çš„æ´å¯Ÿäº†ã€‚</p>
<h2 id="åŸºäºå›¾è°±çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹" class="headerLink">
    <a href="#%e5%9f%ba%e4%ba%8e%e5%9b%be%e8%b0%b1%e7%9a%84%e5%9f%ba%e7%a1%80%e8%ae%be%e6%96%bd%e8%bf%90%e7%bb%b4%e7%a4%ba%e4%be%8b" class="header-mark"></a>4 åŸºäºå›¾è°±çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹</h2><p>ä½œä¸ºé SREã€DevOps äººå‘˜ï¼Œæˆ‘å°è¯•è—‰ç”±è‡ªå·±åœ¨ OpenStack å’Œå›¾æŠ€æœ¯çš„ç†è§£æƒ³è±¡å‡ºä¸‹è¾¹çš„ä¸€äº›å®ä¾‹ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°éœ€è¦çš„è¯»è€…ä»¬ã€‚</p>
<h3 id="å‘Šè­¦çŠ¶æ€çš„æ¨ç†ä¸ä¼ å¯¼" class="headerLink">
    <a href="#%e5%91%8a%e8%ad%a6%e7%8a%b6%e6%80%81%e7%9a%84%e6%8e%a8%e7%90%86%e4%b8%8e%e4%bc%a0%e5%af%bc" class="header-mark"></a>4.1 å‘Šè­¦ã€çŠ¶æ€çš„æ¨ç†ä¸ä¼ å¯¼</h3><p>è¿™éƒ¨åˆ†æˆ‘æ”¶åˆ°äº† vitrage é¡¹ç›®çš„å¯å‘ï¼Œå‚è€ƒå®ƒä»¬ç»™å‡ºçš„å®ä¾‹æ–‡æ¡£ï¼š<a href="https://github.com/openstack/vitrage/blob/master/doc/source/contributor/vitrage-templates.rst" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
<p>å€ŸåŠ©èµ„æºå›¾è°±å®æ—¶å›¾æŸ¥è¯¢ã€å›¾è®¡ç®—ç”šè‡³å›¾å¯è§†åŒ–èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å›¾ä¸Šæ¨ç†ã€ä¼ å¯¼ä¸€äº›ä¿¡æ¯ï¼ŒæŠŠé‡è¦çš„æ—¶é—´è—‰ç”±å›¾ä¸Šç»„ç»‡å¥½çš„çŸ¥è¯†åˆ†å‘åˆ°éœ€è¦æ”¶åˆ°é€šçŸ¥çš„äººã€ç»„ç»‡ã€ç³»ç»Ÿã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„ä¾‹å­æ˜¯ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ nova hostï¼ˆè™šæ‹Ÿæœºçš„å®¿ä¸»æœºã€hypervisor æœºå™¨ï¼Œä»¥ä¸‹ç®€ç§°å®¿ä¸»æœºï¼‰ï¼Œä¸­è·å¾—äº†ä¸€ä¸ªå‘Šè­¦ã€äº‹ä»¶çš„æ—¶å€™ï¼Œå¯èƒ½æ˜¯ç½‘å¡å¤±è´¥ã€ç‰©ç†ç¡¬ç›˜é¢„è­¦ã€CPUå ç”¨è¿‡é«˜ä¹‹ç±»çš„å‘Šè­¦ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ©å›¾è°±æŸ¥è¯¢è·å¾—æ‰€æœ‰ç›¸å…³è”çš„è™šæœºï¼Œç„¶åæŠŠï¼ˆWARNï¼‰çº§åˆ«çš„å‘Šè­¦å‘å‡ºå»æˆ–è€…è®¾ç½®å®ƒä»¬ä¸ºï¼ˆäºšå¥åº·ï¼‰çš„çŠ¶æ€ã€‚</p>
<p>è¿™æ ·ï¼Œè·å¾—é€šçŸ¥çš„å¯¹è±¡ï¼Œå¾€å¾€æ˜¯ä¸€äº›ç”¨æˆ·çš„ç³»ç»Ÿï¼Œå°±å¯ä»¥æ ¹æ®ä»–ä»¬é¢„å…ˆå®šä¹‰å¥½çš„ç­–ç•¥åšä¸€äº›è‡ªåŠ¨åŒ–è¿ç»´ï¼Œæˆ–è€…é€šçŸ¥çš„ hookï¼š</p>
<ul>
<li>æ”¶åˆ°â€œå®¿ä¸»æœº CPU è¿‡é«˜â€çš„å‘Šè­¦çš„æƒ…å½¢ä¸‹ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·è‡ªå·±è®¾å®šçš„ä¸åŒç­–ç•¥æŠŠè™šæœºè¿ç§»èµ°ï¼Œæˆ–è€…æ›´é«˜çº§å¤æ‚çš„æ’¤ç¦»æ–¹å¼ï¼ˆå¼€å§‹ä¸æ¥å—æ–°çš„ trafficï¼Œåˆ›å»ºæ–°çš„æ›¿ä»£ workloadï¼Œç„¶å gracefully å…³é—­è¿™ä¸ª workloadï¼‰</li>
<li>â€œæ§åˆ¶é¢ç½‘ç»œæ•…éšœâ€å‘Šè­¦æƒ…å†µä¸‹ï¼Œè¿™æ—¶å€™å¾€å¾€æ— æ³•æˆåŠŸè¿›è¡Œä¸»æœºçš„è½¦é‡Œã€è¿ç§»ï¼Œæ•…å¯ä»¥è€ƒè™‘è§¦å‘å¤‡ä»½ä¸»æœºã€å¯åŠ¨æ–° workloadã€å…³æœº</li>
<li>å…¶ä»–â€œï¼ˆäºšå¥åº·ï¼‰çŠ¶æ€â€ï¼Œå¯ä»¥ä½œä¸ºè´Ÿè½½å±‚é¢å‡ºé—®é¢˜çš„æ ¹å› åˆ†æï¼ˆRCAï¼‰ä¾æ®</li>
</ul>
<p>ä¸‹è¾¹ï¼Œæˆ‘ä»¬ç»™å‡ºä¸€ä¸ªåœ¨å›¾è°±ä¸Šè¿›è¡Œå‘Šè­¦ã€çŠ¶æ€ä¼ å¯¼çš„æŸ¥è¯¢ä¾‹å­ï¼Œæˆ‘ä»¬å‡è®¾ vid ä¸º <code>node0</code> çš„å®¿ä¸»æœºå‡ºç°äº†é«˜ CPU çš„å‘Šè­¦ï¼Œåˆ™è¿™ä¸ªæŸ¥è¯¢å¯ä»¥å¾—åˆ°æ‰€æœ‰å…¶ä¸Šçš„è™šæœºï¼Œè·å¾—æ—¶é—´ã€å‘Šè­¦é€šçŸ¥åˆ—è¡¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">vm</span><span class="p">:</span><span class="n">nova_instance</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="o">`</span><span class="n">contains</span><span class="o">`</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">host_CPU_high</span><span class="p">:</span><span class="n">nova_host</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">host_CPU_high</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;node0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="n">vm</span><span class="p">.</span><span class="n">nova_instance</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">VM_to_raise_CPU_alarms</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™å…¶ä¸­æŸ¥è¯¢çš„å›¾æ¨¡å¼æ˜¯ä» <code>host_CPU_high</code> è¿™ä¸ª <code>nova_host</code> å‘å¤–ç»ç”± <code>contains</code> è¿™ä¸ªå…³ç³»æŒ‡å‘ <code>vm</code> è¿™ä¸ª <code>nova_instance</code> çš„ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="p">(</span><span class="n">vm</span><span class="p">:</span><span class="n">nova_instance</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="o">`</span><span class="n">contains</span><span class="o">`</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">host_CPU_high</span><span class="p">:</span><span class="n">nova_host</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å®ƒçš„ç»“æœæ˜¯ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">VM_to_raise_CPU_alarms</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">server-4</td>
</tr>
<tr>
<td style="text-align:left">server-3</td>
</tr>
<tr>
<td style="text-align:left">server-1</td>
</tr>
<tr>
<td style="text-align:left">server-0</td>
</tr>
</tbody>
</table>
<p>å¦‚æœæˆ‘ä»¬æŠŠæŸ¥è¯¢æ”¹åŠ¨ä¸€ä¸‹ï¼Œé€‰æ‹©è¾“å‡ºå…¨è·¯å¾„ï¼Œåˆ™å¯ä»¥çœ‹åˆ°è¿™ä¸ªä¿¡æ¯ä¼ å¯¼çš„æ–¹å‘ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="n">vm</span><span class="p">:</span><span class="n">nova_instance</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="o">`</span><span class="n">contains</span><span class="o">`</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">host_CPU_high</span><span class="p">:</span><span class="n">nova_host</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">host_CPU_high</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;node0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ Explorer ä¸­æ¸²æŸ“ï¼Œç‚¹å‡» N è·³æ£€æµ‹ï¼š</p>
<video width="800" controls>
  <source src="https://user-images.githubusercontent.com/1651790/212291702-1754c9ce-f23f-4a68-930c-07a587c113be.mov" type="video/mp4"> 
</video>
<p>ç¬¬ä¸€ä¸ªä¾‹å­æ¯”è¾ƒç®€å•ï¼Œç”šè‡³ä¸æ˜¯å¾ˆæœ‰å¿…è¦ç”¨å›¾çš„èƒ½åŠ›ï¼ˆè¿™ç§å› ä¸ºä¸€è·³æŸ¥è¯¢è¡¨ç»“æ„ä¸­ä¹Ÿæ˜¯å¾ˆè½»æ¾åœ°ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸¤ä¸ª nova API call å°±å¯ä»¥æå®šç­‰ä»·çš„ä¿¡æ¯è·å–äº†ï¼‰ï¼Œè¿™é‡Œåªæ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå®é™…ä¸Šæˆ‘ä»¬åœ¨å›¾ä¸Šå¯ä»¥åšå¾ˆå¤šæ›´ Graphyï¼ˆå…·æœ‰å›¾å±æ€§çš„ï¼‰ã€å¤æ‚ã€ç‹¬ç‰¹çš„å·¥ä½œï¼Œæˆ‘ä»¬æ…¢æ…¢æ¥çœ‹ã€‚</p>
<h3 id="ç½‘ç»œå¯è¾¾æ£€æµ‹" class="headerLink">
    <a href="#%e7%bd%91%e7%bb%9c%e5%8f%af%e8%be%be%e6%a3%80%e6%b5%8b" class="header-mark"></a>4.2 ç½‘ç»œå¯è¾¾æ£€æµ‹</h3><p>æˆ‘ä»¬æ¥è€ƒè™‘è¿™æ ·çš„åœºæ™¯ï¼Œåœ¨ OpenStack ä¸­ï¼Œä¸åŒçš„ä¸»æœºå¯ä»¥è¿æ¥åˆ°ç›¸åŒçš„å­ç½‘ï¼ˆVPCï¼‰ï¼Œä¸»æœºä¹Ÿå¯ä»¥è¿æ¥åˆ°å¤šä¸ªå­ç½‘ä¹‹ä¸­ï¼Œè¿™æ ·ï¼Œä¸»æœºä¹‹é—´çš„ç½‘ç»œè¿é€šæ€§ä¿¡æ¯ã€ä¸ç½‘ç»œè”é€šç›¸å…³çš„æ¨ç†ã€ä¼ å¯¼éƒ½å¯ä»¥åœ¨å›¾ä¸Šè¿›è¡Œã€‚</p>
<blockquote>
<p>æ³¨ï¼šåœ¨çœŸå®ä¸–ç•Œä¸­ï¼Œè¿™é‡Œå¯èƒ½è¿˜è¦è€ƒè™‘ Security Groupã€Routerã€Switch ç­‰å› ç´ ï¼Œæœ¬åˆ©ä¸­æˆ‘ä»¬ç”¨åˆ°çš„ OpenStack æ˜¯ L2 only çš„ Setupï¼Œæ¯”è¾ƒç®€åŒ–ã€‚</p>
</blockquote>
<p>è·å¾—ä¸è™šæœº <code>server_a</code> åŒä¸€ VPC çš„æ‰€æœ‰å…¶ä»–è™šæœºçœ‹èµ·æ¥å¾ˆå®¹æ˜“è¡¨è¾¾äº†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">server_a</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_network</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">server_b</span><span class="p">:</span><span class="o">`</span><span class="n">nova_instance</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">server_a</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;server-0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="n">server_b</span><span class="p">.</span><span class="n">nova_instance</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">L2_connected_server</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">L2_connected_server</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">server-1</td>
</tr>
</tbody>
</table>
<p>çœ‹èµ·æ¥å¾ˆåˆçº§å‘€ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æŸ¥è¯¢ä¸è™šæœº <code>server_a</code> åŒä¸€ VPCã€æˆ–è€…æœ‰å¯èƒ½é€šè¿‡è·¨ç½‘ç»œè™šæœºè€Œäº’è”çš„ä¸»æœºçš„æ‰€æœ‰å…¶ä»–è™šæœºï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬é™¤äº†å…±äº« neutron network(VPC) çš„æƒ…å†µï¼Œè¿˜è¦æŸ¥è¯¢æ‰€æœ‰äºŒå±‚ç›´è¿çš„è™šæœºå¯èƒ½é€šè¿‡å…¶ä»– VPC è¿å‡ºå»çš„çš„è™šæœºï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬ç”¨åˆ°äº† <code>OPTIONAL MATCH</code> çš„è¡¨è¾¾ï¼Œè¡¨ç¤ºå¯èƒ½åŒ¹é…åˆ°çš„æ¨¡å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">server_a</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">net</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">server_b</span><span class="p">:</span><span class="o">`</span><span class="n">nova_instance</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">server_a</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;server-0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">server_b</span><span class="p">)</span><span class="o">--</span><span class="p">()</span><span class="o">--</span><span class="p">(</span><span class="n">other_net</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">server_c</span><span class="p">:</span><span class="o">`</span><span class="n">nova_instance</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WITH</span><span class="w"> </span><span class="n">server_a</span><span class="p">,</span><span class="w"> </span><span class="n">server_b</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">same_subnet_machines</span><span class="p">,</span><span class="w"> </span><span class="n">server_c</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">routeable_machines</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">routeable_machines</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">server_a</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="n">same_subnet_machines</span><span class="p">.</span><span class="n">nova_instance</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">L2_connected_server</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">routeable_machines</span><span class="p">.</span><span class="n">nova_instance</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">cross_vpc_server</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°ç»“æœé‡Œï¼Œè·¨ç½‘ç»œæ½œåœ¨çš„ç›¸è¿ä¸»æœºè¿˜æœ‰ server-3ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">L2_connected_server</th>
<th style="text-align:left">cross_vpc_server</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">server-1</td>
<td style="text-align:left">server-3</td>
</tr>
</tbody>
</table>
<p>æˆ‘ä»¬å°†å…¶å¯è§†åŒ–ï¼ŒåŒæ ·ï¼Œä¿®æ”¹è¾“å‡ºä¸ºè·¯å¾„ <code>p</code> å’Œ <code>p1</code>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="n">server_a</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">net</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">server_b</span><span class="p">:</span><span class="o">`</span><span class="n">nova_instance</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">server_a</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;server-0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="n">p1</span><span class="o">=</span><span class="p">(</span><span class="n">server_b</span><span class="p">)</span><span class="o">--</span><span class="p">()</span><span class="o">--</span><span class="p">(</span><span class="n">other_net</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">server_c</span><span class="p">:</span><span class="o">`</span><span class="n">nova_instance</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">p1</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å®ƒå¯èƒ½çš„è¿æ¥è·¯å¾„ä¸€ç›®äº†ç„¶</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/cross_vpc_vm.webp"
        srcset="/graph-enabled-infra-ops/cross_vpc_vm.webp, /graph-enabled-infra-ops/cross_vpc_vm.webp 1.5x, /graph-enabled-infra-ops/cross_vpc_vm.webp 2x"
        sizes="auto"
        alt="cross_vpc_vm"
        title="cross_vpc_vm" height="2334"   width="4064" ></figure></p>
<p>æœ‰äº†è·å¾—è¿™äº›ä¿¡æ¯çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥å¯ç¼–ç¨‹åœ°è¿æ¥å‘Šè­¦ã€çŠ¶æ€ã€å®‰å…¨é£æ§ã€ç½‘ç»œç­‰æ–¹æ–¹é¢é¢ç³»ç»Ÿäº†ï¼Œå› ä¸ºè¿™ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œè¿™é‡Œå°±ä¸åŠ ä»¥èµ˜è¿°äº†ï¼Œæ¬¢è¿å¤§å®¶æ¥ NebulaGraph ç¤¾åŒºåˆ†äº«ä½ ä»¬çš„å›¾æ´å¯Ÿä½¿ç”¨æ–¹å¼ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹å­˜å‚¨ç›¸å…³çš„ä¾‹å­ã€‚</p>
<h3 id="é•œåƒäº‘ç›˜å¿«ç…§çš„è¡€ç¼˜" class="headerLink">
    <a href="#%e9%95%9c%e5%83%8f%e4%ba%91%e7%9b%98%e5%bf%ab%e7%85%a7%e7%9a%84%e8%a1%80%e7%bc%98" class="header-mark"></a>4.3 é•œåƒã€äº‘ç›˜ã€å¿«ç…§çš„è¡€ç¼˜</h3><p>åœ¨åŸºç¡€è®¾æ–½ä¸­ï¼Œäº‘ç›˜ï¼ˆiSCSIã€Cephã€NFSï¼‰ã€é•œåƒã€å¿«ç…§ä¹‹é—´æœ‰å¤šé‡å¤æ‚çš„å…³ç³»ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>ä¸€ä¸ªç³»ç»Ÿé•œåƒå¯èƒ½ä»æŸä¸€ä¸ªè™šæ‹ŸæœºæŒ‚è½½çš„äº‘ç›˜æˆ–è€…ä¸€ä¸ªå¿«ç…§åˆ›å»º</li>
<li>ä¸€ä¸ªäº‘ç›˜å¯èƒ½æ˜¯ä»ä¸€ä¸ªç³»ç»Ÿé•œåƒã€ä¸€ä¸ªå¿«ç…§æˆ–è€…å¦ä¸€ä¸ªäº‘ç›˜åˆ›å»º</li>
<li>ä¸€ä¸ªå¿«ç…§æ˜¯ä»ä¸€ä¸ªäº‘ç›˜åˆ›å»ºçš„</li>
</ul>
<p>è¿™ç§è¡€ç¼˜ä¿¡æ¯çš„è¯†åˆ«å’Œç®¡ç†æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ä¸‹è¾¹çš„æŸ¥è¯¢å¯ä»¥è·å¾—ç»™å®šçš„è™šæœº <code>server-0</code> çš„æ‰€æœ‰å­˜å‚¨è¡€ç¼˜ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="n">server_a</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="o">`</span><span class="n">attached</span><span class="o">`|</span><span class="n">created_from</span><span class="o">|</span><span class="n">used_by</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">step1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">server_a</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;server-0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="n">p1</span><span class="o">=</span><span class="p">(</span><span class="n">step1</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="n">created_from</span><span class="o">*</span><span class="mi">1</span><span class="p">..</span><span class="mi">5</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">step2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">p1</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç»“æœä¸­ï¼š</p>
<ul>
<li><code>server-0</code> çš„å¯åŠ¨é•œåƒï¼ˆè¿™é‡Œå®ƒæ˜¯ä»æœ¬åœ°ç›˜å¯åŠ¨çš„ï¼Œæ²¡æœ‰æŒ‚è½½äº‘ç›˜ï¼‰æ˜¯ä» <code>volume-1</code> åˆ›å»ºçš„</li>
<li><code>volume-1</code> æ˜¯ä» <code>cirros-0.5.2-x86_64-disk</code> è¿™ä¸ªé•œåƒåˆ›å»ºçš„</li>
<li>æ­¤å¤–ï¼Œè¿˜æœ‰å…¶ä»–æœ‰åˆ†å‰å…³ç³»çš„å­˜å‚¨èµ„æºå’Œä»–ä»¬ä¹Ÿæ¯æ¯ç›¸å…³</li>
</ul>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/storage_lineage_0.webp"
        srcset="/graph-enabled-infra-ops/storage_lineage_0.webp, /graph-enabled-infra-ops/storage_lineage_0.webp 1.5x, /graph-enabled-infra-ops/storage_lineage_0.webp 2x"
        sizes="auto"
        alt="storage_lineage_0"
        title="storage_lineage_0" height="2334"   width="4064" ></figure></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸åªè€ƒè™‘å­˜å‚¨èµ„æºï¼Œå†çœ‹çœ‹æ¶‰åŠäº‘ç›˜ï¼ˆcinder_volumeï¼‰æŒ‚è½½ï¼ˆattachedï¼‰è¿™å±‚å…³ç³»ä¸‹çš„è¡€ç¼˜å…³ç³»ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="n">server_a</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="o">`</span><span class="n">attached</span><span class="o">`|</span><span class="n">created_from</span><span class="o">|</span><span class="n">used_by</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">step1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">server_a</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;server-4&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="n">p1</span><span class="o">=</span><span class="p">(</span><span class="n">step1</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="n">created_from</span><span class="o">|</span><span class="n">attached</span><span class="o">*</span><span class="mi">1</span><span class="p">..</span><span class="mi">5</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">step2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">p1</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ¸²æŸ“å›¾ä¸­è¯»å‡ºè¿™æ ·çš„æ´å¯Ÿï¼š</p>
<ul>
<li><code>server-4</code> çš„å¯åŠ¨é•œåƒï¼ˆè¿™é‡Œå®ƒæ˜¯ä»æœ¬åœ°ç›˜å¯åŠ¨çš„ï¼‰æ˜¯ä» <code>volume-1</code> åˆ›å»ºçš„
<ul>
<li>è€Œ <code>volume-1</code> ç°åœ¨æŒ‚è½½åœ¨ <code>server-6</code> ä¸Š</li>
<li><code>volume-1</code> æ˜¯ä» <code>cirros-0.5.2-x86_64-disk</code> è¿™ä¸ªé•œåƒåˆ›å»ºçš„</li>
<li>åŒæ · <code>cirros-0.5.2-x86_64-disk</code> é•œåƒè¢«å¾ˆå¤šå…¶ä»–è™šæœºåœ¨é‡‡ç”¨</li>
</ul>
</li>
<li><code>server-4</code> åŒæ—¶æŒ‚è½½äº†æ•°æ®ç›˜ <code>volume-2</code>
<ul>
<li>è€Œ <code>volume-2</code> æ˜¯ä¸€ä¸ªå¤šæŒ‚è½½çš„ç›˜ï¼Œå®ƒåŒæ—¶æŒ‚è½½åœ¨ <code>server-3</code> ä¹‹ä¸Š</li>
<li><code>server-3</code> çš„ç³»ç»Ÿå¯åŠ¨ç›˜æ˜¯ä»å¿«ç…§ <code>snapshot-202301111800-volume-1</code> å…‹éš†åˆ›å»ºçš„</li>
<li>å¿«ç…§ <code>snapshot-202301111800-volume-1</code> æ˜¯æ›¾ç»ä» <code>volume-1</code> åˆ›å»ºçš„</li>
<li><code>volume-1</code> ç°åœ¨æŒ‚è½½åœ¨ <code>server-6</code> ä¸Š
<ul>
<li>å¿«ç…§ä¸ä¸€å®šæ˜¯ä» <code>server-6</code> è€Œæ¥ï¼Œå› ä¸ºé•œåƒå¯èƒ½è¢«é‡æ–°æŒ‚è½½è¿‡</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/storage_lineage_1.webp"
        srcset="/graph-enabled-infra-ops/storage_lineage_1.webp, /graph-enabled-infra-ops/storage_lineage_1.webp 1.5x, /graph-enabled-infra-ops/storage_lineage_1.webp 2x"
        sizes="auto"
        alt="storage_lineage_1"
        title="storage_lineage_1" height="2334"   width="4064" ></figure></p>
<p>è€Œè¿™äº›è¡€ç¼˜ä¿¡æ¯å¯ä»¥è¢«ç”¨åœ¨èµ„æºç”Ÿå‘½å‘¨æœŸç®¡ç†ã€æ ¹å› åˆ†æã€å®‰å…¨å‘Šè­¦ã€çŠ¶æ€ä¼ å¯¼ä¸Šï¼Œè¿™é‡Œä¸åŠ ä»¥èµ˜è¿°ã€‚</p>
<h3 id="é«˜ç›¸å…³æ€§è™šæœºé¢„è­¦" class="headerLink">
    <a href="#%e9%ab%98%e7%9b%b8%e5%85%b3%e6%80%a7%e8%99%9a%e6%9c%ba%e9%a2%84%e8%ad%a6" class="header-mark"></a>4.4 é«˜ç›¸å…³æ€§è™šæœºé¢„è­¦</h3><p>ä¸‹é¢å†ç»™ä¸€ä¸ªèŠ‚ç‚¹ç›¸ä¼¼åº¦çš„åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¨å›¾æˆ–è€…å­å›¾ä¸Šï¼Œåˆ©ç”¨å›¾ç®—æ³•æ‰¾åˆ°ä¸ä¸€ä¸ªè™šæœºåœ¨å›¾ä¸Šå…³ç³»çš„ç»´åº¦ä¸Šæœ€ç›¸ä¼¼çš„å…¶ä»–è™šæœºï¼ŒåŸºäºåœ¨è¿™ç§ç›¸å…³æ€§å¢åŠ æ–°çš„å…³ç³»ï¼Œå¹¶åœ¨å…³ç³»ä¸Šåšé£é™©äº‹ä»¶é¢„è­¦ã€‚</p>
<p>è¿™æ¬¡çš„å›¾ç®—æ³•åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸€ä¸ªå…¸å‹çš„ä»[å¿«é€Ÿå­å›¾éªŒè¯]åˆ°[å…¨å›¾ç”Ÿäº§åº”ç”¨çš„]å·¥ä½œæµã€‚</p>
<h4 id="åœ¨å­å›¾ä¸Šå¿«é€ŸéªŒè¯æµè§ˆå™¨å†…ç®—æ³•" class="headerLink">
    <a href="#%e5%9c%a8%e5%ad%90%e5%9b%be%e4%b8%8a%e5%bf%ab%e9%80%9f%e9%aa%8c%e8%af%81%e6%b5%8f%e8%a7%88%e5%99%a8%e5%86%85%e7%ae%97%e6%b3%95" class="header-mark"></a>4.4.1 åœ¨å­å›¾ä¸Šå¿«é€ŸéªŒè¯ï¼šæµè§ˆå™¨å†…ç®—æ³•</h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¯•ç€ä» <code>server-0</code> çš„ä¸‰åº¦å­å›¾ä¸Šåšç®—æ³•çš„éªŒè¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">GET SUBGRAPH 3 STEPS FROM &#34;server-0&#34;
</span></span><span class="line"><span class="cl">YIELD VERTICES AS nodes, EDGES AS relationships;
</span></span></code></pre></td></tr></table>
</div>
</div><p>å°†ç»“æœæ¸²æŸ“åœ¨ç”»å¸ƒä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å­å›¾ä¸­åŒ…å«äº†å…¶ä»–å‡ ä¸ªè™šæœºï¼š</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/server_subgraph.webp"
        srcset="/graph-enabled-infra-ops/server_subgraph.webp, /graph-enabled-infra-ops/server_subgraph.webp 1.5x, /graph-enabled-infra-ops/server_subgraph.webp 2x"
        sizes="auto"
        alt="server_subgraph"
        title="server_subgraph" height="2334"   width="4064" ></figure></p>
<p>ç„¶åï¼Œæˆ‘ä»¬åˆ©ç”¨ explorer ä¸­çš„æµè§ˆå™¨å†…å›¾ç®—æ³•ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°éªŒè¯æˆ‘ä»¬çš„æƒ³æ³•ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ Jaccard SImilarity ç›¸ä¼¼æ€§ç®—æ³•ï¼Œè¿›è¡Œ <code>server-0</code> ä¸ <code>server-1,server-3,server-4,server-6</code> è¿­ä»£åˆ†åˆ«å¾—åˆ°ç›¸ä¼¼æ€§ï¼š</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/jacc_sim_browser.webp"
        srcset="/graph-enabled-infra-ops/jacc_sim_browser.webp, /graph-enabled-infra-ops/jacc_sim_browser.webp 1.5x, /graph-enabled-infra-ops/jacc_sim_browser.webp 2x"
        sizes="auto"
        alt="jacc_sim_browser"
        title="jacc_sim_browser" height="2334"   width="4064" ></figure></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œåœ¨ 3 æ­¥å­å›¾å†…ï¼Œå’Œ <code>server-0</code> æœ€è¿‘æ¥çš„è™šæœºæ˜¯ <code>server-4</code>ã€‚è¿›ä¸€æ­¥æˆ‘ä»¬å¯ä»¥ç®€å•åœ¨å­å›¾ä¸Šçœ‹çœ‹ä¸¤è€…ä¹‹é—´çš„è·¯å¾„ä½œä¸ºç›¸ä¼¼æ€§çš„è§£é‡Šï¼š</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/sim_explain.webp"
        srcset="/graph-enabled-infra-ops/sim_explain.webp, /graph-enabled-infra-ops/sim_explain.webp 1.5x, /graph-enabled-infra-ops/sim_explain.webp 2x"
        sizes="auto"
        alt="sim_explain"
        title="sim_explain" height="2334"   width="4064" ></figure></p>
<p>åœ¨è¿™ä¸ªå¯è§£é‡Šç»“æœä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ <code>server-0</code> ä¸ <code>server-4</code> ç›¸ä¼¼çš„åŸå› å¯èƒ½æ˜¯ï¼š</p>
<ul>
<li>åè½åœ¨åŒä¸€ä¸ªå®¿ä¸»æœºï¼šnode-0</li>
<li>ä½¿ç”¨åŒä¸€ä¸ªé•œåƒï¼šcirros_mod_from_volume-1</li>
</ul>
<p>å¦‚æ­¤ï¼Œæˆ‘ä»¬æœ€ç»ˆè½åœ°çš„é¢„è­¦æœºåˆ¶å¯èƒ½æ˜¯ï¼Œå½“ <code>server-0</code> å‡ºç°æŸä¸€é—®é¢˜ã€å‘Šè­¦æ—¶å€™ï¼Œç»™ç›¸ä¼¼çš„ server-4 ä¹Ÿè®¾å®šé¢„è­¦ï¼Œé¢„è­¦ç†ç”±å°±æ˜¯å®ƒä»¬åœ¨åŒæ ·ä¸»æœºã€åŒæ ·é•œåƒã€‚</p>
<h4 id="è½åœ°ç®—æ³•ä¸ºåº”ç”¨workflowanalytics" class="headerLink">
    <a href="#%e8%90%bd%e5%9c%b0%e7%ae%97%e6%b3%95%e4%b8%ba%e5%ba%94%e7%94%a8workflowanalytics" class="header-mark"></a>4.4.2 è½åœ°ç®—æ³•ä¸ºåº”ç”¨ï¼šWorkflow+Analytics</h4><p>æœ‰äº†å‰è¾¹çš„å¿«é€Ÿå®éªŒï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© workflow + NebulaGraph Analytics æŠŠå®ƒè½åœ°ä¸ºå…¨å›¾ä¸Šçš„ç®—æ³•ï¼Œåˆ©ç”¨ Analytics åˆ†å¸ƒå¼èƒ½åŠ›å»æ‰§è¡Œã€‚</p>
<p>åœ¨ç”Ÿäº§ä¸Šï¼Œæˆ‘ä»¬åˆ©ç”¨ Workflow çš„ DAG ç¼–æ’èƒ½åŠ›åˆ›å»ºä¸¤ä¸ªå‰åç›¸è¿çš„ä»»åŠ¡ï¼š</p>
<ul>
<li>å–ä¸´è¿‘è™šæœº</li>
<li>å…¨å›¾ç®—ç›¸ä¼¼åº¦</li>
</ul>
<p>ç¬¬ä¸€ä¸ªä»»åŠ¡å¦‚ä¸‹ï¼Œå®ƒå®æ—¶ä»ç»™å®šçš„è™šæœºï¼ˆè¿™é‡Œå†™æ­»äº† server-0ï¼Œä½†æ˜¯ workflow å¯ä»¥æŠŠè¿™é‡Œä½œä¸ºå‚æ•°åŒ–ï¼Œå¹¶å°è£…ä»»åŠ¡ä¸ºå¯ä»¥è¢« API è§¦å‘çš„å¼‚æ­¥æœåŠ¡ï¼‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="o">*</span><span class="mi">1</span><span class="p">..</span><span class="mi">5</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">m</span><span class="p">:</span><span class="o">`</span><span class="n">nova_instance</span><span class="o">`</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;server-0&#34;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">m</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œ Query job æˆ‘ä»¬è¾“å‡ºå¾…æ¯”è¾ƒçš„å…¶ä»–è™šæœºçš„ vidã€‚</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/query_sim_server.webp"
        srcset="/graph-enabled-infra-ops/query_sim_server.webp, /graph-enabled-infra-ops/query_sim_server.webp 1.5x, /graph-enabled-infra-ops/query_sim_server.webp 2x"
        sizes="auto"
        alt="query_sim_server"
        title="query_sim_server" height="2334"   width="4064" ></figure></p>
<p>æ¥ç€ï¼ŒJaccardSImilarity job ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹© ids1 ä¸º server-0ï¼ˆè¿™é‡Œå¦‚ä¸Šï¼Œä¸Šçº¿æ—¶æ˜¯å‚æ•°åŒ–çš„ï¼‰ï¼Œids2 ä»ä¸Šæ¸¸å–ï¼ˆå‰è¾¹çš„ Query jobï¼‰ï¼Œé€‰æ‹©åœ¨ openstack å…¨å›¾æ‰«ææ‰€æœ‰ç±»å‹çš„è¾¹ã€‚<figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/jacc_sim_workflow.webp"
        srcset="/graph-enabled-infra-ops/jacc_sim_workflow.webp, /graph-enabled-infra-ops/jacc_sim_workflow.webp 1.5x, /graph-enabled-infra-ops/jacc_sim_workflow.webp 2x"
        sizes="auto"
        alt="jacc_sim_workflow"
        title="jacc_sim_workflow" height="2334"   width="4064" ></figure></p>
<p>ä¿å­˜ã€è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç»“æœå¦‚ä¸‹ï¼ŒåŒºåˆ«æ˜¯è¿™æ¬¡å®ƒè¿ç®—äº†æ›´å¤šçš„ç›®æ ‡è™šæœºï¼Œå¹¶ä¸”è¿­ä»£ä½œç”¨èŒƒå›´æ˜¯å…¨å›¾è€Œéä¸€ä¸ªå­å›¾ï¼Œå¯ä»¥çœ‹åˆ°ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œè¿™æ˜¯å› ä¸ºå­å›¾ä¸Šå…³è”åº¦å¤§çš„ç‚¹å’Œç›¸è¿‘çš„è¾¹åœ¨ Jaccard ç®—æ³•é‡Œèµ·åˆ°äº†æ›´ä¸»è¦çš„ä½œç”¨ã€‚</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/jacc_result.webp"
        srcset="/graph-enabled-infra-ops/jacc_result.webp, /graph-enabled-infra-ops/jacc_result.webp 1.5x, /graph-enabled-infra-ops/jacc_result.webp 2x"
        sizes="auto"
        alt="jacc_result"
        title="jacc_result" height="2334"   width="4064" ></figure></p>
<h3 id="å®‰å…¨ç›¸å…³åœºæ™¯" class="headerLink">
    <a href="#%e5%ae%89%e5%85%a8%e7%9b%b8%e5%85%b3%e5%9c%ba%e6%99%af" class="header-mark"></a>4.5 å®‰å…¨ç›¸å…³åœºæ™¯</h3><p>åŸºç¡€è®¾æ–½èµ„æºä¸­çš„å…³è”å…³ç³»å’Œé‡‘èã€å†…å®¹ç³»ç»Ÿã€ç”µå•†é¢†åŸŸçš„é£æ§åœºæ™¯æœ‰ç›¸ä¼¼çš„åœ°æ–¹ï¼Œå¾ˆå¤šåœºæ™¯æœ¬è´¨ä¸Šåˆ©ç”¨åˆ°äº†å›¾è°±å…³ç³»ä¸­çš„çŸ¥è¯†ï¼Œåœ¨å›¾åº“ä¸Šå®æ—¶è·å–è¿™äº›å¤æ‚å¤šè·³å¤©ç„¶å¸¦æœ‰å¯è§£é‡Šæ€§çš„å®‰å…¨æ´å¯Ÿéå¸¸é€‚åˆã€‚</p>
<h4 id="ç§˜é’¥æ³„æ¼é£æ§åˆ†æ" class="headerLink">
    <a href="#%e7%a7%98%e9%92%a5%e6%b3%84%e6%bc%8f%e9%a3%8e%e6%8e%a7%e5%88%86%e6%9e%90" class="header-mark"></a>4.5.1 ç§˜é’¥æ³„æ¼é£æ§åˆ†æ</h4><p>å…ˆçœ‹ä¸€ä¸ªç§˜é’¥æ³„æ¼çš„åœºæ™¯ï¼šå‡è®¾ <code>key-0</code> è¢«å®‰å…¨éƒ¨é—¨ç¡®å®šè¢«æ³„æ¼äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯«ç§’æ—¶é—´å†…è·å¾—å¦‚ä¸‹æŸ¥è¯¢ï¼š</p>
<ul>
<li>ç›´æ¥é‡‡ç”¨äº†å¯†é’¥çš„è™šæœº</li>
<li>ä¸é‡‡ç”¨ç§˜é’¥çš„è™šæœºç½‘ç»œç›´è¿çš„æœºå™¨</li>
<li>ä¸é‡‡ç”¨ç§˜é’¥çš„è™šæœºè·¨ç½‘ç»œç›¸è¿çš„æœºå™¨</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">key_leaked</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="o">`</span><span class="n">used_by</span><span class="o">`</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">involved_server</span><span class="p">:</span><span class="n">nova_instance</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">net</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">server_b</span><span class="p">:</span><span class="n">nova_instance</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">key_leaked</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;key-0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">server_b</span><span class="p">)</span><span class="o">--</span><span class="p">()</span><span class="o">--</span><span class="p">(</span><span class="n">other_net</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">server_c</span><span class="p">:</span><span class="n">nova_instance</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WITH</span><span class="w"> </span><span class="n">involved_server</span><span class="p">,</span><span class="w"> </span><span class="n">server_b</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">same_subnet_machines</span><span class="p">,</span><span class="w"> </span><span class="n">server_c</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">cross_net_machines</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">WHERE</span><span class="w"> </span><span class="n">cross_net_machines</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">involved_server</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="n">involved_server</span><span class="p">.</span><span class="n">nova_instance</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">with_key</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">same_subnet_machines</span><span class="p">.</span><span class="n">nova_instance</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">l2_vms</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">cross_net_machines</span><span class="p">.</span><span class="n">nova_instance</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">cross_vpc_vms</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è´´ä¸€ä¸‹éƒ¨åˆ†ç»“æœï¼Œæˆ‘ä»¬çŸ¥é“ server-4 é‡‡ç”¨äº†è¿™ä¸ª keypairï¼Œå¹¶ä¸” server-6 å’Œå®ƒåœ¨åŒä¸€ä¸ªç½‘ç»œï¼ŒåŒæ—¶ï¼Œæœ‰ä¸€å®šå¯èƒ½ï¼Œé€šè¿‡ server-6ï¼Œserver-1,2,0,5 ä¹Ÿå—åˆ°äº†å¨èƒã€å½±å“ï¼Œç›¸å…³çš„æœºå™¨å¯ä»¥è¢«è§¦å‘ä¸åŒçº§åˆ«çš„å‘Šè­¦æ¥é™ä½å®‰å…¨äº‹æ•…çš„å½±å“ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:left">with_key</th>
<th style="text-align:left">l2_vms</th>
<th style="text-align:left">cross_vpc_vms</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">server-4</td>
<td style="text-align:left">server-6</td>
<td style="text-align:left">server-1</td>
</tr>
<tr>
<td style="text-align:left">server-4</td>
<td style="text-align:left">server-6</td>
<td style="text-align:left">server-2</td>
</tr>
<tr>
<td style="text-align:left">server-4</td>
<td style="text-align:left">server-6</td>
<td style="text-align:left">server-0</td>
</tr>
<tr>
<td style="text-align:left">server-4</td>
<td style="text-align:left">server-6</td>
<td style="text-align:left">server-5</td>
</tr>
</tbody>
</table>
<p>è¿™ä¸ªæŸ¥è¯¢æ”¹é€ ä¸ºå¯è§†åŒ–ç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="n">key_leaked</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="o">`</span><span class="n">used_by</span><span class="o">`</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">involved_server</span><span class="p">:</span><span class="n">nova_instance</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">net</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">server_b</span><span class="p">:</span><span class="n">nova_instance</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">key_leaked</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;key-0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="n">p1</span><span class="o">=</span><span class="p">(</span><span class="n">server_b</span><span class="p">)</span><span class="o">--</span><span class="p">()</span><span class="o">--</span><span class="p">(</span><span class="n">other_net</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="o">--</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">--</span><span class="p">(</span><span class="n">server_c</span><span class="p">:</span><span class="n">nova_instance</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="n">p1</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ explorer é‡Œ åº”ç”¨ Dagre-LR çš„å¸ƒå±€ï¼Œä¸€å…³è”å…³ç³»å¾ˆæ¸…æ™°çš„è¢«å±•ç¤ºå‡ºæ¥ï¼Œä¹Ÿè®¸å¯ä»¥è€ƒè™‘æŠŠå®ƒå¼•ç”¨åœ¨å®‰å…¨äº‹æ•…çš„æŠ¥å‘Šåˆ†å‘ç»™è™šæœºç§Ÿæˆ·ã€‚</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/key_leaked.webp"
        srcset="/graph-enabled-infra-ops/key_leaked.webp, /graph-enabled-infra-ops/key_leaked.webp 1.5x, /graph-enabled-infra-ops/key_leaked.webp 2x"
        sizes="auto"
        alt="key_leaked"
        title="key_leaked" height="2334"   width="4064" ></figure></p>
<h4 id="é•œåƒäº‘ç›˜æ¼æ´èŒƒå›´åˆ†æ" class="headerLink">
    <a href="#%e9%95%9c%e5%83%8f%e4%ba%91%e7%9b%98%e6%bc%8f%e6%b4%9e%e8%8c%83%e5%9b%b4%e5%88%86%e6%9e%90" class="header-mark"></a>4.5.2 é•œåƒã€äº‘ç›˜æ¼æ´èŒƒå›´åˆ†æ</h4><p>ç±»ä¼¼çš„ï¼Œä¸€ä¸ªé•œåƒè¢«æ‰«å‡ºæ¼æ´ï¼Œæˆ‘ä»¬å¯ä»¥ç¬é—´æŸ¥åˆ°æ¶‰åŠåˆ°çš„èµ„æºï¼Œå¹¶åšå‡ºç›¸åº”</p>
<ul>
<li>é•œåƒæ–‡ä»¶æœ‰æ¼æ´</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="n">image_risky</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="o">`</span><span class="n">created_from</span><span class="o">`</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">step1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">image_risky</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;cirros-0.5.2-x86_64-disk&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="n">p1</span><span class="o">=</span><span class="p">(</span><span class="n">step1</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="n">created_from</span><span class="o">*</span><span class="mi">1</span><span class="p">..</span><span class="mi">5</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">step2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">p1</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/image_vulnerability.webp"
        srcset="/graph-enabled-infra-ops/image_vulnerability.webp, /graph-enabled-infra-ops/image_vulnerability.webp 1.5x, /graph-enabled-infra-ops/image_vulnerability.webp 2x"
        sizes="auto"
        alt="image_vulnerability"
        title="image_vulnerability" height="2334"   width="4064" ></figure></p>
<ul>
<li>ä¸€ä¸ªäº‘ç›˜æœ‰æ¼æ´</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="n">volume_risky</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="o">`</span><span class="n">created_from</span><span class="o">`</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">step1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">volume_risky</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;volume-1&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="n">p1</span><span class="o">=</span><span class="p">(</span><span class="n">step1</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="n">created_from</span><span class="o">*</span><span class="mi">1</span><span class="p">..</span><span class="mi">5</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">step2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">p1</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/volume_vulnerability.webp"
        srcset="/graph-enabled-infra-ops/volume_vulnerability.webp, /graph-enabled-infra-ops/volume_vulnerability.webp 1.5x, /graph-enabled-infra-ops/volume_vulnerability.webp 2x"
        sizes="auto"
        alt="volume_vulnerability"
        title="volume_vulnerability" height="2334"   width="4064" ></figure></p>
<h4 id="æ½œåœ¨å®¿ä¸»æœºé€ƒç¦»å½±å“èŒƒå›´åˆ†æ" class="headerLink">
    <a href="#%e6%bd%9c%e5%9c%a8%e5%ae%bf%e4%b8%bb%e6%9c%ba%e9%80%83%e7%a6%bb%e5%bd%b1%e5%93%8d%e8%8c%83%e5%9b%b4%e5%88%86%e6%9e%90" class="header-mark"></a>4.5.3 æ½œåœ¨å®¿ä¸»æœºé€ƒç¦»å½±å“èŒƒå›´åˆ†æ</h4><p>æœ€åï¼Œæˆ‘ä»¬è®¨è®ºä¸€ä¸ªæ¯”è¾ƒä¸¥é‡çš„å®‰å…¨é—®é¢˜ï¼šå®¿ä¸»æœºé€ƒç¦»ã€‚</p>
<p>åœ¨æç«¯çš„æƒ…å†µä¸‹å¦‚æœåœ¨æˆ‘ä»¬å¾—åˆ°æ¶ˆæ¯ï¼Œ<code>server-0</code> å‘ç”Ÿäº†æœ‰å¯èƒ½å½±å“å®¿ä¸»æœºçš„å®‰å…¨æ—¶é—´çš„æ—¶å€™ï¼Œä»…ä»…å…³é—­è¿™ä¸ªå®¿ä¸»æœºæ˜¯ä¸å¤Ÿçš„ï¼Œå—å½±å“çš„èŒƒå›´å¯èƒ½å·²ç»æ‰©å¤§äº†ï¼Œç„¶è€Œï¼Œæˆ‘ä»¬ä¸å¯èƒ½å› ä¸ºè¿™æ ·å…³é—­æ•´ä¸ªæœºæˆ¿ï¼Œæ‰€ä»¥ï¼Œåˆ©ç”¨å›¾è°±è¾…åŠ©æ‰¾å‡ºå—å½±å“èŒƒå›´ä¼šæœ‰ä¸€äº›å¸®åŠ©ã€‚</p>
<p>ä¸‹é¢çš„æŸ¥è¯¢æ¨¡å¼æ˜¯ï¼š</p>
<ul>
<li>æ‰¾å‡ºå¯èƒ½è¢«å½±å“çš„å­ç½‘ï¼ˆVPCï¼‰ï¼Œæ ‡è®°æœ€é«˜çº§åˆ«é£é™©å­ç½‘ä¸ºåç»­å®šä½åšå‡†å¤‡</li>
<li>æ‰¾åˆ°å¯èƒ½è¢«æ§åˆ¶äº†çš„å®¿ä¸»æœº</li>
<li>ä»å®¿ä¸»æœºè§¦å‘ï¼Œæ‰¾å‡ºåŒä¸»æœºçš„å…¶ä»–è™šæœº</li>
<li>ä»å…¶ä»–è™šæœºè§¦å‘ï¼Œæ‰¾åˆ°å®ƒä»¬çš„å­ç½‘ï¼ˆVPCï¼‰</li>
<li>ä»å…¶ä»–è™šæœºè§¦å‘ï¼Œæ‰¾åˆ°å¯èƒ½å·²ç»è¢«å½±å“çš„ç½‘ç›˜ï¼ˆé˜²æ­¢è¢«æŒ‚è½½åˆ°å…¶ä»–æœºå™¨ï¼Œæ‰©å¤§å½±å“ï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">server_escaping_hypervisor</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="o">`</span><span class="n">contains</span><span class="o">`</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">hypervisor_compromised</span><span class="p">:</span><span class="n">nova_host</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">server_escaping_hypervisor</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;server-0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">server_escaping_hypervisor</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="n">attached</span><span class="p">]</span><span class="o">-</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="n">contains</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">impacted_subnet_high</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">hypervisor_compromised</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="o">`</span><span class="n">contains</span><span class="o">`</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">server_same_host</span><span class="p">:</span><span class="n">nova_instance</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">server_same_host</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="n">attached</span><span class="p">]</span><span class="o">-</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="n">contains</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">impacted_subnet</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">server_same_host</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="n">attached</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">impacted_volume</span><span class="p">:</span><span class="n">cinder_volume</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="n">impacted_subnet_high</span><span class="p">.</span><span class="n">neutron_network</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">impacted_subnet_high</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">hypervisor_compromised</span><span class="p">.</span><span class="n">nova_host</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">hypervisor_compromised</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">impacted_subnet</span><span class="p">.</span><span class="n">neutron_network</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">impacted_subnet</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">[</span><span class="n">server_same_host</span><span class="p">.</span><span class="n">nova_instance</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">server_same_host</span><span class="p">.</span><span class="n">nova_instance</span><span class="p">.</span><span class="n">instance_name</span><span class="p">]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">server_same_host</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">impacted_volume</span><span class="p">.</span><span class="n">cinder_volume</span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">impacted_volume</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç»“æœä¸­åˆ—å‡ºäº† server-0 è¢«æ§åˆ¶ä¹‹åï¼Œè€ƒè™‘å®¿ä¸»æœºé€ƒç¦»çš„æƒ…å†µä¸‹å¯èƒ½å—å½±å“çš„æ‰©æ•£èŒƒå›´ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:left">impacted_subnet_high</th>
<th style="text-align:left">hypervisor_compromised</th>
<th style="text-align:left">impacted_subnet</th>
<th style="text-align:left">server_same_host</th>
<th style="text-align:left">impacted_volume</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">shared</td>
<td style="text-align:left">node0</td>
<td style="text-align:left">shared</td>
<td style="text-align:left">[&ldquo;server-0&rdquo;, &ldquo;instance-00000001&rdquo;]</td>
<td style="text-align:left"><strong>Empty</strong></td>
</tr>
<tr>
<td style="text-align:left">shared</td>
<td style="text-align:left">node0</td>
<td style="text-align:left">shared</td>
<td style="text-align:left">[&ldquo;server-1&rdquo;, &ldquo;instance-00000002&rdquo;]</td>
<td style="text-align:left">ffaeb199-47f4-4d95-89b2-97fba3c1bcfe</td>
</tr>
<tr>
<td style="text-align:left">shared</td>
<td style="text-align:left">node0</td>
<td style="text-align:left">private</td>
<td style="text-align:left">[&ldquo;server-1&rdquo;, &ldquo;instance-00000002&rdquo;]</td>
<td style="text-align:left">ffaeb199-47f4-4d95-89b2-97fba3c1bcfe</td>
</tr>
<tr>
<td style="text-align:left">shared</td>
<td style="text-align:left">node0</td>
<td style="text-align:left">private</td>
<td style="text-align:left">[&ldquo;server-3&rdquo;, &ldquo;instance-00000005&rdquo;]</td>
<td style="text-align:left">c9db7c2e-c712-49d6-8019-14b82de8542d</td>
</tr>
<tr>
<td style="text-align:left">shared</td>
<td style="text-align:left">node0</td>
<td style="text-align:left">private</td>
<td style="text-align:left">[&ldquo;server-3&rdquo;, &ldquo;instance-00000005&rdquo;]</td>
<td style="text-align:left">volume-2</td>
</tr>
<tr>
<td style="text-align:left">shared</td>
<td style="text-align:left">node0</td>
<td style="text-align:left">public</td>
<td style="text-align:left">[&ldquo;server-4&rdquo;, &ldquo;instance-00000006&rdquo;]</td>
<td style="text-align:left">volume-2</td>
</tr>
</tbody>
</table>
<p>å’±ä»¬å†çœ‹çœ‹å®ƒçš„å¯è§†åŒ–ç»“æœã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">MATCH</span><span class="w"> </span><span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="n">server_escaping_hypervisor</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="o">`</span><span class="n">contains</span><span class="o">`</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">hypervisor_compromised</span><span class="p">:</span><span class="n">nova_host</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="n">server_escaping_hypervisor</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;server-0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="n">p0</span><span class="o">=</span><span class="p">(</span><span class="n">server_escaping_hypervisor</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="n">attached</span><span class="p">]</span><span class="o">-</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="n">contains</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">impacted_subnet_high</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="n">p1</span><span class="o">=</span><span class="p">(</span><span class="n">hypervisor_compromised</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="o">`</span><span class="n">contains</span><span class="o">`</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">server_same_host</span><span class="p">:</span><span class="n">nova_instance</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="n">p2</span><span class="o">=</span><span class="p">(</span><span class="n">server_same_host</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="n">attached</span><span class="p">]</span><span class="o">-</span><span class="p">(:</span><span class="n">neutron_port</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="n">contains</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">impacted_subnet</span><span class="p">:</span><span class="n">neutron_network</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="n">p3</span><span class="o">=</span><span class="p">(</span><span class="n">server_same_host</span><span class="p">)</span><span class="o">&lt;-</span><span class="p">[:</span><span class="n">attached</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">impacted_volume</span><span class="p">:</span><span class="n">cinder_volume</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RETURN</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="n">p0</span><span class="p">,</span><span class="n">p1</span><span class="p">,</span><span class="n">p2</span><span class="p">,</span><span class="n">p3</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>é€‰æ‹© Dagre å¸ƒå±€ä¹‹åï¼Œå¯ä»¥æ¯”è¾ƒæ¸…æ™°çœ‹å‡ºå½±å“èµ„æºçš„èŒƒå›´ï¼Œä»è¿™äº›å¯èƒ½å—å½±å“çš„è™šæœºã€ç½‘ç»œã€ç½‘ç›˜å‡ºå‘ï¼Œå¯ä»¥è¿›ä¸€æ­¥é‡‡å–éœ€è¦çš„æªæ–½äº†ã€‚</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/hypervisor_escape.webp"
        srcset="/graph-enabled-infra-ops/hypervisor_escape.webp, /graph-enabled-infra-ops/hypervisor_escape.webp 1.5x, /graph-enabled-infra-ops/hypervisor_escape.webp 2x"
        sizes="auto"
        alt="hypervisor_escape"
        title="hypervisor_escape" height="2334"   width="4064" ></figure></p>
<h3 id="é‡ç‚¹å…³æ³¨èµ„æºæ£€æµ‹" class="headerLink">
    <a href="#%e9%87%8d%e7%82%b9%e5%85%b3%e6%b3%a8%e8%b5%84%e6%ba%90%e6%a3%80%e6%b5%8b" class="header-mark"></a>4.6 é‡ç‚¹å…³æ³¨èµ„æºæ£€æµ‹</h3><p>æœ€åï¼Œåˆ©ç”¨ Betweenness Centrality ç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºåŸºç¡€è®¾æ–½ä¸­å½±å“é¢å¤§çš„é‚£äº›ï¼Œâ€è„†å¼±ç¯èŠ‚â€œï¼Œè¿™äº›èµ„æºä¸ä¸€å®šçœŸçš„å¤„åœ¨å±é™©çš„çŠ¶æ€ï¼Œåªæ˜¯è¯´ï¼Œå®ƒä»¬å¤„åœ¨äº†æ¯”è¾ƒé‡è¦çš„èµ„æºä¹‹é—´çš„äº¤æ±‡å¤„ï¼Œä¸€æ—¦å®ƒä»¬å‡ºé—®é¢˜ï¼Œå‡ºé—®é¢˜çš„ä»£ä»·å¯èƒ½ä¼šéå¸¸å¤§ã€‚</p>
<p>è¯†åˆ«å‡ºè¿™æ ·çš„èµ„æºä¹‹åæˆ‘ä»¬å¯ä»¥è€ƒè™‘ï¼š</p>
<ul>
<li>æœ‰é’ˆå¯¹æ€§é‡‡ç”¨æ›´æ¿€è¿›ã€æ˜‚è´µçš„å¥åº·æ£€æŸ¥ç­–ç•¥ï¼›</li>
<li>è®¾å®šæ›´é«˜çš„æ”¯æŒã€å…³åˆ‡çº§åˆ«ï¼›</li>
<li>ä¸»åŠ¨è¿ç§»ç›¸å…³è”çš„èµ„æºä»¥é™ä½â€è„†å¼±ç¯èŠ‚â€œå¯¹æ•´ä½“åŸºç¡€è®¾æ–½å¯ç”¨æ€§çš„å½±å“èŒƒå›´ï¼›</li>
</ul>
<p>è¿™æ¬¡ï¼Œæˆ‘ä»¬å°±åªåœ¨æµè§ˆå™¨å†…éƒ¨çš„å­å›¾ä¸Šåšç®—æ³•æµç¨‹éªŒè¯ï¼Œè¯»è€…æœ‹å‹ä»¬å¯ä»¥è‡ªå·±è¯•ç€åˆ©ç”¨å¼€æºçš„ NebulaGraph Algorithm æˆ–è€…ä»˜è´¹çš„ NebulaGraph Workflow+Analytics åšå…¨å›¾ä¸Šçš„ç­‰ä»·æ“ä½œã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨å‰è¾¹ç”¨è¿‡çš„æ–¹å¼å»æ‰«æå›¾ä¸Š 1000 ä¸ªç‚¹ï¼Œå¹¶ä¸”ä»å…¶å‡ºå‘ï¼Œè·³ä¸€è·³ï¼Œè·å¾—ä¸€ä¸ªæ¯”è¾ƒéšæœºçš„å­å›¾ï¼Œåœ¨æˆ‘ä»¬å½“å‰çš„æ•°æ®é›†ä¸‹ï¼Œè¿™å®é™…ä¸Šæå–äº†å…¨å›¾çš„æ•°æ®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">MATCH (n) WITH n LIMIT 1000
</span></span><span class="line"><span class="cl">OPTIONAL MATCH p=(n)--()
</span></span><span class="line"><span class="cl">RETURN p, n
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨å…¶ä¹‹ä¸Šï¼Œæˆ‘ä»¬è¿è¡Œ Betweenness Centrality ä¹‹åï¼Œå¾—åˆ° <code>node0</code> æ˜¯åˆ†å€¼æœ€å¤§çš„â€è„†å¼±ä¸€ç¯â€œï¼Œçš„ç¡®ï¼Œå®ƒæ˜¯æˆ‘ä»¬å½“å‰å®éªŒä¸­è´Ÿè½½æœ€å¤§çš„å®¿ä¸»æœºï¼Œå¯ä»¥æƒ³è±¡å®ƒç¡®å®æ˜¯æ•…éšœä¹‹åå…¨å±€å½±å“æœ€å¤§çš„ä¸€ä¸ªèµ„æºã€‚</p>
<p><figure><img
        
        loading="lazy"
        src="/graph-enabled-infra-ops/bwteeness_centrality.webp"
        srcset="/graph-enabled-infra-ops/bwteeness_centrality.webp, /graph-enabled-infra-ops/bwteeness_centrality.webp 1.5x, /graph-enabled-infra-ops/bwteeness_centrality.webp 2x"
        sizes="auto"
        alt="bwteeness_centrality"
        title="bwteeness_centrality" height="2334"   width="4064" ></figure></p>
<h2 id="æ€»ç»“" class="headerLink">
    <a href="#%e6%80%bb%e7%bb%93" class="header-mark"></a>5 æ€»ç»“</h2><p>åœ¨æµ·é‡æ•°æ®ã€ä¼ä¸šäº‘ã€æ··åˆäº‘çš„å¤æ‚åŸºç¡€è®¾æ–½è¿ç»´åœºæ™¯ä¸‹ï¼Œåˆ©ç”¨å›¾æ•°æ®åº“å›¾ç®—æ³•çš„èƒ½åŠ›åšé«˜æ•ˆçš„è¾…åŠ©è¿ç»´å·¥ä½œæ˜¯ä¸€ä¸ªååˆ†å€¼å¾—çš„å°è¯•ä¸æŠ€æœ¯æŠ•èµ„ã€‚</p>
<p>NebulaGraph ä½œä¸ºé«˜æ€§èƒ½ã€å¼€æºã€åˆ†å¸ƒå¼çš„æ–°ä¸€ä»£äº‘åŸç”Ÿå›¾æ•°æ®åº“ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå€¼å¾—è€ƒè™‘çš„å›¾åŸºç¡€è®¾æ–½é€‰å‹ç›®æ ‡ã€‚</p>
<p>æ¬¢è¿å¤§å®¶åœ¨æ–‡æœ«ç•™è¨€è®¨è®ºï¼Œæœ¬æ–‡çš„å¯å¤ç°ç¯å¢ƒå’Œç¤ºä¾‹çš„ ETL ç®¡é“çš„ä»£ç ã€ç¤ºä¾‹æ•°æ®å…¨éƒ½åœ¨ <a href="https://github.com/wey-gu/openstack-graph/" target="_blank" rel="noopener noreferrer">https://github.com/wey-gu/openstack-graph/</a> å¼€æºï¼Œæ¬¢è¿å¤§å®¶æ¥ä¸€èµ·å®Œå–„ã€‚</p>
<blockquote>
<p>é¢˜å›¾ç‰ˆæƒï¼š<a href="https://unsplash.com/photos/Wv2U24G2F78" target="_blank" rel="noopener noreferrer">Ivan</a></p>
</blockquote></div>

        


<h2>ç›¸å…³å†…å®¹</h2>
<div class="related-container">
    <div class="related-item-container">
            <div class="related-image">
                <a href="/graph-rag/"><img
        
        loading="lazy"
        src="/graph-rag/featured-image.webp"
        srcset="/graph-rag/featured-image.webp, /graph-rag/featured-image.webp 1.5x, /graph-rag/featured-image.webp 2x"
        sizes="auto"
        alt="å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚"
        title="å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚" height="200"   width="400" ></a>
            </div><h2 class="related-title">
                <a href="/graph-rag/">Graph RAG: çŸ¥è¯†å›¾è°±ç»“åˆ LLM çš„æ£€ç´¢å¢å¼º</a>
            </h2>
        </div>
    <div class="related-item-container">
            <h2 class="related-title">
                <a href="/demos/graph-rag/">Demoï¼šNebulaGraph çš„ Graph RAG</a>
            </h2>
        </div>
    <div class="related-item-container">
            <h2 class="related-title">
                <a href="/demos/text2cypher/">Demoï¼šNebulaGraph çš„çŸ¥è¯†å›¾è°±æ„å»ºä¸ Text2Cypher</a>
            </h2>
        </div>
    <div class="related-item-container">
            <div class="related-image">
                <a href="/llm-text-to-nebulagraph-query/"><img
        
        loading="lazy"
        src="/llm-text-to-nebulagraph-query/featured-image.webp"
        srcset="/llm-text-to-nebulagraph-query/featured-image.webp, /llm-text-to-nebulagraph-query/featured-image.webp 1.5x, /llm-text-to-nebulagraph-query/featured-image.webp 2x"
        sizes="auto"
        alt="å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚"
        title="å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚" height="200"   width="400" ></a>
            </div><h2 class="related-title">
                <a href="/llm-text-to-nebulagraph-query/">Text2Cypherï¼šå¤§è¯­è¨€æ¨¡å‹é©±åŠ¨çš„å›¾è°±æŸ¥è¯¢ç”Ÿæˆ</a>
            </h2>
        </div>
    <div class="related-item-container">
            <div class="related-image">
                <a href="/nebulagraph-in-jupyter-notebook/"><img
        
        loading="lazy"
        src="/nebulagraph-in-jupyter-notebook/featured-image.webp"
        srcset="/nebulagraph-in-jupyter-notebook/featured-image.webp, /nebulagraph-in-jupyter-notebook/featured-image.webp 1.5x, /nebulagraph-in-jupyter-notebook/featured-image.webp 2x"
        sizes="auto"
        alt="å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚"
        title="å›¾æŠ€æœ¯åœ¨å¤§å‹ã€å¤æ‚åŸºç¡€è®¾æ–½ä¹‹ä¸­ SRE/DevOps çš„å®è·µå‚è€ƒï¼Œæœ¬æ–‡ä»¥ OpenStack ç³»ç»Ÿä¹‹ä¸Šçš„å›¾æ•°æ®åº“å¢å¼ºçš„è¿ç»´æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæ­ç¤ºå›¾æ•°æ®åº“ã€å›¾ç®—æ³•çš„æ™ºèƒ½è¿ç»´æ–¹æ³•ï¼Œå…¨æµç¨‹ç¤ºä¾‹ä»£ç å¼€æºã€‚" height="200"   width="400" ></a>
            </div><h2 class="related-title">
                <a href="/nebulagraph-in-jupyter-notebook/">NebulaGraph in Jupyter Notebook</a>
            </h2>
        </div>
    

</div>

<div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2023-01-13&nbsp;<a class="git-hash" href="github.com/siwei-io/siwei-io.github.io/commit/cfb7e7ef6205ba014643e0125519bf4065eda1c8" target="_blank" title="commit by wey-gu(1651790&#43;wey-gu@users.noreply.github.com) cfb7e7ef6205ba014643e0125519bf4065eda1c8: openstack graph" rel="noopener noreferrer">
                                    <i class="fas fa-hashtag fa-fw"></i>cfb7e7e</a></span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span><a class="link-to-mardown" href=/graph-enabled-infra-ops/index.md target="_blank" rel="noopener noreferrer">é˜…è¯»åŸå§‹æ–‡æ¡£</a>
                    </span><span>|&nbsp;<a class="link-to-report" href=https://github.com/siwei-io/siwei-io.github.io/issues/new?title=[bug]%20%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E8%BF%90%E7%BB%B4%E7%A4%BA%E4%BE%8B&body=|Field|Value|%0A|-|-|%0A|Title|%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E8%BF%90%E7%BB%B4%E7%A4%BA%E4%BE%8B|%0A|Url|https://siwei.io/graph-enabled-infra-ops/|%0A|Filename|posts/graph-enabled-infra-ops/index.md| target="_blank" rel="noopener noreferrer">æŠ¥å‘Šé—®é¢˜</a>
                    </span></div>
            <div class="post-info-share"><button title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://siwei.io/graph-enabled-infra-ops/" data-title="å›¾æ•°æ®åº“é©±åŠ¨çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹" data-via="wey_gu" data-hashtags="Nebula Graph,DevOps,OpenStack,æ™ºèƒ½è¿ç»´,RCA"><span class="fab fa-twitter fa-fw"></span></button><button title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="https://siwei.io/graph-enabled-infra-ops/" data-hashtag="Nebula Graph"><span class="fab fa-facebook-square fa-fw"></span></button><button title="åˆ†äº«åˆ° Hacker News" data-sharer="hackernews" data-url="https://siwei.io/graph-enabled-infra-ops/" data-title="å›¾æ•°æ®åº“é©±åŠ¨çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹"><span class="fab fa-hacker-news fa-fw"></span></button><button title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="https://siwei.io/graph-enabled-infra-ops/" data-title="å›¾æ•°æ®åº“é©±åŠ¨çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹"><span data-svg-src="/lib/simple-icons/icons/line.min.svg"></span></button><button title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://siwei.io/graph-enabled-infra-ops/" data-title="å›¾æ•°æ®åº“é©±åŠ¨çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹" data-image="featured-image.webp" data-ralateuid="siweigu"><span class="fab fa-weibo fa-fw"></span></button><button title="åˆ†äº«åˆ° Telegram" data-sharer="telegram" data-url="https://siwei.io/graph-enabled-infra-ops/" data-title="å›¾æ•°æ®åº“é©±åŠ¨çš„åŸºç¡€è®¾æ–½è¿ç»´ç¤ºä¾‹" data-web><span class="fab fa-telegram-plane fa-fw"></span></button></div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/nebula-graph/">Nebula Graph</a>,&nbsp;<a href="/tags/devops/">DevOps</a>,&nbsp;<a href="/tags/openstack/">OpenStack</a>,&nbsp;<a href="/tags/%E6%99%BA%E8%83%BD%E8%BF%90%E7%BB%B4/">æ™ºèƒ½è¿ç»´</a>,&nbsp;<a href="/tags/rca/">RCA</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/build-open-communication-infra/" class="prev" rel="prev" title="è¿æ¥å¾®ä¿¡ç¾¤ã€Slack å’Œ GitHubï¼šç¤¾åŒºå¼€æ”¾æ²Ÿé€šçš„åŸºç¡€è®¾æ–½æ­å»º"><i class="fas fa-angle-left fa-fw"></i>è¿æ¥å¾®ä¿¡ç¾¤ã€Slack å’Œ GitHubï¼šç¤¾åŒºå¼€æ”¾æ²Ÿé€šçš„åŸºç¡€è®¾æ–½æ­å»º</a>
            <a href="/nebulagraph-ai-suite/" class="next" rel="next" title="Nebulagraph Artificial Intelligence Suite">Nebulagraph Artificial Intelligence Suite<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="giscus"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://giscus.app/">giscus</a>.
            </noscript></div></article></div>
        </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">
                    ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer" title="Hugo 0.120.4">Hugo</a> å¼ºåŠ›é©±åŠ¨&nbsp;|&nbsp;ä¸»é¢˜ - <a href="https://github.com/HEIGE-PCloud/DoIt" target="_blank" rel="noopener noreferrer" title="DoIt 0.4.0"><i class="far fa-edit fa-fw"></i> DoIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2018 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://siwei.io" target="_blank" rel="noopener noreferrer">Wey Gu</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
            <div class="footer-line"></div>
            <div class="footer-line">
            </div>
        </div><script>
                    if('serviceWorker' in navigator) {
                        navigator.serviceWorker
                            .register('/sw.min.js', { scope: '/' })
                            .then(function(registration) {
                            });
                
                        navigator.serviceWorker
                            .ready
                            .then(function(registration) {
                            });
                    }
                </script></footer></div>

    <div id="fixed-buttons"><a href="#back-to-top" id="back-to-top-button" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
            <i class="fas fa-arrow-up fa-fw"></i>
        </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
            <i class="fas fa-comment fa-fw"></i>
        </a>
    </div><div class="assets"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/katex/copy-tex.min.css">
        <noscript><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"></noscript><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":10},"comment":{"giscus":{"darkTheme":"dark","dataCategory":"Comments","dataCategoryId":"DIC_kwDOFhiy8c4CQeuu","dataEmitMetadata":"1","dataInputPosition":"bottom","dataLang":"en","dataMapping":"title","dataReactionsEnabled":"1","dataRepo":"siwei-io/siwei-io.github.io","dataRepoId":"MDEwOlJlcG9zaXRvcnkzNzA3MTc0MjU=","dataStrict":"1","lightTheme":"light"}},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":true,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":300,"threshold":0.1,"type":"fuse","useExtendedSearch":false},"sharerjs":true,"table":{"sort":true}};</script><script type="text/javascript" src="/lib/tablesort/tablesort.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js" defer></script><script type="text/javascript" src="/lib/katex/auto-render.min.js" defer></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js" defer></script><script type="text/javascript" src="/lib/katex/mhchem.min.js" defer></script><script type="text/javascript" src="/js/katex.min.js" defer></script><script type="text/javascript" src="/js/theme.min.js" defer></script><script type="text/javascript" src="/js/giscus.min.js" defer></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-DYTTVYCRS2', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-DYTTVYCRS2" async></script></div>
</body>

</html>

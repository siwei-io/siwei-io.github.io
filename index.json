[{"categories":["Nebula Graph"],"content":"æ‰¾ä¸åˆ°ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆæˆ‘è¦åˆ›å»º Nebula Graph ç´¢å¼•ï¼Ÿä»€ä¹ˆæ—¶å€™è¦ç”¨åˆ° Nebula Graph åŸç”Ÿç´¢å¼•ï¼Œä¸€æ–‡æŠŠè¿™äº›ææ¸…æ¥šã€‚","date":"2022-02-20","objectID":"/nebula-index-explained/","series":null,"tags":["Nebula Graph","index","å…¨æ–‡æœç´¢","å›¾æ•°æ®åº“"],"title":"Nebula Graph ç´¢å¼•è¯¦è§£","uri":"/nebula-index-explained/"},{"categories":["Nebula Graph"],"content":" index not found?æ‰¾ä¸åˆ°ç´¢å¼•ï¼Ÿä¸ºä»€ä¹ˆæˆ‘è¦åˆ›å»º Nebula Graph ç´¢å¼•ï¼Ÿä»€ä¹ˆæ—¶å€™è¦ç”¨åˆ° Nebula Graph åŸç”Ÿï¼Œä¸€æ–‡æŠŠè¿™äº›ææ¸…æ¥šã€‚ Nebula Graph çš„ç´¢å¼•å…¶å®å’Œä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ä¸­çš„ç´¢å¼•å¾ˆåƒï¼Œä½†æ˜¯åˆæœ‰ä¸€äº›å®¹æ˜“è®©äººç–‘æƒ‘çš„åŒºåˆ«ã€‚åˆšå¼€å§‹äº†è§£ Nebula çš„åŒå­¦ä¼šç–‘æƒ‘äºï¼š ä¸æ¸…æ¥š Nebula Graph å›¾æ•°æ®åº“ä¸­çš„ç´¢å¼•åˆ°çš„æ˜¯ä»€ä¹ˆæ¦‚å¿µ æˆ‘åº”è¯¥ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ Nebula Graph ç´¢å¼• Nebula Graph ç´¢å¼•æ€ä¹ˆå½±å“åˆ°å†™å…¥æ€§èƒ½ è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä»¬å°±æŠŠè¿™äº›é—®é¢˜å›ç­”å¥½ã€‚ ","date":"2022-02-20","objectID":"/nebula-index-explained/:0:0","series":null,"tags":["Nebula Graph","index","å…¨æ–‡æœç´¢","å›¾æ•°æ®åº“"],"title":"Nebula Graph ç´¢å¼•è¯¦è§£","uri":"/nebula-index-explained/#"},{"categories":["Nebula Graph"],"content":"åˆ°åº• Nebula Graph ç´¢å¼•æ˜¯ä»€ä¹ˆç®€è€Œè¨€ä¹‹ï¼ŒNebula Graph ç´¢å¼•æ˜¯ç”¨æ¥ï¼Œä¸”åªç”¨æ¥é’ˆå¯¹çº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢åœºæ™¯çš„ å›¾æ¸¸èµ°ï¼ˆwalkï¼‰æŸ¥è¯¢ä¸­çš„å±æ€§æ¡ä»¶è¿‡æ»¤ä¸éœ€è¦å®ƒ çº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢ï¼ˆæ³¨ï¼šéé‡‡æ ·æƒ…å†µï¼‰å¿…é¡»åˆ›å»ºç´¢å¼• ","date":"2022-02-20","objectID":"/nebula-index-explained/:1:0","series":null,"tags":["Nebula Graph","index","å…¨æ–‡æœç´¢","å›¾æ•°æ®åº“"],"title":"Nebula Graph ç´¢å¼•è¯¦è§£","uri":"/nebula-index-explained/#åˆ°åº•-nebula-graph-ç´¢å¼•æ˜¯ä»€ä¹ˆ"},{"categories":["Nebula Graph"],"content":"çº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢æˆ‘ä»¬çŸ¥é“åœ¨ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œç´¢å¼•æ˜¯å¯¹è¡¨æ•°æ®çš„ä¸€ä¸ªé’ˆå¯¹ç‰¹å®šåˆ—é‡æ’åºçš„å‰¯æœ¬ï¼Œå®ƒç”¨æ¥åŠ é€Ÿç‰¹å®šåˆ—è¿‡æ»¤æ¡ä»¶çš„è¯»æŸ¥è¯¢å¹¶å¸¦æ¥äº†é¢å¤–çš„æ•°æ®å†™å…¥ï¼ˆåŠ é€Ÿè€Œéè¿™æ ·æŸ¥è¯¢çš„å¿…é¡»å‰æï¼‰ã€‚ åœ¨ Nebula Graph å›¾æ•°æ®åº“é‡Œï¼Œç´¢å¼•åˆ™æ˜¯å¯¹ç‚¹ã€è¾¹ç‰¹å®šå±æ€§æ•°æ®é‡æ’åºçš„å‰¯æœ¬ï¼Œç”¨æ¥æä¾›çº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢ï¼ˆå¦‚ä¸‹è¾¹çš„æŸ¥è¯¢ï¼šä»åªç»™å®šäº†ç‚¹è¾¹å±æ€§æ¡ä»¶ï¼Œè€Œéç‚¹çš„ ID å‡ºå‘å»è·å–å›¾æ•°æ®ï¼‰ ####å¿…é¡»NebulaGraphç´¢å¼•å­˜åœ¨çš„æŸ¥è¯¢#query0çº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢LOOKUPONtag1WHEREcol1\u003e1ANDcol2==\"foo\"\\YIELDtag1.col1ascol1,tag1.col3ascol3;#query1çº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢MATCH(v:player{name:'Tim Duncan'})--\u003e(v2:player) \\ RETURNv2.player.nameASName; ä¸Šè¾¹è¿™ä¸¤ä¸ªçº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢å°±æ˜¯å­—é¢æ„æ€çš„â€æ ¹æ®ç»™å®šçš„å±æ€§æ¡ä»¶è·å–ç‚¹æˆ–è€…è¾¹æœ¬èº«â€œ ï¼Œåé¢çš„ä¾‹å­åˆ™æ˜¯ç»™å®šäº†ç‚¹çš„ IDï¼š ####ä¸åŸºäºç´¢å¼•çš„æŸ¥è¯¢#query2,ä»ç»™å®šçš„ç‚¹åšçš„æ¸¸èµ°æŸ¥è¯¢vertexVID:\"player100\"GOFROM\"player100\"OVERfollowREVERSELY\\YIELDsrc(edge)ASid|\\GOFROM$-.idOVERserve\\WHEREproperties($^).age\u003e20\\YIELDproperties($^).nameASFriendOf,properties($$).nameASTeam;#query3,ä»ç»™å®šçš„ç‚¹åšçš„æ¸¸èµ°æŸ¥è¯¢vertexVID:\"player101\"æˆ–è€…\"player102\"MATCH(v:player{name:'Tim Duncan'})--(v2) \\ WHEREid(v2)IN[\"player101\",\"player102\"]\\RETURNv2.player.nameASName; æˆ‘ä»¬ä»”ç»†çœ‹å‰è¾¹çš„ query 1 å’Œ query 3ï¼Œå°½ç®¡è¯­å¥ä¸­æ¡ä»¶éƒ½æœ‰é’ˆå¯¹ tag ä¸º player çš„è¿‡æ»¤ï¼š { name: 'Tim Duncan' } ï¼š query 3ä¹‹ä¸­ä¸éœ€è¦ç´¢å¼•ï¼Œå› ä¸ºå®ƒå¯ä»¥ï¼š æ›´ç›´æ¥çš„ä»å·²çŸ¥çš„ v2 é¡¶ç‚¹ï¼š [\"player101\", \"player102\"] å‘å¤–æ‰©å±•ã€æ¸¸èµ°ï¼ˆGetNeighbors() è·å¾—è¾¹çš„å¦ä¸€ç«¯çš„ç‚¹ï¼Œç„¶åGetVertices() å¾—åˆ°ä¸‹ä¸€è·³çš„ vï¼‰ï¼Œæ ¹æ® v.player.name è¿‡æ»¤æ‰ä¸è¦çš„æ•°æ® query 1 åˆ™ä¸åŒï¼Œå®ƒå› ä¸ºæ²¡æœ‰ä»»ä½•ç»™å®šçš„é¡¶ç‚¹ IDï¼š åªèƒ½ä»å±æ€§æ¡ä»¶å…¥æ‰‹ï¼Œ{ name: 'Tim Duncan' }ï¼Œåœ¨æŒ‰ç…§ name æ’åºäº†çš„ç´¢å¼•æ•°æ®ä¸­å…ˆæ‰¾åˆ°ç¬¦åˆçš„ç‚¹ï¼šIndexScan() å¾—åˆ° v ç„¶åå†ä» v åš GetNeighbors() è·å¾—è¾¹çš„å¦ä¸€ç«¯ çš„ v2 ï¼Œåœ¨é€šè¿‡ GetVertices() å»è·å¾—ä¸‹ä¸€è·³ v2 ä¸­çš„æ•°æ® å…¶å®ï¼Œè¿™é‡Œçš„å…³é”®å°±æ˜¯åœ¨äºæ˜¯æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç»™å®šçš„é¡¶ç‚¹ IDï¼ˆVertex IDï¼‰ï¼Œä¸‹è¾¹ä¸¤ä¸ªæŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’é‡Œæ›´æ¸…æ™°åœ°æ¯”è¾ƒäº†ä»–ä»¬çš„åŒºåˆ«ï¼š query 1, éœ€è¦åŸºäºç´¢å¼•ï¼Œçº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢ query 3, ä»å·²çŸ¥ VIDï¼Œä¸éœ€è¦ç´¢å¼• ","date":"2022-02-20","objectID":"/nebula-index-explained/:1:1","series":null,"tags":["Nebula Graph","index","å…¨æ–‡æœç´¢","å›¾æ•°æ®åº“"],"title":"Nebula Graph ç´¢å¼•è¯¦è§£","uri":"/nebula-index-explained/#çº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢"},{"categories":["Nebula Graph"],"content":"ä¸ºä»€ä¹ˆçº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢é‡Œå¿…é¡»è¦ç´¢å¼•å‘¢ï¼Ÿå› ä¸º Nebula Graph åœ¨å­˜å‚¨æ•°æ®çš„æ—¶å€™ï¼Œå®ƒçš„ç»“æ„æ˜¯é¢å‘åˆ†å¸ƒå¼ä¸å…³è”å…³ç³»è®¾è®¡çš„ï¼Œç±»ä¼¼è¡¨ç»“æ„æ•°æ®åº“ä¸­æ— ç´¢å¼•çš„å…¨æ‰«ææ¡ä»¶æœç´¢å®é™…ä¸Šæ›´åŠ æ˜‚è´µï¼Œæ‰€ä»¥è®¾è®¡ä¸Šè¢«æœ‰æ„ç¦æ­¢äº†ã€‚ æ³¨: å¦‚æœä¸è¿½æ±‚å…¨éƒ¨æ•°æ®ï¼Œåªè¦é‡‡æ ·ä¸€éƒ¨åˆ†ï¼Œ3.0 é‡Œä¹‹åæ˜¯æ”¯æŒä¸å¼ºåˆ¶ç´¢å¼• LIMIT çš„æƒ…å†µçš„ï¼Œå¦‚ä¸‹æŸ¥è¯¢ï¼ˆæœ‰ LIMITï¼‰ä¸éœ€è¦ç´¢å¼•ï¼š MATCH (v:player { name: 'Tim Duncan' })--\u003e(v2:player) \\ RETURN v2.player.name AS Name LIMIT 3; ","date":"2022-02-20","objectID":"/nebula-index-explained/:1:2","series":null,"tags":["Nebula Graph","index","å…¨æ–‡æœç´¢","å›¾æ•°æ®åº“"],"title":"Nebula Graph ç´¢å¼•è¯¦è§£","uri":"/nebula-index-explained/#ä¸ºä»€ä¹ˆçº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢é‡Œå¿…é¡»è¦ç´¢å¼•å‘¢"},{"categories":["Nebula Graph"],"content":"ä¸ºä»€ä¹ˆåªæœ‰çº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢æˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹æ­£å¸¸çš„å›¾æŸ¥è¯¢ graph-queries å’Œçº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢ pure-prop-condition queriesï¼š graph-queriesï¼š å¦‚ query 2 ã€ query 3æ˜¯æ²¿ç€è¾¹ä¸€è·¯æ‰¾åˆ°ç‰¹å®šè·¯å¾„æ¡ä»¶çš„æ‰©å±•æ¸¸èµ° pure-prop-condition queriesï¼šå¦‚ query 0 and query 1 æ˜¯åªé€šè¿‡ä¸€å®šå±æ€§æ¡ä»¶ï¼ˆæˆ–è€…æ˜¯æ— é™åˆ¶æ¡ä»¶ï¼‰æ‰¾åˆ°æ»¡è¶³çš„ç‚¹ã€è¾¹ è€Œåœ¨ Nebula Graph é‡Œï¼Œgraph-queries åœ¨æ‰©å±•çš„æ—¶å€™ï¼Œå›¾çš„åŸå§‹æ•°æ®å·²ç»æŒ‰ç…§ VIDï¼ˆç‚¹å’Œè¾¹éƒ½æ˜¯ï¼‰æ’åºè¿‡äº†ï¼ˆæˆ–è€…è¯´åœ¨æ•°æ®é‡Œå·²ç»ç´¢å¼•è¿‡äº†ï¼‰ï¼Œè¿™ä¸ªæ’åºå¸¦æ¥è¿ç»­å­˜å‚¨ï¼ˆç‰©ç†ä¸Šä¸´æ¥ï¼‰ä½¿å¾—æ‰©å±•æ¸¸èµ°æœ¬èº«å°±æ˜¯ä¼˜åŒ–ã€å¾ˆå¿«çš„ã€‚ æ‰€ä»¥ï¼š Nebula Graph ç´¢å¼•æ˜¯ä¸ºäº†ä»ç»™å®šå±æ€§æ¡ä»¶æŸ¥ç‚¹ã€è¾¹çš„ä¸€ä»½å±æ€§æ•°æ®çš„æ’åºã€‚ ","date":"2022-02-20","objectID":"/nebula-index-explained/:1:3","series":null,"tags":["Nebula Graph","index","å…¨æ–‡æœç´¢","å›¾æ•°æ®åº“"],"title":"Nebula Graph ç´¢å¼•è¯¦è§£","uri":"/nebula-index-explained/#ä¸ºä»€ä¹ˆåªæœ‰çº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢"},{"categories":["Nebula Graph"],"content":"ä¸€äº› Nebula Graph ç´¢å¼•çš„è®¾è®¡ç»†èŠ‚ä¸ºäº†æ›´å¥½ç†è§£ç´¢å¼•çš„é™åˆ¶ã€ä»£ä»·ã€èƒ½åŠ›ï¼Œå’±ä»¬æ¥è§£é‡Šæ›´å¤šä»–çš„ç»†èŠ‚ Nebula Graph ç´¢å¼•æ˜¯åœ¨æœ¬åœ°ï¼ˆä¸æ˜¯åˆ†å¼€ã€ä¸­å¿ƒåŒ–ï¼‰å’Œç‚¹æ•°æ®è¢«ä¸€èµ·å­˜å‚¨ã€åˆ†ç‰‡çš„ã€‚ å®ƒåªæ”¯æŒå·¦åŒ¹é… å› ä¸ºåº•å±‚æ˜¯ RocksDB Prefix Scan æ€§èƒ½ä»£ä»·: å†™å…¥æ—¶å€™çš„è·¯å¾„ï¼šä¸åªæ˜¯å¤šä¸€åˆ†æ•°æ®ï¼Œä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œè¿˜æœ‰æ˜‚è´µçš„è¯»æ“ä½œ è¯»è·¯å¾„ï¼šåŸºäºè§„åˆ™çš„ä¼˜åŒ–é€‰æ‹©ç´¢å¼•ï¼ŒFan Out åˆ°æ‰€æœ‰ StorageD è¿™äº›ä¿¡æ¯ä¹Ÿåœ¨æˆ‘çš„æ‰‹ç»˜å›¾å’Œè§†é¢‘é‡Œå¯ä»¥çœ‹åˆ°ï¼š å› ä¸ºå·¦åŒ¹é…çš„è®¾è®¡ï¼Œåœ¨æœ‰æ›´å¤æ‚çš„é’ˆå¯¹çº¯å±æ€§æ¡ä»¶å‡ºå‘æŸ¥è¯¢é‡Œæ¶‰åŠåˆ°é€šé…ã€REGEXPè¿™æ ·çš„å…¨æ–‡æœç´¢æƒ…å†µï¼ŒNebula Graph æä¾›äº†å…¨æ–‡ç´¢å¼•çš„åŠŸèƒ½ï¼Œå®ƒæ˜¯åˆ©ç”¨ Raft Listener å»å¼‚æ­¥å°†æ•°æ®å†™åˆ°å¤–éƒ¨ Elasticsearch é›†ç¾¤ä¹‹ä¸­ï¼Œå¹¶åœ¨æŸ¥è¯¢çš„æ—¶å€™å»æŸ¥ ES å»åšåˆ°çš„ï¼Œè§æ–‡æ¡£ã€‚ åœ¨è¿™ä¸ªæ‰‹ç»˜å›¾ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹å‡º Write path å†™å…¥ç´¢å¼•æ•°æ®æ˜¯åŒæ­¥æ“ä½œçš„ Read path è¿™éƒ¨åˆ†ç”»äº†ä¸€ä¸ª RBO çš„ä¾‹å­ï¼ŒæŸ¥è¯¢é‡Œçš„è§„åˆ™å‡è®¾ col2 ç›¸ç­‰åŒ¹é…æ’åœ¨å·¦è¾¹çš„æƒ…å†µä¸‹ï¼Œæ€§èƒ½ä¼˜äº col1 çš„å¤§å°æ¯”è¾ƒåŒ¹é…ï¼Œæ‰€ä»¥é€‰æ‹©äº†ç¬¬äºŒä¸ªç´¢å¼• é€‰å¥½äº†ç´¢å¼•ä¹‹åï¼Œæ‰«æç´¢å¼•çš„è¯·æ±‚è¢« fan out åˆ°å­˜å‚¨èŠ‚ç‚¹ä¸Šï¼Œè¿™å…¶ä¸­æœ‰äº›è¿‡æ»¤æ¡ä»¶æ¯”å¦‚ top n æ˜¯å¯ä»¥ä¸‹æ¨çš„ ç»“è®ºï¼š å› ä¸ºå†™å…¥çš„ä»£ä»·ï¼Œåªæœ‰å¿…é¡»ç”¨ç´¢å¼•çš„æ—¶å€™é‡‡ç”¨ï¼Œå¦‚æœé‡‡æ ·æŸ¥è¯¢èƒ½æ»¡è¶³è¯»çš„è¦æ±‚ï¼Œå¯ä»¥ä¸åˆ›å»ºç´¢å¼•è€Œç”¨ LIMIT ã€‚ ç´¢å¼•æœ‰å·¦åŒ¹é…çš„é™åˆ¶ ç¬¦åˆæŸ¥è¯¢çš„é¡ºåºè¦ä»”ç»†è®¾è®¡ æœ‰æ—¶å€™éœ€è¦ä½¿ç”¨å…¨æ–‡ç´¢å¼• full-text indexã€‚ ","date":"2022-02-20","objectID":"/nebula-index-explained/:2:0","series":null,"tags":["Nebula Graph","index","å…¨æ–‡æœç´¢","å›¾æ•°æ®åº“"],"title":"Nebula Graph ç´¢å¼•è¯¦è§£","uri":"/nebula-index-explained/#ä¸€äº›-nebula-graph-ç´¢å¼•çš„è®¾è®¡ç»†èŠ‚"},{"categories":["Nebula Graph"],"content":"ç´¢å¼•çš„ä½¿ç”¨å…·ä½“è¦å‚è€ƒç´¢å¼•æ–‡æ¡£ä¸€äº›è¦ç‚¹æ˜¯ï¼š åœ¨ tag æˆ–è€… edge type ä¸Šé’ˆå¯¹æƒ³è¦è¢«æ¡ä»¶åæŸ¥ç‚¹è¾¹çš„å±æ€§åˆ›å»ºç´¢å¼• CREATE INDEX åˆ›å»ºç´¢å¼•ä¹‹åçš„ç´¢å¼•éƒ¨åˆ†æ•°æ®ä¼šåŒæ­¥å†™å…¥ï¼Œä½†æ˜¯å¦‚æœåˆ›å»ºç´¢å¼•ä¹‹å‰å·²ç»æœ‰çš„ç‚¹è¾¹æ•°æ®å¯¹åº”çš„ç´¢å¼•æ˜¯éœ€è¦æ˜ç¡®æŒ‡å®šå»åˆ›å»ºçš„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„ jobï¼š REBUILD INDEX è§¦å‘äº†å¼‚æ­¥çš„ REBUILD INDEX ä¹‹åï¼Œå¯ä»¥æŸ¥è¯¢çŠ¶æ€ï¼š SHOW INDEX STATUS åˆ©ç”¨åˆ°ç´¢å¼•çš„æŸ¥è¯¢å¯ä»¥æ˜¯ LOOKUPï¼Œå¹¶ä¸”å¸¸å¸¸å¯ä»¥å€ŸåŠ©ç®¡é“ç¬¦åœ¨æ­¤ä¹‹ä¸Šåšæ‹“å±•æŸ¥è¯¢ï¼ˆGraph Queryï¼‰ï¼š LOOKUPONplayer\\WHEREplayer.name==\"Kobe Bryant\"\\YIELDid(vertex)ASVertexID,properties(vertex).nameASname|\\GOFROM$-.VertexIDOVERserve\\YIELD$-.name,properties(edge).start_year,properties(edge).end_year,properties($$).name; ä¹Ÿå¯ä»¥æ˜¯ MATCH ï¼Œè¿™é‡Œè¾¹ v æ˜¯é€šè¿‡ç´¢å¼•å¾—åˆ°çš„ï¼Œè€Œ v2 åˆ™æ˜¯åœ¨æ•°æ®ï¼ˆéç´¢å¼•ï¼‰éƒ¨åˆ†æ‹“å±•æŸ¥è¯¢è·å¾—çš„ã€‚ MATCH (v:player{name:\"Tim Duncan\"})--(v2:player) \\ RETURN v2.player.name AS Name; ","date":"2022-02-20","objectID":"/nebula-index-explained/:3:0","series":null,"tags":["Nebula Graph","index","å…¨æ–‡æœç´¢","å›¾æ•°æ®åº“"],"title":"Nebula Graph ç´¢å¼•è¯¦è§£","uri":"/nebula-index-explained/#ç´¢å¼•çš„ä½¿ç”¨"},{"categories":["Nebula Graph"],"content":"å›é¡¾ Nebula Graph ç´¢å¼•åœ¨åªæä¾›å±æ€§æ¡ä»¶æƒ…å†µä¸‹é€šè¿‡å¯¹å±æ€§çš„æ’åºå‰¯æœ¬æ‰«ææŸ¥ç‚¹ã€è¾¹ Nebula Graph ç´¢å¼•ä¸æ˜¯ç”¨æ¥å›¾æ‹“å±•æŸ¥è¯¢çš„ Nebula Graph ç´¢å¼•æ˜¯å·¦åŒ¹é…ï¼Œä¸æ˜¯ç”¨æ¥åšæ¨¡ç³Šå…¨æ–‡æœç´¢çš„ Nebula Graph ç´¢å¼•åœ¨å†™å…¥æ—¶å€™æœ‰æ€§èƒ½ä»£ä»· è®°å¾—å¦‚æœåˆ›å»º Nebula Graph ç´¢å¼•ä¹‹å‰å·²ç»æœ‰ç›¸åº”ç‚¹è¾¹ä¸Šçš„æ•°æ®ï¼Œè¦é‡å»ºç´¢å¼• Happy Graphing! Feture image credit to Alina ","date":"2022-02-20","objectID":"/nebula-index-explained/:4:0","series":null,"tags":["Nebula Graph","index","å…¨æ–‡æœç´¢","å›¾æ•°æ®åº“"],"title":"Nebula Graph ç´¢å¼•è¯¦è§£","uri":"/nebula-index-explained/#å›é¡¾"},{"categories":["Nebula Graph"],"content":"ä¸€æ–‡äº†è§£ K8s éƒ¨ç½²çš„ Nebula Graph é›†ç¾¤çš„ Nebula-Algorithm ä½¿ç”¨æ–¹æ³•ã€‚","date":"2022-02-14","objectID":"/nebula-algo-spark-k8s/","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","Spark-Connector","Nebula-Algorithm","k8s","nebula-operator"],"title":"ä¸ºä»€ä¹ˆæˆ‘çš„ Nebula-Spark-Connectorã€Nebula-Algorithm è¿ä¸ä¸Š K8s éƒ¨ç½²çš„ Nebula Graph é›†ç¾¤ï¼Ÿ","uri":"/nebula-algo-spark-k8s/"},{"categories":["Nebula Graph"],"content":" ä¸€æ–‡äº†è§£ K8s éƒ¨ç½²çš„ Nebula Graph é›†ç¾¤çš„ Nebula-Algorithm ä½¿ç”¨æ–¹æ³•ã€‚ ","date":"2022-02-14","objectID":"/nebula-algo-spark-k8s/:0:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","Spark-Connector","Nebula-Algorithm","k8s","nebula-operator"],"title":"ä¸ºä»€ä¹ˆæˆ‘çš„ Nebula-Spark-Connectorã€Nebula-Algorithm è¿ä¸ä¸Š K8s éƒ¨ç½²çš„ Nebula Graph é›†ç¾¤ï¼Ÿ","uri":"/nebula-algo-spark-k8s/#"},{"categories":["Nebula Graph"],"content":"æ­¥éª¤æœ€æ–¹ä¾¿çš„æ–¹æ³•æ˜¯å°† Nebula Algorithm/ Spark è¿è¡Œåœ¨ä¸ Nebula-Operator ç›¸åŒçš„ç½‘ç»œå‘½åç©ºé—´é‡Œï¼Œå°† show hosts meta çš„ MetaD åŸŸå:ç«¯å£ æ ¼å¼çš„åœ°å€å¡«è¿›é…ç½®é‡Œå°±å¯ä»¥äº†ã€‚ æ³¨ï¼šéœ€è¦ 2.6.2 æˆ–è€…æ›´æ–°çš„ç‰ˆæœ¬ï¼ŒSpark-Connector/Algorithm æ‰æ”¯æŒåŸŸåå½¢å¼çš„ MetaD åœ°å€ã€‚ è·å– MetaD åœ°å€ (root@nebula) [(none)]\u003e show hosts meta +------------------------------------------------------------------+------+----------+--------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +------------------------------------------------------------------+------+----------+--------+--------------+---------+ | \"nebula-metad-0.nebula-metad-headless.default.svc.cluster.local\" | 9559 | \"ONLINE\" | \"META\" | \"d113f4a\" | \"2.6.2\" | +------------------------------------------------------------------+------+----------+--------+--------------+---------+ Got 1 rows (time spent 1378/2598 us) Mon, 14 Feb 2022 08:22:33 UTC å¡«å†™ Algorithm çš„é…ç½®æ–‡ä»¶ Ref: https://github.com/vesoft-inc/nebula-algorithm/blob/master/nebula-algorithm/src/main/resources/application.conf # ... nebula: { # algo's data source from Nebula. If data.source is nebula, then this nebula.read config can be valid. read: { # Nebula metad server address, multiple addresses are split by English comma metaAddress: \"nebula-metad-0.nebula-metad-headless.default.svc.cluster.local:9559\" #... æˆ–è€…æ˜¯è°ƒç”¨ spark-connector çš„ä»£ç  Ref: https://github.com/vesoft-inc/nebula-spark-connector val config = NebulaConnectionConfig .builder() .withMetaAddress(\"nebula-metad-0.nebula-metad-headless.default.svc.cluster.local:9559\") .withConenctionRetry(2) .build() val nebulaReadVertexConfig: ReadNebulaConfig = ReadNebulaConfig .builder() .withSpace(\"foo_bar_space\") .withLabel(\"person\") .withNoColumn(false) .withReturnCols(List(\"birthday\")) .withLimit(10) .withPartitionNum(10) .build() val vertex = spark.read.nebula(config, nebulaReadVertexConfig).loadVerticesToDF() çœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œé‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆç®€å•çš„è¿‡ç¨‹å´å€¼å¾—ä¸€ç¯‡æ–‡ç« å‘¢ï¼Ÿ ","date":"2022-02-14","objectID":"/nebula-algo-spark-k8s/:1:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","Spark-Connector","Nebula-Algorithm","k8s","nebula-operator"],"title":"ä¸ºä»€ä¹ˆæˆ‘çš„ Nebula-Spark-Connectorã€Nebula-Algorithm è¿ä¸ä¸Š K8s éƒ¨ç½²çš„ Nebula Graph é›†ç¾¤ï¼Ÿ","uri":"/nebula-algo-spark-k8s/#æ­¥éª¤"},{"categories":["Nebula Graph"],"content":"å®¹æ˜“å¿½ç•¥çš„é—®é¢˜è¿™é‡Œçš„é—®é¢˜åœ¨äºï¼š a. å®ƒéšå«åœ°éœ€è¦ä¿è¯ StorageD çš„åœ°å€èƒ½è¢« spark ç¯å¢ƒè®¿é—®ï¼› b. ä½†æ˜¯è¿™äº› StorageD åœ°å€æ˜¯ä» MetaD è·å–çš„ï¼› c. Nebula K8s Operator é‡Œï¼ŒMetaD ä¸­å­˜å‚¨çš„ StorageD åœ°å€ï¼ˆæœåŠ¡å‘ç°ï¼‰çš„æ¥æºæ˜¯ StorageD çš„é…ç½®æ–‡ä»¶ï¼Œè€Œå®ƒæ˜¯ k8s çš„å†…éƒ¨åœ°å€ã€‚ ","date":"2022-02-14","objectID":"/nebula-algo-spark-k8s/:1:1","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","Spark-Connector","Nebula-Algorithm","k8s","nebula-operator"],"title":"ä¸ºä»€ä¹ˆæˆ‘çš„ Nebula-Spark-Connectorã€Nebula-Algorithm è¿ä¸ä¸Š K8s éƒ¨ç½²çš„ Nebula Graph é›†ç¾¤ï¼Ÿ","uri":"/nebula-algo-spark-k8s/#å®¹æ˜“å¿½ç•¥çš„é—®é¢˜"},{"categories":["Nebula Graph"],"content":"èƒŒæ™¯çŸ¥è¯†a. çš„ç†ç”±æ¯”è¾ƒç›´æ¥ï¼Œå’Œ nebula çš„æ¶æ„æœ‰å…³ï¼šå›¾çš„æ•°æ®éƒ½å­˜åœ¨ Storage Service ä¹‹ä¸­ï¼Œé€šå¸¸ç”¨è¯­å¥çš„æŸ¥è¯¢æ˜¯é€è¿‡ Graph Service æ¥é€ä¼ ï¼Œåªéœ€è¦ GraphD çš„è¿æ¥å°±è¶³å¤Ÿï¼Œè€Œ Spark-Connector ä½¿ç”¨ Nebula Graph çš„åœºæ™¯æ˜¯æ‰«æå…¨å›¾æˆ–è€…å­å›¾ï¼Œè¿™æ—¶å€™è®¡ç®—å­˜å‚¨åˆ†ç¦»çš„è®¾è®¡ä½¿å¾—æˆ‘ä»¬å¯ä»¥ç»•è¿‡æŸ¥è¯¢ã€è®¡ç®—å±‚ç›´æ¥é«˜æ•ˆè¯»å–å›¾æ•°æ®ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆéœ€è¦ã€ä¸”åªéœ€è¦ MetaD çš„åœ°å€å‘¢ï¼Ÿ è¿™ä¹Ÿæ˜¯å’Œæ¶æ„æœ‰å…³ï¼ŒMeta Service é‡ŒåŒ…å«äº†å…¨å›¾çš„åˆ†å¸ƒæ•°æ®ä¸åˆ†å¸ƒå¼çš„ Storage Service çš„å„ä¸ªåˆ†ç‰‡å’Œå®ä¾‹çš„åˆ†å¸ƒï¼Œæ‰€ä»¥ä¸€æ–¹é¢å› ä¸ºåªæœ‰ Meta æ‰æœ‰å…¨å›¾çš„ä¿¡æ¯ï¼ˆéœ€è¦ï¼‰ï¼Œå¦ä¸€æ–¹é¢å› ä¸ºä» Meta å¯ä»¥è·å¾—è¿™éƒ¨åˆ†ä¿¡æ¯ï¼ˆåªéœ€è¦ï¼‰ã€‚åˆ°è¿™é‡Œ b. çš„ç­”æ¡ˆä¹Ÿæœ‰äº†ã€‚ è¯¦ç»†çš„ Nebula Graph æ¶æ„ä¿¡æ¯å¯ä»¥å‚è€ƒåšå®¢ç³»åˆ—æ–‡ç« ï¼šnebula-graph.com.cn/tags/æ¶æ„è®¾è®¡ å¦å¤–è¯·ç¡®ä¿æ‚¨å·²ç»è¯»äº†æ¶æ„ä»‹ç»çš„æ–‡æ¡£å“¦ï¼šNebula æ¶æ„æ€»è§ˆ ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹ c. c. Nebula K8s Operator é‡Œï¼ŒMetaD ä¸­å­˜å‚¨çš„ StorageD åœ°å€ï¼ˆæœåŠ¡å‘ç°ï¼‰çš„æ¥æºæ˜¯ StorageD çš„é…ç½®æ–‡ä»¶ï¼Œè€Œå®ƒæ˜¯ k8s çš„å†…éƒ¨åœ°å€ã€‚ è¿™å’Œ Nebula Graph é‡Œçš„æœåŠ¡å‘ç°æœºåˆ¶æœ‰å…³ï¼šåœ¨ Nebula Graph é›†ç¾¤ä¸­ï¼ŒGraph Service å’Œ Storage Service éƒ½æ˜¯é€šè¿‡å¿ƒè·³å°†è‡ªå·±çš„ä¿¡æ¯ä¸ŠæŠ¥ç»™ Meta Service çš„ï¼Œè€Œè¿™å…¶ä¸­æœåŠ¡è‡ªèº«çš„åœ°å€çš„æ¥æºåˆ™æ¥è‡ªäºä»–ä»¬ç›¸åº”çš„é…ç½®æ–‡ä»¶ä¸­çš„ç½‘ç»œé…ç½®ã€‚ å…³äºæœåŠ¡è‡ªèº«çš„åœ°å€é…ç½®è¯·å‚è€ƒæ–‡æ¡£ï¼šStorage networking é…ç½® å…³äºæœåŠ¡å‘ç°è¯¦ç»†çš„ä¿¡æ¯è¯·å‚è€ƒå››ç‹çš„æ–‡ç« ï¼šå›¾æ•°æ®åº“ Nebula Graph é›†ç¾¤é€šä¿¡ï¼šä»å¿ƒè·³è¯´èµ·ã€‚ æœ€åï¼Œæˆ‘ä»¬çŸ¥é“ Nebula Operator æ˜¯ä¸€ä¸ªåœ¨ K8s é›†ç¾¤ä¸­æŒ‰ç…§é…ç½®ï¼Œè‡ªåŠ¨åˆ›å»ºã€ç»´æŠ¤ã€æ‰©ç¼©å®¹ Nebula é›†ç¾¤çš„ K8s æ§åˆ¶é¢çš„åº”ç”¨ï¼Œå®ƒéœ€è¦æŠ½è±¡ä¸€éƒ¨åˆ†å†…éƒ¨èµ„æºç›¸å…³çš„é…ç½®ï¼Œè¿™å°±åŒ…æ‹¬äº† GraphD å’Œ StorageD å®ä¾‹çš„å®é™…åœ°å€ï¼Œä»–ä»¬æ˜¯è¢«é…ç½®çš„åœ°å€å®é™…ä¸Šæ˜¯ headless service åœ°å€ã€‚ è€Œè¿™äº›åœ°å€ï¼ˆå¦‚ä¸‹ï¼‰é»˜è®¤æ˜¯æ²¡æ³•è¢« k8s å¤–éƒ¨ç½‘ç»œè®¿é—®çš„ï¼Œæ‰€ä»¥é’ˆå¯¹ GraphDã€MetaD æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åˆ›å»ºæœåŠ¡å°†å…¶æš´éœ²å‡ºæ¥ã€‚ (root@nebula)[(none)]\u003eshowhostsmeta+------------------------------------------------------------------+------+----------+--------+--------------+---------+ |Host|Port|Status|Role|GitInfoSha|Version|+------------------------------------------------------------------+------+----------+--------+--------------+---------+ |\"nebula-metad-0.nebula-metad-headless.default.svc.cluster.local\"|9559|\"ONLINE\"|\"META\"|\"d113f4a\"|\"2.6.2\"|+------------------------------------------------------------------+------+----------+--------+--------------+---------+ Got1rows(timespent1378/2598us)Mon,14Feb202209:22:33UTC(root@nebula)[(none)]\u003eshowhostsgraph+---------------------------------------------------------------+------+----------+---------+--------------+---------+ |Host|Port|Status|Role|GitInfoSha|Version|+---------------------------------------------------------------+------+----------+---------+--------------+---------+ |\"nebula-graphd-0.nebula-graphd-svc.default.svc.cluster.local\"|9669|\"ONLINE\"|\"GRAPH\"|\"d113f4a\"|\"2.6.2\"|+---------------------------------------------------------------+------+----------+---------+--------------+---------+ Got1rows(timespent2072/3403us)Mon,14Feb202210:03:58UTC(root@nebula)[(none)]\u003eshowhostsstorage+------------------------------------------------------------------------+------+----------+-----------+--------------+---------+ |Host|Port|Status|Role|GitInfoSha|Version|+------------------------------------------------------------------------+------+----------+-----------+--------------+---------+ |\"nebula-storaged-0.nebula-storaged-headless.default.svc.cluster.local\"|9779|\"ONLINE\"|\"STORAGE\"|\"d113f4a\"|\"2.6.2\"||\"nebula-storaged-1.nebula-storaged-headless.default.svc.cluster.local\"|9779|\"ONLINE\"|\"STORAGE\"|\"d113f4a\"|\"2.6.2\"||\"nebula-storaged-2.nebula-storaged-headless.default.svc.cluster.local\"|9779|\"ONLINE\"|\"STORAGE\"|\"d113f4a\"|\"2.6.2\"|+------------------------------------------------------------------------+------+----------+-----------+--------------+---------+ Got3rows(timespent1603/2979us)Mon,14Feb202210:05:24UTC ç„¶è€Œï¼Œå› ä¸ºå‰è¾¹æåˆ°çš„ Spark-Connector é€šè¿‡ Meta Service å»è·å– StorageD çš„åœ°å€ï¼Œä¸”è¿™ä¸ªåœ°å€æ˜¯æœåŠ¡å‘ç°è€Œå¾—ï¼Œæ‰€ä»¥ Spark-Connector å®é™…ä¸Šè·å–çš„ StorageD åœ°å€å°±æ˜¯ä¸Šè¾¹çš„è¿™ç§ headless çš„æœåŠ¡åœ°å€ï¼Œæ²¡æ³•ç›´æ¥ä»å¤–éƒ¨è®¿é—®ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨æœ‰æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œåªéœ€è¦è®© Spark è¿è¡Œåœ¨å’Œ Nebula Cluster ç›¸åŒçš„ K8s ç½‘ç»œé‡Œï¼Œä¸€åˆ‡å°±è¿åˆƒè€Œè§£äº†ï¼Œå¦åˆ™ï¼Œæˆ‘ä»¬éœ€è¦ï¼š å°† MetaD å’Œ StorageD çš„åœ°å€åˆ©ç”¨ Ingress ç­‰æ–¹å¼å°†å…¶ L4ï¼ˆTCPï¼‰æš´éœ²å‡ºæ¥ã€‚ å¯ä»¥å‚è€ƒ Nebula Operator çš„æ–‡æ¡£ï¼šdoc/user/client_service.md é€šè¿‡åå‘ä»£ç†å’ŒDNSè®©è¿™äº› headless æœåŠ¡èƒ½è¢«è§£æåˆ°ç›¸åº”çš„ StorageDã€‚ å‚è€ƒï¼šTBD é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰æ›´æ–¹ä¾¿çš„æ–¹å¼ï¼Ÿ éå¸¸æŠ±æ­‰çš„æ˜¯ï¼Œç›®å‰æœ€æ–¹ä¾¿çš„æ–¹å¼ä¾ç„¶æ˜¯å¦‚æ–‡ç« æœ€å¼€å¤´æ‰€ä»‹ç»ï¼šè®© Spark è¿è¡Œåœ¨ Nebula Cluster å†…éƒ¨ã€‚å®é™…ä¸Šï¼Œæˆ‘åœ¨åŠªåŠ›æ¨è¿› Nebula Spark ç¤¾åŒºå»æ”¯æŒå¯ä»¥é…ç½®çš„ StorageAddresses é€‰é¡¹ï¼Œæœ‰äº†å®ƒä¹‹åï¼Œå‰è¾¹æåˆ°çš„ 2. å°±æ˜¯ä¸å¿…è¦çš„äº†ã€‚ ","date":"2022-02-14","objectID":"/nebula-algo-spark-k8s/:1:2","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","Spark-Connector","Nebula-Algorithm","k8s","nebula-operator"],"title":"ä¸ºä»€ä¹ˆæˆ‘çš„ Nebula-Spark-Connectorã€Nebula-Algorithm è¿ä¸ä¸Š K8s éƒ¨ç½²çš„ Nebula Graph é›†ç¾¤ï¼Ÿ","uri":"/nebula-algo-spark-k8s/#èƒŒæ™¯çŸ¥è¯†"},{"categories":["Nebula Graph"],"content":"Bonusï¼šä¸€é”®ä½“éªŒ nebula-algorithm + nebula-operatorä¸ºäº†æ–¹ä¾¿åœ¨ k8s ä¸Šå°é²œ nebula-graph nebula-algorithm çš„åŒå­¦ï¼Œè¿™é‡Œæˆ‘è¦å†æ¬¡å®‰åˆ©ä¸€ä¸‹æˆ‘å†™çš„ä¸€ä¸ªå°å·¥å…· Neubla-Operator-KinDï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸€é”®åœ¨ Docker ç¯å¢ƒå†…éƒ¨å•ç‹¬éƒ¨ç½²ä¸€ä¸ª k8s é›†ç¾¤å¹¶åœ¨å…¶ä¸­éƒ¨ç½² Nebula Operator ä»¥åŠæ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬ storage providerï¼‰å¹¶éƒ¨ç½²ä¸€ä¸ªå° Nebula Cluster çš„å·¥å…·ã€‚æœ‰ç‚¹ç»•ï¼Œä¸è¿‡å¯ä»¥çœ‹ä¸‹è¾¹çš„æ­¥éª¤å“ˆï¼š ç¬¬ä¸€æ­¥ï¼Œéƒ¨ç½² K8s+Nebula-Operator+Nebula Clusterï¼š curl -sL nebula-kind.siwei.io/install.sh | bash ç¬¬äºŒæ­¥ï¼Œç…§ç€å·¥å…·æ–‡æ¡£é‡Œçš„ whatâ€™s next a. ç”¨ console è¿æ¥é›†ç¾¤ï¼Œå¹¶åŠ è½½ç¤ºä¾‹æ•°æ®é›† b. åœ¨è¿™ä¸ª k8s é‡Œè·‘ä¸€ä¸ªå›¾ç®—æ³• åˆ›å»ºä¸€ä¸ª Spark ç¯å¢ƒ kubectl create -f http://nebula-kind.siwei.io/deployment/spark.yaml kubectl wait pod --timeout=-1s --for=condition=Ready -l '!job-name' ç­‰ä¸Šè¾¹çš„ wait éƒ½ ready ä¹‹åï¼Œè¿›å…¥ spark çš„ podã€‚ kubectl exec -it deploy/spark-deployment -- bash ä¸‹è½½ nebula-algorithm æ¯”å¦‚ 2.6.2 è¿™ä¸ªç‰ˆæœ¬ï¼Œæ›´å¤šç‰ˆæœ¬è¯·å‚è€ƒ https://github.com/vesoft-inc/nebula-algorithm/ã€‚ æ³¨æ„ï¼š å®˜æ–¹å‘å¸ƒçš„ç‰ˆæœ¬åœ¨è¿™é‡Œå¯ä»¥è·å–ï¼šhttps://repo1.maven.org/maven2/com/vesoft/nebula-algorithm/ å› ä¸ºè¿™ä¸ªé—®é¢˜ https://github.com/vesoft-inc/nebula-algorithm/issues/42 åªæœ‰ 2.6.2 æˆ–è€…æ›´æ–°çš„ç‰ˆæœ¬æ‰æ”¯æŒåŸŸåè®¿é—® MetaDã€‚ # ä¸‹è½½ nebula-algorithm-2.6.2.jar wget https://repo1.maven.org/maven2/com/vesoft/nebula-algorithm/2.6.2/nebula-algorithm-2.6.2.jar # ä¸‹è½½ nebula-algorthm é…ç½®æ–‡ä»¶ wget https://github.com/vesoft-inc/nebula-algorithm/raw/v2.6/nebula-algorithm/src/main/resources/application.conf ä¿®æ”¹Then we could change the config file of nebula-algorithm on meta and graph addresses: sed -i '/^ metaAddress/c\\ metaAddress: \\\"nebula-metad-0.nebula-metad-headless.default.svc.cluster.local:9559\\\"' application.conf sed -i '/^ graphAddress/c\\ graphAddress: \\\"nebula-graphd-0.nebula-graphd-svc.default.svc.cluster.local:9669\\\"' application.conf ##### change space sed -i '/^ space/c\\ space: basketballplayer' application.conf ##### read data from nebula graph sed -i '/^ source/c\\ source: nebula' application.conf ##### execute algorithm: labelpropagation sed -i '/^ executeAlgo/c\\ executeAlgo: labelpropagation' application.conf æ‰§è¡Œ LPA ç®—æ³•åœ¨ basketballplayer å›¾ç©ºé—´ /spark/bin/spark-submit --master \"local\" --conf spark.rpc.askTimeout=6000s \\ --class com.vesoft.nebula.algorithm.Main \\ nebula-algorithm-2.6.2.jar \\ -p application.conf ç»“æœå¦‚ä¸‹ï¼š bash-5.0# ls /tmp/count/ _SUCCESS part-00000-5475f9f4-66b9-426b-b0c2-704f946e54d3-c000.csv bash-5.0# head /tmp/count/part-00000-5475f9f4-66b9-426b-b0c2-704f946e54d3-c000.csv _id,lpa 1100,1104 2200,2200 2201,2201 1101,1104 2202,2202 Happy Graphing! Picture Credit: Timelab Pro ","date":"2022-02-14","objectID":"/nebula-algo-spark-k8s/:2:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","Spark-Connector","Nebula-Algorithm","k8s","nebula-operator"],"title":"ä¸ºä»€ä¹ˆæˆ‘çš„ Nebula-Spark-Connectorã€Nebula-Algorithm è¿ä¸ä¸Š K8s éƒ¨ç½²çš„ Nebula Graph é›†ç¾¤ï¼Ÿ","uri":"/nebula-algo-spark-k8s/#bonusä¸€é”®ä½“éªŒ-nebula-algorithm--nebula-operator"},{"categories":["Nebula Graph","Mini Project"],"content":"å¦‚ä½•åˆ©ç”¨å›¾æ•°æ®åº“ä»0-1æ„å»ºä¸€ä¸ªç‰¹å®šé¢†åŸŸé—®ç­”åŠ©æ‰‹ï¼Ÿæœ¬æ–‡æ‰‹æŠŠæ‰‹å¸¦ä½ æ„å»ºä¸€ä¸ªç®€æ˜“ç‰ˆçš„ç¯®çƒé¢†åŸŸæ™ºèƒ½é—®ç­”æœºå™¨äººã€‚","date":"2021-12-30","objectID":"/siwi/","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/"},{"categories":["Nebula Graph","Mini Project"],"content":" å¦‚ä½•åˆ©ç”¨å›¾æ•°æ®åº“ä»0-1æ„å»ºä¸€ä¸ªç‰¹å®šé¢†åŸŸé—®ç­”åŠ©æ‰‹ï¼Ÿæœ¬æ–‡æ‰‹æŠŠæ‰‹å¸¦ä½ æ„å»ºä¸€ä¸ªç®€æ˜“ç‰ˆçš„ç¯®çƒé¢†åŸŸæ™ºèƒ½é—®ç­”æœºå™¨äººã€‚ ","date":"2021-12-30","objectID":"/siwi/:0:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#"},{"categories":["Nebula Graph","Mini Project"],"content":"å‰è¨€ã€Œé—®ç­”æœºå™¨äººã€åœ¨æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­å¹¶ä¸å°‘è§åˆ° ï¼šæ¯”å¦‚åœ¨ä¸€äº›ç”µå•†å®¢æœã€æ™ºèƒ½é—®è¯Šã€æŠ€æœ¯æ”¯æŒç­‰äººå·¥è¾“å…¥ä¸æ²Ÿé€šç•Œé¢çš„åœºæ™¯ä¸‹ï¼Œæœºå™¨äººâ€œæ™ºèƒ½â€é—®ç­”ç³»ç»Ÿä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥åœ¨æ— éœ€äººåŠ›ã€ä¸éœ€è¦è€—è´¹ç»ˆç«¯ç”¨æˆ·å¿ƒæ™ºå»åšçŸ¥è¯†åº“ã€å•†å“æœç´¢ã€ç§‘å®¤é€‰æ‹©ç­‰ç­‰çš„æƒ…å†µä¸‹å®æ—¶ç»™å‡ºé—®é¢˜ç­”æ¡ˆã€‚ é—®ç­”æœºå™¨äººç³»ç»ŸèƒŒåçš„æŠ€æœ¯æœ‰å¤šé‡å¯èƒ½ï¼š åŸºäºæ£€ç´¢ï¼Œå…¨æ–‡æœç´¢æ¥è¿‘çš„é—®é¢˜ åŸºäºæœºå™¨å­¦ä¹ é˜…è¯»ç†è§£ åŸºäºçŸ¥è¯†å›¾è°±ï¼ˆKnowledge-Based Question Answering system: KBQAï¼‰ å…¶ä»– åŸºäºçŸ¥è¯†å›¾è°±æ„å»ºé—®ç­”ç³»ç»Ÿåœ¨ä»¥ä¸‹ä¸‰ä¸ªæƒ…å†µä¸‹å¾ˆæœ‰ä¼˜åŠ¿ï¼š å¯¹äºé¢†åŸŸç±»å‹æ˜¯ç»“æ„åŒ–æ•°æ®åœºæ™¯ï¼šç”µå•†ã€åŒ»è¯ã€ç³»ç»Ÿè¿ç»´ï¼ˆå¾®æœåŠ¡ã€æœåŠ¡å™¨ã€äº‹ä»¶ï¼‰ã€äº§å“æ”¯æŒç³»ç»Ÿç­‰ï¼Œå…¶ä¸­ä½œä¸ºé—®ç­”ç³»ç»Ÿçš„å‚è€ƒå¯¹è±¡å·²ç»æ˜¯ç»“æ„åŒ–æ•°æ®ï¼› é—®é¢˜çš„è§£ç­”è¿‡ç¨‹æ¶‰åŠå¤šè·³æŸ¥è¯¢ï¼Œæ¯”å¦‚â€œå§šæ˜çš„å¦»å­ä»Šå¹´æ˜¯æœ¬å‘½å¹´å—ï¼Ÿâ€ï¼Œâ€œä½ ä»¬å®¶çš„äº§å“ A å’Œ A+ çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼› ä¸ºäº†è§£å†³å…¶ä»–éœ€æ±‚ï¼ˆé£æ§ã€æ¨èã€ç®¡ç†ï¼‰ï¼Œå·²ç»æ„å»ºäº†å›¾ç»“æ„æ•°æ®ã€çŸ¥è¯†å›¾è°±çš„æƒ…å†µã€‚ ä¸ºäº†æ–¹ä¾¿è¯»è€…æœ€å¿«é€Ÿäº†è§£å¦‚ä½•æ„å»º KBQA ç³»ç»Ÿï¼Œæˆ‘å†™äº†éå¸¸ç®€é™‹çš„å° KBQA é¡¹ç›®ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä¼šå¸¦é¢†å¤§å®¶ä»å¤´åˆ°å°¾æŠŠå®ƒæ­èµ·æ¥ã€‚ ğŸ’¡ï¼šè¿™ä¸ªå°é¡¹ç›®å«åš Siwiï¼Œå®ƒçš„ä»£ç å°±åœ¨ GitHub ä¸Šï¼šgithub.com/wey-gu/nebula-siwi Siwi çš„å‘éŸ³æ˜¯ï¼š/ËˆsÉªwi/ æˆ–è€…å«ï¼šæ€äºŒä¸º ï¼Œå®ƒæ˜¯ä¸€ä¸ªèƒ½è§£ç­” NBA ç›¸å…³é—®é¢˜çš„æœºå™¨äººã€‚ æˆ‘ä»¬å¼€å§‹å§ã€‚ ","date":"2021-12-30","objectID":"/siwi/:1:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#å‰è¨€"},{"categories":["Nebula Graph","Mini Project"],"content":"é¸Ÿç° TL;DRKBQA ç”¨ä¸€å¥è¯è¯´å°±æ˜¯æŠŠé—®é¢˜è§£æã€è½¬æ¢æˆåœ¨çŸ¥è¯†å›¾è°±ä¸­çš„æŸ¥è¯¢ï¼ŒæŸ¥è¯¢å¾—åˆ°ç»“æœä¹‹åè¿›è¡Œç­›é€‰ã€ç¿»è¯‘æˆç»“æœï¼ˆå¥å­ã€å¡ç‰‡æˆ–è€…ä»»ä½•æ–¹ä¾¿äººç†è§£çš„ç­”æ¡ˆæ ¼å¼ï¼‰ã€‚ ğŸ’¡ï¼šçŸ¥è¯†å›¾è°±çš„æ„å»ºå®é™…ä¸Šæ˜¯éå¸¸é‡è¦çš„è¿‡ç¨‹ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸“æ³¨åœ¨ä¸²èµ·æ¥ KBQA ç³»ç»Ÿçš„éª¨æ¶ï¼Œæˆ‘ä»¬å‡è®¾éœ€æ±‚æ˜¯åŸºäºä¸€ä¸ªå·²ç»æœ‰çš„å›¾è°±ä¹‹ä¸Šï¼Œä¸ºå…¶å¢åŠ ä¸€ä¸ª QA ç³»ç»Ÿã€‚ ã€Œé—®é¢˜åˆ°å›¾è°±æŸ¥è¯¢çš„è½¬æ¢ã€æœ‰ä¸åŒçš„æ–¹æ³•å¯ä»¥å®ç°ã€‚ å¯ä»¥æ˜¯å¯¹è¯­ä¹‰è¿›è¡Œåˆ†æï¼šç†è§£é—®é¢˜çš„æ„å›¾ï¼Œé’ˆå¯¹ä¸åŒæ„å›¾åŒ¹é…æœ€å¯èƒ½çš„é—®é¢˜ç±»å‹ï¼Œä»è€Œæ„å»ºè¿™ä¸ªç±»å‹é—®é¢˜çš„å›¾è°±æŸ¥è¯¢ï¼ŒæŸ¥å¾—ç»“æœï¼› ä¹Ÿå¯ä»¥æ˜¯åŸºäºä¿¡æ¯çš„æŠ½å–ï¼šä»é—®é¢˜ä¸­æŠ½å–ä¸»è¦çš„å®ä½“ï¼Œåœ¨å›¾è°±ä¸­è·å–å®ä½“çš„æ‰€æœ‰çŸ¥è¯†ã€å…³ç³»æ¡ç›®ï¼ˆå­å›¾ï¼‰ï¼Œå†å¯¹ç»“æœæ ¹æ®é—®é¢˜ä¸­çš„çº¦æŸæ¡ä»¶åŒ¹é…ã€æ’åºé€‰æ‹©ç»“æœã€‚ ğŸ’¡ï¼šç¾å›¢æŠ€æœ¯å›¢é˜Ÿåœ¨è¿™ç¯‡æ–‡ç« é‡Œåˆ†äº«äº†ä»–ä»¬çš„çœŸå®ä¸–ç•Œå®è·µï¼Œä¸‹å›¾æ˜¯ç¾å›¢ç»“åˆäº†æœºå™¨å­¦ä¹ å’Œ NLP çš„æ–¹æ¡ˆã€‚ è€Œåœ¨ Siwi é‡Œï¼Œæˆ‘ä»¬ä¸€åˆ‡ä»ç®€ï¼Œå•ç‹¬é€‰æ‹©äº†è¯­ä¹‰åˆ†æè¿™æ¡è·¯ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯éœ€è¦äººä¸ºå»æ ‡æ³¨æˆ–è€…ç¼–ç ä¸€äº›é—®é¢˜ç±»å‹çš„æŸ¥è¯¢æ–¹å¼ï¼Œä½†å®é™…ä¸Šåœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œå°¤å…¶å•ä¸€é¢†åŸŸå›¾è°±çš„åœºæ™¯ä¸‹åè€Œæ˜¯è½»é‡å´æ•ˆæœä¸å·®çš„æ–¹æ¡ˆï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¾¿äºæ–°æ‰‹ç†è§£ KBQA çš„åˆé€‚çš„å…¥é—¨æ–¹å¼ã€‚ é™¤äº†æ ¸å¿ƒçš„é—®ç­”éƒ¨åˆ†ï¼Œæˆ‘è¿˜ä¸º Siwi å¢åŠ äº†è¯­éŸ³è¯†åˆ«å’Œè¯­éŸ³å›ç­”ï¼ˆæ„Ÿè°¢æµè§ˆå™¨æ¥å£æ ‡å‡†çš„å‘å±•ï¼‰çš„åŠŸèƒ½ï¼Œäºæ˜¯ï¼Œè¿™ä¸ªé¡¹ç›®çš„ç»“æ„å’Œé—®ç­”è°ƒç”¨æµç¨‹å°±æ˜¯è¿™æ ·çš„äº†ï¼šä¸€ä¸ªè¯­éŸ³é—®é¢˜è‡ªä¸Šè€Œä¸‹åˆ†åˆ«ç»è¿‡ä¸‰ä¸ªéƒ¨åˆ†ï¼š åŸºäºç½‘é¡µçš„ Siwi Frontend è¯­éŸ³ã€æ–‡å­—é—®ç­”ç•Œé¢ Python Flask å®ç°çš„ Siwi Backend/API ç³»ç»Ÿ Nebula Graph å¼€æºåˆ†å¸ƒå¼é«˜æ€§èƒ½å›¾æ•°æ®åº“ä¹‹ä¸Šçš„çŸ¥è¯†å›¾è°± â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ Speech â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Frontend â”‚ Siwi, /ËˆsÉªwi/ â”‚ â”‚ â”‚ Web_Speech_API â”‚ A PoC of â”‚ â”‚ â”‚ â”‚ Dialog System â”‚ â”‚ â”‚ Vue.JS â”‚ With Graph Database â”‚ â”‚ â”‚ â”‚ Backed Knowledge Graph â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Sentence â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ Backend â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ Web API, Flask â”‚ ./app/ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ Sentence ./bot/ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ Intent matching, â”‚ ./bot/classifierâ”‚ â”‚ â”‚ â”‚ â”‚ Symentic Processing â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ Intent, Entities â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ Intent Actor â”‚ ./bot/actions â”‚ â”‚ â”‚ â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Graph Query â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Graph Database â”‚ Nebula Graph â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ğŸ’¡ï¼šå›¾æ•°æ®åº“ç›¸æ¯”äºå…¶ä»–çŸ¥è¯†å›¾è°±å­˜å‚¨ç³»ç»Ÿæ¥è¯´ï¼Œå› ä¸ºå…¶è®¾è®¡ä¸“æ³¨äºæ•°æ®å†…çš„æ•°æ®å…³ç³»ï¼Œéå¸¸æ“…é•¿å®æ—¶è·å–æµ·é‡æ•°æ®ä¸‹å®ä½“ä¹‹é—´çš„å¤æ‚å…³è”å…³ç³»ã€‚ Nebula Graph çš„åŸç”Ÿåˆ†å¸ƒå¼è®¾è®¡å’Œ share-nothing æ¶æ„ä½¿å¾—å®ƒæ“…é•¿äºå·¨å¤§æ•°æ®é‡å’Œé«˜å¹¶å‘è¯»å†™çš„åœºæ™¯ï¼ŒåŠ ä¸Šå®ƒçš„å¼€æºç¤¾åŒºç‰¹åˆ«æ´»è·ƒï¼Œå·²ç»è¢«å›½å†…å¾ˆå¤šå›¢é˜Ÿç”¨äºæ”¯æ’‘ç”Ÿäº§ä¸Šçš„å„ç§ä¸šåŠ¡ï¼Œè¿™é‡Œæœ‰ä¸€äº›ä»–ä»¬åˆ†äº«çš„é€‰å‹ã€è½åœ°å®è·µã€‚ ","date":"2021-12-30","objectID":"/siwi/:2:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#é¸Ÿç°-tldr"},{"categories":["Nebula Graph","Mini Project"],"content":"çŸ¥è¯†å›¾è°±Siwi æ„å»ºäºä¸€ä¸ªç¯®çƒç›¸å…³çš„çŸ¥è¯†å›¾è°±ä¹‹ä¸Šï¼Œå®ƒå…¶å®æ˜¯ Siwi é‡‡ç”¨çš„å¼€æºåˆ†å¸ƒå¼å›¾æ•°æ®åº“ Nebula Graph ç¤¾åŒºçš„å®˜æ–¹æ–‡æ¡£é‡Œçš„ç¤ºä¾‹æ•°æ®é›†ã€‚ åœ¨è¿™ä¸ªéå¸¸ç®€å•çš„å›¾è°±ä¹‹ä¸­ï¼Œåªæœ‰ä¸¤ç§ç‚¹ï¼š playerï¼Œçƒå‘˜ teamï¼Œçƒé˜Ÿ ä¸¤ç§å…³ç³»ï¼š serve æœå½¹äºï¼ˆæ¯”å¦‚ï¼šå§šæ˜ -æœå½¹äº-\u003e ä¼‘æ–¯é¡¿ç«ç®­ï¼‰ follow å…³æ³¨ ï¼ˆæ¯”å¦‚ï¼šå§šæ˜ -å…³æ³¨-\u003e å¥¥å°¼å°”ï¼‰ ğŸ’¡ï¼šè¿™ä¸ªæ•°æ®é›†åœ¨ Nebula ç¤¾åŒºä¸Šæœ‰ä¸€ä¸ª åœ¨çº¿ä½“éªŒ ç¯å¢ƒï¼Œä»»ä½•äººéƒ½æ— éœ€ç™»å½•ï¼Œé€šè¿‡Nebula Graph Studio å¯è§†åŒ–æ¢ç´¢ç¯®çƒå›¾è°±ã€‚ ä¸‹å›¾å°±æ˜¯è¿™ä¸ªå›¾è°±çš„å¯è§†åŒ–æ¢ç´¢æˆªå›¾ï¼Œå¯ä»¥çœ‹åˆ°å·¦è¾¹çš„ä¸­å¿ƒèŠ‚ç‚¹å‹‡å£«é˜Ÿï¼ˆWarriorsï¼‰æœ‰æœå…°ç‰¹ï¼ˆDurantï¼‰è¿˜æœ‰å…¶ä»–å‡ ä¸ªé˜Ÿå‘˜åœ¨å…¶ä¸­æœå½¹ï¼ˆserveï¼‰ï¼›é™¤äº†æœå½¹ä¹‹å¤–ï¼Œè¿˜å¯ä»¥çœ‹åˆ°é˜Ÿå‘˜å’Œé˜Ÿå‘˜ä¹‹ä¸­ä¹Ÿæœ‰å…³æ³¨ï¼ˆfollowï¼‰çš„å…³ç³»å­˜åœ¨ã€‚ æœ‰äº†è¿™ä¸ªçŸ¥è¯†å›¾è°±ï¼Œå’±ä»¬æ¥ä¸‹æ¥å°±åœ¨å®ƒä¹‹ä¸Šæ­ä¸€ä¸ªç®€å•çš„åŸºäºè¯­æ³•è§£æçš„ QA ç³»ç»Ÿå§ğŸ˜ã€‚ ","date":"2021-12-30","objectID":"/siwi/:3:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#çŸ¥è¯†å›¾è°±"},{"categories":["Nebula Graph","Mini Project"],"content":"Siwi-backend â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ Backend â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Web API, Flask â”‚ ./app/ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Sentence ./bot/ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent matching, â”‚ ./bot/classifierâ”‚ â”‚ â”‚ Symentic Processing â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Intent, Entities â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent Actor â”‚ ./bot/actions â”‚ â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ Graph Query â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Graph Database â”‚ Nebula Graph â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å¦‚ä¸Šå›¾çš„è®¾è®¡æµç¨‹ï¼ŒSiwi çš„åç«¯éƒ¨åˆ†éœ€è¦æ¥æ”¶é—®å¥ï¼Œå¤„ç†ä¹‹åè®¿é—®çŸ¥è¯†å›¾è°±ï¼ˆå›¾æ•°æ®åº“ï¼‰ï¼Œç„¶åå°†å¤„ç†ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚ ","date":"2021-12-30","objectID":"/siwi/:4:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#siwi-backend"},{"categories":["Nebula Graph","Mini Project"],"content":"æ¥æ”¶ HTTP è¯·æ±‚(app)å¯¹äºè¯·æ±‚ï¼Œå°±ç®€å•åœ°ç”¨ Flask ä½œä¸º web server æ¥æ¥æ”¶ HTTP çš„ POST è¯·æ±‚ï¼š ğŸ’¡ï¼šè¿˜ä¸ç†Ÿæ‚‰ Flask çš„åŒå­¦ï¼Œå¯ä»¥åœ¨ freeCodeCamp ä¸Šæœç´¢ä¸€ä¸‹ï¼Œæœ‰ä¸€äº›ä¸é”™çš„è¯¾ç¨‹å“ˆã€‚ ä¸‹è¾¹çš„ä»£ç å°±æ˜¯å‘Šè¯‰ Flask ï¼š å¦‚æœç”¨æˆ·å‘è¿‡æ¥ http://\u003cserver\u003e/query çš„ POST è¯·æ±‚ï¼Œæçš„é—®é¢˜å°±åœ¨è¯·æ±‚çš„ body é‡Œçš„ question çš„ Key ä¹‹ä¸‹ã€‚ å–å¾—é—®é¢˜ä¹‹åï¼Œè°ƒç”¨æŠŠè¯·æ±‚ä¼ ç»™ siwi_bot çš„ query()ï¼Œå¾—åˆ° answer ã€‚ ä»£ç æ®µï¼šsrc/siwi/app/__init__.py #... from siwi.bot import bot #... @app.route(\"/query\", methods=[\"POST\"]) def query(): request_data = request.get_json() question = request_data.get(\"question\", \"\") # \u003c----- 1. if question: answer = siwi_bot.query( request_data.get(\"question\", \"\")) # \u003c----- 2. else: answer = \"Sorry, what did you say?\" return jsonify({\"answer\": answer}) æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç° siwi_botï¼ŒçœŸæ­£å¤„ç†æé—®çš„é€»è¾‘ã€‚ ","date":"2021-12-30","objectID":"/siwi/:4:1","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#æ¥æ”¶-http-è¯·æ±‚app"},{"categories":["Nebula Graph","Mini Project"],"content":"å¤„ç†è¯·æ±‚(bot) â”‚ â”‚ Sentence ./bot/ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent matching, â”‚ ./bot/classifierâ”‚ â”‚ â”‚ Symentic Processing â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Intent, Entities â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent Actor â”‚ ./bot/actions â”‚ â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å‰è¾¹æåˆ°è¿‡ï¼ŒKBQA åŸºæœ¬ä¸Šæ˜¯ a. æŠŠé—®é¢˜è§£æã€è½¬æ¢æˆåœ¨çŸ¥è¯†å›¾è°±ä¸­çš„æŸ¥è¯¢ b. æŸ¥è¯¢å¾—åˆ°ç»“æœä¹‹åè¿›è¡Œç­›é€‰ã€ç¿»è¯‘æˆç»“æœ è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠ a. çš„é€»è¾‘æ”¾åœ¨ classifier é‡Œï¼Œb. çš„é€»è¾‘æ”¾åœ¨ actions(actor) é‡Œã€‚ a. HTTP è¯·æ±‚çš„é—®é¢˜å¥å­ sentence ä¼ è¿‡æ¥ï¼Œç”¨ classifier è§£æå®ƒçš„æ„å›¾å’Œå¥å­å®ä½“ b. ç”¨æ„å›¾å’Œå¥å­å®ä½“æ„é€  actionï¼Œå¹¶é“¾æ¥å›¾æ•°æ®åº“æ‰§è¡Œï¼Œè·å–ç»“æœã€‚ ä»£ç æ®µï¼šsrc/siwi/bot/bot/__init__.py from siwi.bot.actions import SiwiActions from siwi.bot.classifier import SiwiClassifier class SiwiBot(): def __init__(self, connection_pool) -\u003e None: self.classifier = SiwiClassifier() self.actions = SiwiActions() self.connection_pool = connection_pool def query(self, sentence): intent = self.classifier.get(sentence) # \u003c--- a. action = self.actions.get(intent) # \u003c--- b. return action.execute(self.connection_pool) é¦–å…ˆå’±ä»¬æ¥è¿›ä¸€æ­¥å®ç°ä¸€ä¸‹ SiwiClassifier å§ã€‚ è¯­ä¹‰è§£æ(classifier)classifier éœ€è¦åœ¨ get(sentence) æ–¹æ³•é‡Œå°†å¥å­ä¸­çš„å®ä½“å’Œå¥å­çš„æ„å›¾è§£æã€åˆ†ç±»å‡ºæ¥ã€‚é€šå¸¸æ¥è¯´ï¼Œè¿™é‡Œæ˜¯éœ€è¦å€ŸåŠ©æœºå™¨å­¦ä¹ ã€NLPå»åˆ†è¯ã€åˆ†ç±»å®ç°çš„ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†å±•ç¤ºè¿™ä¸ªè¿‡ç¨‹å®é™…ä¸Šåªæ˜¯å„ç§ if/ elseã€‚ æˆ‘ä»¬è¿™é‡Œå®ç°äº†ä¸‰ç±»æ„å›¾çš„é—®é¢˜ï¼š å…³ç³»ï¼ˆAï¼ŒBï¼‰ï¼šè·å¾— A å’Œ B åœ¨å›¾è°±ä¸­çš„å…³ç³»è·¯å¾„ï¼Œæ¯”å¦‚å§šæ˜å’Œæ¹–äººé˜Ÿçš„å…³ç³»æ˜¯ï¼Ÿ æœå½¹æƒ…å†µï¼šæ¯”å¦‚ä¹”çº³æ£®åœ¨å“ªé‡Œæœå½¹ï¼Ÿ å…³æ³¨æƒ…å†µï¼šæ¯”å¦‚é‚“è‚¯å…³æ³¨äº†è°ï¼Ÿ â“ å¼€æ”¾é—®é¢˜ï¼š å¦‚æœçœ‹æ•™ç¨‹çš„ä½ è§‰å¾—è¿™å‡ ä¸ªé—®é¢˜å¤ªæ²¡æ„æ€äº†ï¼Œè¿™é‡Œç•™ä¸€ä¸ªå¼€æ”¾é—®é¢˜ï¼Œä½ å¯ä»¥åœ¨ Siwi é‡Œå¸®æˆ‘ä»¬å®ç°ï¼šã€Œå…±åŒå¥½å‹ï¼ˆAï¼ŒBï¼‰è·å¾— A å’Œ B çš„ä¸€åº¦å…±åŒå¥½å‹ã€è¿™ä¸ªæ„å›¾ï¼ˆæˆ–è€…æ›´é…·çš„å…¶ä»–å¥å­ï¼‰ä¹ˆï¼Ÿæ¬¢è¿æ¥ Githubï¼šgithub.com/wey-gu/nebula-siwi/ æ PR å“¦ï¼Œçœ‹çœ‹è°å…ˆå®ç°ã€‚ ä»£ç ç‰‡æ®µï¼šsrc/siwi/bot/classfier/__init__.py class SiwiClassifier(): def get(self, sentence: str) -\u003e dict: \"\"\" Classify Sentences and Fill Slots. This should be done by NLP, here we fake one to demostrate the intent Actor --\u003e Graph DB work flow. sentense: relation: - What is the relationship between Yao Ming and Lakers? - How does Tracy McGrady and Lakers connected? serving: - Which team had Jonathon Simmons served? friendship: - Whom does Tim Duncan follow? - Who are Tracy McGrady's friends? returns: { \"entities\": entities, \"intents\": intents } \"\"\" entities = self.get_matched_entities(sentence) intents = self.get_matched_intents(sentence) return { \"entities\": entities, \"intents\": intents } è¿™é‡Œï¼Œæˆ‘æŠŠåŒ¹é…çš„è§„åˆ™ï¼ˆç­‰ä»·äº if elseâ€¦ï¼‰å†™åœ¨äº† src/siwi/bot/test/data ä¹‹ä¸‹çš„ YAML æ–‡ä»¶é‡Œï¼Œè¿™æ ·å¢åŠ  classifier ä¹‹ä¸­æ–°çš„è§„åˆ™åªéœ€è¦æ›´æ–°è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ï¼š æ„å›¾è¯†åˆ«(intent) def load_entity_data(self) -\u003e None: # load data from yaml files module_path = f\"{ siwi.__path__[0] }/bot/test/data\" #... with open(f\"{ module_path }/intents.yaml\", \"r\") as file: self.intents = yaml.safe_load(file)[\"intents\"] å¯¹äºæ¯ä¸€ä¸ªæ„å›¾æ¥è¯´ï¼š intents.\u003cåå­—\u003e ä»£è¡¨åå­— åå­—ä¹‹åçš„ action ä»£è¡¨åè¾¹åœ¨è¦å®ç°çš„ç›¸åº”çš„ xxxAction çš„ç±» æ¯”å¦‚ RelationshipAction å°†æ˜¯ç”¨æ¥å¤„ç†æŸ¥è¯¢å…³ç³»ï¼ˆAï¼ŒBï¼‰è¿™æ ·çš„é—®é¢˜çš„ Action ç±» keywords ä»£è¡¨åœ¨å¥å­ä¹‹ä¸­åŒ¹é…çš„å…³é”®è¯ æ¯”å¦‚é—®å¥é‡Œå‡ºç° serveï¼Œservedï¼Œserving çš„å­—çœ¼çš„æ—¶å€™ï¼Œå°†ä¼šåŒ¹é…æœå½¹çš„é—®é¢˜ ğŸ’¡ï¼šå†™ if else æ¡ä»¶æ¥å¯¹åº”æ„å›¾æ˜¯ä¸å®¹æ˜“çš„ï¼Œå› ä¸ºä¸åŒæ„å›¾ä¸å¯èƒ½æ²¡æœ‰å…³é”®è¯ç›¸äº¤çš„æƒ…å†µï¼Œæˆ‘ä»¬çš„å®ç°åªæ˜¯ä¸€ä¸ªéå¸¸ç®€é™‹ã€ä¸ä¸¥è°¨çš„æ–¹å¼ã€‚åœ¨å®é™…åœºæ™¯ä¸‹ï¼Œè®­ç»ƒæ¨¡å‹å»åšåŒ¹é…æ•ˆæœä¼šæ›´å¥½ï¼Œæœ‰æ„æ€çš„æ˜¯ï¼Œé‚£äº›åšçš„æ¯”è¾ƒå¥½çš„æ¨¡å‹çš„è¾“å…¥å’Œæˆ‘ä»¬çš„ YAML çš„æ ¼å¼æ˜¯å¾ˆç±»ä¼¼çš„ã€‚ ---intents:fallback:action:FallbackActionkeywords:[]relationship:action:RelationshipActionkeywords:- between- relation- relationship- related- connect- correlateserve:action:ServeActionkeywords:- serve- served- servingfriend:action:FollowActionkeywords:- follows- followed- follow- friend- friends å®ä½“è¯†åˆ«(entity)ç±»ä¼¼çš„ï¼Œå®ä½“è¯†åˆ«çš„éƒ¨åˆ†æœ¬è´¨ä¸Šä¹Ÿæ˜¯ if elseï¼Œåªä¸è¿‡è¿™é‡Œåˆ©ç”¨åˆ°äº†**Ahoâ€“Corasickç®—æ³•**æ¥å¸®åŠ©æœç´¢å®ä½“ï¼Œåœ¨ç”Ÿäº§ï¼ˆéç©å…·ï¼‰çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥ç”¨ NLP é‡Œçš„åˆ†è¯çš„æ–¹æ³•æ¥åšã€‚ ğŸ’¡ï¼šå¤§å®¶å¯ä»¥å»äº†è§£ä¸€ä¸‹è¿™ä¸ª ACè‡ªåŠ¨æœºç®—æ³• def setup_entity_tree(self) -\u003e None: self.entity_type_map.update({ key: \"player\" for key in self.players.keys() }) self.entity_type_map.update({ key: \"team\" for key in self.teams.keys() }) self.entity_tree = ahocorasick.Automaton() for index, entity in enumerate(self.entity_type_map.keys()): self.entity_tree.add_word(entity, (index, entity)) self.entity_tree.make_automaton() #... def get_matched_entities(self, sentence: str) -\u003e dict: \"\"\" Consume a sentence to be matched with ahocorasick Returns a dict: {entity: entity_type} \"\"\" _matched = [] for item in self.entity_tree.iter(sentence): entities_matched.append(item[1][1]) return { entity: self.entity_type_map[entity] for entity in _matched } è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ SiwiClassifier.get(sentence) å·²ç»èƒ½è¿”å›è§£æã€åˆ†ç±»å‡ºæ¥çš„æ„å›¾å’Œå®ä½“äº†ï¼Œè¿™æ—¶å€™ï¼Œå®ƒä»¬ä¼šè¢«ä¼ ç»™ Actions æ¥è®© siwi bot çŸ¥é“å¦‚ä½•å»æ‰§è¡ŒçŸ¥è¯†å›¾è°±çš„æŸ¥è¯¢å•¦ï¼ æ„é€ å›¾è°±æŸ¥è¯¢(action)è¿˜è®°å¾—å‰è¾¹çš„ bot ä»£ç é‡Œï¼Œæœ€åä¸€æ­¥ï¼Œå›¾è°±æŸ¥è¯¢çš„åŠ¨ä½œæ˜¯è¿™ä¹ˆè¢«æ„é€ çš„ï¼š action = self.actions","date":"2021-12-30","objectID":"/siwi/:4:2","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#å¤„ç†è¯·æ±‚bot"},{"categories":["Nebula Graph","Mini Project"],"content":"å¤„ç†è¯·æ±‚(bot) â”‚ â”‚ Sentence ./bot/ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent matching, â”‚ ./bot/classifierâ”‚ â”‚ â”‚ Symentic Processing â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Intent, Entities â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent Actor â”‚ ./bot/actions â”‚ â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å‰è¾¹æåˆ°è¿‡ï¼ŒKBQA åŸºæœ¬ä¸Šæ˜¯ a. æŠŠé—®é¢˜è§£æã€è½¬æ¢æˆåœ¨çŸ¥è¯†å›¾è°±ä¸­çš„æŸ¥è¯¢ b. æŸ¥è¯¢å¾—åˆ°ç»“æœä¹‹åè¿›è¡Œç­›é€‰ã€ç¿»è¯‘æˆç»“æœ è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠ a. çš„é€»è¾‘æ”¾åœ¨ classifier é‡Œï¼Œb. çš„é€»è¾‘æ”¾åœ¨ actions(actor) é‡Œã€‚ a. HTTP è¯·æ±‚çš„é—®é¢˜å¥å­ sentence ä¼ è¿‡æ¥ï¼Œç”¨ classifier è§£æå®ƒçš„æ„å›¾å’Œå¥å­å®ä½“ b. ç”¨æ„å›¾å’Œå¥å­å®ä½“æ„é€  actionï¼Œå¹¶é“¾æ¥å›¾æ•°æ®åº“æ‰§è¡Œï¼Œè·å–ç»“æœã€‚ ä»£ç æ®µï¼šsrc/siwi/bot/bot/__init__.py from siwi.bot.actions import SiwiActions from siwi.bot.classifier import SiwiClassifier class SiwiBot(): def __init__(self, connection_pool) - None: self.classifier = SiwiClassifier() self.actions = SiwiActions() self.connection_pool = connection_pool def query(self, sentence): intent = self.classifier.get(sentence) # dict: \"\"\" Classify Sentences and Fill Slots. This should be done by NLP, here we fake one to demostrate the intent Actor -- Graph DB work flow. sentense: relation: - What is the relationship between Yao Ming and Lakers? - How does Tracy McGrady and Lakers connected? serving: - Which team had Jonathon Simmons served? friendship: - Whom does Tim Duncan follow? - Who are Tracy McGrady's friends? returns: { \"entities\": entities, \"intents\": intents } \"\"\" entities = self.get_matched_entities(sentence) intents = self.get_matched_intents(sentence) return { \"entities\": entities, \"intents\": intents } è¿™é‡Œï¼Œæˆ‘æŠŠåŒ¹é…çš„è§„åˆ™ï¼ˆç­‰ä»·äº if elseâ€¦ï¼‰å†™åœ¨äº† src/siwi/bot/test/data ä¹‹ä¸‹çš„ YAML æ–‡ä»¶é‡Œï¼Œè¿™æ ·å¢åŠ  classifier ä¹‹ä¸­æ–°çš„è§„åˆ™åªéœ€è¦æ›´æ–°è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ï¼š æ„å›¾è¯†åˆ«(intent) def load_entity_data(self) - None: # load data from yaml files module_path = f\"{ siwi.__path__[0] }/bot/test/data\" #... with open(f\"{ module_path }/intents.yaml\", \"r\") as file: self.intents = yaml.safe_load(file)[\"intents\"] å¯¹äºæ¯ä¸€ä¸ªæ„å›¾æ¥è¯´ï¼š intents. ä»£è¡¨åå­— åå­—ä¹‹åçš„ action ä»£è¡¨åè¾¹åœ¨è¦å®ç°çš„ç›¸åº”çš„ xxxAction çš„ç±» æ¯”å¦‚ RelationshipAction å°†æ˜¯ç”¨æ¥å¤„ç†æŸ¥è¯¢å…³ç³»ï¼ˆAï¼ŒBï¼‰è¿™æ ·çš„é—®é¢˜çš„ Action ç±» keywords ä»£è¡¨åœ¨å¥å­ä¹‹ä¸­åŒ¹é…çš„å…³é”®è¯ æ¯”å¦‚é—®å¥é‡Œå‡ºç° serveï¼Œservedï¼Œserving çš„å­—çœ¼çš„æ—¶å€™ï¼Œå°†ä¼šåŒ¹é…æœå½¹çš„é—®é¢˜ ğŸ’¡ï¼šå†™ if else æ¡ä»¶æ¥å¯¹åº”æ„å›¾æ˜¯ä¸å®¹æ˜“çš„ï¼Œå› ä¸ºä¸åŒæ„å›¾ä¸å¯èƒ½æ²¡æœ‰å…³é”®è¯ç›¸äº¤çš„æƒ…å†µï¼Œæˆ‘ä»¬çš„å®ç°åªæ˜¯ä¸€ä¸ªéå¸¸ç®€é™‹ã€ä¸ä¸¥è°¨çš„æ–¹å¼ã€‚åœ¨å®é™…åœºæ™¯ä¸‹ï¼Œè®­ç»ƒæ¨¡å‹å»åšåŒ¹é…æ•ˆæœä¼šæ›´å¥½ï¼Œæœ‰æ„æ€çš„æ˜¯ï¼Œé‚£äº›åšçš„æ¯”è¾ƒå¥½çš„æ¨¡å‹çš„è¾“å…¥å’Œæˆ‘ä»¬çš„ YAML çš„æ ¼å¼æ˜¯å¾ˆç±»ä¼¼çš„ã€‚ ---intents:fallback:action:FallbackActionkeywords:[]relationship:action:RelationshipActionkeywords:- between- relation- relationship- related- connect- correlateserve:action:ServeActionkeywords:- serve- served- servingfriend:action:FollowActionkeywords:- follows- followed- follow- friend- friends å®ä½“è¯†åˆ«(entity)ç±»ä¼¼çš„ï¼Œå®ä½“è¯†åˆ«çš„éƒ¨åˆ†æœ¬è´¨ä¸Šä¹Ÿæ˜¯ if elseï¼Œåªä¸è¿‡è¿™é‡Œåˆ©ç”¨åˆ°äº†**Ahoâ€“Corasickç®—æ³•**æ¥å¸®åŠ©æœç´¢å®ä½“ï¼Œåœ¨ç”Ÿäº§ï¼ˆéç©å…·ï¼‰çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥ç”¨ NLP é‡Œçš„åˆ†è¯çš„æ–¹æ³•æ¥åšã€‚ ğŸ’¡ï¼šå¤§å®¶å¯ä»¥å»äº†è§£ä¸€ä¸‹è¿™ä¸ª ACè‡ªåŠ¨æœºç®—æ³• def setup_entity_tree(self) - None: self.entity_type_map.update({ key: \"player\" for key in self.players.keys() }) self.entity_type_map.update({ key: \"team\" for key in self.teams.keys() }) self.entity_tree = ahocorasick.Automaton() for index, entity in enumerate(self.entity_type_map.keys()): self.entity_tree.add_word(entity, (index, entity)) self.entity_tree.make_automaton() #... def get_matched_entities(self, sentence: str) - dict: \"\"\" Consume a sentence to be matched with ahocorasick Returns a dict: {entity: entity_type} \"\"\" _matched = [] for item in self.entity_tree.iter(sentence): entities_matched.append(item[1][1]) return { entity: self.entity_type_map[entity] for entity in _matched } è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ SiwiClassifier.get(sentence) å·²ç»èƒ½è¿”å›è§£æã€åˆ†ç±»å‡ºæ¥çš„æ„å›¾å’Œå®ä½“äº†ï¼Œè¿™æ—¶å€™ï¼Œå®ƒä»¬ä¼šè¢«ä¼ ç»™ Actions æ¥è®© siwi bot çŸ¥é“å¦‚ä½•å»æ‰§è¡ŒçŸ¥è¯†å›¾è°±çš„æŸ¥è¯¢å•¦ï¼ æ„é€ å›¾è°±æŸ¥è¯¢(action)è¿˜è®°å¾—å‰è¾¹çš„ bot ä»£ç é‡Œï¼Œæœ€åä¸€æ­¥ï¼Œå›¾è°±æŸ¥è¯¢çš„åŠ¨ä½œæ˜¯è¿™ä¹ˆè¢«æ„é€ çš„ï¼š action = self.actions","date":"2021-12-30","objectID":"/siwi/:4:2","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#è¯­ä¹‰è§£æclassifier"},{"categories":["Nebula Graph","Mini Project"],"content":"å¤„ç†è¯·æ±‚(bot) â”‚ â”‚ Sentence ./bot/ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent matching, â”‚ ./bot/classifierâ”‚ â”‚ â”‚ Symentic Processing â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Intent, Entities â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent Actor â”‚ ./bot/actions â”‚ â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å‰è¾¹æåˆ°è¿‡ï¼ŒKBQA åŸºæœ¬ä¸Šæ˜¯ a. æŠŠé—®é¢˜è§£æã€è½¬æ¢æˆåœ¨çŸ¥è¯†å›¾è°±ä¸­çš„æŸ¥è¯¢ b. æŸ¥è¯¢å¾—åˆ°ç»“æœä¹‹åè¿›è¡Œç­›é€‰ã€ç¿»è¯‘æˆç»“æœ è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠ a. çš„é€»è¾‘æ”¾åœ¨ classifier é‡Œï¼Œb. çš„é€»è¾‘æ”¾åœ¨ actions(actor) é‡Œã€‚ a. HTTP è¯·æ±‚çš„é—®é¢˜å¥å­ sentence ä¼ è¿‡æ¥ï¼Œç”¨ classifier è§£æå®ƒçš„æ„å›¾å’Œå¥å­å®ä½“ b. ç”¨æ„å›¾å’Œå¥å­å®ä½“æ„é€  actionï¼Œå¹¶é“¾æ¥å›¾æ•°æ®åº“æ‰§è¡Œï¼Œè·å–ç»“æœã€‚ ä»£ç æ®µï¼šsrc/siwi/bot/bot/__init__.py from siwi.bot.actions import SiwiActions from siwi.bot.classifier import SiwiClassifier class SiwiBot(): def __init__(self, connection_pool) - None: self.classifier = SiwiClassifier() self.actions = SiwiActions() self.connection_pool = connection_pool def query(self, sentence): intent = self.classifier.get(sentence) # dict: \"\"\" Classify Sentences and Fill Slots. This should be done by NLP, here we fake one to demostrate the intent Actor -- Graph DB work flow. sentense: relation: - What is the relationship between Yao Ming and Lakers? - How does Tracy McGrady and Lakers connected? serving: - Which team had Jonathon Simmons served? friendship: - Whom does Tim Duncan follow? - Who are Tracy McGrady's friends? returns: { \"entities\": entities, \"intents\": intents } \"\"\" entities = self.get_matched_entities(sentence) intents = self.get_matched_intents(sentence) return { \"entities\": entities, \"intents\": intents } è¿™é‡Œï¼Œæˆ‘æŠŠåŒ¹é…çš„è§„åˆ™ï¼ˆç­‰ä»·äº if elseâ€¦ï¼‰å†™åœ¨äº† src/siwi/bot/test/data ä¹‹ä¸‹çš„ YAML æ–‡ä»¶é‡Œï¼Œè¿™æ ·å¢åŠ  classifier ä¹‹ä¸­æ–°çš„è§„åˆ™åªéœ€è¦æ›´æ–°è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ï¼š æ„å›¾è¯†åˆ«(intent) def load_entity_data(self) - None: # load data from yaml files module_path = f\"{ siwi.__path__[0] }/bot/test/data\" #... with open(f\"{ module_path }/intents.yaml\", \"r\") as file: self.intents = yaml.safe_load(file)[\"intents\"] å¯¹äºæ¯ä¸€ä¸ªæ„å›¾æ¥è¯´ï¼š intents. ä»£è¡¨åå­— åå­—ä¹‹åçš„ action ä»£è¡¨åè¾¹åœ¨è¦å®ç°çš„ç›¸åº”çš„ xxxAction çš„ç±» æ¯”å¦‚ RelationshipAction å°†æ˜¯ç”¨æ¥å¤„ç†æŸ¥è¯¢å…³ç³»ï¼ˆAï¼ŒBï¼‰è¿™æ ·çš„é—®é¢˜çš„ Action ç±» keywords ä»£è¡¨åœ¨å¥å­ä¹‹ä¸­åŒ¹é…çš„å…³é”®è¯ æ¯”å¦‚é—®å¥é‡Œå‡ºç° serveï¼Œservedï¼Œserving çš„å­—çœ¼çš„æ—¶å€™ï¼Œå°†ä¼šåŒ¹é…æœå½¹çš„é—®é¢˜ ğŸ’¡ï¼šå†™ if else æ¡ä»¶æ¥å¯¹åº”æ„å›¾æ˜¯ä¸å®¹æ˜“çš„ï¼Œå› ä¸ºä¸åŒæ„å›¾ä¸å¯èƒ½æ²¡æœ‰å…³é”®è¯ç›¸äº¤çš„æƒ…å†µï¼Œæˆ‘ä»¬çš„å®ç°åªæ˜¯ä¸€ä¸ªéå¸¸ç®€é™‹ã€ä¸ä¸¥è°¨çš„æ–¹å¼ã€‚åœ¨å®é™…åœºæ™¯ä¸‹ï¼Œè®­ç»ƒæ¨¡å‹å»åšåŒ¹é…æ•ˆæœä¼šæ›´å¥½ï¼Œæœ‰æ„æ€çš„æ˜¯ï¼Œé‚£äº›åšçš„æ¯”è¾ƒå¥½çš„æ¨¡å‹çš„è¾“å…¥å’Œæˆ‘ä»¬çš„ YAML çš„æ ¼å¼æ˜¯å¾ˆç±»ä¼¼çš„ã€‚ ---intents:fallback:action:FallbackActionkeywords:[]relationship:action:RelationshipActionkeywords:- between- relation- relationship- related- connect- correlateserve:action:ServeActionkeywords:- serve- served- servingfriend:action:FollowActionkeywords:- follows- followed- follow- friend- friends å®ä½“è¯†åˆ«(entity)ç±»ä¼¼çš„ï¼Œå®ä½“è¯†åˆ«çš„éƒ¨åˆ†æœ¬è´¨ä¸Šä¹Ÿæ˜¯ if elseï¼Œåªä¸è¿‡è¿™é‡Œåˆ©ç”¨åˆ°äº†**Ahoâ€“Corasickç®—æ³•**æ¥å¸®åŠ©æœç´¢å®ä½“ï¼Œåœ¨ç”Ÿäº§ï¼ˆéç©å…·ï¼‰çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥ç”¨ NLP é‡Œçš„åˆ†è¯çš„æ–¹æ³•æ¥åšã€‚ ğŸ’¡ï¼šå¤§å®¶å¯ä»¥å»äº†è§£ä¸€ä¸‹è¿™ä¸ª ACè‡ªåŠ¨æœºç®—æ³• def setup_entity_tree(self) - None: self.entity_type_map.update({ key: \"player\" for key in self.players.keys() }) self.entity_type_map.update({ key: \"team\" for key in self.teams.keys() }) self.entity_tree = ahocorasick.Automaton() for index, entity in enumerate(self.entity_type_map.keys()): self.entity_tree.add_word(entity, (index, entity)) self.entity_tree.make_automaton() #... def get_matched_entities(self, sentence: str) - dict: \"\"\" Consume a sentence to be matched with ahocorasick Returns a dict: {entity: entity_type} \"\"\" _matched = [] for item in self.entity_tree.iter(sentence): entities_matched.append(item[1][1]) return { entity: self.entity_type_map[entity] for entity in _matched } è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ SiwiClassifier.get(sentence) å·²ç»èƒ½è¿”å›è§£æã€åˆ†ç±»å‡ºæ¥çš„æ„å›¾å’Œå®ä½“äº†ï¼Œè¿™æ—¶å€™ï¼Œå®ƒä»¬ä¼šè¢«ä¼ ç»™ Actions æ¥è®© siwi bot çŸ¥é“å¦‚ä½•å»æ‰§è¡ŒçŸ¥è¯†å›¾è°±çš„æŸ¥è¯¢å•¦ï¼ æ„é€ å›¾è°±æŸ¥è¯¢(action)è¿˜è®°å¾—å‰è¾¹çš„ bot ä»£ç é‡Œï¼Œæœ€åä¸€æ­¥ï¼Œå›¾è°±æŸ¥è¯¢çš„åŠ¨ä½œæ˜¯è¿™ä¹ˆè¢«æ„é€ çš„ï¼š action = self.actions","date":"2021-12-30","objectID":"/siwi/:4:2","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#æ„å›¾è¯†åˆ«intent"},{"categories":["Nebula Graph","Mini Project"],"content":"å¤„ç†è¯·æ±‚(bot) â”‚ â”‚ Sentence ./bot/ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent matching, â”‚ ./bot/classifierâ”‚ â”‚ â”‚ Symentic Processing â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Intent, Entities â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent Actor â”‚ ./bot/actions â”‚ â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å‰è¾¹æåˆ°è¿‡ï¼ŒKBQA åŸºæœ¬ä¸Šæ˜¯ a. æŠŠé—®é¢˜è§£æã€è½¬æ¢æˆåœ¨çŸ¥è¯†å›¾è°±ä¸­çš„æŸ¥è¯¢ b. æŸ¥è¯¢å¾—åˆ°ç»“æœä¹‹åè¿›è¡Œç­›é€‰ã€ç¿»è¯‘æˆç»“æœ è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠ a. çš„é€»è¾‘æ”¾åœ¨ classifier é‡Œï¼Œb. çš„é€»è¾‘æ”¾åœ¨ actions(actor) é‡Œã€‚ a. HTTP è¯·æ±‚çš„é—®é¢˜å¥å­ sentence ä¼ è¿‡æ¥ï¼Œç”¨ classifier è§£æå®ƒçš„æ„å›¾å’Œå¥å­å®ä½“ b. ç”¨æ„å›¾å’Œå¥å­å®ä½“æ„é€  actionï¼Œå¹¶é“¾æ¥å›¾æ•°æ®åº“æ‰§è¡Œï¼Œè·å–ç»“æœã€‚ ä»£ç æ®µï¼šsrc/siwi/bot/bot/__init__.py from siwi.bot.actions import SiwiActions from siwi.bot.classifier import SiwiClassifier class SiwiBot(): def __init__(self, connection_pool) - None: self.classifier = SiwiClassifier() self.actions = SiwiActions() self.connection_pool = connection_pool def query(self, sentence): intent = self.classifier.get(sentence) # dict: \"\"\" Classify Sentences and Fill Slots. This should be done by NLP, here we fake one to demostrate the intent Actor -- Graph DB work flow. sentense: relation: - What is the relationship between Yao Ming and Lakers? - How does Tracy McGrady and Lakers connected? serving: - Which team had Jonathon Simmons served? friendship: - Whom does Tim Duncan follow? - Who are Tracy McGrady's friends? returns: { \"entities\": entities, \"intents\": intents } \"\"\" entities = self.get_matched_entities(sentence) intents = self.get_matched_intents(sentence) return { \"entities\": entities, \"intents\": intents } è¿™é‡Œï¼Œæˆ‘æŠŠåŒ¹é…çš„è§„åˆ™ï¼ˆç­‰ä»·äº if elseâ€¦ï¼‰å†™åœ¨äº† src/siwi/bot/test/data ä¹‹ä¸‹çš„ YAML æ–‡ä»¶é‡Œï¼Œè¿™æ ·å¢åŠ  classifier ä¹‹ä¸­æ–°çš„è§„åˆ™åªéœ€è¦æ›´æ–°è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ï¼š æ„å›¾è¯†åˆ«(intent) def load_entity_data(self) - None: # load data from yaml files module_path = f\"{ siwi.__path__[0] }/bot/test/data\" #... with open(f\"{ module_path }/intents.yaml\", \"r\") as file: self.intents = yaml.safe_load(file)[\"intents\"] å¯¹äºæ¯ä¸€ä¸ªæ„å›¾æ¥è¯´ï¼š intents. ä»£è¡¨åå­— åå­—ä¹‹åçš„ action ä»£è¡¨åè¾¹åœ¨è¦å®ç°çš„ç›¸åº”çš„ xxxAction çš„ç±» æ¯”å¦‚ RelationshipAction å°†æ˜¯ç”¨æ¥å¤„ç†æŸ¥è¯¢å…³ç³»ï¼ˆAï¼ŒBï¼‰è¿™æ ·çš„é—®é¢˜çš„ Action ç±» keywords ä»£è¡¨åœ¨å¥å­ä¹‹ä¸­åŒ¹é…çš„å…³é”®è¯ æ¯”å¦‚é—®å¥é‡Œå‡ºç° serveï¼Œservedï¼Œserving çš„å­—çœ¼çš„æ—¶å€™ï¼Œå°†ä¼šåŒ¹é…æœå½¹çš„é—®é¢˜ ğŸ’¡ï¼šå†™ if else æ¡ä»¶æ¥å¯¹åº”æ„å›¾æ˜¯ä¸å®¹æ˜“çš„ï¼Œå› ä¸ºä¸åŒæ„å›¾ä¸å¯èƒ½æ²¡æœ‰å…³é”®è¯ç›¸äº¤çš„æƒ…å†µï¼Œæˆ‘ä»¬çš„å®ç°åªæ˜¯ä¸€ä¸ªéå¸¸ç®€é™‹ã€ä¸ä¸¥è°¨çš„æ–¹å¼ã€‚åœ¨å®é™…åœºæ™¯ä¸‹ï¼Œè®­ç»ƒæ¨¡å‹å»åšåŒ¹é…æ•ˆæœä¼šæ›´å¥½ï¼Œæœ‰æ„æ€çš„æ˜¯ï¼Œé‚£äº›åšçš„æ¯”è¾ƒå¥½çš„æ¨¡å‹çš„è¾“å…¥å’Œæˆ‘ä»¬çš„ YAML çš„æ ¼å¼æ˜¯å¾ˆç±»ä¼¼çš„ã€‚ ---intents:fallback:action:FallbackActionkeywords:[]relationship:action:RelationshipActionkeywords:- between- relation- relationship- related- connect- correlateserve:action:ServeActionkeywords:- serve- served- servingfriend:action:FollowActionkeywords:- follows- followed- follow- friend- friends å®ä½“è¯†åˆ«(entity)ç±»ä¼¼çš„ï¼Œå®ä½“è¯†åˆ«çš„éƒ¨åˆ†æœ¬è´¨ä¸Šä¹Ÿæ˜¯ if elseï¼Œåªä¸è¿‡è¿™é‡Œåˆ©ç”¨åˆ°äº†**Ahoâ€“Corasickç®—æ³•**æ¥å¸®åŠ©æœç´¢å®ä½“ï¼Œåœ¨ç”Ÿäº§ï¼ˆéç©å…·ï¼‰çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥ç”¨ NLP é‡Œçš„åˆ†è¯çš„æ–¹æ³•æ¥åšã€‚ ğŸ’¡ï¼šå¤§å®¶å¯ä»¥å»äº†è§£ä¸€ä¸‹è¿™ä¸ª ACè‡ªåŠ¨æœºç®—æ³• def setup_entity_tree(self) - None: self.entity_type_map.update({ key: \"player\" for key in self.players.keys() }) self.entity_type_map.update({ key: \"team\" for key in self.teams.keys() }) self.entity_tree = ahocorasick.Automaton() for index, entity in enumerate(self.entity_type_map.keys()): self.entity_tree.add_word(entity, (index, entity)) self.entity_tree.make_automaton() #... def get_matched_entities(self, sentence: str) - dict: \"\"\" Consume a sentence to be matched with ahocorasick Returns a dict: {entity: entity_type} \"\"\" _matched = [] for item in self.entity_tree.iter(sentence): entities_matched.append(item[1][1]) return { entity: self.entity_type_map[entity] for entity in _matched } è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ SiwiClassifier.get(sentence) å·²ç»èƒ½è¿”å›è§£æã€åˆ†ç±»å‡ºæ¥çš„æ„å›¾å’Œå®ä½“äº†ï¼Œè¿™æ—¶å€™ï¼Œå®ƒä»¬ä¼šè¢«ä¼ ç»™ Actions æ¥è®© siwi bot çŸ¥é“å¦‚ä½•å»æ‰§è¡ŒçŸ¥è¯†å›¾è°±çš„æŸ¥è¯¢å•¦ï¼ æ„é€ å›¾è°±æŸ¥è¯¢(action)è¿˜è®°å¾—å‰è¾¹çš„ bot ä»£ç é‡Œï¼Œæœ€åä¸€æ­¥ï¼Œå›¾è°±æŸ¥è¯¢çš„åŠ¨ä½œæ˜¯è¿™ä¹ˆè¢«æ„é€ çš„ï¼š action = self.actions","date":"2021-12-30","objectID":"/siwi/:4:2","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#å®ä½“è¯†åˆ«entity"},{"categories":["Nebula Graph","Mini Project"],"content":"å¤„ç†è¯·æ±‚(bot) â”‚ â”‚ Sentence ./bot/ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent matching, â”‚ ./bot/classifierâ”‚ â”‚ â”‚ Symentic Processing â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Intent, Entities â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Intent Actor â”‚ ./bot/actions â”‚ â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å‰è¾¹æåˆ°è¿‡ï¼ŒKBQA åŸºæœ¬ä¸Šæ˜¯ a. æŠŠé—®é¢˜è§£æã€è½¬æ¢æˆåœ¨çŸ¥è¯†å›¾è°±ä¸­çš„æŸ¥è¯¢ b. æŸ¥è¯¢å¾—åˆ°ç»“æœä¹‹åè¿›è¡Œç­›é€‰ã€ç¿»è¯‘æˆç»“æœ è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠ a. çš„é€»è¾‘æ”¾åœ¨ classifier é‡Œï¼Œb. çš„é€»è¾‘æ”¾åœ¨ actions(actor) é‡Œã€‚ a. HTTP è¯·æ±‚çš„é—®é¢˜å¥å­ sentence ä¼ è¿‡æ¥ï¼Œç”¨ classifier è§£æå®ƒçš„æ„å›¾å’Œå¥å­å®ä½“ b. ç”¨æ„å›¾å’Œå¥å­å®ä½“æ„é€  actionï¼Œå¹¶é“¾æ¥å›¾æ•°æ®åº“æ‰§è¡Œï¼Œè·å–ç»“æœã€‚ ä»£ç æ®µï¼šsrc/siwi/bot/bot/__init__.py from siwi.bot.actions import SiwiActions from siwi.bot.classifier import SiwiClassifier class SiwiBot(): def __init__(self, connection_pool) - None: self.classifier = SiwiClassifier() self.actions = SiwiActions() self.connection_pool = connection_pool def query(self, sentence): intent = self.classifier.get(sentence) # dict: \"\"\" Classify Sentences and Fill Slots. This should be done by NLP, here we fake one to demostrate the intent Actor -- Graph DB work flow. sentense: relation: - What is the relationship between Yao Ming and Lakers? - How does Tracy McGrady and Lakers connected? serving: - Which team had Jonathon Simmons served? friendship: - Whom does Tim Duncan follow? - Who are Tracy McGrady's friends? returns: { \"entities\": entities, \"intents\": intents } \"\"\" entities = self.get_matched_entities(sentence) intents = self.get_matched_intents(sentence) return { \"entities\": entities, \"intents\": intents } è¿™é‡Œï¼Œæˆ‘æŠŠåŒ¹é…çš„è§„åˆ™ï¼ˆç­‰ä»·äº if elseâ€¦ï¼‰å†™åœ¨äº† src/siwi/bot/test/data ä¹‹ä¸‹çš„ YAML æ–‡ä»¶é‡Œï¼Œè¿™æ ·å¢åŠ  classifier ä¹‹ä¸­æ–°çš„è§„åˆ™åªéœ€è¦æ›´æ–°è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ï¼š æ„å›¾è¯†åˆ«(intent) def load_entity_data(self) - None: # load data from yaml files module_path = f\"{ siwi.__path__[0] }/bot/test/data\" #... with open(f\"{ module_path }/intents.yaml\", \"r\") as file: self.intents = yaml.safe_load(file)[\"intents\"] å¯¹äºæ¯ä¸€ä¸ªæ„å›¾æ¥è¯´ï¼š intents. ä»£è¡¨åå­— åå­—ä¹‹åçš„ action ä»£è¡¨åè¾¹åœ¨è¦å®ç°çš„ç›¸åº”çš„ xxxAction çš„ç±» æ¯”å¦‚ RelationshipAction å°†æ˜¯ç”¨æ¥å¤„ç†æŸ¥è¯¢å…³ç³»ï¼ˆAï¼ŒBï¼‰è¿™æ ·çš„é—®é¢˜çš„ Action ç±» keywords ä»£è¡¨åœ¨å¥å­ä¹‹ä¸­åŒ¹é…çš„å…³é”®è¯ æ¯”å¦‚é—®å¥é‡Œå‡ºç° serveï¼Œservedï¼Œserving çš„å­—çœ¼çš„æ—¶å€™ï¼Œå°†ä¼šåŒ¹é…æœå½¹çš„é—®é¢˜ ğŸ’¡ï¼šå†™ if else æ¡ä»¶æ¥å¯¹åº”æ„å›¾æ˜¯ä¸å®¹æ˜“çš„ï¼Œå› ä¸ºä¸åŒæ„å›¾ä¸å¯èƒ½æ²¡æœ‰å…³é”®è¯ç›¸äº¤çš„æƒ…å†µï¼Œæˆ‘ä»¬çš„å®ç°åªæ˜¯ä¸€ä¸ªéå¸¸ç®€é™‹ã€ä¸ä¸¥è°¨çš„æ–¹å¼ã€‚åœ¨å®é™…åœºæ™¯ä¸‹ï¼Œè®­ç»ƒæ¨¡å‹å»åšåŒ¹é…æ•ˆæœä¼šæ›´å¥½ï¼Œæœ‰æ„æ€çš„æ˜¯ï¼Œé‚£äº›åšçš„æ¯”è¾ƒå¥½çš„æ¨¡å‹çš„è¾“å…¥å’Œæˆ‘ä»¬çš„ YAML çš„æ ¼å¼æ˜¯å¾ˆç±»ä¼¼çš„ã€‚ ---intents:fallback:action:FallbackActionkeywords:[]relationship:action:RelationshipActionkeywords:- between- relation- relationship- related- connect- correlateserve:action:ServeActionkeywords:- serve- served- servingfriend:action:FollowActionkeywords:- follows- followed- follow- friend- friends å®ä½“è¯†åˆ«(entity)ç±»ä¼¼çš„ï¼Œå®ä½“è¯†åˆ«çš„éƒ¨åˆ†æœ¬è´¨ä¸Šä¹Ÿæ˜¯ if elseï¼Œåªä¸è¿‡è¿™é‡Œåˆ©ç”¨åˆ°äº†**Ahoâ€“Corasickç®—æ³•**æ¥å¸®åŠ©æœç´¢å®ä½“ï¼Œåœ¨ç”Ÿäº§ï¼ˆéç©å…·ï¼‰çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥ç”¨ NLP é‡Œçš„åˆ†è¯çš„æ–¹æ³•æ¥åšã€‚ ğŸ’¡ï¼šå¤§å®¶å¯ä»¥å»äº†è§£ä¸€ä¸‹è¿™ä¸ª ACè‡ªåŠ¨æœºç®—æ³• def setup_entity_tree(self) - None: self.entity_type_map.update({ key: \"player\" for key in self.players.keys() }) self.entity_type_map.update({ key: \"team\" for key in self.teams.keys() }) self.entity_tree = ahocorasick.Automaton() for index, entity in enumerate(self.entity_type_map.keys()): self.entity_tree.add_word(entity, (index, entity)) self.entity_tree.make_automaton() #... def get_matched_entities(self, sentence: str) - dict: \"\"\" Consume a sentence to be matched with ahocorasick Returns a dict: {entity: entity_type} \"\"\" _matched = [] for item in self.entity_tree.iter(sentence): entities_matched.append(item[1][1]) return { entity: self.entity_type_map[entity] for entity in _matched } è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ SiwiClassifier.get(sentence) å·²ç»èƒ½è¿”å›è§£æã€åˆ†ç±»å‡ºæ¥çš„æ„å›¾å’Œå®ä½“äº†ï¼Œè¿™æ—¶å€™ï¼Œå®ƒä»¬ä¼šè¢«ä¼ ç»™ Actions æ¥è®© siwi bot çŸ¥é“å¦‚ä½•å»æ‰§è¡ŒçŸ¥è¯†å›¾è°±çš„æŸ¥è¯¢å•¦ï¼ æ„é€ å›¾è°±æŸ¥è¯¢(action)è¿˜è®°å¾—å‰è¾¹çš„ bot ä»£ç é‡Œï¼Œæœ€åä¸€æ­¥ï¼Œå›¾è°±æŸ¥è¯¢çš„åŠ¨ä½œæ˜¯è¿™ä¹ˆè¢«æ„é€ çš„ï¼š action = self.actions","date":"2021-12-30","objectID":"/siwi/:4:2","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#æ„é€ å›¾è°±æŸ¥è¯¢action"},{"categories":["Nebula Graph","Mini Project"],"content":"æµ‹è¯•ä¸€ä¸‹å¯åŠ¨å›¾æ•°æ®åº“æˆ‘ä»¬åœ¨ Nebula Graph é‡Œå»ºç«‹ï¼ˆå¯¼å…¥æ•°æ®ï¼‰ä¸€ä¸ªç¯®çƒçš„çŸ¥è¯†å›¾è°±ã€‚ ğŸ’¡ï¼šåœ¨å¯¼å…¥æ•°æ®ä¹‹å‰ï¼Œè¯·å…ˆéƒ¨ç½²ä¸€ä¸ª Nebula Graph é›†ç¾¤ã€‚æœ€ç®€ä¾¿çš„éƒ¨ç½²æ–¹å¼æ˜¯ä½¿ç”¨ Nebula-UP è¿™ä¸ªå°å·¥å…·ï¼Œåªéœ€è¦ä¸€è¡Œå‘½ä»¤å°±èƒ½åœ¨ Linux æœºå™¨ä¸ŠåŒæ—¶å¯åŠ¨ä¸€ä¸ª Nebula Graph æ ¸å¿ƒå’Œå¯è§†åŒ–å›¾æ¢ç´¢å·¥å…· Nebula Graph Studioã€‚å¦‚æœä½ æ›´æ„¿æ„ç”¨ Docker éƒ¨ç½²ï¼Œè¯·å‚è€ƒè¿™ä¸ªæ–‡æ¡£ã€‚ æœ¬æ–‡å‡è®¾æˆ‘ä»¬ä½¿ç”¨ Nebula-UP æ¥éƒ¨ç½²ä¸€ä¸ª Nebula Graphï¼š curl -fsSL nebula-up.siwei.io/install.sh | bash ä¹‹åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°è¿™æ ·çš„æç¤ºï¼š æŒ‰ç…§æç¤ºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤è¿›å…¥åˆ°æœ‰ Nebula Console çš„å®¹å™¨é‡Œï¼š ğŸ’¡ï¼šNebula Console æ˜¯å‘½ä»¤è¡Œè®¿é—® Nebula Graph å›¾æ•°æ®åº“çš„å®¢æˆ·ç«¯ï¼Œæ”¯æŒ Linuxï¼ŒWindows å’Œ macOSï¼Œä¸‹è½½åœ°å€ï¼šè¿™é‡Œ ~/.nebula-up/console.sh ç„¶åï¼Œåœ¨ # çš„æç¤ºç¬¦ä¸‹å°±è¡¨ç¤ºæˆ‘ä»¬è¿›æ¥äº†ï¼Œæˆ‘ä»¬åœ¨é‡Œè¾¹å¯ä»¥æ‰§è¡Œï¼š nebula-console -addr graphd -port 9669 -user root -p nebula è¿™æ ·å°±è¡¨ç¤ºæˆ‘ä»¬è¿æ¥ä¸Šäº† Nebula Graph å›¾æ•°æ®åº“ï¼š /# nebula-console -addr graphd -port 9669 -user root -p nebula WelcometoNebulaGraph!(root@nebula)[(none)]\u003e åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ nGQL å»æ“ä½œ Nebula Graphï¼Œä¸è¿‡æˆ‘ä»¬å…ˆé€€å‡ºæ¥ï¼Œæ‰§è¡Œ exitï¼š (root@nebula)[(none)]\u003eexitByeroot!Fri,31Dec202104:11:28UTC æˆ‘ä»¬åœ¨è¿™ä¸ªå®¹å™¨å†…æŠŠåŸºäº nGQL è¯­å¥çš„æ•°æ®ä¸‹è½½ä¸‹æ¥ï¼š / # wget https://docs.nebula-graph.io/2.0/basketballplayer-2.X.ngql ç„¶åé€šè¿‡ Nebula Console çš„ -f \u003cfile_path\u003e æŠŠæ•°æ®å¯¼å…¥è¿›å»ï¼š nebula-console -addr graphd -port 9669 -user root -p nebula -f basketballplayer-2.X.ngql è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯åŠ¨äº†ä¸€ä¸ª Nebula Graph å›¾æ•°æ®åº“ï¼Œè¿˜åœ¨é‡Œè¾¹åŠ è½½äº†ç¯®çƒçš„çŸ¥è¯†å›¾è°±ï¼ ğŸ’¡ï¼šè¿˜è®°å¾—å‰è¾¹æˆ‘ä»¬æåˆ°çš„ åœ¨çº¿ä½“éªŒ ç¯å¢ƒä¹ˆï¼Ÿç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªåˆ©ç”¨ Nebula-UP éƒ¨ç½²äº† Nebula çš„ç¯å¢ƒé‡Œå¯åŠ¨è‡ªå·±çš„ Nebula Studio å•¦ï¼ŒæŒ‰ç…§ä¸Šè¾¹ Nebula-UP çš„æç¤ºï¼šhttp://\u003cæœ¬æœºIP\u003e:7001 å°±æ˜¯å®ƒçš„åœ°å€ï¼Œç„¶åå¤§å®¶å¯ä»¥å‚è€ƒæ–‡æ¡£å’Œåœ¨çº¿ä½“éªŒä»‹ç»å»äº†è§£æ›´å¤šã€‚ å¯åŠ¨ Siwi-backendå¤§å®¶å¯ä»¥ç›´æ¥ clone æˆ‘çš„ä»£ç ï¼šgit clone https://github.com/wey-gu/nebula-siwi/ ç„¶åå®‰è£…ã€å¯åŠ¨ Siwi Backendï¼š cd nebula-siwi # Install dependencies python3 -m pip install -r src/requirements.txt # Install siwi backend python3 -m build # Configure Nebula Graph Endpoint export NG_ENDPOINTS=127.0.0.1:9669 # Run Backend API server gunicorn --bind :5000 wsgi --workers 1 --threads 1 --timeout 60 å¯åŠ¨ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¦å¤–å¼€çª—å£ï¼Œé€šè¿‡ cURL å»å‘èµ·é—®é¢˜ç»™ backendï¼Œæ›´å¤šç»†èŠ‚å¤§å®¶å¯ä»¥å‚è€ƒ GitHub ä¸Šçš„ READMEï¼š è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å†™å¥½äº† QA ç³»ç»Ÿçš„é‡è¦çš„ä»£ç å•¦ï¼Œå¤§å®¶æ˜¯ä¸æ˜¯å¯¹ä¸€ä¸ª KBQA çš„æ„æˆæœ‰äº†æ›´æ¸…æ™°çš„æ¦‚å¿µäº†å‘¢ï¼Ÿ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸ºå®ƒå¢åŠ ä¸€ä¸ªç•Œé¢ï¼ ","date":"2021-12-30","objectID":"/siwi/:4:3","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#æµ‹è¯•ä¸€ä¸‹"},{"categories":["Nebula Graph","Mini Project"],"content":"æµ‹è¯•ä¸€ä¸‹å¯åŠ¨å›¾æ•°æ®åº“æˆ‘ä»¬åœ¨ Nebula Graph é‡Œå»ºç«‹ï¼ˆå¯¼å…¥æ•°æ®ï¼‰ä¸€ä¸ªç¯®çƒçš„çŸ¥è¯†å›¾è°±ã€‚ ğŸ’¡ï¼šåœ¨å¯¼å…¥æ•°æ®ä¹‹å‰ï¼Œè¯·å…ˆéƒ¨ç½²ä¸€ä¸ª Nebula Graph é›†ç¾¤ã€‚æœ€ç®€ä¾¿çš„éƒ¨ç½²æ–¹å¼æ˜¯ä½¿ç”¨ Nebula-UP è¿™ä¸ªå°å·¥å…·ï¼Œåªéœ€è¦ä¸€è¡Œå‘½ä»¤å°±èƒ½åœ¨ Linux æœºå™¨ä¸ŠåŒæ—¶å¯åŠ¨ä¸€ä¸ª Nebula Graph æ ¸å¿ƒå’Œå¯è§†åŒ–å›¾æ¢ç´¢å·¥å…· Nebula Graph Studioã€‚å¦‚æœä½ æ›´æ„¿æ„ç”¨ Docker éƒ¨ç½²ï¼Œè¯·å‚è€ƒè¿™ä¸ªæ–‡æ¡£ã€‚ æœ¬æ–‡å‡è®¾æˆ‘ä»¬ä½¿ç”¨ Nebula-UP æ¥éƒ¨ç½²ä¸€ä¸ª Nebula Graphï¼š curl -fsSL nebula-up.siwei.io/install.sh | bash ä¹‹åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°è¿™æ ·çš„æç¤ºï¼š æŒ‰ç…§æç¤ºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤è¿›å…¥åˆ°æœ‰ Nebula Console çš„å®¹å™¨é‡Œï¼š ğŸ’¡ï¼šNebula Console æ˜¯å‘½ä»¤è¡Œè®¿é—® Nebula Graph å›¾æ•°æ®åº“çš„å®¢æˆ·ç«¯ï¼Œæ”¯æŒ Linuxï¼ŒWindows å’Œ macOSï¼Œä¸‹è½½åœ°å€ï¼šè¿™é‡Œ ~/.nebula-up/console.sh ç„¶åï¼Œåœ¨ # çš„æç¤ºç¬¦ä¸‹å°±è¡¨ç¤ºæˆ‘ä»¬è¿›æ¥äº†ï¼Œæˆ‘ä»¬åœ¨é‡Œè¾¹å¯ä»¥æ‰§è¡Œï¼š nebula-console -addr graphd -port 9669 -user root -p nebula è¿™æ ·å°±è¡¨ç¤ºæˆ‘ä»¬è¿æ¥ä¸Šäº† Nebula Graph å›¾æ•°æ®åº“ï¼š /# nebula-console -addr graphd -port 9669 -user root -p nebula WelcometoNebulaGraph!(root@nebula)[(none)] åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ nGQL å»æ“ä½œ Nebula Graphï¼Œä¸è¿‡æˆ‘ä»¬å…ˆé€€å‡ºæ¥ï¼Œæ‰§è¡Œ exitï¼š (root@nebula)[(none)]exitByeroot!Fri,31Dec202104:11:28UTC æˆ‘ä»¬åœ¨è¿™ä¸ªå®¹å™¨å†…æŠŠåŸºäº nGQL è¯­å¥çš„æ•°æ®ä¸‹è½½ä¸‹æ¥ï¼š / # wget https://docs.nebula-graph.io/2.0/basketballplayer-2.X.ngql ç„¶åé€šè¿‡ Nebula Console çš„ -f æŠŠæ•°æ®å¯¼å…¥è¿›å»ï¼š nebula-console -addr graphd -port 9669 -user root -p nebula -f basketballplayer-2.X.ngql è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯åŠ¨äº†ä¸€ä¸ª Nebula Graph å›¾æ•°æ®åº“ï¼Œè¿˜åœ¨é‡Œè¾¹åŠ è½½äº†ç¯®çƒçš„çŸ¥è¯†å›¾è°±ï¼ ğŸ’¡ï¼šè¿˜è®°å¾—å‰è¾¹æˆ‘ä»¬æåˆ°çš„ åœ¨çº¿ä½“éªŒ ç¯å¢ƒä¹ˆï¼Ÿç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªåˆ©ç”¨ Nebula-UP éƒ¨ç½²äº† Nebula çš„ç¯å¢ƒé‡Œå¯åŠ¨è‡ªå·±çš„ Nebula Studio å•¦ï¼ŒæŒ‰ç…§ä¸Šè¾¹ Nebula-UP çš„æç¤ºï¼šhttp://:7001 å°±æ˜¯å®ƒçš„åœ°å€ï¼Œç„¶åå¤§å®¶å¯ä»¥å‚è€ƒæ–‡æ¡£å’Œåœ¨çº¿ä½“éªŒä»‹ç»å»äº†è§£æ›´å¤šã€‚ å¯åŠ¨ Siwi-backendå¤§å®¶å¯ä»¥ç›´æ¥ clone æˆ‘çš„ä»£ç ï¼šgit clone https://github.com/wey-gu/nebula-siwi/ ç„¶åå®‰è£…ã€å¯åŠ¨ Siwi Backendï¼š cd nebula-siwi # Install dependencies python3 -m pip install -r src/requirements.txt # Install siwi backend python3 -m build # Configure Nebula Graph Endpoint export NG_ENDPOINTS=127.0.0.1:9669 # Run Backend API server gunicorn --bind :5000 wsgi --workers 1 --threads 1 --timeout 60 å¯åŠ¨ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¦å¤–å¼€çª—å£ï¼Œé€šè¿‡ cURL å»å‘èµ·é—®é¢˜ç»™ backendï¼Œæ›´å¤šç»†èŠ‚å¤§å®¶å¯ä»¥å‚è€ƒ GitHub ä¸Šçš„ READMEï¼š è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å†™å¥½äº† QA ç³»ç»Ÿçš„é‡è¦çš„ä»£ç å•¦ï¼Œå¤§å®¶æ˜¯ä¸æ˜¯å¯¹ä¸€ä¸ª KBQA çš„æ„æˆæœ‰äº†æ›´æ¸…æ™°çš„æ¦‚å¿µäº†å‘¢ï¼Ÿ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸ºå®ƒå¢åŠ ä¸€ä¸ªç•Œé¢ï¼ ","date":"2021-12-30","objectID":"/siwi/:4:3","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#å¯åŠ¨å›¾æ•°æ®åº“"},{"categories":["Nebula Graph","Mini Project"],"content":"æµ‹è¯•ä¸€ä¸‹å¯åŠ¨å›¾æ•°æ®åº“æˆ‘ä»¬åœ¨ Nebula Graph é‡Œå»ºç«‹ï¼ˆå¯¼å…¥æ•°æ®ï¼‰ä¸€ä¸ªç¯®çƒçš„çŸ¥è¯†å›¾è°±ã€‚ ğŸ’¡ï¼šåœ¨å¯¼å…¥æ•°æ®ä¹‹å‰ï¼Œè¯·å…ˆéƒ¨ç½²ä¸€ä¸ª Nebula Graph é›†ç¾¤ã€‚æœ€ç®€ä¾¿çš„éƒ¨ç½²æ–¹å¼æ˜¯ä½¿ç”¨ Nebula-UP è¿™ä¸ªå°å·¥å…·ï¼Œåªéœ€è¦ä¸€è¡Œå‘½ä»¤å°±èƒ½åœ¨ Linux æœºå™¨ä¸ŠåŒæ—¶å¯åŠ¨ä¸€ä¸ª Nebula Graph æ ¸å¿ƒå’Œå¯è§†åŒ–å›¾æ¢ç´¢å·¥å…· Nebula Graph Studioã€‚å¦‚æœä½ æ›´æ„¿æ„ç”¨ Docker éƒ¨ç½²ï¼Œè¯·å‚è€ƒè¿™ä¸ªæ–‡æ¡£ã€‚ æœ¬æ–‡å‡è®¾æˆ‘ä»¬ä½¿ç”¨ Nebula-UP æ¥éƒ¨ç½²ä¸€ä¸ª Nebula Graphï¼š curl -fsSL nebula-up.siwei.io/install.sh | bash ä¹‹åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°è¿™æ ·çš„æç¤ºï¼š æŒ‰ç…§æç¤ºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤è¿›å…¥åˆ°æœ‰ Nebula Console çš„å®¹å™¨é‡Œï¼š ğŸ’¡ï¼šNebula Console æ˜¯å‘½ä»¤è¡Œè®¿é—® Nebula Graph å›¾æ•°æ®åº“çš„å®¢æˆ·ç«¯ï¼Œæ”¯æŒ Linuxï¼ŒWindows å’Œ macOSï¼Œä¸‹è½½åœ°å€ï¼šè¿™é‡Œ ~/.nebula-up/console.sh ç„¶åï¼Œåœ¨ # çš„æç¤ºç¬¦ä¸‹å°±è¡¨ç¤ºæˆ‘ä»¬è¿›æ¥äº†ï¼Œæˆ‘ä»¬åœ¨é‡Œè¾¹å¯ä»¥æ‰§è¡Œï¼š nebula-console -addr graphd -port 9669 -user root -p nebula è¿™æ ·å°±è¡¨ç¤ºæˆ‘ä»¬è¿æ¥ä¸Šäº† Nebula Graph å›¾æ•°æ®åº“ï¼š /# nebula-console -addr graphd -port 9669 -user root -p nebula WelcometoNebulaGraph!(root@nebula)[(none)] åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ nGQL å»æ“ä½œ Nebula Graphï¼Œä¸è¿‡æˆ‘ä»¬å…ˆé€€å‡ºæ¥ï¼Œæ‰§è¡Œ exitï¼š (root@nebula)[(none)]exitByeroot!Fri,31Dec202104:11:28UTC æˆ‘ä»¬åœ¨è¿™ä¸ªå®¹å™¨å†…æŠŠåŸºäº nGQL è¯­å¥çš„æ•°æ®ä¸‹è½½ä¸‹æ¥ï¼š / # wget https://docs.nebula-graph.io/2.0/basketballplayer-2.X.ngql ç„¶åé€šè¿‡ Nebula Console çš„ -f æŠŠæ•°æ®å¯¼å…¥è¿›å»ï¼š nebula-console -addr graphd -port 9669 -user root -p nebula -f basketballplayer-2.X.ngql è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯åŠ¨äº†ä¸€ä¸ª Nebula Graph å›¾æ•°æ®åº“ï¼Œè¿˜åœ¨é‡Œè¾¹åŠ è½½äº†ç¯®çƒçš„çŸ¥è¯†å›¾è°±ï¼ ğŸ’¡ï¼šè¿˜è®°å¾—å‰è¾¹æˆ‘ä»¬æåˆ°çš„ åœ¨çº¿ä½“éªŒ ç¯å¢ƒä¹ˆï¼Ÿç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªåˆ©ç”¨ Nebula-UP éƒ¨ç½²äº† Nebula çš„ç¯å¢ƒé‡Œå¯åŠ¨è‡ªå·±çš„ Nebula Studio å•¦ï¼ŒæŒ‰ç…§ä¸Šè¾¹ Nebula-UP çš„æç¤ºï¼šhttp://:7001 å°±æ˜¯å®ƒçš„åœ°å€ï¼Œç„¶åå¤§å®¶å¯ä»¥å‚è€ƒæ–‡æ¡£å’Œåœ¨çº¿ä½“éªŒä»‹ç»å»äº†è§£æ›´å¤šã€‚ å¯åŠ¨ Siwi-backendå¤§å®¶å¯ä»¥ç›´æ¥ clone æˆ‘çš„ä»£ç ï¼šgit clone https://github.com/wey-gu/nebula-siwi/ ç„¶åå®‰è£…ã€å¯åŠ¨ Siwi Backendï¼š cd nebula-siwi # Install dependencies python3 -m pip install -r src/requirements.txt # Install siwi backend python3 -m build # Configure Nebula Graph Endpoint export NG_ENDPOINTS=127.0.0.1:9669 # Run Backend API server gunicorn --bind :5000 wsgi --workers 1 --threads 1 --timeout 60 å¯åŠ¨ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¦å¤–å¼€çª—å£ï¼Œé€šè¿‡ cURL å»å‘èµ·é—®é¢˜ç»™ backendï¼Œæ›´å¤šç»†èŠ‚å¤§å®¶å¯ä»¥å‚è€ƒ GitHub ä¸Šçš„ READMEï¼š è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å†™å¥½äº† QA ç³»ç»Ÿçš„é‡è¦çš„ä»£ç å•¦ï¼Œå¤§å®¶æ˜¯ä¸æ˜¯å¯¹ä¸€ä¸ª KBQA çš„æ„æˆæœ‰äº†æ›´æ¸…æ™°çš„æ¦‚å¿µäº†å‘¢ï¼Ÿ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸ºå®ƒå¢åŠ ä¸€ä¸ªç•Œé¢ï¼ ","date":"2021-12-30","objectID":"/siwi/:4:3","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#å¯åŠ¨-siwi-backend"},{"categories":["Nebula Graph","Mini Project"],"content":"Siwi-frontend","date":"2021-12-30","objectID":"/siwi/:5:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#siwi-frontend"},{"categories":["Nebula Graph","Mini Project"],"content":"èŠå¤©ç•Œé¢æˆ‘ä»¬åˆ©ç”¨ Vue Bot UI è¿™ä¸ªå¯çˆ±çš„æœºå™¨äººç•Œé¢çš„ Vue å®ç°å¯ä»¥å¾ˆå®¹æ˜“æ„é€ ä¸€ä¸ª ä»£ç æ®µï¼šsrc/siwi/frontend/src/App.vue \u003ctemplate\u003e \u003cdiv id=\"app\"\u003e \u003cVueBotUI :messages=\"msg\" :options=\"botOptions\" :bot-typing=\"locking\" :input-disable=\"locking\" @msg-send=\"msgSender\" /\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript\u003e import { VueBotUI } from 'vue-bot-ui' æ³¨æ„åˆ°é‚£ä¸ªå°é£æœºæŒ‰é’®äº†å§ï¼Œå®ƒæ˜¯å‘å‡ºé—®é¢˜è¯·æ±‚çš„æŒ‰é”®ï¼Œæˆ‘ä»¬è¦åœ¨æŒ‰ä¸‹å®ƒçš„æ—¶å€™å¯¹åç«¯åšå‡ºè¯·æ±‚ã€‚ ","date":"2021-12-30","objectID":"/siwi/:5:1","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#èŠå¤©ç•Œé¢"},{"categories":["Nebula Graph","Mini Project"],"content":"è®¿é—®åç«¯è¿™éƒ¨åˆ†ç”¨åˆ°äº†Axiosï¼Œå®ƒæ˜¯æµè§ˆå™¨é‡Œè®¿é—®å…¶ä»–åœ°å€çš„ HTTP å®¢æˆ·ç«¯ã€‚ åœ¨æŒ‰ä¸‹çš„æ—¶å€™ï¼Œ@msg-send=\"msgSender\" ä¼šè§¦å‘ msgSender() msgSender()å»æ„é€ axios.post(this.apiEndpoint, { \"question\": data.text }) çš„è¯·æ±‚ç»™ Siwi çš„åç«¯ åç«¯çš„ç»“æœè¢« push() åˆ°ç•Œé¢çš„èŠå¤©æ¶ˆæ¯é‡Œï¼Œæ¸²æŸ“å‡ºæ¥ this.msg.push() ä»£ç æ®µï¼šsrc/siwi/frontend/src/App.vue \u003ctemplate\u003e \u003cdiv id=\"app\"\u003e \u003cVueBotUI :messages=\"msg\" :options=\"botOptions\" :bot-typing=\"locking\" :input-disable=\"locking\" @msg-send=\"msgSender\" ---------------- 1. /\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript\u003e import { VueBotUI } from 'vue-bot-ui' import axios from \"axios\"; export default { name: 'App', components: { VueBotUI, }, methods: { msgSender(data) { this.msg.push({ agent: \"user\", type: \"text\", text: data.text, }); this.locking = true; axios.post(this.apiEndpoint, { \"question\": data.text }).then((response) =\u003e { console.log(response); ----------------- 2. this.msg.push({ ----------------- 3. agent: \"bot\", type: \"text\", text: response.data.answer, }); this.synthText = response.data.answer; this.agentSpeak = true; this.locking = false; }); }, } } ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå›¾å½¢ç•Œé¢çš„æœºå™¨äººå•¦ï¼Œä¸è¿‡ï¼Œæ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç°ä»£æµè§ˆå™¨çš„æ¥å£ï¼Œå®ç°è¯­éŸ³è¯†åˆ«å’Œæœºå™¨äººè¯´è¯ï¼ ","date":"2021-12-30","objectID":"/siwi/:5:2","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#è®¿é—®åç«¯"},{"categories":["Nebula Graph","Mini Project"],"content":"è¯­éŸ³è¯†åˆ«æˆ‘ä»¬å€ŸåŠ©äº Vue Web Speech, è¿™ä¸ªè¯­éŸ³ API çš„ VueJS çš„ç»‘å®šï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ¨æŒ‰ä¸‹ ğŸ™ï¸ çš„æ—¶å€™æ¥æ”¶äººçš„è¯­éŸ³ï¼Œå¹¶æŠŠè¯­éŸ³è½¬æ¢æˆæ–‡å­—å‘å‡ºå»ï¼Œåœ¨å›ç­”è¢«è¿”å›ä¹‹åï¼Œå®ƒï¼ˆè¿˜æ˜¯ä»–/å¥¹ğŸ˜ï¼Ÿï¼‰ä¹Ÿä¼šæŠŠå›ç­”çš„å¥å­è¯»å‡ºæ¥ç»™ç”¨æˆ·ã€‚ record åœ¨ ğŸ™ï¸ è¢«æŒ‰ä¸‹ä¹‹åï¼Œå˜æˆ ğŸ‘‚ è§¦å‘ onResults() ç›‘å¬ æŠŠè¿”å›ç»“æœå‘ç»™ this.synthText åˆæˆå™¨ï¼Œå‡†å¤‡è¯»å‡º \u003cvue-web-speech-synth\u003e æŠŠè¯­éŸ³è¯»å‡º ä»£ç æ®µï¼šsrc/siwi/frontend/src/App.vue \u003ctemplate\u003e \u003cdiv id=\"app\"\u003e \u003cbutton id=\"mic_btn\" @click=\"record = !record\"\u003e {{record?'ğŸ‘‚':'ğŸ™ï¸'}} --------------------------\u003e 1. \u003c/button\u003e \u003cvue-web-speech v-model=\"record\" @results=\"onResults\" --------------------------\u003e 1. @unrecognized=\"unrecognized\" \u003e \u003c/vue-web-speech\u003e ... \u003cvue-web-speech-synth v-model=\"agentSpeak\" :voice=\"synthVoice\" :text=\"synthText\" @list-voices=\"listVoices\" --------------------------\u003e 4. /\u003e \u003c/div\u003e \u003c/template\u003e \u003cscript\u003e import { VueBotUI } from 'vue-bot-ui' import axios from \"axios\"; export default { name: 'App', components: { VueBotUI, }, onResults (data) { -------------------------\u003e 2. this.results = data; this.locking = true; this.msg.push({ agent: \"user\", type: \"text\", text: data[0], }); this.locking = true; console.log(data[0]); axios.post(this.apiEndpoint, { \"question\": data[0] }).then((response) =\u003e { console.log(response.data); this.msg.push({ agent: \"bot\", type: \"text\", text: response.data.answer, }); this.synthText = response.data.answer; ----------\u003e 3. this.agentSpeak = true; }); this.locking = false; }, } } \u003c/script\u003e ","date":"2021-12-30","objectID":"/siwi/:5:3","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#è¯­éŸ³è¯†åˆ«"},{"categories":["Nebula Graph","Mini Project"],"content":"æ€»ç»“è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šäº†æ­å»ºè‡ªå·±çš„ç¬¬ä¸€ä¸ª KBQAï¼šçŸ¥è¯†å›¾è°±é©±åŠ¨çš„é—®ç­”ç³»ç»Ÿã€‚ å›é¡¾ä¸‹å®ƒçš„ä»£ç ç»“æ„ï¼š src/siwi å¯¹åº”åç«¯ App æ˜¯ Flask API å¤„ç†çš„éƒ¨åˆ† Bot æ˜¯å¤„ç†è¯·æ±‚ã€è®¿é—® Nebula Graph çš„éƒ¨åˆ† src/siwi_frontend æ˜¯å‰ç«¯ å¸Œæœ›å¤§å®¶åœ¨è¿™ä¸ªç®€é™‹çš„åŸºç¡€ä¹‹ä¸Šï¼Œå¤šå¤šæ¢ç´¢ï¼Œåšå‡ºæ¥æ›´åŠ æˆç†Ÿçš„èŠå¤©æœºå™¨äººï¼Œæ¬¢è¿ä½ æ¥ç»™æˆ‘é‚®ä»¶ã€ç•™è¨€å‘Šè¯‰æˆ‘å‘€ï¼Œè¿™é‡Œï¼šhttps://siwei.io/about æœ‰æˆ‘çš„è”ç³»æ–¹å¼ã€‚ . â”œâ”€â”€ README.md â”œâ”€â”€ src â”‚ â”œâ”€â”€ siwi # Siwi-API Backend â”‚ â”‚ â”œâ”€â”€ app # Web Server, take HTTP requests and calls Bot API â”‚ â”‚ â””â”€â”€ bot # Bot API â”‚ â”‚ â”œâ”€â”€ actions # Take Intent, Slots, Query Knowledge Graph here â”‚ â”‚ â”œâ”€â”€ bot # Entrypoint of the Bot API â”‚ â”‚ â”œâ”€â”€ classifier # Symentic Parsing, Intent Matching, Slot Filling â”‚ â”‚ â””â”€â”€ test # Example Data Source as equivalent/mocked module â”‚ â””â”€â”€ siwi_frontend # Browser End â”‚ â”œâ”€â”€ README.md â”‚ â”œâ”€â”€ package.json â”‚ â””â”€â”€ src â”‚ â”œâ”€â”€ App.vue # Listening to user and pass Questions to Siwi-API â”‚ â””â”€â”€ main.js â””â”€â”€ wsgi.py å¦‚æœä½ å¾ˆå–œæ¬¢è¿™æ ·çš„å°é¡¹ç›®ï¼Œæ¬¢è¿æ¥çœ‹çœ‹æˆ‘ä¹‹å‰çš„åˆ†äº«ï¼š ã€Œä»0-1ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿã€å“¦ã€‚ ğŸ’¡ï¼šä½ çŸ¥é“å—ï¼Œæˆ‘å…¶å®å€ŸåŠ©äº Katacoda å·²ç»ä¸ºå¤§å®¶æ­å»ºäº†ä¸€ä¸ªäº¤äº’å¼ä½“éªŒ Siwi + Nebula çš„éƒ¨ç½²çš„ç¯å¢ƒï¼Œå¦‚æœæ‚¨çš„ç½‘ç»œæ¡ä»¶å¤Ÿå¿«ï¼ˆKatacodaæœåŠ¡å™¨åœ¨å›½å¤–ï¼‰ï¼Œå¯ä»¥åœ¨è¿™é‡Œç‚¹ç‚¹é¼ æ ‡å°±äº¤äº’å¼ä½“éªŒå®ƒã€‚ è§†é¢‘ä»‹ç» ","date":"2021-12-30","objectID":"/siwi/:6:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#æ€»ç»“"},{"categories":["Nebula Graph","Mini Project"],"content":"æ„Ÿè°¢ç”¨åˆ°çš„å¼€æºé¡¹ç›® â¤ï¸è¿™ä¸ªå°é¡¹ç›®é‡Œæˆ‘ä»¬ç”¨åˆ°äº†å¥½å¤šå¼€æºçš„é¡¹ç›®ï¼Œéå¸¸æ„Ÿè°¢è¿™äº›è´¡çŒ®è€…ä»¬çš„æ…·æ…¨ä¸æ— ç§ï¼Œå¼€æºæ˜¯ä¸æ˜¯å¾ˆé…·å‘¢ï¼Ÿ ","date":"2021-12-30","objectID":"/siwi/:7:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#æ„Ÿè°¢ç”¨åˆ°çš„å¼€æºé¡¹ç›®-"},{"categories":["Nebula Graph","Mini Project"],"content":"Backend KGQA on MedicalKG by Huanyong Liu Flask pyahocorasick created by Wojciech MuÅ‚a PyYaml ","date":"2021-12-30","objectID":"/siwi/:7:1","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#backend"},{"categories":["Nebula Graph","Mini Project"],"content":"Frontend VueJS for frontend framework Vue Bot UI, as a lovely bot UI in vue Vue Web Speech, for speech API vue wrapper Axios for browser http client Solarized for color scheme Vitesome for landing page design ","date":"2021-12-30","objectID":"/siwi/:7:2","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#frontend"},{"categories":["Nebula Graph","Mini Project"],"content":"Graph Database Nebula Graph é«˜æ€§èƒ½ã€äº‘åŸç”Ÿçš„å¼€æºåˆ†å¸ƒå¼å›¾æ•°æ®åº“ ","date":"2021-12-30","objectID":"/siwi/:7:3","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","æ™ºèƒ½é—®ç­”","è¯­éŸ³åŠ©æ‰‹","KBQA"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªåŸºäºçŸ¥è¯†å›¾è°±çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Ÿ","uri":"/siwi/#graph-database"},{"categories":["Nebula Graph"],"content":"Docker éƒ¨ç½²æƒ…å†µä¸‹ä½¿ç”¨ Python Storage Client æŒ‡å—","date":"2021-12-10","objectID":"/nebula-python-storage-docker-guide/","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","python"],"title":"å¿«é€Ÿæ­å»ºè°ƒè¯• Nebula Graph Python Storage å®¢æˆ·ç«¯çš„ç¯å¢ƒ","uri":"/nebula-python-storage-docker-guide/"},{"categories":["Nebula Graph"],"content":" Python Storage Client è¿ä¸ä¸Šç¬¬ä¸€æ¬¡å®‰è£…çš„ Nebula Graphï¼Ÿ Docker éƒ¨ç½²æƒ…å†µä¸‹ä½¿ç”¨ Python Storage Client æŒ‡å— ","date":"2021-12-10","objectID":"/nebula-python-storage-docker-guide/:0:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","python"],"title":"å¿«é€Ÿæ­å»ºè°ƒè¯• Nebula Graph Python Storage å®¢æˆ·ç«¯çš„ç¯å¢ƒ","uri":"/nebula-python-storage-docker-guide/#"},{"categories":["Nebula Graph"],"content":"å‰ç½®æ¡ä»¶ æ³¨æ„ï¼šä¸€ä¸ªé‡è¦çš„å‰ç½®æ¡ä»¶æ˜¯æˆ‘ä»¬çœŸçš„éœ€è¦ Storage Clientï¼Œå¦‚æœæˆ‘ä»¬åªéœ€è¦åœ¨ Python Client é‡Œé€šè¿‡ nGQL æ¥è¯·æ±‚æ•°æ®ï¼Œé‚£ä¹ˆ GraphClient æ‰æ˜¯ä½ éœ€è¦çš„ï¼Œå¯ä»¥è·³è¿‡æœ¬æ–‡ã€‚ å¯¹äºåˆšæ¥è§¦ Nebula çš„åŒå­¦ï¼Œéƒ¨ç½²é›†ç¾¤æœ€å¿«é€Ÿçš„æ–¹å¼æ˜¯ç”¨ Docker Composeï¼Œå®‰è£…éƒ¨ç½²å¯ä»¥å‚è€ƒæ–‡æ¡£ï¼šdeploy-nebula-graph-with-docker-composeã€‚ åœ¨ docker compose up -d ä¹‹åï¼Œæˆ‘ä»¬çš„ nebula é›†ç¾¤å°±èµ·æ¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ docker ps çœ‹çœ‹è¿è¡Œç€çš„å®¹å™¨ï¼š â¯ docker ps --format \"table {{.Names}}\\t{{.Ports}}\" NAMES PORTS nebula-docker-compose-graphd1-1 0.0.0.0:61852-\u003e9669/tcp, 0.0.0.0:61850-\u003e19669/tcp, 0.0.0.0:61851-\u003e19670/tcp nebula-docker-compose-graphd-1 0.0.0.0:9669-\u003e9669/tcp, 0.0.0.0:61858-\u003e19669/tcp, 0.0.0.0:61859-\u003e19670/tcp nebula-docker-compose-graphd2-1 0.0.0.0:61855-\u003e9669/tcp, 0.0.0.0:61853-\u003e19669/tcp, 0.0.0.0:61854-\u003e19670/tcp nebula-docker-compose-storaged2-1 9777-9778/tcp, 9780/tcp, 0.0.0.0:61868-\u003e9779/tcp, 0.0.0.0:61869-\u003e19779/tcp, 0.0.0.0:61870-\u003e19780/tcp nebula-docker-compose-storaged1-1 9777-9778/tcp, 9780/tcp, 0.0.0.0:61865-\u003e9779/tcp, 0.0.0.0:61866-\u003e19779/tcp, 0.0.0.0:61864-\u003e19780/tcp nebula-docker-compose-storaged0-1 9777-9778/tcp, 9780/tcp, 0.0.0.0:61845-\u003e9779/tcp, 0.0.0.0:61843-\u003e19779/tcp, 0.0.0.0:61844-\u003e19780/tcp nebula-docker-compose-metad1-1 9560/tcp, 0.0.0.0:61705-\u003e9559/tcp, 0.0.0.0:61706-\u003e19559/tcp, 0.0.0.0:61707-\u003e19560/tcp nebula-docker-compose-metad2-1 9560/tcp, 0.0.0.0:61699-\u003e9559/tcp, 0.0.0.0:61700-\u003e19559/tcp, 0.0.0.0:61701-\u003e19560/tcp nebula-docker-compose-metad0-1 9560/tcp, 0.0.0.0:61704-\u003e9559/tcp, 0.0.0.0:61702-\u003e19559/tcp, 0.0.0.0:61703-\u003e19560/tcp è¿™é‡Œè¾¹æœ‰ä¸‰ç§å®¹å™¨ ï¼š GrpahDï¼ŒæŸ¥è¯¢å¼•æ“ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ç”¨æˆ·è¿›è¡Œç™»å½•ã€è¿æ¥ã€å‘ Query è¯·æ±‚ç›´æ¥è®¿é—®çš„å”¯ä¸€ä¸€ç§æœåŠ¡ã€æ¥å£ã€‚ MetaDï¼Œå…ƒæ•°æ®æœåŠ¡ï¼Œå®ƒä¸€èˆ¬ä¸ä¼šæš´éœ²ç»™å¤–éƒ¨ï¼Œåªæœ‰ GraphD ã€StorageD ä¼šç›´æ¥è®¿é—®å®ƒã€‚ StorageDï¼Œå­˜å‚¨å¼•æ“ï¼Œå®ƒä¸€èˆ¬ä¸ä¼šæš´éœ²ç»™å¤–éƒ¨ï¼Œåªæœ‰ GraphDã€StorageD ä¼šç›´æ¥è®¿é—®å®ƒã€‚ æˆ‘ä»¬å¯ä»¥ä» Stuido Consoleï¼Œæˆ–è€… Nebula Console ï¼ˆè¿æ¥åˆ° GraphD ä¹‹åï¼‰é‡Œé€šè¿‡ SHOW HOSTS \u003cType\u003eï¼Œæ¥è·å–æ¯ç§æœåŠ¡çš„ä¿¡æ¯ï¼Œå…¶ä¸­ç¬¬ä¸€åˆ—çš„ä¿¡æ¯å°±æ˜¯ä»–ä»¬çš„ IP æˆ–è€… Hostï¼Œä¸‹è¾¹çš„ä¾‹å­æ˜¯ Docker Compose é»˜è®¤é…ç½®ä¸‹çš„æƒ…å†µã€‚ (root@nebula) [(none)]\u003e SHOW HOSTS GRAPH +-----------+------+----------+---------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +-----------+------+----------+---------+--------------+---------+ | \"graphd\" | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\" | \"2.6.0\" | +-----------+------+----------+---------+--------------+---------+ | \"graphd1\" | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\" | \"2.6.0\" | +-----------+------+----------+---------+--------------+---------+ | \"graphd2\" | 9669 | \"ONLINE\" | \"GRAPH\" | \"3ba41bd\" | \"2.6.0\" | +-----------+------+----------+---------+--------------+---------+ (root@nebula) [(none)]\u003e SHOW HOSTS META +----------+------+----------+--------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +----------+------+----------+--------+--------------+---------+ | \"metad1\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\" | \"2.6.0\" | +----------+------+----------+--------+--------------+---------+ | \"metad0\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\" | \"2.6.0\" | +----------+------+----------+--------+--------------+---------+ | \"metad2\" | 9559 | \"ONLINE\" | \"META\" | \"3ba41bd\" | \"2.6.0\" | +----------+------+----------+--------+--------------+---------+ (root@nebula) [(none)]\u003e SHOW HOSTS STORAGE +-------------+------+----------+-----------+--------------+---------+ | Host | Port | Status | Role | Git Info Sha | Version | +-------------+------+----------+-----------+--------------+---------+ | \"storaged0\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"2.6.0\" | +-------------+------+----------+-----------+--------------+---------+ | \"storaged1\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"2.6.0\" | +-------------+------+----------+-----------+--------------+---------+ | \"storaged2\" | 9779 | \"ONLINE\" | \"STORAGE\" | \"3ba41bd\" | \"2.6.0\" | +-------------+------+----------+-----------+--------------+---------+ åœ¨é»˜è®¤çš„ nebula-docker-compose çš„é…ç½®ä¸‹å„ä¸ªæœåŠ¡ä¸ºgraphd, metad1, storaged0 è¿™ç§åŸŸåçš„ Host æ ¼å¼ï¼Œè¿™å…¶å®æ˜¯å‡è®¾äº†æˆ‘ä»¬ä½¿ç”¨ Docker å¯åŠ¨çš„æœåŠ¡ä¸€èˆ¬æ˜¯ä½œä¸ºå•æœºæµ‹è¯•ä¹‹ç”¨ï¼Œé™¤äº†å…¶ä¸­çš„ graphdä¹‹å¤–ï¼Œå…¶ä»–çš„æœåŠ¡éƒ½æ²¡æœ‰æŒ‡å®šå›ºå®šçš„å¤–éƒ¨æ˜ å°„ç«¯å£ï¼ˆè§å‰è¾¹çš„ docker ps çš„ç»“æœé‡Œï¼Œå®ƒæš´éœ²åœ¨0.0.0.0:9669)ã€‚ è¿™æ„å‘³ç€ï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸æ˜¯è¿è¡Œåœ¨æœ¬æœºï¼Œè®¿é—®å…¶ä»–æœåŠ¡çš„ç«¯å£éƒ½æ˜¯åŠ¨æ€çš„ï¼Œè¿™ä¼šè®©å¾ˆå¤šç¬¬ä¸€æ¬¡æƒ³ç”¨ Python Storage Client è¿æ¥æœåŠ¡çš„åŒå­¦å¡ä½ã€‚ æ‰€ä»¥æˆ‘è¿™é‡Œç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªå¿«é€Ÿç”¨ Python å»è°ƒè¯• Storage Client çš„æ–¹æ³•ï¼š æœ¬è´¨ä¸Šæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ Compose çš„é…ç½®æ–‡ä»¶ã€é€šè¿‡å…¶ä»–éƒ¨ç½²æˆ–è€…é…ç½®çš„æ–¹å¼å®‰è£… Nebula æ¥ä¿è¯ Python Client èƒ½å¤Ÿè®¿é—® ","date":"2021-12-10","objectID":"/nebula-python-storage-docker-guide/:1:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","python"],"title":"å¿«é€Ÿæ­å»ºè°ƒè¯• Nebula Graph Python Storage å®¢æˆ·ç«¯çš„ç¯å¢ƒ","uri":"/nebula-python-storage-docker-guide/#å‰ç½®æ¡ä»¶"},{"categories":["Nebula Graph"],"content":"ç¬¬ä¸€æ­¥ï¼ŒæŠŠ Python å®¹å™¨åœ¨ nebula-docker-compose_nebula-net è¿™ä¸ªå®¹å™¨ç½‘ç»œå¯åŠ¨ä¸€ä¸ª Jupyter çš„å®¹å™¨ã€‚ è¿™é‡Œé‡‡ç”¨äº† https://github.com/jupyter/docker-stacks ç»´æŠ¤çš„ Docker Imageã€‚ docker run \\ -p 8888:8888 \\ --network nebula-docker-compose_nebula-net \\ jupyter/scipy-notebook:33add21fab64 å¯ä»¥çœ‹åˆ°å®¹å™¨äº†ï¼Œå¹¶ä¸”åœ¨ç›‘å¬ç«¯å£ï¼š8888ã€‚ [I 07:06:31.060 NotebookApp] Jupyter Notebook 6.3.0 is running at: [I 07:06:31.060 NotebookApp] http://e170a5eb4858:8888/?token=5beafb26fc6995b081c611d5d2cc96d557897b74bfdaac53 [I 07:06:31.060 NotebookApp] or http://127.0.0.1:8888/?token=5beafb26fc6995b081c611d5d2cc96d557897b74bfdaac53 è¿™æ—¶å€™æˆ‘ä»¬å¯åœ¨æµè§ˆå™¨æ‰“å¼€ http://127.0.0.1:8888/?token=5beafb26fc6995b081c611d5d2cc96d557897b74bfdaac53. åœ¨é‡Œè¾¹æ–°å»ºä¸€ä¸ª Notebookã€‚ ","date":"2021-12-10","objectID":"/nebula-python-storage-docker-guide/:1:1","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","python"],"title":"å¿«é€Ÿæ­å»ºè°ƒè¯• Nebula Graph Python Storage å®¢æˆ·ç«¯çš„ç¯å¢ƒ","uri":"/nebula-python-storage-docker-guide/#ç¬¬ä¸€æ­¥æŠŠ-python-å®¹å™¨"},{"categories":["Nebula Graph"],"content":"ç¬¬äºŒæ­¥ï¼Œå®‰è£… Nebula Python SDKæˆ‘ä»¬åªéœ€è¦åœ¨ Jupyter é‡Œæ‰§è¡Œ !pip install nebula2-python==2.6.0 å°±å¯ä»¥äº†ï¼Œå…·ä½“çš„ç‰ˆæœ¬è¦æ ¹æ® Nebula Python çš„ README é‡Œçš„ç‰ˆæœ¬å¯¹åº”å…³ç³»æ¥ç»™å®šã€‚ ","date":"2021-12-10","objectID":"/nebula-python-storage-docker-guide/:1:2","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","python"],"title":"å¿«é€Ÿæ­å»ºè°ƒè¯• Nebula Graph Python Storage å®¢æˆ·ç«¯çš„ç¯å¢ƒ","uri":"/nebula-python-storage-docker-guide/#ç¬¬äºŒæ­¥å®‰è£…-nebula-python-sdk"},{"categories":["Nebula Graph"],"content":"ç¬¬ä¸‰æ­¥ï¼Œå®ä¾‹åŒ– MetaCache å’Œ GraphStorageClient from nebula2.mclient import MetaCache, HostAddr from nebula2.sclient.GraphStorageClient import GraphStorageClient # Docker Compose ä¸‹é»˜è®¤ meta çš„åœ°å€æ˜¯ metad1 metad0 metad2 meta_cache = MetaCache([('metad1',9559),('metad0',9559),('metad2',9559)]) graph_storage_client = GraphStorageClient(meta_cache) ","date":"2021-12-10","objectID":"/nebula-python-storage-docker-guide/:1:3","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","python"],"title":"å¿«é€Ÿæ­å»ºè°ƒè¯• Nebula Graph Python Storage å®¢æˆ·ç«¯çš„ç¯å¢ƒ","uri":"/nebula-python-storage-docker-guide/#ç¬¬ä¸‰æ­¥å®ä¾‹åŒ–-metacache-å’Œ-graphstorageclient"},{"categories":["Nebula Graph"],"content":"ç¬¬å››æ­¥ï¼Œæ‰«æ•°æ® æŒ‰ç©ºé—´ã€ç‚¹ç±»å‹æ‰«ç‚¹ resp = graph_storage_client.scan_vertex( space_name='basketballplayer', tag_name='player') while resp.has_next(): result = resp.next() for vertex_data in result: print(vertex_data) æŒ‰ç©ºé—´ã€è¾¹ç±»å‹æ‰«è¾¹ resp = graph_storage_client.scan_edge( space_name='basketballplayer', edge_name='follow') while resp.has_next(): result = resp.next() for edge_data in result: print(edge_data) Jupyter çš„è¿‡ç¨‹æˆ‘ä¹Ÿè®°å½•åœ¨è¿™ä¸ª notebook é‡Œæ–¹ä¾¿å¤§å®¶å‚è€ƒã€‚ Happy Graphing! Picture Creditï¼šBorderpolar Photographer ","date":"2021-12-10","objectID":"/nebula-python-storage-docker-guide/:1:4","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","python"],"title":"å¿«é€Ÿæ­å»ºè°ƒè¯• Nebula Graph Python Storage å®¢æˆ·ç«¯çš„ç¯å¢ƒ","uri":"/nebula-python-storage-docker-guide/#ç¬¬å››æ­¥æ‰«æ•°æ®"},{"categories":["Nebula Graph"],"content":"å¦‚ä½•å¿«é€Ÿã€å³æ—¶ã€ç¬¦åˆç›´è§‰åœ°å»å¤„ç† Nebula Java Client ä¸­çš„æ•°æ®è§£æï¼Ÿ","date":"2021-11-25","objectID":"/nebula-java-happy-parsing-guide/","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","java"],"title":"Nebula Graph çš„ Java æ•°æ®è§£æå®è·µä¸æŒ‡å¯¼","uri":"/nebula-java-happy-parsing-guide/"},{"categories":["Nebula Graph"],"content":" å¦‚ä½•å¿«é€Ÿã€å³æ—¶ã€ç¬¦åˆç›´è§‰åœ°å»å¤„ç† Nebula Java Client ä¸­çš„æ•°æ®è§£æï¼Ÿè¯»è¿™ä¸€ç¯‡å°±å¤Ÿäº†ã€‚ ","date":"2021-11-25","objectID":"/nebula-java-happy-parsing-guide/:0:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","java"],"title":"Nebula Graph çš„ Java æ•°æ®è§£æå®è·µä¸æŒ‡å¯¼","uri":"/nebula-java-happy-parsing-guide/#"},{"categories":["Nebula Graph"],"content":"å…³é”®æ­¥éª¤ï¼šå‡ è¡Œå‡†å¤‡ä¸€ä¸ªå¹²å‡€çš„äº¤äº’å¼ Nebula Java REPL ç¯å¢ƒå¤šäºäº† Java-REPL æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ï¼ˆåƒ iPython é‚£æ ·ï¼‰å»å®æ—¶äº¤äº’åœ°è°ƒè¯•ã€åˆ†æ Nebula Java å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬ç”¨å®ƒçš„ Docker é•œåƒå¯ä»¥å¾ˆå¹²å‡€çš„å»æå®šï¼š docker pull albertlatacz/java-repl docker run --rm -it \\ --network=nebula-docker-compose_nebula-net \\ -v ~:/root \\ albertlatacz/java-repl \\ bash apt update -y \u0026\u0026 apt install ca-certificates -y wget https://dlcdn.apache.org/maven/maven-3/3.8.4/binaries/apache-maven-3.8.4-bin.tar.gz --no-check-certificate tar xzvf apache-maven-3.8.4-bin.tar.gz wget https://github.com/vesoft-inc/nebula-java/archive/refs/tags/v2.6.1.tar.gz tar xzvf v2.6.1.tar.gz cd nebula-java-2.6.1/ ../apache-maven-3.8.4/bin/mvn dependency:copy-dependencies ../apache-maven-3.8.4/bin/mvn -B package -Dmaven.test.skip=true java -jar ../javarepl/javarepl.jar è¿™æ—¶å€™ï¼Œåœ¨æ‰§è¡Œå®Œ java -jar ../javarepl/javarepl.jar ä¹‹åï¼Œæˆ‘ä»¬å°±è¿›å…¥äº†äº¤äº’å¼çš„ Java Shellï¼ˆREPLï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æ— éœ€åšç¼–è¯‘ï¼Œæ‰§è¡Œï¼Œprint è¿™æ ·çš„æ…¢åé¦ˆæ¥è°ƒè¯•å’Œç ”ç©¶æˆ‘ä»¬çš„ä»£ç äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Ÿ root@a2e26ba62bb6:/javarepl/nebula-java-2.6.1# java -jar ../javarepl/javarepl.jar Welcome to JavaREPL version 428 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_111) Type expression to evaluate, :help for more options or press tab to auto-complete. Connected to local instance at http://localhost:43707 java\u003e System.out.println(\"Hello, World!\"); Hello, World! java\u003e é¦–å…ˆæˆ‘ä»¬åœ¨ java\u003e æç¤ºç¬¦ä¸‹ï¼Œè¿™äº›æ¥æŠŠå¿…é¡»çš„ç±»è·¯å¾„å’Œå¯¼å…¥ï¼š :cp /javarepl/nebula-java-2.6.1/client/target/client-2.6.1.jar :cp /javarepl/nebula-java-2.6.1/client/target/dependency/fastjson-1.2.78.jar :cp /javarepl/nebula-java-2.6.1/client/target/dependency/slf4j-api-1.7.25.jar :cp /javarepl/nebula-java-2.6.1/client/target/dependency/slf4j-log4j12-1.7.25.jar :cp /javarepl/nebula-java-2.6.1/client/target/dependency/commons-pool2-2.2.jar :cp /javarepl/nebula-java-2.6.1/client/target/dependency/log4j-1.2.17.jar import com.alibaba.fastjson.JSON; import com.alibaba.fastjson.JSONObject; import com.vesoft.nebula.ErrorCode; import com.vesoft.nebula.client.graph.NebulaPoolConfig; import com.vesoft.nebula.client.graph.data.CASignedSSLParam; import com.vesoft.nebula.client.graph.data.HostAddress; import com.vesoft.nebula.client.graph.data.ResultSet; import com.vesoft.nebula.client.graph.data.SelfSignedSSLParam; import com.vesoft.nebula.client.graph.data.ValueWrapper; import com.vesoft.nebula.client.graph.net.NebulaPool; import com.vesoft.nebula.client.graph.net.Session; import java.io.UnsupportedEncodingException; import java.util.Arrays; import java.util.List; import java.util.concurrent.TimeUnit; import org.slf4j.Logger; import org.slf4j.LoggerFactory; import java.lang.reflect.*; æˆ‘ä»¬å¯ä»¥ä»è¿™ Java ç¯å¢ƒè¿æ¥åˆ° Nebula Graph é‡Œï¼Œä¸‹è¾¹çš„ä¾‹å­é‡Œæˆ‘ç”¨äº†è‡ªå·±çš„ GraphD çš„ IP å’Œç«¯å£ä½œä¸ºä¾‹å­ï¼š NebulaPoolConfig nebulaPoolConfig = new NebulaPoolConfig(); nebulaPoolConfig.setMaxConnSize(10); List\u003cHostAddress\u003e addresses = Arrays.asList(new HostAddress(\"192.168.8.127\", 9669)); NebulaPool pool = new NebulaPool(); pool.init(addresses, nebulaPoolConfig); Session session = pool.getSession(\"root\", \"nebula\", false); ","date":"2021-11-25","objectID":"/nebula-java-happy-parsing-guide/:1:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","java"],"title":"Nebula Graph çš„ Java æ•°æ®è§£æå®è·µä¸æŒ‡å¯¼","uri":"/nebula-java-happy-parsing-guide/#å…³é”®æ­¥éª¤å‡ è¡Œå‡†å¤‡ä¸€ä¸ªå¹²å‡€çš„äº¤äº’å¼-nebula-java-repl-ç¯å¢ƒ"},{"categories":["Nebula Graph"],"content":"é€šè¿‡è°ƒç”¨ execute æ–¹æ³•è·å¾—ä¸å¤ªå®¹æ˜“æ‡‚çš„ ResultSet å¯¹è±¡åˆšæ¥è§¦è¿™é‡Œçš„å¤§å®¶ä¸€å®šå¯¹è¿™ä¸ª ResultSet å¯¹è±¡æœ‰äº›æ„ï¼Œå€ŸåŠ©æˆ‘ä»¬çš„ç¯å¢ƒï¼Œå’±ä»¬æ¥ååˆ†é’ŸæŠŠå®ƒæé€šå§ï¼Œè¿™é‡Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªç®€å•çš„è¿”å› Vertex é¡¶ç‚¹çš„ç»“æœçœ‹çœ‹ï¼š ResultSet resp = session.execute(\"USE basketballplayer;MATCH (n:player) WHERE n.name==\\\"Tim Duncan\\\" RETURN n\"); è¿™é‡Œæˆ‘ä»¬å¯ä»¥å‚è€ƒ ResultSet çš„ä»£ç ï¼š Reference: client/graph/data/ResultSet.java å¥½å§ï¼Œå…¶å®å¯ä»¥å…ˆä¸çœ‹ï¼Œè·Ÿç€æˆ‘çš„æ•™ç¨‹å¾€ä¸‹èµ°å§ï¼Œæˆ‘ä»¬çŸ¥é“ç»“æœéƒ½æ˜¯äºŒç»´çš„è¡¨ï¼ŒResultSet æä¾›äº†å¸¸è§çš„é’ˆå¯¹è¡Œã€åˆ—çš„ä¸€äº›æ–¹æ³•ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬æ˜¯è·å–æ¯ä¸€è¡Œï¼Œç„¶åè§£æå®ƒï¼Œè€Œå…³é”®çš„é—®é¢˜æ˜¯æ¯ä¸€ä¸ªå€¼è¦æ€ä¹ˆå¤„ç†ï¼Œå¯¹å§ã€‚ java\u003e resp.isSucceeded() java.lang.Boolean res9 = true java\u003e resp.rowsSize() java.lang.Integer res16 = 1 java\u003e rows = resp.getRows() java.util.ArrayList rows = [Row ( values : [ \u003cValue vVal:Vertex ( vid : \u003cValue sVal:70 6c 61 79 65 72 31 30 30\u003e, tags : [ Tag ( name : 70 6C 61 79 65 72, props : { [B@5264a468 : \u003cValue iVal:42\u003e [B@496b8e10 : \u003cValue sVal:54 69 6d 20 44 75 6e 63 61 6e\u003e } ) ] )\u003e ] )] java\u003e row0 = resp.rowValues(0) java.lang.Iterable\u003ccom.vesoft.nebula.client.graph.data.ValueWrapper\u003e res10 = ColumnName: [n], Values: [(\"player100\" :player {name: \"Tim Duncan\", age: 42})] æˆ‘ä»¬å…¶å®å›åˆ°è¿™æ¬¡çš„ query ï¼Œå…¶å®æ˜¯è¿”å›ä¸€ä¸ª vertexï¼šé¡¶ç‚¹ï¼š (root@nebula) [basketballplayer]\u003e match (n:player) WHERE n.name == \"Tim Duncan\" return n +----------------------------------------------------+ | n | +----------------------------------------------------+ | (\"player100\" :player{age: 42, name: \"Tim Duncan\"}) | +----------------------------------------------------+ Got 1 rows (time spent 2116/44373 us) é€šè¿‡ä¸Šè¾¹çš„å‡ ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å…¶å®èƒ½å¤Ÿè·å¾—è¿™ä¸ªé¡¶ç‚¹çš„å€¼ï¼š v = Class.forName(\"com.vesoft.nebula.Value\") v.getDeclaredMethods() ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥è¿™ä¸ª com.vesoft.nebula.Value çš„å€¼çš„ç±»æä¾›çš„æ–¹æ³•ç‰¹åˆ«ç‰¹åˆ«åŸå§‹ï¼Œè¿™ä¹Ÿæ˜¯è®©å¤§å®¶çŠ¯æ„çš„åŸå› ï¼Œåœ¨è¿™ä¸ªæ•™ç¨‹é‡Œæœ€é‡è¦çš„ä¸€ä¸ªå¸¦èµ°çš„ç»éªŒï¼ˆé™¤äº†åˆ©ç”¨ REPLä¹‹å¤–ï¼‰å°±æ˜¯ï¼šé™¤éå¿…è¦ï¼Œä¸è¦å»å–è¿™ä¸ªåŸå§‹çš„ç±»ï¼Œæˆ‘ä»¬åº”è¯¥å»å–å¾— ValueWrapper å°è£…ä¹‹åçš„å€¼ï¼ï¼ï¼ æ³¨æ„ï¼šå…¶å®æˆ‘ä»¬æœ‰æ›´è½»æ¾åœ°æ–¹æ³•ï¼Œå°±æ˜¯ç”¨ executeJson ç›´æ¥è·å¾— JSON stringï¼Œåˆ«æ‹…å¿ƒï¼Œä¼šåœ¨åè¾¹æåˆ°ï¼Œä¸è¿‡è¿™ä¸ªæ–¹æ³•è¦ 2.6 ä¹‹åæ‰æ”¯æŒã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•ä½¿ç”¨ ValueWrapper å°è£…å‘¢ï¼Ÿå…¶å®ç­”æ¡ˆå·²ç»åœ¨ä¸Šè¾¹äº†ï¼Œå¤§å®¶å¯ä»¥å›å»çœ‹çœ‹ï¼Œresp.rowValues(0) çš„ç±»å‹æ­£æ˜¯ ValueWrapper çš„å¯è¿­ä»£å¯¹è±¡ï¼ æ‰€ä»¥ï¼Œæ­£ç¡®æ‰“å¼€æ–¹å¼æ˜¯è¿­å®ƒï¼è¿­å®ƒï¼è¿­å®ƒï¼å…¶å®è¿™ä¸ªå°±æ˜¯ä»£ç åº“é‡Œçš„ GraphClientExample çš„ä¸€éƒ¨åˆ†ä¾‹å­äº†ï¼Œæˆ‘ä»¬æŠŠå®ƒè¿­ä»£å–å‡ºæ¥ï¼Œæ”¾åˆ° wrappedValueList é‡Œæ…¢æ…¢æŠŠç©ï¼š import java.util.ArrayList; import java.util.List; List\u003cValueWrapper\u003e wrappedValueList = new ArrayList\u003c\u003e(); for (int i = 0; i \u003c resp.rowsSize(); i++) { ResultSet.Record record = resp.rowValues(i); for (ValueWrapper value : record.values()) { wrappedValueList.add(value); if (value.isLong()) { System.out.printf(\"%15s |\", value.asLong()); } if (value.isBoolean()) { System.out.printf(\"%15s |\", value.asBoolean()); } if (value.isDouble()) { System.out.printf(\"%15s |\", value.asDouble()); } if (value.isString()) { System.out.printf(\"%15s |\", value.asString()); } if (value.isTime()) { System.out.printf(\"%15s |\", value.asTime()); } if (value.isDate()) { System.out.printf(\"%15s |\", value.asDate()); } if (value.isDateTime()) { System.out.printf(\"%15s |\", value.asDateTime()); } if (value.isVertex()) { System.out.printf(\"%15s |\", value.asNode()); } if (value.isEdge()) { System.out.printf(\"%15s |\", value.asRelationship()); } if (value.isPath()) { System.out.printf(\"%15s |\", value.asPath()); } if (value.isList()) { System.out.printf(\"%15s |\", value.asList()); } if (value.isSet()) { System.out.printf(\"%15s |\", value.asSet()); } if (value.isMap()) { System.out.printf(\"%15s |\", value.asMap()); } } System.out.println(); } ä¸Šè¾¹è¿™äº›å¾ˆä¸‘çš„ if å°±æ˜¯å…³é”®äº†ï¼Œæˆ‘ä»¬çŸ¥é“ query çš„è¿”å›å€¼å¯èƒ½æ˜¯å¤šç§ç±»å‹çš„ï¼Œä»–ä»¬åˆ†ä¸ºï¼š å›¾è¯­ä¹‰çš„ï¼šç‚¹ã€è¾¹ã€è·¯å¾„ æ•°æ®ç±»å‹ï¼šStringï¼Œæ—¥æœŸï¼Œåˆ—è¡¨ï¼Œé›†åˆ ç­‰ç­‰ç­‰ è¿™é‡Œçš„å…³é”®æ˜¯ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ ValueWrapper ä¸ºæˆ‘ä»¬å‡†å¤‡å¥½çš„ asXxx æ–¹æ³•ï¼Œå¦‚æœè¿™ä¸ªå€¼æ˜¯ä¸€ä¸ªé¡¶ç‚¹ï¼Œä¹ˆè¿™ä¸ª Xxx å°±æ˜¯ Nodeï¼ŒåŒç†å¦‚æœæ˜¯è¾¹çš„è¯ï¼Œè¿™ä¸ª Xxx å°±æ˜¯ Relationshipã€‚ æ‰€ä»¥ï¼Œæˆ‘ç»™å¤§å®¶çœ‹çœ‹å’±ä»¬è¿™ä¸ªè¿”å›ç‚¹ç»“æœçš„æƒ…å†µä¸‹çš„ asNode() æ–¹æ³•ï¼š java\u003e v = wrappedValueList.get(0) com.vesoft.nebula.client.graph.data.ValueWrapper v = (\"player100\" :player {name: \"Tim Duncan\", age: 42}) java\u003e v.asNode() com.vesoft.nebula.client.graph.data.Node res16 = (\"player100\" :player {name: \"Tim Duncan\", age: 42}) java\u003e node = v.asNode() com.vesoft.nebula.client.graph.data.Node node = (\"player100\" :player {name: \"Tim Duncan\", age: 42}) é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå€ŸåŠ©äº Java çš„ reflection ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªäº¤äº’ç¨‹åºé‡Œåšç±»ä¼¼äº Python é‡Œ dir() çš„äº‹æƒ…ï¼Œå®æ—¶åœ°å»è·å–ä¸€ä¸ªç±»æ”¯æŒçš„æ–¹æ³•ï¼Œåƒè¿™æ ·ï¼Œçœå»äº†æŸ¥ä»£ç ã€‚ java\u003e rClass=Class.forName(\"com.vesoft.nebula.client.graph.data.ResultSet\") java.lang.Class r = class com.vesoft.nebula.client.graph.data.ResultSet java\u003e rClass.getDeclaredMethods() java.lang.reflect.Met","date":"2021-11-25","objectID":"/nebula-java-happy-parsing-guide/:2:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","java"],"title":"Nebula Graph çš„ Java æ•°æ®è§£æå®è·µä¸æŒ‡å¯¼","uri":"/nebula-java-happy-parsing-guide/#é€šè¿‡è°ƒç”¨-execute-æ–¹æ³•è·å¾—ä¸å¤ªå®¹æ˜“æ‡‚çš„-resultset-å¯¹è±¡"},{"categories":["Nebula Graph"],"content":"ç›´æ¥è¿”å› JSON çš„ executeJson æ–¹æ³•æœ€åï¼Œå¥½æ¶ˆæ¯æ˜¯ï¼Œä» 2.6 å¼€å§‹ï¼Œnebula å¯ä»¥ç›´æ¥è¿”å› JSON çš„ String äº†ï¼Œæˆ‘ä»¬ä¸Šè¾¹çš„çº ç»“ä¹Ÿéƒ½ä¸æ˜¯å¿…è¦çš„äº†ï¼š java\u003e String resp_json = session.executeJson(\"USE basketballplayer;MATCH (n:player) WHERE n.name==\\\"Tim Duncan\\\" RETURN n\"); java.lang.String resp_json = \" { \"errors\":[ { \"code\":0 } ], \"results\":[ { \"spaceName\":\"basketballplayer\", \"data\":[ { \"meta\":[ { \"type\":\"vertex\", \"id\":\"player100\" } ], \"row\":[ { \"player.age\":42, \"player.name\":\"Tim Duncan\" } ] } ], \"columns\":[ \"n\" ], \"errors\":{ \"code\":0 }, \"latencyInUs\":4761 } ] } \" æˆ‘ç›¸ä¿¡å¤§å®¶è‚¯å®šæ¯”æˆ‘æ›´æ“…é•¿å¤„ç† JSON çš„ç»“æœäº†å“ˆ~~ ","date":"2021-11-25","objectID":"/nebula-java-happy-parsing-guide/:3:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","java"],"title":"Nebula Graph çš„ Java æ•°æ®è§£æå®è·µä¸æŒ‡å¯¼","uri":"/nebula-java-happy-parsing-guide/#ç›´æ¥è¿”å›-json-çš„-executejson-æ–¹æ³•"},{"categories":["Nebula Graph"],"content":"ç»“è®º å¦‚æœæˆ‘ä»¬æœ‰æ¡ä»¶ï¼ˆ2.6ä»¥åï¼‰ç”¨ JSONï¼Œæƒ…å†µä¼šå¾ˆå®¹æ˜“ï¼Œå¯èƒ½å¤§å®¶ä¸å¤ªéœ€è¦æœ¬æ–‡çš„æ–¹æ³•ï¼ˆä¸è¿‡æœ‰äº¤äº’ç¯å¢ƒè¿˜æ˜¯å¾ˆæ–¹ä¾¿å§ï¼Ÿï¼‰ å¦‚æœæˆ‘ä»¬ä¸å¾—ä¸å’Œ resultSet æ‰“äº¤é“ï¼Œè®°å¾—ç”¨ ValueWrapper ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ç”¨ asNode()ï¼ŒasRelationship() å’Œ asPath() ï¼Œå°è£…ä¹‹åçš„å€¼æ¯”åŸå§‹çš„å€¼å¯çˆ±å¤ªå¤šäº†ï¼ é€šè¿‡ REPL å·¥å…·ï¼Œç»“åˆ Java çš„ reflection åŠ ä¸Š æºä»£ç æœ¬èº«ï¼Œåˆ†ææ•°æ®çš„å¤„ç†å°†å˜å¾—å¼‚å¸¸é¡ºæ»‘ Happy Graphing! Picture Creditï¼šleunesmedia ","date":"2021-11-25","objectID":"/nebula-java-happy-parsing-guide/:4:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","java"],"title":"Nebula Graph çš„ Java æ•°æ®è§£æå®è·µä¸æŒ‡å¯¼","uri":"/nebula-java-happy-parsing-guide/#ç»“è®º"},{"categories":["Nebula Graph","Mini Project"],"content":"å¦‚ä½•åˆ©ç”¨å›¾æ•°æ®åº“ä»é›¶åˆ°ä¸€æ„å»ºä¸€ä¸ªå…·æœ‰è‚¡æƒåˆ†æçš„å›¾è°±ä¸çº¿ä¸Šç³»ç»Ÿå‘¢ï¼Ÿæœ¬æ–‡æ‰‹æŠŠæ‰‹å¸¦ä½ æ„å»ºä¸€ä¸ªç®€æ˜“ç‰ˆçš„è‚¡æƒç©¿é€å›¾è°±ç³»ç»Ÿã€‚","date":"2021-11-24","objectID":"/corp-rel-graph/","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/"},{"categories":["Nebula Graph","Mini Project"],"content":" å¦‚ä½•æ„å»ºä¸€ä¸ªå…·æœ‰è‚¡æƒåˆ†æçš„å›¾è°±ä¸çº¿ä¸Šç³»ç»Ÿå‘¢ï¼Ÿæœ¬æ–‡é‡Œï¼Œæˆ‘å°†åˆ©ç”¨å›¾æ•°æ®åº“ä»é›¶åˆ°ä¸€å¸¦ä½ æ„å»ºä¸€ä¸ªç®€æ˜“ç‰ˆçš„è‚¡æƒç©¿é€å›¾è°±ç³»ç»Ÿã€‚ æˆ‘ä»¬çŸ¥é“æ— è®ºæ˜¯ç›‘ç®¡éƒ¨é—¨ã€ä¼ä¸šè¿˜æ˜¯ä¸ªäººï¼Œéƒ½æœ‰éœ€æ±‚å»é’ˆå¯¹ä¸€ä¸ªä¼ä¸šã€æ³•äººåšä¸€äº›èƒŒæ™¯è°ƒæŸ¥ï¼Œè¿™äº›è°ƒæŸ¥å¯ä»¥æ˜¯æ³•å¾‹è¯‰è®¼ã€å…¬å¼€æŒè‚¡ã€ä¼ä¸šä»»èŒç­‰ç­‰å¤šç§å¤šæ ·çš„ä¿¡æ¯ã€‚è¿™äº›èƒŒæ™¯ä¿¡æ¯å¯ä»¥è¾…åŠ©æˆ‘ä»¬åšå•†ä¸šä¸Šçš„é‡è¦å†³ç­–ï¼Œè§„é¿é£é™©ï¼šæ¯”å¦‚æ ¹æ®å…¬å¸çš„è‚¡æƒå…³ç³»ï¼Œäº†è§£æ˜¯å¦å­˜åœ¨åˆ©ç›Šå†²çªæ¯”å¦‚æ˜¯å¦é€‰æ‹©ä¸ä¸€å®¶å…¬å¸è¿›è¡Œå•†ä¸šå¾€æ¥ã€‚ åœ¨æ»¡è¶³è¿™æ ·çš„å…³ç³»åˆ†æéœ€æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€é¢ä¸´ä¸€äº›æŒ‘æˆ˜ï¼Œæ¯”å¦‚ï¼š å¦‚ä½•å°†è¿™äº›æ•°æ®çš„å…³è”å…³ç³»ä½“ç°åœ¨ç³»ç»Ÿä¹‹ä¸­ï¼Ÿä½¿å¾—å®ƒä»¬å¯ä»¥è¢«æŒ–æ˜ã€åˆ©ç”¨ å¤šç§å¼‚æ„æ•°æ®ã€æ•°æ®æºä¹‹é—´çš„å…³ç³»å¯èƒ½éšç€ä¸šåŠ¡çš„å‘å±•å¼•ç”³å‡ºæ›´å¤šçš„å˜åŒ–ï¼Œåœ¨ç»“æ„æ•°æ®åº“ä¸­ï¼Œè¿™æ„å‘³ç€ Schema å˜æ›´ åˆ†æç³»ç»Ÿéœ€è¦å°½å¯èƒ½å®æ—¶è·å–éœ€è¦çš„æŸ¥è¯¢ç»“æœï¼Œè¿™é€šå¸¸æ¶‰åŠåˆ°å¤šè·³å…³ç³»æŸ¥è¯¢ é¢†åŸŸä¸“å®¶èƒ½å¦å¿«é€Ÿçµæ´»ã€å¯è§†åŒ–è·å–åˆ†äº«ä¿¡æ¯ é‚£ä¹ˆå¦‚ä½•æ„å»ºè¿™æ ·ä¸€ä¸ªç³»ç»Ÿè§£å†³ä»¥ä¸ŠæŒ‘æˆ˜å‘¢ï¼Ÿ ","date":"2021-11-24","objectID":"/corp-rel-graph/:0:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#"},{"categories":["Nebula Graph","Mini Project"],"content":"æ•°æ®å­˜åœ¨å“ªé‡Œï¼Ÿ å‰æï¼šæ•°æ®é›†å‡†å¤‡ï¼Œä¸ºäº†æ›´å¥½çš„ç»™å¤§å®¶æ¼”ç¤ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å†™äº†ä¸€ä¸ªè½®å­èƒ½éšæœºç”Ÿæˆè‚¡æƒç»“æ„ç›¸å…³çš„æ•°æ®ï¼Œç”Ÿæˆçš„æ•°æ®çš„ä¾‹å­åœ¨è¿™é‡Œã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬æœ‰æ³•äººã€å…¬å¸çš„æ•°æ®ï¼Œæ›´æœ‰å…¬å¸ä¸å­å…¬å¸ä¹‹é—´çš„å…³ç³»ï¼Œå…¬å¸æŒæœ‰å…¬å¸è‚¡ä»½ï¼Œæ³•äººä»»èŒå…¬å¸ï¼Œæ³•äººæŒæœ‰å…¬å¸è‚¡ä»½å’Œæ³•äººä¹‹é—´äº²å¯†åº¦çš„å…³ç³»æ•°æ®ã€‚ æ•°æ®å­˜åœ¨å“ªé‡Œï¼Ÿè¿™æ˜¯ä¸€ä¸ªå…³é”®çš„é—®é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬å‰§é€ä¸€ä¸‹ï¼Œç­”æ¡ˆæ˜¯ï¼šå›¾æ•°æ®åº“ã€‚ç„¶åæˆ‘ä»¬å†ç®€å•è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆè¿™æ ·ä¸€ä¸ªè‚¡æƒå›¾è°±ç³»ç»Ÿè·‘åœ¨å›¾æ•°æ®åº“ä¸Šæ˜¯æ›´å¥½çš„ã€‚ åœ¨è¿™æ ·ä¸€ä¸ªç®€å•çš„æ•°æ®æ¨¡å‹ä¹‹ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç›´æ¥çš„åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­è¿™ä¹ˆå»ºæ¨¡ï¼š è€Œè¿™ä¹ˆå»ºæ¨¡çš„é—®é¢˜åœ¨äºï¼šè¿™ç§é€»è¾‘å…³è”çš„æ–¹å¼ä½¿å¾—æ— è®ºæ•°æ®çš„å…³è”å…³ç³»æŸ¥è¯¢è¡¨è¾¾ã€å­˜å‚¨ã€è¿˜æ˜¯å¼•å…¥æ–°çš„å…³è”å…³ç³»éƒ½ä¸æ˜¯å¾ˆé«˜æ•ˆã€‚ æŸ¥è¯¢è¡¨è¾¾ä¸é«˜æ•ˆæ˜¯å› ä¸ºå…³ç³»å‹æ•°æ®åº“æ˜¯é¢å‘è¡¨ç»“æ„è®¾è®¡çš„ï¼Œè¿™å†³å®šäº†å…³ç³»æŸ¥è¯¢è¦å†™åµŒå¥—çš„ JOINã€‚ è¿™å°±æ˜¯å‰è¾¹æåˆ°çš„æŒ‘æˆ˜ 1ï¼šèƒ½å¤Ÿè¡¨è¾¾ï¼Œä½†æ˜¯æ¯”è¾ƒå‹‰å¼ºï¼Œé‡åˆ°ç¨å¾®å¤æ‚çš„æƒ…å†µå°±å˜å¾—å¾ˆéš¾ã€‚ å­˜å‚¨ä¸é«˜æ•ˆæ˜¯å› ä¸ºè¡¨ç»“æ„è¢«è®¾è®¡çš„æ¨¡å¼æ˜¯é¢å‘æ•°æ®è®°å½•ï¼Œè€Œéæ•°æ®ä¹‹é—´çš„å…³ç³»ï¼šæˆ‘ä»¬è™½ç„¶ä¹ æƒ¯äº†å°†æ•°æ®ä¸­å®ä½“ï¼ˆæ¯”å¦‚æ³•äººï¼‰å’Œå®ä½“å…³è”ï¼ˆæ¯”å¦‚æŒæœ‰è‚¡æƒ hold_sharing_relationshipï¼‰ä»¥å¦å¤–ä¸€ä¸ªè¡¨ä¸­çš„è®°å½•æ¥è¡¨è¾¾ã€å­˜å‚¨èµ·æ¥ï¼Œè¿™é€»è¾‘ä¸Šå®Œå…¨è¡Œå¾—é€šï¼Œä½†æ˜¯åˆ°äº†å¤šè·³ã€å¤§é‡éœ€è¦è¯·æ±‚æ•°æ®å…³ç³»è·³è½¬çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·è·¨è¡¨ JOIN çš„ä»£ä»·å°±æˆä¸ºäº†ç“¶é¢ˆã€‚ è¿™å°±æ˜¯å‰è¾¹æåˆ°çš„æŒ‘æˆ˜ 3ï¼šæ— æ³•åº”å¯¹å¤šæ¡æŸ¥è¯¢çš„æ€§èƒ½éœ€è¦ã€‚ å¼•å…¥æ–°çš„å…³è”å…³ç³»ä»£ä»·å¤§ï¼Œè¿˜æ˜¯å‰è¾¹æåˆ°çš„ï¼Œè¡¨ç»“æ„ä¸‹ï¼Œç”¨æ–°çš„è¡¨æ¥è¡¨è¾¾æŒæœ‰è‚¡æƒ hold_sharing_relationshipè¿™ä¸ªå…³è”å…³ç³»æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯è¿™éå¸¸ä¸çµæ´»ã€è€Œä¸”æ˜‚è´µï¼Œå®ƒæ„å‘³ç€æˆ‘ä»¬åœ¨å¼•å…¥è¿™ä¸ªå…³ç³»çš„æ—¶å€™é™å®šäº†èµ·ç‚¹ç»ˆç‚¹çš„ç±»å‹ï¼Œæ¯”å¦‚è‚¡æƒæŒæœ‰çš„å…³ç³»å¯èƒ½æ˜¯æ³•äºº-\u003eå…¬å¸ï¼Œä¹Ÿå¯èƒ½æ˜¯å…¬å¸-\u003eå…¬å¸ï¼Œéšç€ä¸šåŠ¡çš„æ¼”è¿›ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜éœ€è¦å¼•å…¥æ”¿åºœ-\u003eå…¬å¸çš„æ–°å…³ç³»ï¼Œè€Œè¿™äº›å˜åŒ–éƒ½éœ€è¦åšæœ‰ä¸å°ä»£ä»·çš„å·¥ä½œï¼šæ”¹åŠ¨ Schemaã€‚ è¿™å°±æ˜¯å‰è¾¹æåˆ°çš„æŒ‘æˆ˜ 2ï¼šæ— æ³•åº”å¯¹ä¸šåŠ¡ä¸Šå¯¹æ•°æ®å…³ç³»ä¸Šçµæ´»å¤šå˜çš„è¦æ±‚ã€‚ å½“ä¸€ä¸ªé€šç”¨ç³»ç»Ÿæ— æ³•æ»¡è¶³ä¸å¯å¿½è§†çš„å…·ä½“éœ€æ±‚çš„æ—¶å€™ï¼Œä¸€ä¸ªæ–°çš„ç³»ç»Ÿå°±ä¼šè¯ç”Ÿï¼Œè¿™å°±æ˜¯å›¾æ•°æ®åº“ï¼Œé’ˆå¯¹è¿™æ ·çš„åœºæ™¯ï¼Œå›¾æ•°æ®åº“å¾ˆè‡ªç„¶åœ°ç‰¹åˆ«é’ˆå¯¹å…³è”å…³ç³»åœºæ™¯å»è®¾è®¡æ•´ä¸ªæ•°æ®åº“ï¼š é¢å‘å…³è”å…³ç³»è¡¨è¾¾çš„è¯­ä¹‰ã€‚ï¼ˆæŒ‘æˆ˜ 1ï¼‰ å¦‚ä¸‹è¡¨ï¼Œæˆ‘åˆ—ä¸¾äº†ä¸€ä¸ªç­‰ä»·çš„ä¸€è·³æŸ¥è¯¢åœ¨è¡¨ç»“æ„æ•°æ®åº“ä¸å›¾æ•°æ®åº“ä¸­ï¼ŒæŸ¥è¯¢è¯­å¥çš„åŒºåˆ«ã€‚å¤§å®¶åº”è¯¥å¯ä»¥çœ‹å‡ºâ€œæ‰¾åˆ°æ‰€æœ‰æŒæœ‰å’Œ p_100 å…±åŒæŒæœ‰å…¬å¸è‚¡ä»½çš„äººâ€è¿™æ ·çš„æŸ¥è¯¢è¡¨è¾¾å¯ä»¥åœ¨å›¾æ•°æ®åº“å¦‚ä½•è‡ªç„¶è¡¨è¾¾ï¼Œè¿™ä»…ä»…æ˜¯ä¸€æ¡æŸ¥è¯¢çš„åŒºåˆ«ï¼Œå¦‚æœæ˜¯å¤šè·³çš„è¯ï¼Œä»–ä»¬çš„å¤æ‚åº¦åŒºåˆ†è¿˜ä¼šæ›´æ˜æ˜¾ä¸€äº›ã€‚ è¡¨ç»“æ„æ•°æ®åº“ å›¾æ•°æ®åº“ï¼ˆå±æ€§å›¾ï¼‰ å°†å…³è”å…³ç³»å­˜å‚¨ä¸ºç‰©ç†è¿æ¥ï¼Œä»è€Œä½¿å¾—è·³è½¬æŸ¥è¯¢ä»£ä»·æœ€å°ã€‚ï¼ˆæŒ‘æˆ˜ 3ã€2ï¼‰ å›¾æ•°æ®ä¹‹ä¸­ï¼Œä»ç‚¹æ‹“å±•ï¼ˆæ‰¾åˆ°ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…³ç³»çš„å¦ä¸€å¤´ï¼‰å‡ºå»çš„ä»£ä»·æ˜¯éå¸¸å°çš„ï¼Œè¿™å› ä¸ºå›¾æ•°æ®åº“æ˜¯ä¸€ä¸ªä¸“æœ‰çš„ç³»ç»Ÿï¼Œå¾—ç›Šäºå®ƒä¸»è¦å…³å¿ƒâ€œå›¾â€ç»“æ„çš„è®¾è®¡ï¼ŒæŸ¥æ‰¾ç¡®å®šçš„å®ä½“ï¼ˆæ¯”å¦‚å’Œä¸€ä¸ªæ³•äºº A ï¼‰æ‰€æœ‰å…³è”ï¼ˆå¯èƒ½æ˜¯ä»»èŒã€äº²æˆšã€æŒæœ‰ã€ç­‰ç­‰å…³ç³»ï¼‰å…¶ä»–æ‰€æœ‰å®ä½“ï¼ˆå…¬å¸ã€æ³•äººï¼‰è¿™ä¸ªæŸ¥æ‰¾çš„ä»£ä»·æ˜¯ O(1) çš„ï¼Œå› ä¸ºå®ƒä»¬åœ¨å›¾æ•°æ®åº“çš„æ•°æ®æœºæ„é‡Œæ˜¯çœŸçš„é“¾æ¥åœ¨ä¸€èµ·çš„ã€‚ å¤§å®¶å¯ä»¥ä»ä¸‹è¡¨çš„å®šé‡å‚è€ƒæ•°æ®ä¸€çª¥å›¾æ•°æ®åº“åœ¨è¿™ç§æŸ¥è¯¢ä¸‹çš„ä¼˜åŠ¿ï¼Œè¿™ç§ä¼˜åŠ¿åœ¨å¤šè·³é«˜å¹¶å‘æƒ…å†µä¸‹çš„åŒºåˆ«æ˜¯â€œèƒ½â€ä¸â€ä¸èƒ½â€œä½œä¸ºçº¿ä¸Šç³»ç»Ÿçš„åŒºåˆ«ï¼Œæ˜¯â€œå®æ—¶â€ä¸â€œç¦»çº¿â€çš„åŒºåˆ«ã€‚ åœ¨é¢å‘å…³è”å…³ç³»çš„æ•°æ®å»ºæ¨¡å’Œæ•°æ®ç»“æ„ä¹‹ä¸‹ï¼Œå¼•å…¥æ–°çš„å®ä½“ã€å…³è”å…³ç³»çš„ä»£ä»·è¦å°å¾ˆå¤šï¼Œè¿˜æ˜¯å‰è¾¹æåˆ°çš„ä¾‹å­ï¼š åœ¨ Nebula Graph å›¾æ•°æ®ä¸­å¼•å…¥ä¸€ä¸ªæ–°çš„â€œæ”¿åºœæœºæ„â€ç±»å‹çš„å®ä½“ï¼Œå¹¶å¢åŠ æ”¿åºœæœºæ„-\u003eå…¬å¸çš„â€œæŒæœ‰è‚¡ä»½â€çš„å…³è”å…³ç³»ç›¸æ¯”äºåœ¨éå›¾æ¨¡å‹çš„æ•°æ®åº“ä¸­çš„ä»£ä»·å°å¾ˆå¤šã€‚ è¡¨ç»“æ„æ•°æ®åº“ å›¾æ•°æ®åº“ï¼ˆå±æ€§å›¾ï¼‰ 4 è·³æŸ¥è¯¢æ—¶å»¶ 1544 ç§’ 4 è·³æŸ¥è¯¢æ—¶å»¶ 1.36 ç§’ å»ºæ¨¡ç¬¦åˆç›´è§‰ï¼›å›¾æ•°æ®åº“æœ‰é¢å‘æ•°æ®è¿æ¥çš„æ•°æ®å¯è§†åŒ–èƒ½åŠ›ï¼ˆæŒ‘æˆ˜ 4ï¼‰ å¤§å®¶åœ¨ä¸‹è¡¨ç¬¬äºŒåˆ—ä¸­å¯ä»¥å¯¹æ¯”æˆ‘ä»¬æœ¬æ–‡ä¸­è¿›è¡Œçš„è‚¡æƒåˆ†ææ•°æ®åœ¨ä¸¤ç§æ•°æ®åº“ä¹‹ä¸­çš„å»ºæ¨¡çš„åŒºåˆ«ï¼Œå°¤å…¶æ˜¯åœ¨å…³å¿ƒå…³è”å…³ç³»çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ„Ÿå—åˆ°å±æ€§å›¾çš„æ¨¡å‹å»ºç«‹æ˜¯å¾ˆç¬¦åˆäººç±»å¤§è„‘ç›´è§‰çš„ï¼Œè€Œè¿™å’Œå¤§è„‘ä¹‹ä¸­ç¥ç»å…ƒçš„ç»“æ„å¯èƒ½ä¹Ÿæœ‰ä¸€äº›å…³ç³»ã€‚ å›¾æ•°æ®åº“ä¸­å†…ç½®çš„å¯è§†åŒ–å·¥å…·æä¾›äº†ä¸€èˆ¬ç”¨æˆ·ä¾¿æ·ç†è§£æ•°æ®å…³ç³»çš„èƒ½åŠ›ï¼Œä¹Ÿç»™é¢†åŸŸä¸“å®¶ç”¨æˆ·æä¾›äº†è¡¨è¾¾è¯·æ±‚å¤æ‚æ•°æ®å…³ç³»çš„ç›´è§‚æ¥å£ã€‚ è¡¨ç»“æ„æ•°æ®åº“ å›¾æ•°æ®åº“ï¼ˆå±æ€§å›¾ï¼‰ è¡¨ç»“æ„æ•°æ®åº“ä¸å›¾æ•°æ®åº“çš„æ€»ä½“æ¯”è¾ƒï¼š è¡¨ç»“æ„æ•°æ®åº“ å›¾æ•°æ®åº“ï¼ˆå±æ€§å›¾ï¼‰ æŸ¥è¯¢ å»ºæ¨¡ æ€§èƒ½ 4 è·³æŸ¥è¯¢æ—¶å»¶ 1544 ç§’ 4 è·³æŸ¥è¯¢æ—¶å»¶ 1.36 ç§’ ç»¼ä¸Šï¼Œåœ¨æœ¬æ•™ç¨‹é‡Œï¼Œæˆ‘ä»¬å°†åˆ©ç”¨å›¾æ•°æ®åº“æ¥è¿›è¡Œæ•°æ®å­˜å‚¨ã€‚ ","date":"2021-11-24","objectID":"/corp-rel-graph/:1:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#æ•°æ®å­˜åœ¨å“ªé‡Œ"},{"categories":["Nebula Graph","Mini Project"],"content":"å›¾æ•°æ®å»ºæ¨¡å‰é¢åœ¨è®¨è®ºæ•°æ®å­˜åœ¨å“ªé‡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å·²ç»æ­ç¤ºäº†åœ¨å›¾æ•°æ®åº“ä¸­å»ºæ¨¡çš„æ–¹å¼ï¼šæœ¬è´¨ä¸Šï¼Œåœ¨è¿™å¼ å›¾ä¸­ï¼Œå°†ä¼šæœ‰ä¸¤ç§å®ä½“ï¼š äºº å…¬å¸ å››ç§å…³ç³»ï¼š äºº â€“ä½œä¸ºäº²äººâ€“\u003eäºº äºº â€“ä½œä¸ºè§’è‰²â€“\u003e å…¬å¸ äºº æˆ–è€… å…¬å¸ â€“æŒæœ‰è‚¡ä»½â€“\u003e å…¬å¸ å…¬å¸ â€“ä½œä¸ºå­æœºæ„â€“\u003e å…¬å¸ è¿™é‡Œé¢ï¼Œå®ä½“ä¸å…³ç³»æœ¬èº«éƒ½å¯ä»¥åŒ…å«æ›´å¤šçš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åœ¨å›¾æ•°æ®åº“é‡Œå°±æ˜¯å®ä½“ã€å…³ç³»è‡ªèº«çš„å±æ€§ã€‚å¦‚ä¸‹å›¾è¡¨ç¤ºï¼š äººçš„å±æ€§åŒ…æ‹¬ nameï¼Œage å…¬å¸çš„å±æ€§åŒ…æ‹¬ nameï¼Œlocation æŒæœ‰è‚¡ä»½ è¿™ä¸ªå…³ç³»æœ‰å±æ€§ share(ä»½é¢) ä»»èŒè¿™ä¸ªå…³ç³»æœ‰å±æ€§ roleï¼Œlevel ","date":"2021-11-24","objectID":"/corp-rel-graph/:2:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#å›¾æ•°æ®å»ºæ¨¡"},{"categories":["Nebula Graph","Mini Project"],"content":"æ•°æ®å…¥åº“æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å›¾æ•°æ®åº“å«åš Nebula Graphï¼ˆæ˜Ÿäº‘å›¾æ•°æ®åº“ï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªä»¥ Apache 2.0 è®¸å¯è¯å¼€æºçš„åˆ†å¸ƒå¼å›¾æ•°æ®åº“ã€‚ Nebula Graph in Github: https://github.com/vesoft-inc/nebula åœ¨å‘ Nebula Graph å¯¼å…¥æ•°æ®çš„æ—¶å€™ï¼Œå…³äºå¦‚ä½•é€‰æ‹©å·¥å…·ï¼Œè¯·å‚è€ƒè¿™ç¯‡æ–‡æ¡£å’Œè¿™ä¸ªè§†é¢‘ã€‚ è¿™é‡Œï¼Œç”±äºæ•°æ®æ ¼å¼æ˜¯ csv æ–‡ä»¶å¹¶ä¸”åˆ©ç”¨å•æœºçš„å®¢æˆ·ç«¯èµ„æºå°±è¶³å¤Ÿäº†ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä½¿ç”¨ nebula-importer æ¥å®Œæˆè¿™ä¸ªå·¥ä½œã€‚ æç¤ºï¼šåœ¨å¯¼å…¥æ•°æ®ä¹‹å‰ï¼Œè¯·å…ˆéƒ¨ç½²ä¸€ä¸ª Nebula Graph é›†ç¾¤ï¼Œæœ€ç®€ä¾¿çš„éƒ¨ç½²æ–¹å¼æ˜¯ä½¿ç”¨ nebula-up è¿™ä¸ªå°å·¥å…·ï¼Œåªéœ€è¦ä¸€è¡Œå‘½ä»¤å°±èƒ½åœ¨ Linux æœºå™¨ä¸ŠåŒæ—¶å¯åŠ¨ä¸€ä¸ª Nebula Graph æ ¸å¿ƒå’Œå¯è§†åŒ–å›¾æ¢ç´¢å·¥å…· Nebula Graph Studioã€‚å¦‚æœä½ æ›´æ„¿æ„ç”¨ Docker éƒ¨ç½²ï¼Œè¯·å‚è€ƒè¿™ä¸ªæ–‡æ¡£ã€‚ æœ¬æ–‡å‡è®¾æˆ‘ä»¬ä½¿ç”¨ Nebula-UP æ¥éƒ¨ç½²ï¼š curl -fsSL nebula-up.siwei.io/install.sh | bash è¿™é‡Œçš„æ•°æ®æ˜¯ç”Ÿæˆå™¨ç”Ÿæˆçš„ï¼Œä½ å¯ä»¥æŒ‰éœ€ç”Ÿæˆä»»æ„è§„æ¨¡éšæœºæ•°æ®é›†ï¼Œæˆ–è€…é€‰æ‹©ä¸€ä»½ç”Ÿæˆå¥½äº†çš„æ•°æ®åœ¨è¿™é‡Œ æœ‰äº†è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å¯¼å…¥äº†ã€‚ $ pip install Faker==2.0.5 pydbgen==1.0.5 $ python3 data_generator.py $ ls -l data total 1688 -rw-r--r-- 1 weyl staff 23941 Jul 14 13:28 corp.csv -rw-r--r-- 1 weyl staff 1277 Jul 14 13:26 corp_rel.csv -rw-r--r-- 1 weyl staff 3048 Jul 14 13:26 corp_share.csv -rw-r--r-- 1 weyl staff 211661 Jul 14 13:26 person.csv -rw-r--r-- 1 weyl staff 179770 Jul 14 13:26 person_corp_role.csv -rw-r--r-- 1 weyl staff 322965 Jul 14 13:26 person_corp_share.csv -rw-r--r-- 1 weyl staff 17689 Jul 14 13:26 person_rel.csv å¯¼å…¥å·¥å…· nebula-importer æ˜¯ä¸€ä¸ª golang çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½¿ç”¨æ–¹å¼å°±æ˜¯å°†å¯¼å…¥çš„ Nebula Graph è¿æ¥ä¿¡æ¯ã€æ•°æ®æºä¸­å­—æ®µçš„å«ä¹‰çš„ä¿¡æ¯å†™è¿› YAML æ ¼å¼çš„é…ç½®æ–‡ä»¶é‡Œï¼Œç„¶åé€šè¿‡å‘½ä»¤è¡Œè°ƒç”¨å®ƒã€‚å¯ä»¥å‚è€ƒæ–‡æ¡£æˆ–è€…å®ƒçš„ GitHub ä»“åº“é‡Œçš„ä¾‹å­ã€‚ è¿™é‡Œæˆ‘å·²ç»å†™å¥½äº†å‡†å¤‡å¥½äº†ä¸€ä»½ nebula-importer çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨æ•°æ®ç”Ÿæˆå™¨åŒä¸€ä¸ª repo ä¹‹ä¸‹çš„è¿™é‡Œã€‚ æœ€åï¼Œåªéœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å°±å¯ä»¥å¼€å§‹æ•°æ®å¯¼å…¥äº†ï¼š æ³¨æ„ï¼Œåœ¨å†™æœ¬æ–‡çš„æ—¶å€™ï¼Œnebula çš„æ–°ç‰ˆæœ¬æ˜¯ 2.6.1ï¼Œè¿™é‡Œå¯¹åº”çš„ nebula-importer æ˜¯ v2.6.0ï¼Œå¦‚æœæ‚¨å‡ºç°å¯¼å…¥é”™è¯¯å¯èƒ½æ˜¯ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå¯ä»¥ç›¸åº”è°ƒæ•´ä¸‹è¾¹å‘½ä»¤ä¸­çš„ç‰ˆæœ¬å·ã€‚ git clone https://github.com/wey-gu/nebula-shareholding-example cp -r data_sample /tmp/data cp nebula-importer.yaml /tmp/data/ docker run --rm -ti \\ --network=nebula-docker-compose_nebula-net \\ -v /tmp/data:/root \\ vesoft/nebula-importer:v2.6.0 \\ --config /root/nebula-importer.yaml ä½ çŸ¥é“å—ï¼ŸTL;DR å®é™…ä¸Šï¼Œè¿™ä»½ importer çš„é…ç½®é‡Œå¸®æˆ‘ä»¬åšäº† Nebula Graph ä¹‹ä¸­çš„å›¾å»ºæ¨¡çš„æ“ä½œï¼Œå®ƒä»¬çš„æŒ‡ä»¤åœ¨ä¸‹è¾¹ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨å»æ‰§è¡Œäº†ã€‚ CREATESPACEIFNOTEXISTSshareholding(partition_num=5,replica_factor=1,vid_type=FIXED_STRING(10));USEshareholding;CREATETAGperson(namestring);CREATETAGcorp(namestring);CREATETAGINDEXperson_nameonperson(name(20));CREATETAGINDEXcorp_nameoncorp(name(20));CREATEEDGErole_as(rolestring);CREATEEDGEis_branch_of();CREATEEDGEhold_share(sharefloat);CREATEEDGEreletive_with(degreeint); ","date":"2021-11-24","objectID":"/corp-rel-graph/:3:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#æ•°æ®å…¥åº“"},{"categories":["Nebula Graph","Mini Project"],"content":"å›¾åº“ä¸­æŸ¥è¯¢æ•°æ® Tips: ä½ çŸ¥é“å—ï¼Œä½ ä¹Ÿå¯ä»¥æ— éœ€éƒ¨ç½²å®‰è£…ï¼Œé€šè¿‡ Nebula-Playground ä¹‹ä¸­ï¼Œæ‰¾åˆ°è‚¡æƒç©¿é€æ¥åœ¨çº¿è®¿é—®åŒä¸€ä»½æ•°æ®é›†ã€‚ æˆ‘ä»¬å¯ä»¥å€ŸåŠ© Nebula Graph Studio æ¥è®¿é—®æ•°æ®ï¼Œè®¿é—®æˆ‘ä»¬éƒ¨ç½² Nebula-UP çš„æœåŠ¡å™¨åœ°å€çš„ 7001 ç«¯å£å°±å¯ä»¥äº†ï¼š å‡è®¾æœåŠ¡å™¨åœ°å€ä¸º 192.168.8.127ï¼Œåˆ™æœ‰ï¼š Nebula Studio åœ°å€ï¼š192.168.8.127:7001 Nebula Graph åœ°å€ï¼š192.168.8.127:9669 é»˜è®¤ç”¨æˆ·åï¼šroot é»˜è®¤å¯†ç ï¼šnebula è®¿é—® Nebula Studioï¼š é€‰æ‹©å›¾ç©ºé—´: Shareholding ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é‡Œè¾¹æ¢ç´¢æ¯”å¦‚ä¸€ä¸ªå…¬å¸çš„ä¸‰è·³ä»¥å†…çš„è‚¡æƒç©¿é€ï¼Œå…·ä½“çš„æ“ä½œå¯ä»¥å‚è€ƒï¼šè‚¡æƒç©¿é€åœ¨çº¿ Playground çš„ä»‹ç»ï¼š ","date":"2021-11-24","objectID":"/corp-rel-graph/:4:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#å›¾åº“ä¸­æŸ¥è¯¢æ•°æ®"},{"categories":["Nebula Graph","Mini Project"],"content":"æ„å»ºä¸€ä¸ªå›¾è°±ç³»ç»Ÿ è¿™éƒ¨åˆ†çš„ä»£ç å¼€æºåœ¨ GitHub ä¸Šï¼š https://github.com/wey-gu/nebula-corp-rel-search æœ¬é¡¹ç›®çš„ Demo ä¹Ÿåœ¨ PyCon China 2021 ä¸Šçš„æ¼”è®²ä¸­æœ‰è¿‡å±•ç¤ºï¼šè§†é¢‘åœ°å€ åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªæä¾›ç»™ç»ˆç«¯ç”¨æˆ·æ¥ä½¿ç”¨çš„è‚¡æƒæŸ¥è¯¢ç³»ç»Ÿäº†ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†å›¾æ•°æ®åº“ä½œä¸ºè¿™ä¸ªå›¾è°±çš„å­˜å‚¨å¼•æ“ï¼Œç†è®ºä¸Šï¼Œå¦‚æœä¸šåŠ¡å…è®¸ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨æˆ–è€…å°è£… Nebula Graph Studio æ¥æä¾›æœåŠ¡ï¼Œè¿™å®Œå…¨æ˜¯å¯è¡Œä¹Ÿæ˜¯åˆè§„çš„ï¼Œä¸è¿‡ï¼Œæœ‰ä¸€äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å»å®ç°ç•Œé¢ã€æˆ–è€…æˆ‘ä»¬éœ€è¦å°è£…å‡ºä¸€ä¸ª API ç»™ä¸Šæ¸¸ï¼ˆå¤šç«¯ï¼‰æä¾›å›¾è°±æŸ¥è¯¢çš„åŠŸèƒ½ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä¸ºå¤§å®¶å†™äº†ä¸€ä¸ªç®€å•çš„å®ä¾‹é¡¹ç›®ï¼Œæä¾›è¿™æ ·çš„æœåŠ¡ï¼Œä»–çš„æ¶æ„ä¹Ÿå¾ˆç›´æ¥ï¼š å‰ç«¯æ¥å—ç”¨æˆ·è¦æŸ¥è¯¢çš„ç©¿é€æ³•äººã€å…¬å¸ï¼ŒæŒ‰éœ€å‘è¯·æ±‚ç»™åç«¯ï¼Œå¹¶ç”¨ D3.js å°†è¿”å›ç»“æœæ¸²æŸ“ä¸ºå…³ç³»å›¾ åç«¯æ¥å—å‰ç«¯çš„ API è¯·æ±‚ï¼Œå°†è¯·æ±‚è½¬æ¢ä¸º Graph DB çš„æŸ¥è¯¢ï¼Œå¹¶è¿”å›å‰ç«¯æœŸå¾…çš„ç»“æœ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ Frontend â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Vue.JS â”‚ â”‚ â”‚ â”‚ D3.JS â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Backend â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Flask â”‚ â”‚ â”‚ â”‚ Nebula-Python â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Graph Query â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Graph Database â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ","date":"2021-11-24","objectID":"/corp-rel-graph/:5:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#æ„å»ºä¸€ä¸ªå›¾è°±ç³»ç»Ÿ"},{"categories":["Nebula Graph","Mini Project"],"content":"åç«¯æœåŠ¡â€“\u003eå›¾æ•°æ®åº“ è¯¦ç»†çš„æ•°æ®æ ¼å¼åˆ†æå¤§å®¶å¯ä»¥å‚è€ƒè¿™é‡Œ æŸ¥è¯¢è¯­å¥æˆ‘ä»¬å‡è®¾ç”¨æˆ·è¯·æ±‚çš„å®ä½“æ˜¯ c_132 ï¼Œé‚£ä¹ˆè¯·æ±‚ 1 åˆ° 3 æ­¥çš„å…³ç³»ç©¿é€çš„è¯­æ³•æ˜¯ï¼š MATCH p=(v)-[e:hold_share|:is_branch_of|:reletive_with|:role_as*1..3]-(v2) \\ WHERE id(v) IN [\"c_132\"] RETURN p LIMIT 100 è¿™é‡Œè¾¹ ()åŒ…è£¹çš„æ˜¯å›¾ä¹‹ä¸­çš„ç‚¹ï¼Œè€Œ[] åŒ…è£¹çš„åˆ™æ˜¯ç‚¹ä¹‹é—´çš„å…³ç³»ï¼šè¾¹ï¼Œæ‰€ä»¥ï¼š (v)-[e:hold_share|:is_branch_of|:reletive_with|:role_as*1..3]-(v2) ä¹‹ä¸­çš„ï¼š (v)-[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]-(v2)åº”è¯¥æ¯”è¾ƒå¥½ç†è§£ï¼Œæ„æ€æ˜¯ä» v åˆ°v2 åšæ‹“å±•ã€‚ ç°åœ¨æˆ‘ä»¬ä»‹ç»ä¸­é—´[]åŒ…è£¹çš„éƒ¨åˆ†ï¼Œè¿™é‡Œï¼Œå®ƒçš„è¯­ä¹‰æ˜¯ï¼šç»ç”±å››ç§ç±»å‹çš„è¾¹ï¼ˆ:ä¹‹åçš„æ˜¯è¾¹çš„ç±»å‹ï¼Œ|ä»£è¡¨æˆ–è€…ï¼‰é€šè¿‡å¯å˜çš„è·³æ•°ï¼š*1..3 ï¼ˆä¸€è·³åˆ°ä¸‰è·³ï¼‰ã€‚ æ‰€ä»¥ï¼Œç®€å•æ¥è¯´æ•´ç†çœ‹å¼€ï¼Œæˆ‘ä»¬çš„æ‹“å±•çš„è·¯å¾„æ˜¯ï¼šä»ç‚¹ v å¼€å§‹ï¼Œç»ç”±å››ç§å…³ç³»ä¸€åˆ°ä¸‰è·³æ‹“å±•åˆ°ç‚¹v2ï¼Œè¿”å›æ•´ä¸ªæ‹“å±•è·¯å¾„ pï¼Œé™åˆ¶ 100 ä¸ªè·¯å¾„ç»“æœï¼Œå…¶ä¸­ v æ˜¯ c_132ã€‚ Nebula Python Client/ SDKæˆ‘ä»¬å·²ç»çŸ¥é“äº†æŸ¥è¯¢è¯­å¥çš„è¯­æ³•ï¼Œé‚£ä¹ˆå°±åªéœ€è¦åœ¨åç«¯ç¨‹åºé‡Œæ ¹æ®è¯·æ±‚ã€é€šè¿‡å›¾æ•°æ®åº“çš„å®¢æˆ·ç«¯æ¥å‘å‡ºæŸ¥è¯¢è¯·æ±‚ï¼Œå¹¶å¤„ç†è¿”å›ç»“æ„å°±å¥½äº†ã€‚åœ¨ä»Šå¤©çš„ä¾‹å­ä¸­ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨ Python æ¥å®ç°åç«¯çš„é€»è¾‘ï¼Œæ‰€ä»¥æˆ‘ç”¨äº† Nebula-python è¿™ä¸ªåº“ï¼Œå®ƒæ˜¯ Nebula çš„ Python Clientã€‚ ä½ çŸ¥é“ä¹ˆï¼Ÿæˆªè‡³åˆ°ç°åœ¨ï¼ŒNebula åœ¨ GitHub ä¸Šæœ‰ Javaï¼ŒGOï¼ŒPythonï¼ŒC++ï¼ŒSparkï¼ŒFlinkï¼ŒRustï¼ˆæœªGAï¼‰ï¼ŒNodeJSï¼ˆæœªGAï¼‰ çš„å®¢æˆ·ç«¯æ”¯æŒï¼Œæ›´å¤šçš„è¯­è¨€çš„å®¢æˆ·ç«¯ä¹Ÿä¼šæ…¢æ…¢è¢«å‘å¸ƒå“¦ã€‚ ä¸‹è¾¹æ˜¯ä¸€ä¸ª Python Client æ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢å¹¶è¿”å›ç»“æœçš„ä¾‹å­ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨æˆ‘å®ç°è¿™ä¸ªä»£ç çš„æ—¶å€™ï¼ŒNebula Python å°šæœªæ”¯æŒè¿”å› JSON ï¼ˆé€šè¿‡session.execute_json()ï¼‰ç»“æœï¼Œå¦‚æœä½ è¦å®ç°è‡ªå·±çš„ä»£ç ï¼Œæˆ‘éå¸¸æ¨èè¯•è¯• JSON å“ˆï¼Œå°±å¯ä»¥ä¸ç”¨ä»å¯¹è±¡ä¸­ä¸€ç‚¹ç‚¹å–æ•°æ®äº†ï¼Œä¸è¿‡å€ŸåŠ© iPython/IDLE è¿™ç§ REPLï¼Œå¿«é€Ÿäº†è§£è¿”å›å¯¹è±¡çš„ç»“æ„ä¹Ÿæ²¡æœ‰é‚£ä¹ˆéº»çƒ¦ã€‚ $ python3 -m pip install nebula2-python==2.5.0 # æ³¨æ„è¿™é‡Œæˆ‘å¼•ç”¨æ—§çš„è®°å½•ï¼Œå®ƒæ˜¯ 2.5.0ï¼Œ $ ipython In [1]: from nebula2.gclient.net import ConnectionPool In [2]: from nebula2.Config import Config In [3]: config = Config() ...: config.max_connection_pool_size = 10 ...: # init connection pool ...: connection_pool = ConnectionPool() ...: # if the given servers are ok, return true, else return false ...: ok = connection_pool.init([('192.168.8.137', 9669)], config) ...: session = connection_pool.get_session('root', 'nebula') [2021-10-13 13:44:24,242]:Get connection to ('192.168.8.137', 9669) In [4]: resp = session.execute(\"use shareholding\") In [5]: query = ''' ...: MATCH p=(v)-[e:hold_share|:is_branch_of|:reletive_with|:role_as*1..3]-(v2) \\ ...: WHERE id(v) IN [\"c_132\"] RETURN p LIMIT 100 ...: ''' In [6]: resp = session.execute(query) # Note: after nebula graph 2.6.0, we could use execute_json as well In [7]: resp.col_size() Out[7]: 1 In [9]: resp.row_size() Out[10]: 100 æˆ‘ä»¬å¾€ä¸‹åˆ†æçœ‹çœ‹ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªè¯·æ±‚æœ¬è´¨ä¸Šç»“æœæ˜¯è·¯å¾„ï¼Œå®ƒæœ‰ä¸€ä¸ª .nodes() æ–¹æ³•å’Œ .relationships()æ–¹æ³•æ¥è·å¾—è·¯å¾„ä¸Šçš„ç‚¹å’Œè¾¹ï¼š In [11]: p=resp.row_values(22)[0].as_path() In [12]: p.nodes() Out[12]: [(\"c_132\" :corp{name: \"Chambers LLC\"}), (\"p_4000\" :person{name: \"Colton Bailey\"})] In [13]: p.relationships() Out[13]: [(\"p_4000\")-[:role_as@0{role: \"Editorial assistant\"}]-\u003e(\"c_132\")] å¯¹äºè¾¹æ¥è¯´æœ‰è¿™äº›æ–¹æ³• .edge_name(), .properties(), .start_vertex_id(), .end_vertex_id()ï¼Œè¿™é‡Œ edge_name æ˜¯è·å¾—è¾¹çš„ç±»å‹ã€‚ In [14]: rel=p.relationships()[0] In [15]: rel Out[15]: (\"p_4000\")-[:role_as@0{role: \"Editorial assistant\"}]-\u003e(\"c_132\") In [16]: rel.edge_name() Out[16]: 'role_as' In [17]: rel.properties() Out[17]: {'role': \"Editorial assistant\"} In [18]: rel.start_vertex_id() Out[18]: \"p_4000\" In [19]: rel.end_vertex_id() Out[19]: \"c_132\" å¯¹äºç‚¹æ¥è¯´ï¼Œå¯ä»¥ç”¨åˆ°è¿™äº›æ–¹æ³• .tags(), properties, get_id()ï¼Œè¿™é‡Œè¾¹ tags æ˜¯è·å¾—ç‚¹çš„ç±»å‹ï¼Œå®ƒåœ¨ Nebula é‡Œå«æ ‡ç­¾tagã€‚ è¿™äº›æ¦‚å¿µå¯ä»¥åœ¨æ–‡æ¡£é‡Œè·å¾—æ›´è¯¦ç»†çš„è§£é‡Šã€‚ In [20]: node=p.nodes()[0] In [21]: node.tags() Out[21]: ['corp'] In [22]: node.properties('corp') Out[22]: {'name': \"Chambers LLC\"} In [23]: node.get_id() Out[23]: \"c_132\" ","date":"2021-11-24","objectID":"/corp-rel-graph/:5:1","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#åç«¯æœåŠ¡--å›¾æ•°æ®åº“"},{"categories":["Nebula Graph","Mini Project"],"content":"åç«¯æœåŠ¡â€“å›¾æ•°æ®åº“ è¯¦ç»†çš„æ•°æ®æ ¼å¼åˆ†æå¤§å®¶å¯ä»¥å‚è€ƒè¿™é‡Œ æŸ¥è¯¢è¯­å¥æˆ‘ä»¬å‡è®¾ç”¨æˆ·è¯·æ±‚çš„å®ä½“æ˜¯ c_132 ï¼Œé‚£ä¹ˆè¯·æ±‚ 1 åˆ° 3 æ­¥çš„å…³ç³»ç©¿é€çš„è¯­æ³•æ˜¯ï¼š MATCH p=(v)-[e:hold_share|:is_branch_of|:reletive_with|:role_as*1..3]-(v2) \\ WHERE id(v) IN [\"c_132\"] RETURN p LIMIT 100 è¿™é‡Œè¾¹ ()åŒ…è£¹çš„æ˜¯å›¾ä¹‹ä¸­çš„ç‚¹ï¼Œè€Œ[] åŒ…è£¹çš„åˆ™æ˜¯ç‚¹ä¹‹é—´çš„å…³ç³»ï¼šè¾¹ï¼Œæ‰€ä»¥ï¼š (v)-[e:hold_share|:is_branch_of|:reletive_with|:role_as*1..3]-(v2) ä¹‹ä¸­çš„ï¼š (v)-[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]-(v2)åº”è¯¥æ¯”è¾ƒå¥½ç†è§£ï¼Œæ„æ€æ˜¯ä» v åˆ°v2 åšæ‹“å±•ã€‚ ç°åœ¨æˆ‘ä»¬ä»‹ç»ä¸­é—´[]åŒ…è£¹çš„éƒ¨åˆ†ï¼Œè¿™é‡Œï¼Œå®ƒçš„è¯­ä¹‰æ˜¯ï¼šç»ç”±å››ç§ç±»å‹çš„è¾¹ï¼ˆ:ä¹‹åçš„æ˜¯è¾¹çš„ç±»å‹ï¼Œ|ä»£è¡¨æˆ–è€…ï¼‰é€šè¿‡å¯å˜çš„è·³æ•°ï¼š*1..3 ï¼ˆä¸€è·³åˆ°ä¸‰è·³ï¼‰ã€‚ æ‰€ä»¥ï¼Œç®€å•æ¥è¯´æ•´ç†çœ‹å¼€ï¼Œæˆ‘ä»¬çš„æ‹“å±•çš„è·¯å¾„æ˜¯ï¼šä»ç‚¹ v å¼€å§‹ï¼Œç»ç”±å››ç§å…³ç³»ä¸€åˆ°ä¸‰è·³æ‹“å±•åˆ°ç‚¹v2ï¼Œè¿”å›æ•´ä¸ªæ‹“å±•è·¯å¾„ pï¼Œé™åˆ¶ 100 ä¸ªè·¯å¾„ç»“æœï¼Œå…¶ä¸­ v æ˜¯ c_132ã€‚ Nebula Python Client/ SDKæˆ‘ä»¬å·²ç»çŸ¥é“äº†æŸ¥è¯¢è¯­å¥çš„è¯­æ³•ï¼Œé‚£ä¹ˆå°±åªéœ€è¦åœ¨åç«¯ç¨‹åºé‡Œæ ¹æ®è¯·æ±‚ã€é€šè¿‡å›¾æ•°æ®åº“çš„å®¢æˆ·ç«¯æ¥å‘å‡ºæŸ¥è¯¢è¯·æ±‚ï¼Œå¹¶å¤„ç†è¿”å›ç»“æ„å°±å¥½äº†ã€‚åœ¨ä»Šå¤©çš„ä¾‹å­ä¸­ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨ Python æ¥å®ç°åç«¯çš„é€»è¾‘ï¼Œæ‰€ä»¥æˆ‘ç”¨äº† Nebula-python è¿™ä¸ªåº“ï¼Œå®ƒæ˜¯ Nebula çš„ Python Clientã€‚ ä½ çŸ¥é“ä¹ˆï¼Ÿæˆªè‡³åˆ°ç°åœ¨ï¼ŒNebula åœ¨ GitHub ä¸Šæœ‰ Javaï¼ŒGOï¼ŒPythonï¼ŒC++ï¼ŒSparkï¼ŒFlinkï¼ŒRustï¼ˆæœªGAï¼‰ï¼ŒNodeJSï¼ˆæœªGAï¼‰ çš„å®¢æˆ·ç«¯æ”¯æŒï¼Œæ›´å¤šçš„è¯­è¨€çš„å®¢æˆ·ç«¯ä¹Ÿä¼šæ…¢æ…¢è¢«å‘å¸ƒå“¦ã€‚ ä¸‹è¾¹æ˜¯ä¸€ä¸ª Python Client æ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢å¹¶è¿”å›ç»“æœçš„ä¾‹å­ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨æˆ‘å®ç°è¿™ä¸ªä»£ç çš„æ—¶å€™ï¼ŒNebula Python å°šæœªæ”¯æŒè¿”å› JSON ï¼ˆé€šè¿‡session.execute_json()ï¼‰ç»“æœï¼Œå¦‚æœä½ è¦å®ç°è‡ªå·±çš„ä»£ç ï¼Œæˆ‘éå¸¸æ¨èè¯•è¯• JSON å“ˆï¼Œå°±å¯ä»¥ä¸ç”¨ä»å¯¹è±¡ä¸­ä¸€ç‚¹ç‚¹å–æ•°æ®äº†ï¼Œä¸è¿‡å€ŸåŠ© iPython/IDLE è¿™ç§ REPLï¼Œå¿«é€Ÿäº†è§£è¿”å›å¯¹è±¡çš„ç»“æ„ä¹Ÿæ²¡æœ‰é‚£ä¹ˆéº»çƒ¦ã€‚ $ python3 -m pip install nebula2-python==2.5.0 # æ³¨æ„è¿™é‡Œæˆ‘å¼•ç”¨æ—§çš„è®°å½•ï¼Œå®ƒæ˜¯ 2.5.0ï¼Œ $ ipython In [1]: from nebula2.gclient.net import ConnectionPool In [2]: from nebula2.Config import Config In [3]: config = Config() ...: config.max_connection_pool_size = 10 ...: # init connection pool ...: connection_pool = ConnectionPool() ...: # if the given servers are ok, return true, else return false ...: ok = connection_pool.init([('192.168.8.137', 9669)], config) ...: session = connection_pool.get_session('root', 'nebula') [2021-10-13 13:44:24,242]:Get connection to ('192.168.8.137', 9669) In [4]: resp = session.execute(\"use shareholding\") In [5]: query = ''' ...: MATCH p=(v)-[e:hold_share|:is_branch_of|:reletive_with|:role_as*1..3]-(v2) \\ ...: WHERE id(v) IN [\"c_132\"] RETURN p LIMIT 100 ...: ''' In [6]: resp = session.execute(query) # Note: after nebula graph 2.6.0, we could use execute_json as well In [7]: resp.col_size() Out[7]: 1 In [9]: resp.row_size() Out[10]: 100 æˆ‘ä»¬å¾€ä¸‹åˆ†æçœ‹çœ‹ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªè¯·æ±‚æœ¬è´¨ä¸Šç»“æœæ˜¯è·¯å¾„ï¼Œå®ƒæœ‰ä¸€ä¸ª .nodes() æ–¹æ³•å’Œ .relationships()æ–¹æ³•æ¥è·å¾—è·¯å¾„ä¸Šçš„ç‚¹å’Œè¾¹ï¼š In [11]: p=resp.row_values(22)[0].as_path() In [12]: p.nodes() Out[12]: [(\"c_132\" :corp{name: \"Chambers LLC\"}), (\"p_4000\" :person{name: \"Colton Bailey\"})] In [13]: p.relationships() Out[13]: [(\"p_4000\")-[:role_as@0{role: \"Editorial assistant\"}]-(\"c_132\")] å¯¹äºè¾¹æ¥è¯´æœ‰è¿™äº›æ–¹æ³• .edge_name(), .properties(), .start_vertex_id(), .end_vertex_id()ï¼Œè¿™é‡Œ edge_name æ˜¯è·å¾—è¾¹çš„ç±»å‹ã€‚ In [14]: rel=p.relationships()[0] In [15]: rel Out[15]: (\"p_4000\")-[:role_as@0{role: \"Editorial assistant\"}]-(\"c_132\") In [16]: rel.edge_name() Out[16]: 'role_as' In [17]: rel.properties() Out[17]: {'role': \"Editorial assistant\"} In [18]: rel.start_vertex_id() Out[18]: \"p_4000\" In [19]: rel.end_vertex_id() Out[19]: \"c_132\" å¯¹äºç‚¹æ¥è¯´ï¼Œå¯ä»¥ç”¨åˆ°è¿™äº›æ–¹æ³• .tags(), properties, get_id()ï¼Œè¿™é‡Œè¾¹ tags æ˜¯è·å¾—ç‚¹çš„ç±»å‹ï¼Œå®ƒåœ¨ Nebula é‡Œå«æ ‡ç­¾tagã€‚ è¿™äº›æ¦‚å¿µå¯ä»¥åœ¨æ–‡æ¡£é‡Œè·å¾—æ›´è¯¦ç»†çš„è§£é‡Šã€‚ In [20]: node=p.nodes()[0] In [21]: node.tags() Out[21]: ['corp'] In [22]: node.properties('corp') Out[22]: {'name': \"Chambers LLC\"} In [23]: node.get_id() Out[23]: \"c_132\" ","date":"2021-11-24","objectID":"/corp-rel-graph/:5:1","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#æŸ¥è¯¢è¯­å¥"},{"categories":["Nebula Graph","Mini Project"],"content":"åç«¯æœåŠ¡â€“å›¾æ•°æ®åº“ è¯¦ç»†çš„æ•°æ®æ ¼å¼åˆ†æå¤§å®¶å¯ä»¥å‚è€ƒè¿™é‡Œ æŸ¥è¯¢è¯­å¥æˆ‘ä»¬å‡è®¾ç”¨æˆ·è¯·æ±‚çš„å®ä½“æ˜¯ c_132 ï¼Œé‚£ä¹ˆè¯·æ±‚ 1 åˆ° 3 æ­¥çš„å…³ç³»ç©¿é€çš„è¯­æ³•æ˜¯ï¼š MATCH p=(v)-[e:hold_share|:is_branch_of|:reletive_with|:role_as*1..3]-(v2) \\ WHERE id(v) IN [\"c_132\"] RETURN p LIMIT 100 è¿™é‡Œè¾¹ ()åŒ…è£¹çš„æ˜¯å›¾ä¹‹ä¸­çš„ç‚¹ï¼Œè€Œ[] åŒ…è£¹çš„åˆ™æ˜¯ç‚¹ä¹‹é—´çš„å…³ç³»ï¼šè¾¹ï¼Œæ‰€ä»¥ï¼š (v)-[e:hold_share|:is_branch_of|:reletive_with|:role_as*1..3]-(v2) ä¹‹ä¸­çš„ï¼š (v)-[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]-(v2)åº”è¯¥æ¯”è¾ƒå¥½ç†è§£ï¼Œæ„æ€æ˜¯ä» v åˆ°v2 åšæ‹“å±•ã€‚ ç°åœ¨æˆ‘ä»¬ä»‹ç»ä¸­é—´[]åŒ…è£¹çš„éƒ¨åˆ†ï¼Œè¿™é‡Œï¼Œå®ƒçš„è¯­ä¹‰æ˜¯ï¼šç»ç”±å››ç§ç±»å‹çš„è¾¹ï¼ˆ:ä¹‹åçš„æ˜¯è¾¹çš„ç±»å‹ï¼Œ|ä»£è¡¨æˆ–è€…ï¼‰é€šè¿‡å¯å˜çš„è·³æ•°ï¼š*1..3 ï¼ˆä¸€è·³åˆ°ä¸‰è·³ï¼‰ã€‚ æ‰€ä»¥ï¼Œç®€å•æ¥è¯´æ•´ç†çœ‹å¼€ï¼Œæˆ‘ä»¬çš„æ‹“å±•çš„è·¯å¾„æ˜¯ï¼šä»ç‚¹ v å¼€å§‹ï¼Œç»ç”±å››ç§å…³ç³»ä¸€åˆ°ä¸‰è·³æ‹“å±•åˆ°ç‚¹v2ï¼Œè¿”å›æ•´ä¸ªæ‹“å±•è·¯å¾„ pï¼Œé™åˆ¶ 100 ä¸ªè·¯å¾„ç»“æœï¼Œå…¶ä¸­ v æ˜¯ c_132ã€‚ Nebula Python Client/ SDKæˆ‘ä»¬å·²ç»çŸ¥é“äº†æŸ¥è¯¢è¯­å¥çš„è¯­æ³•ï¼Œé‚£ä¹ˆå°±åªéœ€è¦åœ¨åç«¯ç¨‹åºé‡Œæ ¹æ®è¯·æ±‚ã€é€šè¿‡å›¾æ•°æ®åº“çš„å®¢æˆ·ç«¯æ¥å‘å‡ºæŸ¥è¯¢è¯·æ±‚ï¼Œå¹¶å¤„ç†è¿”å›ç»“æ„å°±å¥½äº†ã€‚åœ¨ä»Šå¤©çš„ä¾‹å­ä¸­ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨ Python æ¥å®ç°åç«¯çš„é€»è¾‘ï¼Œæ‰€ä»¥æˆ‘ç”¨äº† Nebula-python è¿™ä¸ªåº“ï¼Œå®ƒæ˜¯ Nebula çš„ Python Clientã€‚ ä½ çŸ¥é“ä¹ˆï¼Ÿæˆªè‡³åˆ°ç°åœ¨ï¼ŒNebula åœ¨ GitHub ä¸Šæœ‰ Javaï¼ŒGOï¼ŒPythonï¼ŒC++ï¼ŒSparkï¼ŒFlinkï¼ŒRustï¼ˆæœªGAï¼‰ï¼ŒNodeJSï¼ˆæœªGAï¼‰ çš„å®¢æˆ·ç«¯æ”¯æŒï¼Œæ›´å¤šçš„è¯­è¨€çš„å®¢æˆ·ç«¯ä¹Ÿä¼šæ…¢æ…¢è¢«å‘å¸ƒå“¦ã€‚ ä¸‹è¾¹æ˜¯ä¸€ä¸ª Python Client æ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢å¹¶è¿”å›ç»“æœçš„ä¾‹å­ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨æˆ‘å®ç°è¿™ä¸ªä»£ç çš„æ—¶å€™ï¼ŒNebula Python å°šæœªæ”¯æŒè¿”å› JSON ï¼ˆé€šè¿‡session.execute_json()ï¼‰ç»“æœï¼Œå¦‚æœä½ è¦å®ç°è‡ªå·±çš„ä»£ç ï¼Œæˆ‘éå¸¸æ¨èè¯•è¯• JSON å“ˆï¼Œå°±å¯ä»¥ä¸ç”¨ä»å¯¹è±¡ä¸­ä¸€ç‚¹ç‚¹å–æ•°æ®äº†ï¼Œä¸è¿‡å€ŸåŠ© iPython/IDLE è¿™ç§ REPLï¼Œå¿«é€Ÿäº†è§£è¿”å›å¯¹è±¡çš„ç»“æ„ä¹Ÿæ²¡æœ‰é‚£ä¹ˆéº»çƒ¦ã€‚ $ python3 -m pip install nebula2-python==2.5.0 # æ³¨æ„è¿™é‡Œæˆ‘å¼•ç”¨æ—§çš„è®°å½•ï¼Œå®ƒæ˜¯ 2.5.0ï¼Œ $ ipython In [1]: from nebula2.gclient.net import ConnectionPool In [2]: from nebula2.Config import Config In [3]: config = Config() ...: config.max_connection_pool_size = 10 ...: # init connection pool ...: connection_pool = ConnectionPool() ...: # if the given servers are ok, return true, else return false ...: ok = connection_pool.init([('192.168.8.137', 9669)], config) ...: session = connection_pool.get_session('root', 'nebula') [2021-10-13 13:44:24,242]:Get connection to ('192.168.8.137', 9669) In [4]: resp = session.execute(\"use shareholding\") In [5]: query = ''' ...: MATCH p=(v)-[e:hold_share|:is_branch_of|:reletive_with|:role_as*1..3]-(v2) \\ ...: WHERE id(v) IN [\"c_132\"] RETURN p LIMIT 100 ...: ''' In [6]: resp = session.execute(query) # Note: after nebula graph 2.6.0, we could use execute_json as well In [7]: resp.col_size() Out[7]: 1 In [9]: resp.row_size() Out[10]: 100 æˆ‘ä»¬å¾€ä¸‹åˆ†æçœ‹çœ‹ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªè¯·æ±‚æœ¬è´¨ä¸Šç»“æœæ˜¯è·¯å¾„ï¼Œå®ƒæœ‰ä¸€ä¸ª .nodes() æ–¹æ³•å’Œ .relationships()æ–¹æ³•æ¥è·å¾—è·¯å¾„ä¸Šçš„ç‚¹å’Œè¾¹ï¼š In [11]: p=resp.row_values(22)[0].as_path() In [12]: p.nodes() Out[12]: [(\"c_132\" :corp{name: \"Chambers LLC\"}), (\"p_4000\" :person{name: \"Colton Bailey\"})] In [13]: p.relationships() Out[13]: [(\"p_4000\")-[:role_as@0{role: \"Editorial assistant\"}]-(\"c_132\")] å¯¹äºè¾¹æ¥è¯´æœ‰è¿™äº›æ–¹æ³• .edge_name(), .properties(), .start_vertex_id(), .end_vertex_id()ï¼Œè¿™é‡Œ edge_name æ˜¯è·å¾—è¾¹çš„ç±»å‹ã€‚ In [14]: rel=p.relationships()[0] In [15]: rel Out[15]: (\"p_4000\")-[:role_as@0{role: \"Editorial assistant\"}]-(\"c_132\") In [16]: rel.edge_name() Out[16]: 'role_as' In [17]: rel.properties() Out[17]: {'role': \"Editorial assistant\"} In [18]: rel.start_vertex_id() Out[18]: \"p_4000\" In [19]: rel.end_vertex_id() Out[19]: \"c_132\" å¯¹äºç‚¹æ¥è¯´ï¼Œå¯ä»¥ç”¨åˆ°è¿™äº›æ–¹æ³• .tags(), properties, get_id()ï¼Œè¿™é‡Œè¾¹ tags æ˜¯è·å¾—ç‚¹çš„ç±»å‹ï¼Œå®ƒåœ¨ Nebula é‡Œå«æ ‡ç­¾tagã€‚ è¿™äº›æ¦‚å¿µå¯ä»¥åœ¨æ–‡æ¡£é‡Œè·å¾—æ›´è¯¦ç»†çš„è§£é‡Šã€‚ In [20]: node=p.nodes()[0] In [21]: node.tags() Out[21]: ['corp'] In [22]: node.properties('corp') Out[22]: {'name': \"Chambers LLC\"} In [23]: node.get_id() Out[23]: \"c_132\" ","date":"2021-11-24","objectID":"/corp-rel-graph/:5:1","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#nebula-python-client-sdk"},{"categories":["Nebula Graph","Mini Project"],"content":"å‰ç«¯æ¸²æŸ“ç‚¹è¾¹ä¸ºå›¾ è¯¦ç»†çš„åˆ†æå¤§å®¶ä¹Ÿå¯ä»¥å‚è€ƒè¿™é‡Œ ä¸ºäº†æ–¹ä¾¿å®ç°ï¼Œæˆ‘ä»¬é‡‡ç”¨äº† Vue.js å’Œ vue-network-d3ï¼ˆD3 çš„ Vue Bindingï¼‰ã€‚ é€šè¿‡ vue-network-d3 çš„æŠ½è±¡ï¼Œèƒ½çœ‹å‡ºæ¥å–‚ç»™ä»–è¿™æ ·çš„æ•°æ®ï¼Œå°±å¯ä»¥æŠŠç‚¹è¾¹ä¿¡æ¯æ¸²æŸ“æˆå¾ˆå¥½çœ‹çš„å›¾ nodes: [ {\"id\": \"c_132\", \"name\": \"Chambers LLC\", \"tag\": \"corp\"}, {\"id\": \"p_4000\", \"name\": \"Colton Bailey\", \"tag\": \"person\"}], relationships: [ {\"source\": \"p_4000\", \"target\": \"c_132\", \"properties\": { \"role\": \"Editorial assistant\" }, \"edge\": \"role_as\"}] ","date":"2021-11-24","objectID":"/corp-rel-graph/:5:2","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#å‰ç«¯æ¸²æŸ“ç‚¹è¾¹ä¸ºå›¾"},{"categories":["Nebula Graph","Mini Project"],"content":"å‰ç«¯\u003câ€“åç«¯ è¯¦ç»†ä¿¡æ¯å¯ä»¥å‚è€ƒè¿™é‡Œ æˆ‘ä»¬ä» D3 çš„åˆæ­¥ç ”ç©¶ä¸Šå¯ä»¥çŸ¥é“ï¼Œåç«¯åªéœ€è¦è¿”å›å¦‚ä¸‹çš„ JSON æ ¼å¼æ•°æ®å°±å¥½äº† Nodes: [{\"id\": \"c_132\", \"name\": \"Chambers LLC\", \"tag\": \"corp\"}, {\"id\": \"p_4000\", \"name\": \"Colton Bailey\", \"tag\": \"person\"}] Relationships: [{\"source\": \"p_4000\", \"target\": \"c_132\", \"properties\": { \"role\": \"Editorial assistant\" }, \"edge\": \"role_as\"}, {\"source\": \"p_1039\", \"target\": \"c_132\", \"properties\": { \"share\": \"3.0\" }, \"edge\": \"hold_share\"}] äºæ˜¯ï¼Œï¼Œç»“åˆå‰è¾¹æˆ‘ä»¬ç”¨ iPython åˆ†æ Python è¿”å›ç»“æœçœ‹ï¼Œè¿™ä¸ªé€»è¾‘å¤§æ¦‚æ˜¯ï¼š def make_graph_response(resp) -\u003e dict: nodes, relationships = list(), list() for row_index in range(resp.row_size()): path = resp.row_values(row_index)[0].as_path() _nodes = [ { \"id\": node.get_id(), \"tag\": node.tags()[0], \"name\": node.properties(node.tags()[0]).get(\"name\", \"\") } for node in path.nodes() ] nodes.extend(_nodes) _relationships = [ { \"source\": rel.start_vertex_id(), \"target\": rel.end_vertex_id(), \"properties\": rel.properties(), \"edge\": rel.edge_name() } for rel in path.relationships() ] relationships.extend(_relationships) return {\"nodes\": nodes, \"relationships\": relationships} å‰ç«¯åˆ°åç«¯çš„é€šä¿¡æ˜¯ HTTP ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å€ŸåŠ© Flaskï¼ŒæŠŠè¿™ä¸ªå‡½æ•°å°è£…æˆä¸€ä¸ª RESTful APIï¼š å‰ç«¯ç¨‹åºé€šè¿‡ HTTP POST åˆ° /api å‚è€ƒè¿™é‡Œ from flask import Flask, jsonify, request app = Flask(__name__) @app.route(\"/\") def root(): return \"Hey There?\" @app.route(\"/api\", methods=[\"POST\"]) def api(): request_data = request.get_json() entity = request_data.get(\"entity\", \"\") if entity: resp = query_shareholding(entity) data = make_graph_response(resp) else: data = dict() # tbd return jsonify(data) def parse_nebula_graphd_endpoint(): ng_endpoints_str = os.environ.get( 'NG_ENDPOINTS', '127.0.0.1:9669,').split(\",\") ng_endpoints = [] for endpoint in ng_endpoints_str: if endpoint: parts = endpoint.split(\":\") # we dont consider IPv6 now ng_endpoints.append((parts[0], int(parts[1]))) return ng_endpoints def query_shareholding(entity): query_string = ( f\"USE shareholding; \" f\"MATCH p=(v)-[e:hold_share|:is_branch_of|:reletive_with|:role_as*1..3]-(v2) \" f\"WHERE id(v) IN ['{ entity }'] RETURN p LIMIT 100\" ) session = connection_pool.get_session('root', 'nebula') resp = session.execute(query_string) return resp è¿™ä¸ªè¯·æ±‚çš„ç»“æœåˆ™æ˜¯å‰è¾¹å‰ç«¯æœŸå¾…çš„ JSONï¼Œåƒè¿™æ ·ï¼š curl --header \"Content-Type: application/json\" \\ --request POST \\ --data '{\"entity\": \"c_132\"}' \\ http://192.168.10.14:5000/api | jq { \"nodes\": [ { \"id\": \"c_132\", \"name\": \"\\\"Chambers LLC\\\"\", \"tag\": \"corp\" }, { \"id\": \"c_245\", \"name\": \"\\\"Thompson-King\\\"\", \"tag\": \"corp\" }, { \"id\": \"c_132\", \"name\": \"\\\"Chambers LLC\\\"\", \"tag\": \"corp\" }, ... } ], \"relationships\": [ { \"edge\": \"hold_share\", \"properties\": \"{'share': 0.0}\", \"source\": \"c_245\", \"target\": \"c_132\" { \"edge\": \"hold_share\", \"properties\": \"{'share': 9.0}\", \"source\": \"p_1767\", \"target\": \"c_132\" }, { \"edge\": \"hold_share\", \"properties\": \"{'share': 11.0}\", \"source\": \"p_1997\", \"target\": \"c_132\" }, ... }, { \"edge\": \"reletive_with\", \"properties\": \"{'degree': 51}\", \"source\": \"p_7283\", \"target\": \"p_4723\" } ] } ","date":"2021-11-24","objectID":"/corp-rel-graph/:5:3","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#å‰ç«¯--åç«¯"},{"categories":["Nebula Graph","Mini Project"],"content":"æ”¾åˆ°ä¸€èµ·é¡¹ç›®çš„ä»£ç éƒ½åœ¨ GitHub ä¸Šï¼Œæœ€åå…¶å®åªæœ‰ä¸€ä¸¤ç™¾è¡Œçš„ä»£ç ï¼ŒæŠŠæ‰€æœ‰ä¸œè¥¿æ‹¼èµ·æ¥ä¹‹åçš„ä»£ç æ˜¯ï¼š â”œâ”€â”€ README.md # You could find Design Logs here â”œâ”€â”€ corp-rel-backend â”‚ â””â”€â”€ app.py # Flask App to handle Requst and calls GDB â”œâ”€â”€ corp-rel-frontend â”‚ â””â”€â”€ src â”‚ â”œâ”€â”€ App.vue â”‚ â””â”€â”€ main.js # Vue App to call Flask App and Renders Graph â””â”€â”€ requirements.txt ","date":"2021-11-24","objectID":"/corp-rel-graph/:5:4","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#æ”¾åˆ°ä¸€èµ·"},{"categories":["Nebula Graph","Mini Project"],"content":"æœ€ç»ˆæ•ˆæœæˆ‘ä»¬åšå‡ºæ¥äº†ä¸€ä¸ªç®€é™‹ä½†æ˜¯è¶³å¤Ÿå…·æœ‰å‚è€ƒæ€§çš„å°ç³»ç»Ÿï¼Œå®ƒæ¥å—ä¸€ä¸ªç”¨æˆ·è¾“å…¥çš„å®ä½“çš„ IDï¼Œå†å›è½¦ä¹‹åï¼š å‰ç«¯ç¨‹åºæŠŠè¯·æ±‚å‘ç»™åç«¯ åç«¯æ‹¼æ¥ Nebula Graph çš„æŸ¥è¯¢è¯­å¥ï¼Œé€šè¿‡ Nebula Python å®¢æˆ·ç«¯è¯·æ±‚ Nebula Graph Nebula Graph æ¥å—è¯·æ±‚åšå‡ºç©¿é€æŸ¥è¯¢ï¼Œè¿”å›ç»“æ„ç»™åç«¯ åç«¯å°†ç»“æœæ„å»ºæˆå‰ç«¯ D3 æ¥å—çš„æ ¼å¼ï¼Œä¼ ç»™å‰ç«¯ å‰ç«¯æ¥æ”¶åˆ°å›¾ç»“æ„çš„æ•°æ®ï¼Œæ¸²æŸ“è‚¡æƒç©¿é€çš„æ•°æ®å¦‚ä¸‹ï¼š ","date":"2021-11-24","objectID":"/corp-rel-graph/:5:5","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#æœ€ç»ˆæ•ˆæœ"},{"categories":["Nebula Graph","Mini Project"],"content":"æ€»ç»“ç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“å¾—ç›Šäºå›¾æ•°æ®åº“çš„è®¾è®¡ï¼Œåœ¨å®ƒä¸Šè¾¹æ„å»ºä¸€ä¸ªæ–¹ä¾¿çš„è‚¡æƒåˆ†æç³»ç»Ÿéå¸¸è‡ªç„¶ã€é«˜æ•ˆï¼Œæˆ‘ä»¬æˆ–è€…åˆ©ç”¨å›¾æ•°æ®åº“çš„å›¾æ¢ç´¢å¯è§†åŒ–èƒ½åŠ›ã€æˆ–è€…è‡ªå·±æ­å»ºï¼Œå¯ä»¥ä¸ºç”¨æˆ·æä¾›éå¸¸é«˜æ•ˆã€ç›´è§‚çš„å¤šè·³è‚¡æƒç©¿é€åˆ†æã€‚ å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºåˆ†å¸ƒå¼å›¾æ•°æ®åº“çš„çŸ¥è¯†ï¼Œæ¬¢è¿å…³æ³¨ Nebula Graph è¿™ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒå·²ç»è¢«å›½å†…å¾ˆå¤šå›¢é˜Ÿã€å…¬å¸è®¤å¯é€‰ä¸ºå›¾æ—¶ä»£æ•°æ®æŠ€æœ¯å­˜å‚¨å±‚çš„åˆ©å™¨ï¼Œå¤§å®¶å¯ä»¥è®¿é—®è¿™é‡Œï¼Œæˆ–è€…è¿™é‡Œï¼Œäº†è§£æ›´å¤šç›¸å…³çš„åˆ†äº«å’Œæ–‡ç« ã€‚ æœªæ¥ï¼Œæˆ‘ä¼šç»™å¤§å®¶åˆ†äº«æ›´å¤šå›¾æ•°æ®åº“ç›¸å…³çš„æ–‡ç« ã€è§†é¢‘å’Œå¼€æºç¤ºä¾‹é¡¹ç›®æ€è·¯åˆ†äº«å’Œæ•™ç¨‹ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„ç½‘ç«™: siwei.ioã€‚ é¢˜å›¾ç‰ˆæƒï¼šfabioha ","date":"2021-11-24","objectID":"/corp-rel-graph/:6:0","series":null,"tags":["Nebula Graph","å›¾æ•°æ®åº“","è‚¡æƒç©¿é€","çŸ¥è¯†å›¾è°±"],"title":"ä»é›¶åˆ°ä¸€ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šè‚¡æƒå›¾è°±ç³»ç»Ÿï¼Ÿ","uri":"/corp-rel-graph/#æ€»ç»“"},{"categories":["Nebula Graph"],"content":"Dialog System With Graph Database Backed Knowledge Graph. åŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","date":"2021-09-18","objectID":"/nebula-siwi/","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/"},{"categories":["Nebula Graph"],"content":" ä¸€ä¸ªåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹é¡¹ç›®ã€‚ GitHub Repo: https://github.com/wey-gu/nebula-siwi/ è¿™ä¸ªé¡¹ç›®æˆ‘ä¹Ÿåšæˆäº†äº’åŠ¨æ•™ç¨‹ï¼Œå¯ä»¥æŒ‰ç…§è¿™é‡Œçš„æ­¥éª¤æ­å»ºèµ·æ¥ ğŸ‘‰ğŸ» https://siwei.io/cources/ update: å†™äº†ä¸€ç¯‡å®Œæ•´ä»‹ç» Siwi è®¾è®¡çš„æ–‡ç«  ğŸ‘‰ğŸ» https://siwei.io/siwi æ‚¨ä¹Ÿå¯ä»¥åœ¨ Nebula Playground ä¸Šç›´æ¥ç©è¿™ä¸ªæ•°æ®é›†å•¦ï¼šhttps://nebula-graph.com.cn/demo/ ","date":"2021-09-18","objectID":"/nebula-siwi/:0:0","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#"},{"categories":["Nebula Graph"],"content":"Siwi the voice assistantSiwi (/ËˆsÉªwi/) is a PoC of Dialog System With Graph Database Backed Knowledge Graph. For now, itâ€™s a demo for task-driven(not general purpose) dialog bots with KG(Knowledge Graph) leveraging Nebula Graph with the minimal/sample dataset from Nebula Graph Manual/ NGä¸­æ–‡æ‰‹å†Œ. Tips: Now you can play with the graph online without installing yourself! Nebula Playground | Nebula Playground - China Mainland Supported queries: relation: What is the relationship between Yao Ming and Lakers? How does Yao Ming and Lakers connected? serving: Which team had Yao Ming served? friendship: Whom does Tim Duncan follow? Who are Yao Mingâ€™s friends? ","date":"2021-09-18","objectID":"/nebula-siwi/:0:0","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#siwi-the-voice-assistant"},{"categories":["Nebula Graph"],"content":"Deploy and TryTBD (leveraging docker and nebula-up) ","date":"2021-09-18","objectID":"/nebula-siwi/:1:0","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#deploy-and-try"},{"categories":["Nebula Graph"],"content":"How does it work?This is one of the most naive pipeline for a specific domain/ single purpose chat bot built on a Knowledge Graph. ","date":"2021-09-18","objectID":"/nebula-siwi/:2:0","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#how-does-it-work"},{"categories":["Nebula Graph"],"content":"BackendThe Backend(Siwi API) is a Flask based API server: Flask API server takes questions in HTTP POST, and calls the bot API. In bot API part there are classfier(Symentic Parsing, Intent Matching, Slot Filling), and question actors(Call corresponding actions to query Knowledge Graph with intents and slots). Knowledge Graph is built on an Open-Source Graph Database: Nebula Graph ","date":"2021-09-18","objectID":"/nebula-siwi/:2:1","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#backend"},{"categories":["Nebula Graph"],"content":"FrontendThe Frontend is a VueJS Single Page Applicaiton(SPA): I reused a Vue Bot UI to showcase a chat window in this human-agent interaction, typing is supported. In addtion, leverating Chromeâ€™s Web Speech API, a button to listen to human voice is introduced ","date":"2021-09-18","objectID":"/nebula-siwi/:2:2","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#frontend"},{"categories":["Nebula Graph"],"content":"A Query Flow â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ Speech â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Frontend â”‚ Siwi, /ËˆsÉªwi/ â”‚ â”‚ â”‚ Web_Speech_API â”‚ A PoC of â”‚ â”‚ â”‚ â”‚ Dialog System â”‚ â”‚ â”‚ Vue.JS â”‚ With Graph Database â”‚ â”‚ â”‚ â”‚ Backed Knowledge Graph â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Sentence â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Backend â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ Web API, Flask â”‚ ./app/ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ Sentence ./bot/ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Intent matching, â”‚ ./bot/classifierâ”‚ â”‚ â”‚ â”‚ â”‚ Symentic Processing â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ Intent, Entities â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Intent Actor â”‚ ./bot/actions â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ Graph Query â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Graph Database â”‚ Nebula Graph â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ","date":"2021-09-18","objectID":"/nebula-siwi/:2:3","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#a-query-flow"},{"categories":["Nebula Graph"],"content":"Source Code Tree . â”œâ”€â”€ README.md â”œâ”€â”€ src â”‚ â”œâ”€â”€ siwi # Siwi-API Backend â”‚ â”‚ â”œâ”€â”€ app # Web Server, take HTTP requests and calls Bot API â”‚ â”‚ â””â”€â”€ bot # Bot API â”‚ â”‚ â”œâ”€â”€ actions # Take Intent, Slots, Query Knowledge Graph here â”‚ â”‚ â”œâ”€â”€ bot # Entrypoint of the Bot API â”‚ â”‚ â”œâ”€â”€ classifier # Symentic Parsing, Intent Matching, Slot Filling â”‚ â”‚ â””â”€â”€ test # Example Data Source as equivalent/mocked module â”‚ â””â”€â”€ siwi_frontend # Browser End â”‚ â”œâ”€â”€ README.md â”‚ â”œâ”€â”€ package.json â”‚ â””â”€â”€ src â”‚ â”œâ”€â”€ App.vue # Listening to user and pass Questions to Siwi-API â”‚ â””â”€â”€ main.js â””â”€â”€ wsgi.py ","date":"2021-09-18","objectID":"/nebula-siwi/:2:4","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#source-code-tree"},{"categories":["Nebula Graph"],"content":"Manually Run Components","date":"2021-09-18","objectID":"/nebula-siwi/:3:0","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#manually-run-components"},{"categories":["Nebula Graph"],"content":"BackendInstall and run. # Install siwi backend python3 -m build # Configure Nebula Graph Endpoint export NG_ENDPOINTS=127.0.0.1:9669 # Run Backend API server gunicorn --bind :5000 wsgi --workers 1 --threads 1 --timeout 60 For OpenFunction/ KNative docker build -t weygu/siwi-api . docker run --rm --name siwi-api \\ --env=PORT=5000 \\ --env=NG_ENDPOINTS=127.0.0.1:9669 \\ --net=host \\ weygu/siwi-api Try it out Web API: $ curl --header \"Content-Type: application/json\" \\ --request POST \\ --data '{\"question\": \"What is the relationship between Yao Ming and Lakers?\"}' \\ http://192.168.8.128:5000/query | jq { \"answer\": \"There are at least 23 relations between Yao Ming and Lakers, one relation path is: Yao Ming follows Shaquille O'Neal serves Lakers.\" } Call Bot Python API: from nebula2.gclient.net import ConnectionPool from nebula2.Config import Config # define a config config = Config() config.max_connection_pool_size = 10 # init connection pool connection_pool = ConnectionPool() # if the given servers are ok, return true, else return false ok = connection_pool.init([('127.0.0.1', 9669)], config) # import siwi bot from siwi.bot import bot # instantiate a bot b = bot.SiwiBot(connection_pool) # make the question query b.query(\"Which team had Jonathon Simmons served?\") Then a response will be like this: In [4]: b.query(\"Which team had Jonathon Simmons serv ...: ed?\") [DEBUG] ServeAction intent: {'entities': {'Jonathon Simmons': 'player'}, 'intents': ('serve',)} [DEBUG] query for RelationshipAction: USE basketballplayer; MATCH p=(v)-[e:serve*1]-\u003e(v1) WHERE id(v) == \"player112\" RETURN p LIMIT 100; [2021-07-02 02:59:36,392]:Get connection to ('127.0.0.1', 9669) Out[4]: 'Jonathon Simmons had served 3 teams. Spurs from 2015 to 2015; 76ers from 2019 to 2019; Magic from 2017 to 2017; ' ","date":"2021-09-18","objectID":"/nebula-siwi/:3:1","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#backend-1"},{"categories":["Nebula Graph"],"content":"FrontendReferring to siwi_frontend ","date":"2021-09-18","objectID":"/nebula-siwi/:3:2","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#frontend-1"},{"categories":["Nebula Graph"],"content":"Further work Use NBA-API to fallback undefined pattern questions Wrap and manage sessions instead of get and release session per request, this is somehow costly actually. Use NLP methods to implement proper Symentic Parsing, Intent Matching, Slot Filling Build Graph to help with Intent Matching, especially for a general purpose bot Use larger Dataset i.e. from wyattowalsh/basketball ","date":"2021-09-18","objectID":"/nebula-siwi/:4:0","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#further-work"},{"categories":["Nebula Graph"],"content":"Thanks to Upstream Projects â¤ï¸","date":"2021-09-18","objectID":"/nebula-siwi/:5:0","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#thanks-to-upstream-projects-"},{"categories":["Nebula Graph"],"content":"Backend I learnt a lot from the KGQA on MedicalKG created by Huanyong Liu Flask pyahocorasick created by Wojciech MuÅ‚a PyYaml ","date":"2021-09-18","objectID":"/nebula-siwi/:5:1","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#backend-2"},{"categories":["Nebula Graph"],"content":"Frontend VueJS for frontend framework Vue Bot UI, as a lovely bot UI in vue Vue Web Speech, for speech API vue wrapper Axios for browser http client Solarized for color scheme Vitesome for landing page design Image credit goes to https://unsplash.com/photos/0E_vhMVqL9g ","date":"2021-09-18","objectID":"/nebula-siwi/:5:2","series":null,"tags":["Nebula Graph","Know How","Intelligent assistant","å›¾æ•°æ®åº“åº”ç”¨","æ™ºèƒ½åŠ©æ‰‹"],"title":"Nebula Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹","uri":"/nebula-siwi/#frontend-2"},{"categories":["Nebula Graph"],"content":"Setup Nebula Graph Dev Env with CLion and Docker æ­å»ºåŸºäº Docker çš„ Nebula Graph CLion å¼€å‘ç¯å¢ƒ","date":"2021-09-18","objectID":"/nebula-clion/","series":null,"tags":["Nebula Graph","Dev Guide"],"title":"Nebula CLionï¼Œæ­å»ºåŸºäº Docker çš„ Nebula Graph CLion å¼€å‘ç¯å¢ƒ","uri":"/nebula-clion/"},{"categories":["Nebula Graph"],"content":" ä¹‹å‰å¡æ¯”åŒå­¦å‘æˆ‘å’¨è¯¢æ­å»º CLion ç¯å¢ƒï¼Œå¼€å‘ Nebula çš„ä¸€äº›é—®é¢˜ï¼Œæˆ‘åšäº†ä¸€äº›å·¥ä½œæ–¹ä¾¿åˆ©ç”¨ Docker åœ¨æœ¬åœ°æ­å»ºè¿™æ ·ä¸€ä¸ªç¯å¢ƒï¼Œç›¸å…³çš„ä¸œè¥¿æ”¾åœ¨ï¼šhttps://github.com/wey-gu/nebula-dev-CLion ã€‚ Related GitHub Repo: https://github.com/wey-gu/nebula-dev-CLion ","date":"2021-09-18","objectID":"/nebula-clion/:0:0","series":null,"tags":["Nebula Graph","Dev Guide"],"title":"Nebula CLionï¼Œæ­å»ºåŸºäº Docker çš„ Nebula Graph CLion å¼€å‘ç¯å¢ƒ","uri":"/nebula-clion/#"},{"categories":["Nebula Graph"],"content":"Run Docker Env for Nebula-Graph with CLionBuild Docker Image git clone https://github.com/wey-gu/nebula-dev-CLion.git cd nebula-dev-CLion docker build -t wey/nebula-dev-clion:v2.0 . Run Docker Container for Nebula-Dev with CLion Integration Readiness(actually mostly Rsync \u0026 SSH). cd \u003cnebula-graph-repo-you-worked-on\u003e export DOCKER_DEFAULT_PLATFORM=linux/amd64 docker run --rm -d \\ --name nebula-dev \\ --security-opt seccomp=unconfined \\ -p 2222:22 -p 2873:873 --cap-add=ALL \\ -v $PWD:/home/nebula \\ -w /home/nebula \\ wey/nebula-dev-clion:v2.0 Verify cmake with SSH. The default password is password ssh -o StrictHostKeyChecking=no root@localhost -p 2222 # in docker cd /home/nebula mkdir build \u0026\u0026 cd build cmake -DENABLE_TESTING=OFF -DCMAKE_BUILD_TYPE=Release .. Access container w/o SSH. docker exec -it nebula-dev bash mkdir -p build \u0026\u0026 cd build cmake -DENABLE_TESTING=OFF -DCMAKE_BUILD_TYPE=Release .. ","date":"2021-09-18","objectID":"/nebula-clion/:1:0","series":null,"tags":["Nebula Graph","Dev Guide"],"title":"Nebula CLionï¼Œæ­å»ºåŸºäº Docker çš„ Nebula Graph CLion å¼€å‘ç¯å¢ƒ","uri":"/nebula-clion/#run-docker-env-for-nebula-graph-with-clion"},{"categories":["Nebula Graph"],"content":"Configurations in CLion Ref: https://www.jetbrains.com/help/clion/clion-toolchains-in-docker.html#build-and-run Toolchains Add a remote host root@localhost:2222 password Put /opt/vesoft/toolset/cmake/bin/cmake as CMake CMake Toochain: Select the one created in last step Build directory: /home/nebula/build ","date":"2021-09-18","objectID":"/nebula-clion/:2:0","series":null,"tags":["Nebula Graph","Dev Guide"],"title":"Nebula CLionï¼Œæ­å»ºåŸºäº Docker çš„ Nebula Graph CLion å¼€å‘ç¯å¢ƒ","uri":"/nebula-clion/#configurations-in-clion"},{"categories":["Nebula Graph"],"content":"The appendix","date":"2021-09-18","objectID":"/nebula-clion/:3:0","series":null,"tags":["Nebula Graph","Dev Guide"],"title":"Nebula CLionï¼Œæ­å»ºåŸºäº Docker çš„ Nebula Graph CLion å¼€å‘ç¯å¢ƒ","uri":"/nebula-clion/#the-appendix"},{"categories":["Nebula Graph"],"content":"References of CMake output: [root@4c98e3f77ce8 build]# cmake -DENABLE_TESTING=OFF -DCMAKE_BUILD_TYPE=Release .. \u003e\u003e\u003e\u003e Options of Nebula Graph \u003c\u003c\u003c\u003c -- ENABLE_ASAN : OFF (Build with AddressSanitizer) -- ENABLE_BUILD_STORAGE : OFF (Whether to build storage) -- ENABLE_CCACHE : ON (Use ccache to speed up compiling) -- ENABLE_CLANG_TIDY : OFF (Enable clang-tidy if present) -- ENABLE_COMPRESSED_DEBUG_INFO : ON (Compress debug info to reduce binary size) -- ENABLE_COVERAGE : OFF (Build with coverage report) -- ENABLE_FRAME_POINTER : OFF (Build with frame pointer) -- ENABLE_FUZZY_TESTING : OFF (Enable Fuzzy tests) -- ENABLE_GDB_SCRIPT_SECTION : OFF (Add .debug_gdb_scripts section) -- ENABLE_JEMALLOC : ON (Use jemalloc as memory allocator) -- ENABLE_MODULE_FORCE_CHECKOUT : ON (Whether checkout branch of module to same as graph.) -- ENABLE_MODULE_UPDATE : OFF (Automatically update module) -- ENABLE_PACK_ONE : ON (Whether to package into one) -- ENABLE_PIC : OFF (Build with -fPIC) -- ENABLE_STATIC_ASAN : OFF (Statically link against libasan) -- ENABLE_STATIC_UBSAN : OFF (Statically link against libubsan) -- ENABLE_STRICT_ALIASING : OFF (Build with -fstrict-aliasing) -- ENABLE_TESTING : OFF (Build unit tests) -- ENABLE_TSAN : OFF (Build with ThreadSanitizer) -- ENABLE_UBSAN : OFF (Build with UndefinedBehaviourSanitizer) -- ENABLE_VERBOSE_BISON : OFF (Enable Bison to report state) -- ENABLE_WERROR : ON (Regard warnings as errors) -- CMAKE_BUILD_TYPE : Release (Choose the type of build, options are: None Debug Release RelWithDebInfo MinSizeRel ...) -- CMAKE_INSTALL_PREFIX : /usr/local/nebula (Install path prefix, prepended onto install directories.) -- CMAKE_CXX_STANDARD : 17 -- CMAKE_CXX_COMPILER : /opt/vesoft/toolset/clang/9.0.0/bin/c++ (CXX compiler) -- CMAKE_CXX_COMPILER_ID : GNU -- NEBULA_USE_LINKER : bfd -- CCACHE_DIR : /root/.ccache \u003e\u003e\u003e\u003e Configuring third party for 'Nebula Graph' \u003c\u003c\u003c\u003c -- NEBULA_THIRDPARTY_ROOT : /opt/vesoft/third-party/2.0 -- Build info of nebula third party: Package : Nebula Third Party Version : 2.0 Date : Mon Jun 28 15:07:38 UTC 2021 glibc : 2.17 Arch : x86_64 Compiler : GCC 9.2.0 C++ ABI : 11 Vendor : VEsoft Inc. -- CMAKE_INCLUDE_PATH : /opt/vesoft/third-party/2.0/include -- CMAKE_LIBRARY_PATH : /opt/vesoft/third-party/2.0/lib64;/opt/vesoft/third-party/2.0/lib -- CMAKE_PROGRAM_PATH : /opt/vesoft/third-party/2.0/bin -- GLIBC_VERSION : 2.17 -- found krb5-config here /opt/vesoft/third-party/2.0/bin/krb5-config -- Found kerberos 5 headers: /opt/vesoft/third-party/2.0/include -- Found kerberos 5 libs: /opt/vesoft/third-party/2.0/lib/libgssapi_krb5.a;/opt/vesoft/third-party/2.0/lib/libkrb5.a;/opt/vesoft/third-party/2.0/lib/libk5crypto.a;/opt/vesoft/third-party/2.0/lib/libcom_err.a;/opt/vesoft/third-party/2.0/lib/libkrb5support.a \u003e\u003e\u003e\u003e Configuring third party for 'Nebula Graph' done \u003c\u003c\u003c\u003c -- Create the pre-commit hook -- Creating pre-commit hook done \u003e\u003e\u003e\u003e Configuring Nebula Common \u003c\u003c\u003c\u003c \u003e\u003e\u003e\u003e Options of Nebula Common \u003c\u003c\u003c\u003c -- ENABLE_ASAN : OFF (Build with AddressSanitizer) -- ENABLE_CCACHE : ON (Use ccache to speed up compiling) -- ENABLE_CLANG_TIDY : OFF (Enable clang-tidy if present) -- ENABLE_COMPRESSED_DEBUG_INFO : ON (Compress debug info to reduce binary size) -- ENABLE_COVERAGE : OFF (Build with coverage report) -- ENABLE_FRAME_POINTER : OFF (Build with frame pointer) -- ENABLE_FUZZY_TESTING : OFF (Enable Fuzzy tests) -- ENABLE_GDB_SCRIPT_SECTION : OFF (Add .debug_gdb_scripts section) -- ENABLE_JEMALLOC : ON (Use jemalloc as memory allocator) -- ENABLE_PIC : OFF (Build with -fPIC) -- ENABLE_STATIC_ASAN : OFF (Statically link against libasan) -- ENABLE_STATIC_UBSAN : OFF (Statically link against libubsan) -- ENABLE_STRICT_ALIASING : OFF (Build with -fstrict-aliasing) -- ENABLE_TESTING : OFF (Build unit tests) -- ENABLE_TSAN : OFF (Build with ThreadSanitizer) -- ENABLE_UBSAN : OFF (Build with UndefinedBehaviourSanitizer) -- ENABLE_WERROR : ON (Regard warnings as errors) -- Set D_GLIBCXX_USE_CXX11_ABI to 1 -- CMAKE_BUILD_TY","date":"2021-09-18","objectID":"/nebula-clion/:3:1","series":null,"tags":["Nebula Graph","Dev Guide"],"title":"Nebula CLionï¼Œæ­å»ºåŸºäº Docker çš„ Nebula Graph CLion å¼€å‘ç¯å¢ƒ","uri":"/nebula-clion/#references-of-cmake-output"},{"categories":["courses"],"content":"Hands-on Course: Breakdown multistage relationship of Persons and Corporations leverating the Nebula Graph Database.","date":"2021-09-04","objectID":"/learn/nebula-101-shareholding/","series":null,"tags":["Nebula Graph","katacoda","shareholding","Nebula Solution","Knowledge Graph"],"title":"ä¸Šæ‰‹å®æˆ˜å›¾æ•°æ®åº“è‚¡æƒå…³ç³»ç©¿é€","uri":"/learn/nebula-101-shareholding/"},{"categories":["courses"],"content":"Walk you through in actions to do below sections exercises! Bootstrap a Nebula Graph Cluster and Studio Web App Import a graph of dataset about shareholding Exploring the shareholding data with Nebula Importer Visually Exploring the shareholding data with Nebula Studio Run Graph Algorithm on Nebula Cluster Graph Data The dataset comes from https://github.com/wey-gu/nebula-shareholding-example/tree/main/data_sample è¯¾ç¨‹å¼€æºåœ¨ https://github.com/wey-gu/katacoda-scenarios ï¼Œæ¬¢è¿æ¥åé¦ˆï¼Œè´¡çŒ® ","date":"2021-09-04","objectID":"/learn/nebula-101-shareholding/:0:0","series":null,"tags":["Nebula Graph","katacoda","shareholding","Nebula Solution","Knowledge Graph"],"title":"ä¸Šæ‰‹å®æˆ˜å›¾æ•°æ®åº“è‚¡æƒå…³ç³»ç©¿é€","uri":"/learn/nebula-101-shareholding/#"},{"categories":null,"content":" æ‚¨å¯ä»¥é€šè¿‡è¿™ä¸ªå¯¼å›¾å¼€å§‹äº†è§£ã€å…¥é—¨å›¾æ•°æ®åº“å’Œ Nebula Graphï¼Œä¸Šè¾¹çš„åŒºåŸŸæ˜¯å…¥é—¨çš„éƒ¨åˆ†ï¼Œä¸‹è¾¹è¿˜æœ‰è¿›é˜¶çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¼šæŒç»­æ›´æ–°ã€ç»´æŠ¤è¿™ä¸ªå¯¼å›¾çš„~ Tips: åŠ è½½æˆåŠŸä¹‹åï¼Œç‚¹å‡» [See the board] å¯ä»¥å¼€å§‹æµè§ˆï¼ŒåŒå‡»æ”¾å¤§ç¼©å°ã€‚ æˆ–è€…ç‚¹å¯¼å›¾åŒºåŸŸå³ä¸Šè§’çš„ç®­å¤´åœ¨æ–°çš„çª—å£æ‰“å¼€ï¼Œå¯ä»¥æ›´æ–¹é¢æµè§ˆå™¨ä¸­å†…å®¹ã€‚ ","date":"2021-09-04","objectID":"/path/:0:0","series":null,"tags":null,"title":"å›¾æ•°æ®åº“å­¦ä¹ è·¯å¾„","uri":"/path/#"},{"categories":["courses"],"content":"Hands-on Course: Setup a KGQA system from scratch with Nebula Graph, VueJS, Flask on K8s.","date":"2021-09-03","objectID":"/learn/nebula-101-siwi-kgqa/","series":null,"tags":["Nebula Graph","katacoda","Dialog System","Nebula Solution"],"title":"ä¸Šæ‰‹å®æˆ˜ä»0åˆ¶ä½œä¸€ä¸ªåŸºäºå›¾è°±çš„è¯­éŸ³æ™ºèƒ½åŠ©æ‰‹","uri":"/learn/nebula-101-siwi-kgqa/"},{"categories":["courses"],"content":"A full solution walkthrough for a Knowledge Graph Dialog System. Boostrap a Nebula Cluster in K8s Scale out the Nebula Cluster in K8s way Import the basketballplayer Dataset Siwi, the Knowledge Graph Dialog System with Nebula Graph Siwi (/ËˆsÉªwi/) is a PoC of Dialog System With Graph Database Backed Knowledge Graph. The code of Siwi is here: https://github.com/wey-gu/nebula-siwi. è¯¾ç¨‹å¼€æºåœ¨ https://github.com/wey-gu/katacoda-scenarios ï¼Œæ¬¢è¿æ¥åé¦ˆï¼Œè´¡çŒ® ","date":"2021-09-03","objectID":"/learn/nebula-101-siwi-kgqa/:0:0","series":null,"tags":["Nebula Graph","katacoda","Dialog System","Nebula Solution"],"title":"ä¸Šæ‰‹å®æˆ˜ä»0åˆ¶ä½œä¸€ä¸ªåŸºäºå›¾è°±çš„è¯­éŸ³æ™ºèƒ½åŠ©æ‰‹","uri":"/learn/nebula-101-siwi-kgqa/#"},{"categories":["Nebula Graph"],"content":"A demo of Shareholding Breakthrough with Distributed open-source Graph Database: Nebula Graph. å›¾æ•°æ®åº“åº”ç”¨ç¤ºä¾‹ï¼šè‚¡æƒå…³ç³»ç©¿é€","date":"2021-08-28","objectID":"/nebula-holdshare-dataset/","series":null,"tags":["Nebula Graph","Know How","Shareholding Relationship Analysis","å›¾æ•°æ®åº“åº”ç”¨","è‚¡æƒç©¿é€"],"title":"Nebula Holdshare Datasetï¼Œå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€","uri":"/nebula-holdshare-dataset/"},{"categories":["Nebula Graph"],"content":" A demo of Shareholding Breakthrough with Distributed open-source Graph Database: Nebula Graph. å›¾æ•°æ®åº“åº”ç”¨ç¤ºä¾‹ï¼šè‚¡æƒå…³ç³»ç©¿é€ Related GitHub Repo: https://github.com/wey-gu/nebula-shareholding-example æ›´æ–°ï¼šåœ¨è¿™ä¸ªæ•°æ®é›†ç”Ÿæˆçš„å·¥ä½œåŸºç¡€ä¸Šï¼Œæˆ‘åˆåšäº†ä¸€ä¸ªå…¨æ ˆç¤ºä¾‹é¡¹ç›® ğŸ‘‰ğŸ» https://siwei.io/corp-rel-graph/ è¿™ä¸ªé¡¹ç›®æˆ‘ä¹Ÿåšæˆäº†äº’åŠ¨æ•™ç¨‹ï¼Œå¯ä»¥æŒ‰ç…§è¿™é‡Œçš„æ­¥éª¤æ­å»ºèµ·æ¥ ğŸ‘‰ğŸ» https://siwei.io/cources/ I created the Katacoda Interactive Env for this project ğŸ‘‰ğŸ» https://siwei.io/cources/ æ‚¨ä¹Ÿå¯ä»¥åœ¨ Nebula Playground ä¸Šç›´æ¥ç©è¿™ä¸ªæ•°æ®é›†å•¦ï¼šhttps://nebula-graph.com.cn/demo/ Now you can play with the data on Nebula Playground: https://nebula-graph.io/demo/ This is a demo of Shareholding Relationship Analysis with Distributed open-source Graph Database: Nebula Graph. ","date":"2021-08-28","objectID":"/nebula-holdshare-dataset/:0:0","series":null,"tags":["Nebula Graph","Know How","Shareholding Relationship Analysis","å›¾æ•°æ®åº“åº”ç”¨","è‚¡æƒç©¿é€"],"title":"Nebula Holdshare Datasetï¼Œå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€","uri":"/nebula-holdshare-dataset/#"},{"categories":["Nebula Graph"],"content":"Data","date":"2021-08-28","objectID":"/nebula-holdshare-dataset/:1:0","series":null,"tags":["Nebula Graph","Know How","Shareholding Relationship Analysis","å›¾æ•°æ®åº“åº”ç”¨","è‚¡æƒç©¿é€"],"title":"Nebula Holdshare Datasetï¼Œå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€","uri":"/nebula-holdshare-dataset/#data"},{"categories":["Nebula Graph"],"content":"Data ModelingThere are various kinds of relationships when we checking companies' shareholding breakthrough, here letâ€™s simplify it with only two kind of entities: person and corp, and with following relationship types. person can hold a corp in {share} % person can be relative with another person corp can hold another corp in {share} % corp can be a branch of another corp person can be as a role of a corp Below is the lines to reflect this graph modele in Nebula Graph, itâ€™s quite straightforward, right? CREATETAGperson(namestring);CREATETAGcorp(namestring);CREATEEDGErole_as(rolestring);CREATEEDGEis_branch_of();CREATEEDGEhold_share(sharefloat);CREATEEDGEreletive_with(degreeint); ","date":"2021-08-28","objectID":"/nebula-holdshare-dataset/:1:1","series":null,"tags":["Nebula Graph","Know How","Shareholding Relationship Analysis","å›¾æ•°æ®åº“åº”ç”¨","è‚¡æƒç©¿é€"],"title":"Nebula Holdshare Datasetï¼Œå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€","uri":"/nebula-holdshare-dataset/#data-modeling"},{"categories":["Nebula Graph"],"content":"Data GenerationWe just randomly generate some data to help with this demo, you can call data_generator.py directly to generate or reuse whatâ€™s already done under data_sample folder. The generated data are records to be fit in above data model from below .csv files. $ pip install Faker==2.0.5 pydbgen==1.0.5 $ python3 data_generator.py $ ls -l data total 1688 -rw-r--r-- 1 weyl staff 23941 Jul 14 13:28 corp.csv -rw-r--r-- 1 weyl staff 1277 Jul 14 13:26 corp_rel.csv -rw-r--r-- 1 weyl staff 3048 Jul 14 13:26 corp_share.csv -rw-r--r-- 1 weyl staff 211661 Jul 14 13:26 person.csv -rw-r--r-- 1 weyl staff 179770 Jul 14 13:26 person_corp_role.csv -rw-r--r-- 1 weyl staff 322965 Jul 14 13:26 person_corp_share.csv -rw-r--r-- 1 weyl staff 17689 Jul 14 13:26 person_rel.csv ","date":"2021-08-28","objectID":"/nebula-holdshare-dataset/:1:2","series":null,"tags":["Nebula Graph","Know How","Shareholding Relationship Analysis","å›¾æ•°æ®åº“åº”ç”¨","è‚¡æƒç©¿é€"],"title":"Nebula Holdshare Datasetï¼Œå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€","uri":"/nebula-holdshare-dataset/#data-generation"},{"categories":["Nebula Graph"],"content":"Data ImportWith those data in .csv files, we can easily import them into a Nebula Graph Cluster with the help of Nebula-Importer. nebula-importer.yaml in this repo describes rules and configurations on how this import will be done by the importer. For Nebula Graph Database, plesae refer to Doc , Doc-CN to deploy on any Linux Servers, for study and test, you can run it via Docker following the Quick Start Chapter of the documentation. For Nebula-Importer, if you already have Docker env, you can run it as the following without installing anything. Or, if you prefer to install it, itâ€™s quite easy as itâ€™s written in Golang and you can run its single file binary quite easily, go check both Documentation and Nebula-Importer Repo: https://github.com/vesoft-inc/nebula-importer. Letâ€™s start! Below is the commands I used to import our data into a Nebula Graph Database. # put generated data \u0026 nebula-importor.yaml to nebula-importer server $ scp -r data nebula_graph_host:~ $ scp nebula-importer.yaml data nebula_graph_host:~/data $ ssh nebula_graph_host $ ls -l ${HOME}/data total 756 -rw-r--r--. 1 wei.gu wei.gu 23941 Jul 14 05:44 corp.csv -rw-r--r--. 1 wei.gu wei.gu 1277 Jul 14 05:44 corp_rel.csv -rw-r--r--. 1 wei.gu wei.gu 3048 Jul 14 05:44 corp_share.csv -rw-r--r--. 1 wei.gu wei.gu 3893 Jul 14 05:44 nebula-importer.yaml -rw-r--r--. 1 wei.gu wei.gu 211661 Jul 14 05:44 person.csv -rw-r--r--. 1 wei.gu wei.gu 179770 Jul 14 05:44 person_corp_role.csv -rw-r--r--. 1 wei.gu wei.gu 322965 Jul 14 05:44 person_corp_share.csv -rw-r--r--. 1 wei.gu wei.gu 17689 Jul 14 05:44 person_rel.csv # import data into our nebula graph database $ docker run --rm -ti \\ --network=nebula-docker-compose_nebula-net \\ -v ${HOME}/data/nebula-importer.yaml:/root/nebula-importer.yaml \\ -v ${HOME}/data:/root \\ vesoft/nebula-importer:v2 \\ --config /root/nebula-importer.yaml 2021/07/14 05:49:32 --- START OF NEBULA IMPORTER --- 2021/07/14 05:49:32 [WARN] config.go:491: Not set files[0].schema.vertex.vid.Type, reset to default value `string' ... 2021/07/14 05:49:43 [INFO] reader.go:180: Total lines of file(/root/person_corp_role.csv) is: 5000, error lines: 1287 2021/07/14 05:49:43 [INFO] statsmgr.go:61: Done(/root/person_corp_role.csv): Time(11.39s), Finished(12523), Failed(0), Latency AVG(1514us), Batches Req AVG(1824us), Rows AVG(1099.43/s) 2021/07/14 05:49:47 [INFO] statsmgr.go:61: Tick: Time(15.00s), Finished(25807), Failed(0), Latency AVG(1500us), Batches Req AVG(1805us), Rows AVG(1720.46/s) 2021/07/14 05:49:48 [INFO] reader.go:180: Total lines of file(/root/person.csv) is: 10000, error lines: 0 2021/07/14 05:49:48 [INFO] statsmgr.go:61: Done(/root/person.csv): Time(16.10s), Finished(29731), Failed(0), Latency AVG(1505us), Batches Req AVG(1810us), Rows AVG(1847.17/s) 2021/07/14 05:49:50 [INFO] reader.go:180: Total lines of file(/root/person_corp_share.csv) is: 20000, error lines: 0 2021/07/14 05:49:50 [INFO] statsmgr.go:61: Done(/root/person_corp_share.csv): Time(17.74s), Finished(36013), Failed(0), Latency AVG(1531us), Batches Req AVG(1844us), Rows AVG(2030.29/s) 2021/07/14 05:49:50 Finish import data, consume time: 18.25s 2021/07/14 05:49:51 --- END OF NEBULA IMPORTER --- ","date":"2021-08-28","objectID":"/nebula-holdshare-dataset/:1:3","series":null,"tags":["Nebula Graph","Know How","Shareholding Relationship Analysis","å›¾æ•°æ®åº“åº”ç”¨","è‚¡æƒç©¿é€"],"title":"Nebula Holdshare Datasetï¼Œå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€","uri":"/nebula-holdshare-dataset/#data-import"},{"categories":["Nebula Graph"],"content":"Corporation sharehold relationship breakthroughQuery in nGQLWe can query from corp: c_132 over *(all relationships) in BIDIRECT: GO1TO3STEPSFROM\"c_132\"over*BIDIRECT Below are lines I call this query in nebula-console: / # nebula-console -addr 192.168.8.128 -port 9669 -user user -password password 2021/07/14 07:07:41 [INFO] connection pool is initialized successfully Welcome to Nebula Graph! (user@nebula) [(none)]\u003e show spaces +--------------------+ | Name | +--------------------+ | \"basketballplayer\" | +--------------------+ | \"shareholding\" | +--------------------+ Got 2 rows (time spent 3851/4595 us) Wed, 14 Jul 2021 07:07:57 UTC (user@nebula) [(none)]\u003e use shareholding Execution succeeded (time spent 1822/2342 us) Wed, 14 Jul 2021 07:08:02 UTC (user@nebula) [shareholding]\u003e GO 1 TO 3 STEPS FROM \"c_132\" over * BIDIRECT +--------------+-------------------+-----------------+--------------------+ | role_as._dst | is_branch_of._dst | hold_share._dst | reletive_with._dst | +--------------+-------------------+-----------------+--------------------+ | \"p_2024\" | | | | +--------------+-------------------+-----------------+--------------------+ | \"p_4000\" | | | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_245\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"p_1039\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"p_1399\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"p_1767\" | | ... +--------------+-------------------+-----------------+--------------------+ | | | \"c_132\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_245\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_25\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_649\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_753\" | | +--------------+-------------------+-----------------+--------------------+ Got 1519 rows (time spent 12190/14702 us) Wed, 14 Jul 2021 07:08:06 UTC In a Visual WayOf course, we can also be done in a visual way: Step 1, login from Nebula Graph Studio, explore with one VID: c_132: Step2, click this explored vertex dot, then you can explore from select vertices by selecting: Edge Type Direction Steps Query Limit(Optional) note, you can click the ğŸ‘ï¸ icon to add options to show fields of the graph, Step3, after click Expand, you will see all quried relations with c_132 the Chambers LLC. ","date":"2021-08-28","objectID":"/nebula-holdshare-dataset/:2:0","series":null,"tags":["Nebula Graph","Know How","Shareholding Relationship Analysis","å›¾æ•°æ®åº“åº”ç”¨","è‚¡æƒç©¿é€"],"title":"Nebula Holdshare Datasetï¼Œå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€","uri":"/nebula-holdshare-dataset/#corporation-sharehold-relationship-breakthrough"},{"categories":["Nebula Graph"],"content":"Corporation sharehold relationship breakthroughQuery in nGQLWe can query from corp: c_132 over *(all relationships) in BIDIRECT: GO1TO3STEPSFROM\"c_132\"over*BIDIRECT Below are lines I call this query in nebula-console: / # nebula-console -addr 192.168.8.128 -port 9669 -user user -password password 2021/07/14 07:07:41 [INFO] connection pool is initialized successfully Welcome to Nebula Graph! (user@nebula) [(none)] show spaces +--------------------+ | Name | +--------------------+ | \"basketballplayer\" | +--------------------+ | \"shareholding\" | +--------------------+ Got 2 rows (time spent 3851/4595 us) Wed, 14 Jul 2021 07:07:57 UTC (user@nebula) [(none)] use shareholding Execution succeeded (time spent 1822/2342 us) Wed, 14 Jul 2021 07:08:02 UTC (user@nebula) [shareholding] GO 1 TO 3 STEPS FROM \"c_132\" over * BIDIRECT +--------------+-------------------+-----------------+--------------------+ | role_as._dst | is_branch_of._dst | hold_share._dst | reletive_with._dst | +--------------+-------------------+-----------------+--------------------+ | \"p_2024\" | | | | +--------------+-------------------+-----------------+--------------------+ | \"p_4000\" | | | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_245\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"p_1039\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"p_1399\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"p_1767\" | | ... +--------------+-------------------+-----------------+--------------------+ | | | \"c_132\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_245\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_25\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_649\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_753\" | | +--------------+-------------------+-----------------+--------------------+ Got 1519 rows (time spent 12190/14702 us) Wed, 14 Jul 2021 07:08:06 UTC In a Visual WayOf course, we can also be done in a visual way: Step 1, login from Nebula Graph Studio, explore with one VID: c_132: Step2, click this explored vertex dot, then you can explore from select vertices by selecting: Edge Type Direction Steps Query Limit(Optional) note, you can click the ğŸ‘ï¸ icon to add options to show fields of the graph, Step3, after click Expand, you will see all quried relations with c_132 the Chambers LLC. ","date":"2021-08-28","objectID":"/nebula-holdshare-dataset/:2:0","series":null,"tags":["Nebula Graph","Know How","Shareholding Relationship Analysis","å›¾æ•°æ®åº“åº”ç”¨","è‚¡æƒç©¿é€"],"title":"Nebula Holdshare Datasetï¼Œå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€","uri":"/nebula-holdshare-dataset/#query-in-ngql"},{"categories":["Nebula Graph"],"content":"Corporation sharehold relationship breakthroughQuery in nGQLWe can query from corp: c_132 over *(all relationships) in BIDIRECT: GO1TO3STEPSFROM\"c_132\"over*BIDIRECT Below are lines I call this query in nebula-console: / # nebula-console -addr 192.168.8.128 -port 9669 -user user -password password 2021/07/14 07:07:41 [INFO] connection pool is initialized successfully Welcome to Nebula Graph! (user@nebula) [(none)] show spaces +--------------------+ | Name | +--------------------+ | \"basketballplayer\" | +--------------------+ | \"shareholding\" | +--------------------+ Got 2 rows (time spent 3851/4595 us) Wed, 14 Jul 2021 07:07:57 UTC (user@nebula) [(none)] use shareholding Execution succeeded (time spent 1822/2342 us) Wed, 14 Jul 2021 07:08:02 UTC (user@nebula) [shareholding] GO 1 TO 3 STEPS FROM \"c_132\" over * BIDIRECT +--------------+-------------------+-----------------+--------------------+ | role_as._dst | is_branch_of._dst | hold_share._dst | reletive_with._dst | +--------------+-------------------+-----------------+--------------------+ | \"p_2024\" | | | | +--------------+-------------------+-----------------+--------------------+ | \"p_4000\" | | | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_245\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"p_1039\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"p_1399\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"p_1767\" | | ... +--------------+-------------------+-----------------+--------------------+ | | | \"c_132\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_245\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_25\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_649\" | | +--------------+-------------------+-----------------+--------------------+ | | | \"c_753\" | | +--------------+-------------------+-----------------+--------------------+ Got 1519 rows (time spent 12190/14702 us) Wed, 14 Jul 2021 07:08:06 UTC In a Visual WayOf course, we can also be done in a visual way: Step 1, login from Nebula Graph Studio, explore with one VID: c_132: Step2, click this explored vertex dot, then you can explore from select vertices by selecting: Edge Type Direction Steps Query Limit(Optional) note, you can click the ğŸ‘ï¸ icon to add options to show fields of the graph, Step3, after click Expand, you will see all quried relations with c_132 the Chambers LLC. ","date":"2021-08-28","objectID":"/nebula-holdshare-dataset/:2:0","series":null,"tags":["Nebula Graph","Know How","Shareholding Relationship Analysis","å›¾æ•°æ®åº“åº”ç”¨","è‚¡æƒç©¿é€"],"title":"Nebula Holdshare Datasetï¼Œå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€","uri":"/nebula-holdshare-dataset/#in-a-visual-way"},{"categories":["Nebula Graph"],"content":"Thanks to Upstream Projects â¤ï¸ Python Faker https://github.com/joke2k/faker/ pydbgen https://github.com/tirthajyoti/pydbgen Nebula Graph https://github.com/vesoft-inc/nebula-graph ","date":"2021-08-28","objectID":"/nebula-holdshare-dataset/:3:0","series":null,"tags":["Nebula Graph","Know How","Shareholding Relationship Analysis","å›¾æ•°æ®åº“åº”ç”¨","è‚¡æƒç©¿é€"],"title":"Nebula Holdshare Datasetï¼Œå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€","uri":"/nebula-holdshare-dataset/#thanks-to-upstream-projects-"},{"categories":["Nebula Graph"],"content":"Tips: You can deploy nebula graph in one line with: Nebula-UP, it helps install a nebula graph with Docker Nebula-operator-KIND , it helps setup all dependencies of Nebula-K8s-Operator including a K8s in Docker, PV Provider and then install a Nebula Graph with Nebula-Operator in K8s. Image Credit goes to https://unsplash.com/photos/3fPXt37X6UQ ","date":"2021-08-28","objectID":"/nebula-holdshare-dataset/:3:1","series":null,"tags":["Nebula Graph","Know How","Shareholding Relationship Analysis","å›¾æ•°æ®åº“åº”ç”¨","è‚¡æƒç©¿é€"],"title":"Nebula Holdshare Datasetï¼Œå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€","uri":"/nebula-holdshare-dataset/#tips"},{"categories":null,"content":" è‚¡æƒç©¿é€æ•™ç¨‹ 1. ä¸Šæ‰‹å®æˆ˜å›¾æ•°æ®åº“è‚¡æƒå…³ç³»ç©¿é€ 2. ä½“éªŒ Nebula-Up ä¸€é”®éƒ¨ç½² Nebula Core + Studio é˜…è¯»å…¨æ–‡ Siwi 1. ä¸Šæ‰‹å®æˆ˜ä» 0 åˆ¶ä½œä¸€ä¸ªåŸºäºå›¾è°±çš„è¯­éŸ³æ™ºèƒ½åŠ©æ‰‹ 2. ä½“éªŒ Nebula-Kind-Operator ä¸€é”®éƒ¨ç½² K8s + Nebula Operator é˜…è¯»å…¨æ–‡ ","date":"2021-08-26","objectID":"/cources/:0:0","series":null,"tags":null,"title":"ä¸Šæ‰‹è¯¾ç¨‹","uri":"/cources/#"},{"categories":null,"content":" Data on K8s Community 2021 GraphDB on Kubesphere é˜…è¯»å…¨æ–‡ K8s Community Day 2021 Openfunction + GraphDB é˜…è¯»å…¨æ–‡ COScon 2021 æˆ‘çš„å¼€æºä¹‹è·¯ é˜…è¯»å…¨æ–‡ PyCon China 2021 å›¾æ•°æ®åº“è§£è°œä¸ Python çš„å›¾åº“åº”ç”¨å®è·µ é˜…è¯»å…¨æ–‡ K8s ä¸Šçš„å›¾æ•°æ®åº“ Nebula K8s Operator çš„å®ç°è§£æï¼Œå›¾æ•°æ®åº“åº”ç”¨åœ¨ K8s + OpenFunction ä¸Šçš„è½åœ°æ¼”ç¤º é˜…è¯»å…¨æ–‡ nMeetup: Nebula åº”ç”¨ä¸Šæ‰‹å®æ“ ä»å¤´å®æ“ Nebula çš„éƒ¨ç½²ï¼Œè‚¡æƒç©¿é€ï¼Œå›¾ç®—æ³•è¿ç®—ï¼Œè¯­éŸ³æ™ºèƒ½åŠ©æ‰‹ã€‚ é˜…è¯»å…¨æ–‡ How to Train your Dragon å¦‚ä½•æˆä¸ºå¼€æºå¼€å‘è€…ï¼ˆå¸ƒé“å¸ˆï¼‰ã€‚ é˜…è¯»å…¨æ–‡ ","date":"2021-08-26","objectID":"/talk/:0:0","series":null,"tags":null,"title":"æˆ‘çš„æ¼”è®²","uri":"/talk/#"},{"categories":["Nebula Graph"],"content":"Import LiveJournal Dataset into Nebula Graph and Run Nebula Algorithm å¯¼å…¥ Livejournal æ•°æ®é›†åˆ° Nebula å¹¶è¿è¡Œ Nebula Algorithm å›¾ç®—æ³•","date":"2021-08-24","objectID":"/nebula-livejournal/","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/"},{"categories":["Nebula Graph"],"content":" ä¸€ä¸ªå¯¼å…¥ Livejournal æ•°æ®é›†åˆ° Nebula Graph å›¾æ•°æ®åº“ï¼Œå¹¶æ‰§è¡Œ Nebula Algorithm å›¾ç®—æ³•çš„è¿‡ç¨‹åˆ†äº«ã€‚ Related GitHub Repo: https://github.com/wey-gu/nebula-LiveJournal ","date":"2021-08-24","objectID":"/nebula-livejournal/:0:0","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/#"},{"categories":["Nebula Graph"],"content":"nebula-LiveJournalLiveJournal Dataset is a Social Network Dataset in one file with two columns(FromNodeId, ToNodeId). $ head soc-LiveJournal1.txt # Directed graph (each unordered pair of nodes is saved once): soc-LiveJournal1.txt # Directed LiveJournal friednship social network # Nodes: 4847571 Edges: 68993773 # FromNodeId ToNodeId 0 1 0 2 0 3 0 4 0 5 0 6 It could be accessed in https://snap.stanford.edu/data/soc-LiveJournal1.html. Dataset statistics Nodes 4847571 Edges 68993773 Nodes in largest WCC 4843953 (0.999) Edges in largest WCC 68983820 (1.000) Nodes in largest SCC 3828682 (0.790) Edges in largest SCC 65825429 (0.954) Average clustering coefficient 0.2742 Number of triangles 285730264 Fraction of closed triangles 0.04266 Diameter (longest shortest path) 16 90-percentile effective diameter 6.5 ","date":"2021-08-24","objectID":"/nebula-livejournal/:0:0","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/#nebula-livejournal"},{"categories":["Nebula Graph"],"content":"Dataset Download and Preprocessing","date":"2021-08-24","objectID":"/nebula-livejournal/:1:0","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/#dataset-download-and-preprocessing"},{"categories":["Nebula Graph"],"content":"DownloadIt is accesissiable from the official web page: $ cd nebula-livejournal/data $ wget https://snap.stanford.edu/data/soc-LiveJournal1.txt.gz Comments in data file should be removed to make the data import tool happy. ","date":"2021-08-24","objectID":"/nebula-livejournal/:1:1","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/#download"},{"categories":["Nebula Graph"],"content":"Preprocessing $ gzip -d soc-LiveJournal1.txt.gz $ sed -i '1,4d' soc-LiveJournal1.txt ","date":"2021-08-24","objectID":"/nebula-livejournal/:1:2","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/#preprocessing"},{"categories":["Nebula Graph"],"content":"Import dataset to Nebula Graph","date":"2021-08-24","objectID":"/nebula-livejournal/:2:0","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/#import-dataset-to-nebula-graph"},{"categories":["Nebula Graph"],"content":"With Nebula ImporterNebula-Importer is a Golang Headless import tool for Nebula Graph. You may need to edit the config file under nebula-importer/importer.yaml on Nebula Graphâ€™s address and credentialã€‚ Then, Nebula-Importer could be called in Docker as follow: $ cd nebula-livejournal $ docker run --rm -ti \\ --network=nebula-net \\ -v nebula-importer/importer.yaml:/root/importer.yaml \\ -v data/:/root \\ vesoft/nebula-importer:v2 \\ --config /root/importer.yaml Or if you have the binary nebula-importer locally: $ cd data $ \u003cpath_to_nebula-importer_binary\u003e --config ../nebula-importer/importer.yaml ","date":"2021-08-24","objectID":"/nebula-livejournal/:2:1","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/#with-nebula-importer"},{"categories":["Nebula Graph"],"content":"With Nebula ExchangeNebula-Exchange is a Spark Application to enable batch and streaming data import from multiple data sources to Nebula Graph. To be done. (You can refer to https://siwei.io/nebula-exchange-sst-2.x/) ","date":"2021-08-24","objectID":"/nebula-livejournal/:2:2","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/#with-nebula-exchange"},{"categories":["Nebula Graph"],"content":"Run Algorithms with Nebula GraphNebula-Algorithm is a Spark/GraphX Application to run Graph Algorithms with data consumed from files or a Nebula Graph Cluster. Supported Algorithms for now: Name Use Case PageRank page ranking, important node digging Louvain community digging, hierarchical clustering KCore community detection, financial risk control LabelPropagation community detection, consultation propagation, advertising recommendation ConnectedComponent community detection, isolated island detection StronglyConnectedComponent community detection ShortestPath path plan, network plan TriangleCount network structure analysis BetweennessCentrality important node digging, node influence calculation DegreeStatic graph structure analysis ","date":"2021-08-24","objectID":"/nebula-livejournal/:3:0","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/#run-algorithms-with-nebula-graph"},{"categories":["Nebula Graph"],"content":"Ad-hoc Spark Env setupHere I assume the Nebula Graph was bootstraped with Nebula-Up, thus nebula is running in a Docker Network named nebula-docker-compose_nebula-net. Then letâ€™s start a single server spark: docker run --name spark-master --network nebula-docker-compose_nebula-net \\ -h spark-master -e ENABLE_INIT_DAEMON=false -d \\ -v nebula-algorithm/:/root \\ bde2020/spark-master:2.4.5-hadoop2.7 Thus we could make spark application submt inside this container: docker exec -it spark-master bash cd /root/ # download Nebula-Algorithm Jar Packagem, 2.0.0 for example, for other versions, refer to nebula-algorithm github repo and documentations. wget https://repo1.maven.org/maven2/com/vesoft/nebula-algorithm/2.0.0/nebula-algorithm-2.0.0.jar ","date":"2021-08-24","objectID":"/nebula-livejournal/:3:1","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/#ad-hoc-spark-env-setup"},{"categories":["Nebula Graph"],"content":"Run AlgorithmsThere are many altorithms supported by Nebula-Algorithm, here some of their configuration files were put under nebula-algorithm as an example. Before using them, please first edit and change Nebula Graph Cluster Addresses and credentials. vim nebula-altorithm/algo-pagerank.conf Then we could enter the spark container and call corresponding algorithms as follow. Please adjust your --driver-memeory accordingly, i.e. pagerank altorithm: /spark/bin/spark-submit --master \"local\" --conf spark.rpc.askTimeout=6000s \\ --class com.vesoft.nebula.algorithm.Main \\ --driver-memory 16g nebula-algorithm-2.0.0.jar \\ -p pagerank.conf After the algorithm finished, the output will be under the path insdie the container defined in conf file: write:{ resultPath:/output/ } é¢˜å›¾ç‰ˆæƒï¼š@sigmund ","date":"2021-08-24","objectID":"/nebula-livejournal/:3:2","series":null,"tags":["Nebula Graph","LiveJournal","Nebula Algorithm","PageRank","Graph Algorithm"],"title":"Nebula LiveJournalï¼Œä¸Šæ‰‹ LiveJournal æ•°æ®é›†å¯¼å…¥ Nebula Graph ä¸å›¾ç®—æ³•æ‰§è¡Œ","uri":"/nebula-livejournal/#run-algorithms"},{"categories":["Nebula Graph"],"content":"è¿™ç¯‡æ–‡ç« å¸¦å¤§å®¶ä»¥æœ€å°æ–¹å¼ï¼Œå¿«é€Ÿè¶Ÿä¸€ä¸‹ Nebula Exchange ä¸­ SST å†™å…¥æ–¹å¼çš„æ­¥éª¤ã€‚","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/"},{"categories":["Nebula Graph"],"content":"è¿™ç¯‡æ–‡ç« å¸¦å¤§å®¶ä»¥æœ€å°æ–¹å¼ï¼Œå¿«é€Ÿè¶Ÿä¸€ä¸‹ Nebula Exchange ä¸­ SST å†™å…¥æ–¹å¼çš„æ­¥éª¤ã€‚ ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:0:0","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#"},{"categories":["Nebula Graph"],"content":"ä»€ä¹ˆæ˜¯ Nebula Exchange ?ä¹‹å‰æˆ‘åœ¨ Nebula Data Import Options ä¹‹ä¸­ä»‹ç»è¿‡ï¼ŒNebula Exchange æ˜¯ä¸€ä¸ª Nebula Graph ç¤¾åŒºå¼€æºçš„ Spark Applicaitonï¼Œå®ƒä¸“é—¨ç”¨æ¥æ”¯æŒæ‰¹é‡æˆ–è€…æµå¼åœ°æŠŠæ•°æ®å¯¼å…¥ Nebula Graph Database ä¹‹ä¸­ã€‚ Nebula Exchange æ”¯æŒå¤šç§å¤šæ ·çš„æ•°æ®æºï¼ˆä» Apache Parquet, ORC, JSON, CSV, HBase, Hive MaxCompute åˆ° Neo4j, MySQL, ClickHouse, å†æœ‰ Kafka, Pulsarï¼Œæ›´å¤šçš„æ•°æ®æºä¹Ÿåœ¨ä¸æ–­å¢åŠ ä¹‹ä¸­ï¼‰ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨ Exchange å†…éƒ¨ï¼Œä»é™¤äº†ä¸åŒ Reader å¯ä»¥è¯»å–ä¸åŒæ•°æ®æºä¹‹å¤–ï¼Œåœ¨æ•°æ®ç»è¿‡ Processor å¤„ç†ä¹‹åé€šè¿‡ Writerå†™å…¥ï¼ˆsinkï¼‰ Nebula Graph å›¾æ•°æ®åº“çš„æ—¶å€™ï¼Œé™¤äº†èµ°æ­£å¸¸çš„ ServerBaseWriter çš„å†™å…¥æµç¨‹ä¹‹å¤–ï¼Œå®ƒè¿˜å¯ä»¥ç»•è¿‡æ•´ä¸ªå†™å…¥æµç¨‹ï¼Œåˆ©ç”¨ Spark çš„è®¡ç®—èƒ½åŠ›å¹¶è¡Œç”Ÿæˆåº•å±‚ RocksDB çš„ SST æ–‡ä»¶ï¼Œä»è€Œå®ç°è¶…é«˜æ€§èƒ½çš„æ•°æ®å¯¼å…¥ï¼Œè¿™ä¸ª SST æ–‡ä»¶å¯¼å…¥çš„åœºæ™¯å°±æ˜¯æœ¬æ–‡å¸¦å¤§å®¶ä¸Šæ‰‹ç†Ÿæ‚‰çš„éƒ¨åˆ†ã€‚ è¯¦ç»†ä¿¡æ¯è¯·å‚é˜…ï¼šNebula Graph æ‰‹å†Œ:ä»€ä¹ˆæ˜¯ Nebula Exchange Nebula Graph å®˜æ–¹åšå®¢ä¹Ÿæœ‰æ›´å¤š Nebula Exchange çš„å®è·µæ–‡ç«  ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:1:0","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#ä»€ä¹ˆæ˜¯-nebula-exchange-"},{"categories":["Nebula Graph"],"content":"æ­¥éª¤æ¦‚è§‚ å®éªŒç¯å¢ƒ é…ç½® Exchange ç”Ÿæˆ SST æ–‡ä»¶ å†™å…¥ SST æ–‡ä»¶åˆ° Nebula Graph ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:2:0","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#æ­¥éª¤æ¦‚è§‚"},{"categories":["Nebula Graph"],"content":"å®éªŒç¯å¢ƒå‡†å¤‡ä¸ºäº†æœ€å°åŒ–ä½¿ç”¨ Nebula Exchange çš„ SST åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ï¼š æ­å»ºä¸€ä¸ª Nebula Graph é›†ç¾¤ï¼Œåˆ›å»ºå¯¼å…¥æ•°æ®çš„ Schemaï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ Docker-Compose æ–¹å¼ã€åˆ©ç”¨ Nebula-Up å¿«é€Ÿéƒ¨ç½²ï¼Œå¹¶ç®€å•ä¿®æ”¹å…¶ç½‘ç»œï¼Œä»¥æ–¹ä¾¿åŒæ ·å®¹å™¨åŒ–çš„ Exchange ç¨‹åºå¯¹å…¶è®¿é—®ã€‚ æ­å»ºå®¹å™¨åŒ–çš„ Spark è¿è¡Œç¯å¢ƒ æ­å»ºå®¹å™¨åŒ–çš„ HDFS ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:3:0","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#å®éªŒç¯å¢ƒå‡†å¤‡"},{"categories":["Nebula Graph"],"content":"1. æ­å»º Nebula Graph é›†ç¾¤å€ŸåŠ©äº Nebula-Up æˆ‘ä»¬å¯ä»¥åœ¨ Linux ç¯å¢ƒä¸‹ä¸€é”®éƒ¨ç½²ä¸€å¥— Nebula Graph é›†ç¾¤ï¼š curl -fsSL nebula-up.siwei.io/install.sh | bash å¾…éƒ¨ç½²æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç¯å¢ƒåšä¸€äº›ä¿®æ”¹ï¼Œè¿™é‡Œæˆ‘åšçš„ä¿®æ”¹å…¶å®å°±æ˜¯ä¸¤ç‚¹ï¼š åªä¿ç•™ä¸€ä¸ª metaD æœåŠ¡ èµ·ç”¨ Docker çš„å¤–éƒ¨ç½‘ç»œ è¯¦ç»†ä¿®æ”¹çš„éƒ¨åˆ†å‚è€ƒé™„å½•ä¸€ åº”ç”¨ docker-compose çš„ä¿®æ”¹ï¼š cd ~/.nebula-up/nebula-docker-compose vim docker-compose.yaml # å‚è€ƒé™„å½•ä¸€ docker network create nebula-net # éœ€è¦åˆ›å»ºå¤–éƒ¨ç½‘ç»œ docker-compose up -d --remove-orphans ä¹‹åï¼Œæˆ‘ä»¬æ¥åˆ›å»ºè¦æµ‹è¯•çš„å›¾ç©ºé—´ï¼Œå¹¶åˆ›å»ºå›¾çš„ Schemaï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ nebula-console ï¼ŒåŒæ ·ï¼ŒNebula-Up é‡Œè‡ªå¸¦äº†å®¹å™¨åŒ–çš„ nebula-consoleã€‚ è¿›å…¥ Nebula-Console æ‰€åœ¨çš„å®¹å™¨ ~/.nebula-up/console.sh / # åœ¨ console å®¹å™¨é‡Œå‘èµ·é“¾æ¥åˆ°å›¾æ•°æ®åº“ï¼Œå…¶ä¸­ 192.168.x.y æ˜¯æˆ‘æ‰€åœ¨çš„ Linux VM çš„ç¬¬ä¸€ä¸ªç½‘å¡åœ°å€ï¼Œè¯·æ¢æˆæ‚¨çš„ / # nebula-console -addr 192.168.x.y -port 9669 -user root -p password [INFO] connection pool is initialized successfully Welcome to Nebula Graph! åˆ›å»ºå›¾ç©ºé—´ï¼ˆæˆ‘ä»¬èµ·åå­—å« sst ï¼‰ï¼Œä»¥åŠ schema createspacesst(partition_num=5,replica_factor=1,vid_type=fixed_string(32));:sleep20usesstcreatetagplayer(namestring,ageint); ç¤ºä¾‹è¾“å‡º (root@nebula)[(none)]\u003ecreatespacesst(partition_num=5,replica_factor=1,vid_type=fixed_string(32));Executionsucceeded(timespent1468/1918us)(root@nebula)[(none)]\u003e:sleep20(root@nebula)[(none)]\u003eusesstExecutionsucceeded(timespent1253/1566us)Wed,18Aug202108:18:13UTC(root@nebula)[sst]\u003ecreatetagplayer(namestring,ageint);Executionsucceeded(timespent1312/1735us)Wed,18Aug202108:18:23UTC ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:3:1","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#1-æ­å»º-nebula-graph-é›†ç¾¤"},{"categories":["Nebula Graph"],"content":"2. æ­å»ºå®¹å™¨åŒ–çš„ Spark ç¯å¢ƒåˆ©ç”¨ big data europe åšçš„å·¥ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹éå¸¸å®¹æ˜“ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š ç°åœ¨çš„ Nebula Exchange å¯¹ Spark çš„ç‰ˆæœ¬æœ‰è¦æ±‚ï¼Œåœ¨ç°åœ¨çš„ 2021 å¹´ 8 æœˆï¼Œæˆ‘æ˜¯ç”¨äº† spark-2.4.5-hadoop-2.7 çš„ç‰ˆæœ¬ã€‚ ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘è®© Spark è¿è¡Œåœ¨ Nebula Graph ç›¸åŒçš„æœºå™¨ä¸Šï¼Œå¹¶ä¸”æŒ‡å®šäº†è¿è¡Œåœ¨åŒä¸€ä¸ª Docker ç½‘ç»œä¸‹ docker run --name spark-master --network nebula-net \\ -h spark-master -e ENABLE_INIT_DAEMON=false -d \\ bde2020/spark-master:2.4.5-hadoop2.7 ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›å…¥åˆ°ç¯å¢ƒä¸­äº†ï¼š docker exec -it spark-master bash è¿›åˆ° Spark å®¹å™¨ä¸­ä¹‹åï¼Œå¯ä»¥åƒè¿™æ ·å®‰è£… maven: export MAVEN_VERSION=3.5.4 export MAVEN_HOME=/usr/lib/mvn export PATH=$MAVEN_HOME/bin:$PATH wget http://archive.apache.org/dist/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz \u0026\u0026 \\ tar -zxvf apache-maven-$MAVEN_VERSION-bin.tar.gz \u0026\u0026 \\ rm apache-maven-$MAVEN_VERSION-bin.tar.gz \u0026\u0026 \\ mv apache-maven-$MAVEN_VERSION /usr/lib/mvn è¿˜å¯ä»¥è¿™æ ·åœ¨å®¹å™¨é‡Œä¸‹è½½ nebula-exchange çš„ jar åŒ…ï¼š cd ~ wget https://repo1.maven.org/maven2/com/vesoft/nebula-exchange/2.1.0/nebula-exchange-2.1.0.jar ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:3:2","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#2-æ­å»ºå®¹å™¨åŒ–çš„-spark-ç¯å¢ƒ"},{"categories":["Nebula Graph"],"content":"3. æ­å»ºå®¹å™¨åŒ–çš„ HDFSåŒæ ·å€ŸåŠ© big-data-euroupe çš„å·¥ä½œï¼Œè¿™éå¸¸ç®€å•ï¼Œä¸è¿‡æˆ‘ä»¬è¦åšä¸€ç‚¹ä¿®æ”¹ï¼Œè®©å®ƒçš„ docker-compose.yml æ–‡ä»¶é‡Œä½¿ç”¨ nebula-net è¿™ä¸ªä¹‹å‰åˆ›å»ºçš„ Docker ç½‘ç»œã€‚ è¯¦ç»†ä¿®æ”¹çš„éƒ¨åˆ†å‚è€ƒé™„å½•äºŒ git clone https://github.com/big-data-europe/docker-hadoop.git cd docker-hadoop vim docker-compose.yml docker-compose up -d ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:3:3","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#3-æ­å»ºå®¹å™¨åŒ–çš„-hdfs"},{"categories":["Nebula Graph"],"content":"é…ç½®Exchangeè¿™ä¸ªé…ç½®ä¸»è¦å¡«å…¥çš„ä¿¡æ¯å°±æ˜¯ Nebula Graph é›†ç¾¤æœ¬èº«å’Œå°†è¦å†™å…¥æ•°æ®çš„ Space Nameï¼Œä»¥åŠæ•°æ®æºç›¸å…³çš„é…ç½®ï¼ˆè¿™é‡Œæˆ‘ä»¬ç”¨ csv ä½œä¸ºä¾‹å­ï¼‰ï¼Œæœ€åå†é…ç½®è¾“å‡ºï¼ˆsinkï¼‰ä¸º sst Nebula Graph GraphD åœ°å€ MetaD åœ°å€ credential Space Name æ•°æ®æº source: csv path fields etc. ink: sst è¯¦ç»†çš„é…ç½®å‚è€ƒé™„å½•äºŒ æ³¨æ„ï¼Œè¿™é‡Œ metaD çš„åœ°å€å¯ä»¥è¿™æ ·è·å–ï¼Œå¯ä»¥çœ‹åˆ° 0.0.0.0:49377-\u003e9559 è¡¨ç¤º 49377 æ˜¯å¤–éƒ¨çš„åœ°å€ã€‚ $ docker ps | grep meta 887740c15750 vesoft/nebula-metad:v2.0.0 \"./bin/nebula-metad â€¦\" 6 hours ago Up 6 hours (healthy) 9560/tcp, 0.0.0.0:49377-\u003e9559/tcp, :::49377-\u003e9559/tcp, 0.0.0.0:49376-\u003e19559/tcp, :::49376-\u003e19559/tcp, 0.0.0.0:49375-\u003e19560/tcp, :::49375-\u003e19560/tcp nebula-docker-compose_metad0_1 ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:4:0","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#é…ç½®exchange"},{"categories":["Nebula Graph"],"content":"ç”ŸæˆSSTæ–‡ä»¶","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:5:0","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#ç”Ÿæˆsstæ–‡ä»¶"},{"categories":["Nebula Graph"],"content":"1. å‡†å¤‡æºæ–‡ä»¶ã€é…ç½®æ–‡ä»¶ docker cp exchange-sst.conf spark-master:/root/ docker cp player.csv spark-master:/root/ å…¶ä¸­ player.csv çš„ä¾‹å­ï¼š 1100,Tim Duncan,42 1101,Tony Parker,36 1102,LaMarcus Aldridge,33 1103,Rudy Gay,32 1104,Marco Belinelli,32 1105,Danny Green,31 1106,Kyle Anderson,25 1107,Aron Baynes,32 1108,Boris Diaw,36 1109,Tiago Splitter,34 1110,Cory Joseph,27 1111,David West,38 ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:5:1","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#1-å‡†å¤‡æºæ–‡ä»¶é…ç½®æ–‡ä»¶"},{"categories":["Nebula Graph"],"content":"2. æ‰§è¡Œ exchange ç¨‹åºè¿›å…¥ spark-master å®¹å™¨ï¼Œæäº¤æ‰§è¡Œ exchange åº”ç”¨ã€‚ docker exec -it spark-master bash cd /root/ /spark/bin/spark-submit --master local \\ --class com.vesoft.nebula.exchange.Exchange nebula-exchange-2.1.0.jar\\ -c exchange-sst.conf æ£€æŸ¥æ‰§è¡Œç»“æœï¼š spark-submit è¾“å‡ºï¼š 21/08/17 03:37:43 INFO TaskSetManager: Finished task 31.0 in stage 2.0 (TID 33) in 1093 ms on localhost (executor driver) (32/32) 21/08/17 03:37:43 INFO TaskSchedulerImpl: Removed TaskSet 2.0, whose tasks have all completed, from pool 21/08/17 03:37:43 INFO DAGScheduler: ResultStage 2 (foreachPartition at VerticesProcessor.scala:179) finished in 22.336 s 21/08/17 03:37:43 INFO DAGScheduler: Job 1 finished: foreachPartition at VerticesProcessor.scala:179, took 22.500639 s 21/08/17 03:37:43 INFO Exchange$: SST-Import: failure.player: 0 21/08/17 03:37:43 WARN Exchange$: Edge is not defined 21/08/17 03:37:43 INFO SparkUI: Stopped Spark web UI at http://spark-master:4040 21/08/17 03:37:43 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped! éªŒè¯ HDFS ä¸Šç”Ÿæˆçš„ SST æ–‡ä»¶ï¼š docker exec -it namenode /bin/bash root@2db58903fb53:/# hdfs dfs -ls /sst Found 10 items drwxr-xr-x - root supergroup 0 2021-08-17 03:37 /sst/1 drwxr-xr-x - root supergroup 0 2021-08-17 03:37 /sst/10 drwxr-xr-x - root supergroup 0 2021-08-17 03:37 /sst/2 drwxr-xr-x - root supergroup 0 2021-08-17 03:37 /sst/3 drwxr-xr-x - root supergroup 0 2021-08-17 03:37 /sst/4 drwxr-xr-x - root supergroup 0 2021-08-17 03:37 /sst/5 drwxr-xr-x - root supergroup 0 2021-08-17 03:37 /sst/6 drwxr-xr-x - root supergroup 0 2021-08-17 03:37 /sst/7 drwxr-xr-x - root supergroup 0 2021-08-17 03:37 /sst/8 drwxr-xr-x - root supergroup 0 2021-08-17 03:37 /sst/9 ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:5:2","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#2-æ‰§è¡Œ-exchange-ç¨‹åº"},{"categories":["Nebula Graph"],"content":"å†™å…¥SSTåˆ°NebulaGraphè¿™é‡Œçš„æ“ä½œå®é™…ä¸Šéƒ½æ˜¯å‚è€ƒæ–‡æ¡£ï¼šSST å¯¼å…¥ï¼Œå¾—æ¥ã€‚å…¶ä¸­å°±æ˜¯ä» console ä¹‹ä¸­æ‰§è¡Œäº†ä¸¤æ­¥æ“ä½œï¼š Download Ingest å…¶ä¸­ Download å®é™…ä¸Šæ˜¯è§¦å‘ Nebula Graph ä»æœåŠ¡ç«¯å‘èµ· HDFS Client çš„ downloadï¼Œè·å– HDFS ä¸Šçš„ SST æ–‡ä»¶ï¼Œç„¶åæ”¾åˆ° storageD èƒ½è®¿é—®çš„æœ¬åœ°è·¯å¾„ä¸‹ï¼Œè¿™é‡Œï¼Œéœ€è¦æˆ‘ä»¬åœ¨æœåŠ¡ç«¯éƒ¨ç½² HDFS çš„ä¾èµ–ã€‚å› ä¸ºæˆ‘ä»¬æ˜¯æœ€å°å®è·µï¼Œæˆ‘å°±å·æ‡’æ‰‹åŠ¨åšäº†è¿™ä¸ª Download çš„æ“ä½œã€‚ ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:6:0","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#å†™å…¥sståˆ°nebulagraph"},{"categories":["Nebula Graph"],"content":"1. æ‰‹åŠ¨ä¸‹è½½è¿™é‡Œè¾¹æ‰‹åŠ¨ä¸‹è½½æˆ‘ä»¬å°±è¦çŸ¥é“ Nebula Graph æœåŠ¡ç«¯ä¸‹è½½çš„è·¯å¾„ï¼Œå®é™…ä¸Šæ˜¯ /data/storage/nebula/\u003cspace_id\u003e/download/ï¼Œè¿™é‡Œçš„ Space ID éœ€è¦æ‰‹åŠ¨è·å–ä¸€ä¸‹ï¼š è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬çš„ Space Name æ˜¯ sstï¼Œè€Œ Space ID æ˜¯ 49ã€‚ (root@nebula)[sst]\u003eDESCspacesst+----+-------+------------------+----------------+---------+------------+--------------------+-------------+-----------+ |ID|Name|PartitionNumber|ReplicaFactor|Charset|Collate|VidType|AtomicEdge|Group|+----+-------+------------------+----------------+---------+------------+--------------------+-------------+-----------+ |49|\"sst\"|10|1|\"utf8\"|\"utf8_bin\"|\"FIXED_STRING(32)\"|\"false\"|\"default\"|+----+-------+------------------+----------------+---------+------------+--------------------+-------------+-----------+ äºæ˜¯ï¼Œä¸‹è¾¹çš„æ“ä½œå°±æ˜¯æ‰‹åŠ¨æŠŠ SST æ–‡ä»¶ä» HDFS ä¹‹ä¸­ get ä¸‹æ¥ï¼Œå†æ‹·è´åˆ° storageD ä¹‹ä¸­ã€‚ docker exec -it namenode /bin/bash $ hdfs dfs -get /sst /sst exit docker cp namenode:/sst . docker exec -it nebula-docker-compose_storaged0_1 mkdir -p /data/storage/nebula/49/download/ docker exec -it nebula-docker-compose_storaged1_1 mkdir -p /data/storage/nebula/49/download/ docker exec -it nebula-docker-compose_storaged2_1 mkdir -p /data/storage/nebula/49/download/ docker cp sst nebula-docker-compose_storaged0_1:/data/storage/nebula/49/download/ docker cp sst nebula-docker-compose_storaged1_1:/data/storage/nebula/49/download/ docker cp sst nebula-docker-compose_storaged2_1:/data/storage/nebula/49/download/ ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:6:1","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#1-æ‰‹åŠ¨ä¸‹è½½"},{"categories":["Nebula Graph"],"content":"2. SST æ–‡ä»¶å¯¼å…¥ è¿›å…¥ Nebula-Console æ‰€åœ¨çš„å®¹å™¨ ~/.nebula-up/console.sh / # åœ¨ console å®¹å™¨é‡Œå‘èµ·é“¾æ¥åˆ°å›¾æ•°æ®åº“ï¼Œå…¶ä¸­ 192.168.x.y æ˜¯æˆ‘æ‰€åœ¨çš„ Linux VM çš„ç¬¬ä¸€ä¸ªç½‘å¡åœ°å€ï¼Œè¯·æ¢æˆæ‚¨çš„ / # nebula-console -addr 192.168.x.y -port 9669 -user root -p password [INFO] connection pool is initialized successfully Welcome to Nebula Graph! æ‰§è¡Œ INGEST å¼€å§‹è®© StorageD è¯»å– SST æ–‡ä»¶ (root@nebula) [(none)]\u003e use sst (root@nebula) [sst]\u003e INGEST; æˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³•å®æ—¶æŸ¥çœ‹ Nebula Graph æœåŠ¡ç«¯çš„æ—¥å¿— tail -f ~/.nebula-up/nebula-docker-compose/logs/*/* æˆåŠŸçš„ INGEST æ—¥å¿—ï¼š I0817 08:03:28.611877 169 EventListner.h:96] Ingest external SST file: column family default, the external file path /data/storage/nebula/49/download/8/8-6.sst, the internal file path /data/storage/nebula/49/data/000023.sst, the properties of the table: # data blocks=1; # entries=1; # deletions=0; # merge operands=0; # range deletions=0; raw key size=48; raw average key size=48.000000; raw value size=40; raw average value size=40.000000; data block size=75; index block size (user-key? 0, delta-value? 0)=66; filter block size=0; (estimated) table size=141; filter policy name=N/A; prefix extractor name=nullptr; column family ID=N/A; column family name=N/A; comparator name=leveldb.BytewiseComparator; merge operator name=nullptr; property collectors names=[]; SST file compression algo=Snappy; SST file compression options=window_bits=-14; level=32767; strategy=0; max_dict_bytes=0; zstd_max_train_bytes=0; enabled=0; ; creation time=0; time stamp of earliest key=0; file creation time=0; E0817 08:03:28.611912 169 StorageHttpIngestHandler.cpp:63] SSTFile ingest successfully é¢˜å›¾ç‰ˆæƒï¼šPietro Jeng ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:6:2","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#2-sst-æ–‡ä»¶å¯¼å…¥"},{"categories":["Nebula Graph"],"content":"é™„å½•","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:7:0","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#é™„å½•"},{"categories":["Nebula Graph"],"content":"é™„å½•ä¸€docker-compose.yaml diff --git a/docker-compose.yaml b/docker-compose.yaml index 48854de..cfeaedb 100644 --- a/docker-compose.yaml +++ b/docker-compose.yaml @@ -6,11 +6,13 @@ services: USER: root TZ: \"${TZ}\" command: - - --meta_server_addrs=metad0:9559,metad1:9559,metad2:9559 + - --meta_server_addrs=metad0:9559 - --local_ip=metad0 - --ws_ip=metad0 - --port=9559 - --ws_http_port=19559 + - --ws_storage_http_port=19779 - --data_path=/data/meta - --log_dir=/logs - --v=0 @@ -34,81 +36,14 @@ services: cap_add: - SYS_PTRACE - metad1: - image: vesoft/nebula-metad:v2.0.0 - environment: - USER: root - TZ: \"${TZ}\" - command: - - --meta_server_addrs=metad0:9559,metad1:9559,metad2:9559 - - --local_ip=metad1 - - --ws_ip=metad1 - - --port=9559 - - --ws_http_port=19559 - - --data_path=/data/meta - - --log_dir=/logs - - --v=0 - - --minloglevel=0 - healthcheck: - test: [\"CMD\", \"curl\", \"-sf\", \"http://metad1:19559/status\"] - interval: 30s - timeout: 10s - retries: 3 - start_period: 20s - ports: - - 9559 - - 19559 - - 19560 - volumes: - - ./data/meta1:/data/meta - - ./logs/meta1:/logs - networks: - - nebula-net - restart: on-failure - cap_add: - - SYS_PTRACE - - metad2: - image: vesoft/nebula-metad:v2.0.0 - environment: - USER: root - TZ: \"${TZ}\" - command: - - --meta_server_addrs=metad0:9559,metad1:9559,metad2:9559 - - --local_ip=metad2 - - --ws_ip=metad2 - - --port=9559 - - --ws_http_port=19559 - - --data_path=/data/meta - - --log_dir=/logs - - --v=0 - - --minloglevel=0 - healthcheck: - test: [\"CMD\", \"curl\", \"-sf\", \"http://metad2:19559/status\"] - interval: 30s - timeout: 10s - retries: 3 - start_period: 20s - ports: - - 9559 - - 19559 - - 19560 - volumes: - - ./data/meta2:/data/meta - - ./logs/meta2:/logs - networks: - - nebula-net - restart: on-failure - cap_add: - - SYS_PTRACE - storaged0: image: vesoft/nebula-storaged:v2.0.0 environment: USER: root TZ: \"${TZ}\" command: - - --meta_server_addrs=metad0:9559,metad1:9559,metad2:9559 + - --meta_server_addrs=metad0:9559 - --local_ip=storaged0 - --ws_ip=storaged0 - --port=9779 @@ -119,8 +54,8 @@ services: - --minloglevel=0 depends_on: - metad0 - - metad1 - - metad2 healthcheck: test: [\"CMD\", \"curl\", \"-sf\", \"http://storaged0:19779/status\"] interval: 30s @@ -146,7 +81,7 @@ services: USER: root TZ: \"${TZ}\" command: - - --meta_server_addrs=metad0:9559,metad1:9559,metad2:9559 + - --meta_server_addrs=metad0:9559 - --local_ip=storaged1 - --ws_ip=storaged1 - --port=9779 @@ -157,8 +92,8 @@ services: - --minloglevel=0 depends_on: - metad0 - - metad1 - - metad2 healthcheck: test: [\"CMD\", \"curl\", \"-sf\", \"http://storaged1:19779/status\"] interval: 30s @@ -184,7 +119,7 @@ services: USER: root TZ: \"${TZ}\" command: - - --meta_server_addrs=metad0:9559,metad1:9559,metad2:9559 + - --meta_server_addrs=metad0:9559 - --local_ip=storaged2 - --ws_ip=storaged2 - --port=9779 @@ -195,8 +130,8 @@ services: - --minloglevel=0 depends_on: - metad0 - - metad1 - - metad2 healthcheck: test: [\"CMD\", \"curl\", \"-sf\", \"http://storaged2:19779/status\"] interval: 30s @@ -222,17 +157,19 @@ services: USER: root TZ: \"${TZ}\" command: - - --meta_server_addrs=metad0:9559,metad1:9559,metad2:9559 + - --meta_server_addrs=metad0:9559 - --port=9669 - --ws_ip=graphd - --ws_http_port=19669 + - --ws_meta_http_port=19559 - --log_dir=/logs - --v=0 - --minloglevel=0 depends_on: - metad0 - - metad1 - - metad2 healthcheck: test: [\"CMD\", \"curl\", \"-sf\", \"http://graphd:19669/status\"] interval: 30s @@ -257,17 +194,19 @@ services: USER: root TZ: \"${TZ}\" command: - - --meta_server_addrs=metad0:9559,metad1:9559,metad2:9559 + - --meta_server_addrs=metad0:9559 - --port=9669 - --ws_ip=graphd1 - --ws_http_port=19669 + - --ws_meta_http_port=19559 - --log_dir=/logs - --v=0 - --minloglevel=0 depends_on: - metad0 - - metad1 - - metad2 healthcheck: test: [\"CMD\", \"curl\", \"-sf\", \"http://graphd1:19669/status\"] interval: 30s @@ -292,17 +231,21 @@ services: USER: root TZ: \"${TZ}\" command: - - --meta_server_addrs=metad0:9559,metad1:9559,metad2:9559 + - --meta_server_addrs=metad0:","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:7:1","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#é™„å½•ä¸€"},{"categories":["Nebula Graph"],"content":"é™„å½•äºŒhttps://github.com/big-data-europe/docker-hadoop çš„ docker-compose.yml diff --git a/docker-compose.yml b/docker-compose.yml index ed40dc6..66ff1f4 100644 --- a/docker-compose.yml +++ b/docker-compose.yml @@ -14,6 +14,8 @@ services: - CLUSTER_NAME=test env_file: - ./hadoop.env + networks: + - nebula-net datanode: image: bde2020/hadoop-datanode:2.0.0-hadoop3.2.1-java8 @@ -25,6 +27,8 @@ services: SERVICE_PRECONDITION: \"namenode:9870\" env_file: - ./hadoop.env + networks: + - nebula-net resourcemanager: image: bde2020/hadoop-resourcemanager:2.0.0-hadoop3.2.1-java8 @@ -34,6 +38,8 @@ services: SERVICE_PRECONDITION: \"namenode:9000 namenode:9870 datanode:9864\" env_file: - ./hadoop.env + networks: + - nebula-net nodemanager1: image: bde2020/hadoop-nodemanager:2.0.0-hadoop3.2.1-java8 @@ -43,6 +49,8 @@ services: SERVICE_PRECONDITION: \"namenode:9000 namenode:9870 datanode:9864 resourcemanager:8088\" env_file: - ./hadoop.env + networks: + - nebula-net historyserver: image: bde2020/hadoop-historyserver:2.0.0-hadoop3.2.1-java8 @@ -54,8 +62,14 @@ services: - hadoop_historyserver:/hadoop/yarn/timeline env_file: - ./hadoop.env + networks: + - nebula-net volumes: hadoop_namenode: hadoop_datanode: hadoop_historyserver: + +networks: + nebula-net: + external: true ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:7:2","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#é™„å½•äºŒ"},{"categories":["Nebula Graph"],"content":"é™„å½•ä¸‰nebula-exchange-sst.conf { # Spark relation config spark: { app: { name: Nebula Exchange 2.1 } master:local driver: { cores: 1 maxResultSize: 1G } executor: { memory:1G } cores:{ max: 16 } } # Nebula Graph relation config nebula: { address:{ graph:[\"192.168.8.128:9669\"] meta:[\"192.168.8.128:49377\"] } user: root pswd: nebula space: sst # parameters for SST import, not required path:{ local:\"/tmp\" remote:\"/sst\" hdfs.namenode: \"hdfs://192.168.8.128:9000\" } # nebula client connection parameters connection { # socket connect \u0026 execute timeout, unit: millisecond timeout: 30000 } error: { # max number of failures, if the number of failures is bigger than max, then exit the application. max: 32 # failed import job will be recorded in output path output: /tmp/errors } # use google's RateLimiter to limit the requests send to NebulaGraph rate: { # the stable throughput of RateLimiter limit: 1024 # Acquires a permit from RateLimiter, unit: MILLISECONDS # if it can't be obtained within the specified timeout, then give up the request. timeout: 1000 } } # Processing tags # There are tag config examples for different dataSources. tags: [ # HDFS csv # Import mode is sst, just change type.sink to client if you want to use client import mode. { name: player type: { source: csv sink: sst } path: \"file:///root/player.csv\" # if your csv file has no header, then use _c0,_c1,_c2,.. to indicate fields fields: [_c1, _c2] nebula.fields: [name, age] vertex: { field:_c0 } separator: \",\" header: false batch: 256 partition: 32 } ] } ","date":"2021-08-18","objectID":"/nebula-exchange-sst-2.x/:7:3","series":null,"tags":["Nebula Graph","Nebula Exchange","SST"],"title":"Nebula Exchange SST 2.x Hands-on Guide","uri":"/nebula-exchange-sst-2.x/#é™„å½•ä¸‰"},{"categories":["sketches"],"content":"ä»‹ç» Nebula Graph çš„äº‘åŸç”Ÿ K8s Operator éƒ¨ç½²","date":"2021-08-06","objectID":"/sketches/nebula-operator-explained/","series":null,"tags":["Nebula Graph","K8s"],"title":"Nebula operator Explained","uri":"/sketches/nebula-operator-explained/"},{"categories":["sketches"],"content":" Nebula Graph operator explained è¿™ä¸ªæ‰‹è®°é‡Œï¼Œæˆ‘ä»‹ç»äº† Nebula Graph çš„ K8s Operator: Intro 00:00 Nebula K8s Operator Explained 0:25 How do we use Nebula Operator? 02:23 What is the difference between the Operator based Nebula Graph Cluster and the binary-based one? 03:50 How about the Performance impact when it comes to K8s-Operator deployment? 04:55 What is the easiest way to try out the nebula operator? 06:04 Outra 07:30 ref: https://github.com/vesoft-inc/nebula-operator ","date":"2021-08-06","objectID":"/sketches/nebula-operator-explained/:0:0","series":null,"tags":["Nebula Graph","K8s"],"title":"Nebula operator Explained","uri":"/sketches/nebula-operator-explained/#"},{"categories":["sketches"],"content":"Bilibili ","date":"2021-08-06","objectID":"/sketches/nebula-operator-explained/:1:0","series":null,"tags":["Nebula Graph","K8s"],"title":"Nebula operator Explained","uri":"/sketches/nebula-operator-explained/#bilibili"},{"categories":["sketches"],"content":"Youtube ","date":"2021-08-06","objectID":"/sketches/nebula-operator-explained/:2:0","series":null,"tags":["Nebula Graph","K8s"],"title":"Nebula operator Explained","uri":"/sketches/nebula-operator-explained/#youtube"},{"categories":["sketches"],"content":"Nebula Config Explained","date":"2021-07-26","objectID":"/sketches/nebula-config-explained/","series":null,"tags":["Nebula Graph","config"],"title":"Nebula Config Explained","uri":"/sketches/nebula-config-explained/"},{"categories":["sketches"],"content":" Nebula Graph config explained è¿™ä¸ªæ‰‹è®°å¸®åŠ©æˆ‘ä»¬ç†è§£ Nebula Graph çš„é…ç½®ç›¸å…³çš„çŸ¥è¯†ï¼š ä»‹ç» Nebula Graph ä¸‰ç§é…ç½®æ–¹å¼ï¼Œå®ƒä»¬çš„ä¼˜å…ˆçº§ã€èŒƒå›´ã€ç”Ÿæ•ˆæ¡ä»¶ 0:16 ä»‹ç» Nebula Graph åœ¨ Docker-Compose/Swarm éƒ¨ç½²æƒ…å†µä¸‹é…ç½®çš„æ–¹å¼ 03:01 ä»‹ç» Nebula Graph åœ¨ K8s Operator éƒ¨ç½²æƒ…å†µä¸‹é…ç½®çš„æ–¹å¼ 03:55 æˆ‘ä»¬æ˜¯å¦åº”è¯¥ç”¨ Local-Configï¼Ÿï¼ˆå‰§é€ï¼šåº”è¯¥ï¼‰ 05:03 ","date":"2021-07-26","objectID":"/sketches/nebula-config-explained/:0:0","series":null,"tags":["Nebula Graph","config"],"title":"Nebula Config Explained","uri":"/sketches/nebula-config-explained/#"},{"categories":["sketches"],"content":"Bilibili ","date":"2021-07-26","objectID":"/sketches/nebula-config-explained/:1:0","series":null,"tags":["Nebula Graph","config"],"title":"Nebula Config Explained","uri":"/sketches/nebula-config-explained/#bilibili"},{"categories":["sketches"],"content":"Youtube ","date":"2021-07-26","objectID":"/sketches/nebula-config-explained/:2:0","series":null,"tags":["Nebula Graph","config"],"title":"Nebula Config Explained","uri":"/sketches/nebula-config-explained/#youtube"},{"categories":["sketches"],"content":"Nebula Index Demystified","date":"2021-07-13","objectID":"/sketches/nebula-index-demystified/","series":null,"tags":["Nebula Graph","index"],"title":"Nebula Graph Index Demystified","uri":"/sketches/nebula-index-demystified/"},{"categories":["sketches"],"content":" Nebula Graph åŸç”Ÿç´¢å¼•è§£è°œï¼Œå¸®åŠ©å¤§å®¶æ·±å…¥äº†è§£ Nebula Graph Index åŸç”Ÿç´¢å¼•ï¼Œåˆ°åº• Nebula Graph çš„åŸç”Ÿç´¢å¼•æ˜¯åšä»€ä¹ˆç”¨çš„ï¼Ÿä¸ºä»€ä¹ˆ Nebula Graph ç´¢å¼•å¯¹æ€§èƒ½æœ‰ä¸€äº›å½±å“ï¼Ÿå¸¦æœ‰ç´¢å¼•çš„å†™å…¥è¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ Index Demystified 0:33 When should we use index? 06:37 Index v.s. Fulltext Index 07:12 Index Performance Impact 08:03 ","date":"2021-07-13","objectID":"/sketches/nebula-index-demystified/:0:0","series":null,"tags":["Nebula Graph","index"],"title":"Nebula Graph Index Demystified","uri":"/sketches/nebula-index-demystified/#"},{"categories":["sketches"],"content":"Bilibili ","date":"2021-07-13","objectID":"/sketches/nebula-index-demystified/:1:0","series":null,"tags":["Nebula Graph","index"],"title":"Nebula Graph Index Demystified","uri":"/sketches/nebula-index-demystified/#bilibili"},{"categories":["sketches"],"content":"Youtube ","date":"2021-07-13","objectID":"/sketches/nebula-index-demystified/:2:0","series":null,"tags":["Nebula Graph","index"],"title":"Nebula Graph Index Demystified","uri":"/sketches/nebula-index-demystified/#youtube"},{"categories":["sketches"],"content":"Nebula Graph Deployment Options","date":"2021-06-25","objectID":"/sketches/nebula-deployment-options/","series":null,"tags":["Nebula Graph","deployment"],"title":"Nebula Graph Deployment Options","uri":"/sketches/nebula-deployment-options/"},{"categories":["sketches"],"content":" Nebula Graph æœ‰å¾ˆå¤šç§åˆ†å‘ã€éƒ¨ç½²æ–¹å¼ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•é€‰æ‹©å®ƒä»¬å‘¢ï¼Ÿ ","date":"2021-06-25","objectID":"/sketches/nebula-deployment-options/:0:0","series":null,"tags":["Nebula Graph","deployment"],"title":"Nebula Graph Deployment Options","uri":"/sketches/nebula-deployment-options/#"},{"categories":["sketches"],"content":"Bilibili ","date":"2021-06-25","objectID":"/sketches/nebula-deployment-options/:1:0","series":null,"tags":["Nebula Graph","deployment"],"title":"Nebula Graph Deployment Options","uri":"/sketches/nebula-deployment-options/#bilibili"},{"categories":["sketches"],"content":"Youtube ","date":"2021-06-25","objectID":"/sketches/nebula-deployment-options/:2:0","series":null,"tags":["Nebula Graph","deployment"],"title":"Nebula Graph Deployment Options","uri":"/sketches/nebula-deployment-options/#youtube"},{"categories":["sketches"],"content":"Nebula Graph Data Import Options","date":"2021-06-15","objectID":"/sketches/nebula-data-import-options/","series":null,"tags":["Nebula Graph","data import"],"title":"Nebula Graph Data Import Options","uri":"/sketches/nebula-data-import-options/"},{"categories":["sketches"],"content":" Nebula Graph æä¾›äº†å¥½å¤šç§æ•°æ®å¯¼å…¥çš„å·¥å…·ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿè¿™ä¸€å¼ å›¾å¸®åŠ©å¤§å®¶äº†è§£ Nebula Graph æ‰€æœ‰çš„æ•°æ®å¯¼å…¥é€‰é¡¹ã€‚ ","date":"2021-06-15","objectID":"/sketches/nebula-data-import-options/:0:0","series":null,"tags":["Nebula Graph","data import"],"title":"Nebula Graph Data Import Options","uri":"/sketches/nebula-data-import-options/#"},{"categories":["sketches"],"content":"Bilibili ","date":"2021-06-15","objectID":"/sketches/nebula-data-import-options/:1:0","series":null,"tags":["Nebula Graph","data import"],"title":"Nebula Graph Data Import Options","uri":"/sketches/nebula-data-import-options/#bilibili"},{"categories":["sketches"],"content":"Youtube ","date":"2021-06-15","objectID":"/sketches/nebula-data-import-options/:2:0","series":null,"tags":["Nebula Graph","data import"],"title":"Nebula Graph Data Import Options","uri":"/sketches/nebula-data-import-options/#youtube"},{"categories":["Nebula Graph"],"content":"æ— éœ€ä¾èµ–ï¼Œä¸€é”®å®‰è£…å°é²œåŸºäº Nebula Operator çš„ K8s Nebula Graph Cluster","date":"2021-06-09","objectID":"/nebula-operator-kind/","series":null,"tags":["Nebula Graph","Nebula Operator","K8s"],"title":"Nebula Operator Kindï¼Œä¸€é”®å•æœºç©è½¬ Nebula K8s é›†ç¾¤","uri":"/nebula-operator-kind/"},{"categories":["Nebula Graph"],"content":" Nebula-Kindï¼Œæ— éœ€ä¾èµ–ï¼Œä¸€é”®å®‰è£…å°é²œåŸºäº Nebula Operator çš„ K8s Nebula Graph Clusterã€‚ æ³¨ï¼š KIND æ˜¯ä¸€ä¸ª K8s çš„ SIGï¼Œä»£è¡¨ K8s in Dockerã€‚ ","date":"2021-06-09","objectID":"/nebula-operator-kind/:0:0","series":null,"tags":["Nebula Graph","Nebula Operator","K8s"],"title":"Nebula Operator Kindï¼Œä¸€é”®å•æœºç©è½¬ Nebula K8s é›†ç¾¤","uri":"/nebula-operator-kind/#"},{"categories":["Nebula Graph"],"content":"Nebula-Operator-Kind æ˜¯ä»€ä¹ˆNebula Graph ä½œä¸ºäº‘åŸç”Ÿçš„åˆ†å¸ƒå¼å¼€æºå›¾æ•°æ®åº“ï¼Œæœ‰å¼€æºçš„ K8s Operator ä¾›å¤§å®¶åœ¨ K8s ä¸Šæ–¹ä¾¿çš„é€šè¿‡ CRD å»ç»´æŠ¤ã€éƒ¨ç½² Nebula Graph é›†ç¾¤ã€‚ å¯¹äºæ‰‹å¤´æ²¡æœ‰æ–¹ä¾¿çš„ K8s ç¯å¢ƒçš„åŒå­¦ï¼Œå¦‚æœæƒ³å°é²œã€å­¦ä¹  Nebula Graph çš„ K8s Operator çš„è¯ï¼Œå¯èƒ½éœ€è¦è€—è´¹ä¸€äº›ç²¾åŠ›æ‰èƒ½æ­èµ·æ¥ä¸€æ•´å¥—çš„æ§åˆ¶å¹³é¢çš„ä¾èµ–ã€‚ ä½œä¸ºä¸€ä¸ªæ‡’äººï¼Œæˆ‘åšåˆ©ç”¨ K8s in Docker(KIND)ï¼Œå’Œä¹‹å‰åš Nebula-Up çš„ shell è„šæœ¬æ¶å­ï¼Œå¿«é€Ÿçš„æäº†ä¸€ä¸ªä¸€é”®å®‰è£…å·¥å…·ï¼šNebula-Operator-Kind å®ƒèƒ½ç›´æ¥å¸®æˆ‘ä»¬ï¼š å®‰è£… Docker å®‰è£… K8s(KIND) å®‰è£… PV Provider å®‰è£… Nebula-Operator ä»¥åŠä¾èµ– å®‰è£… Nebula-Console é…ç½® nodePort ç”¨ä»¥ä¸€é”®ç›´è¿ Nebula é›†ç¾¤ å®‰è£… kubectl ç”¨æ¥ä½“éªŒ Nebula-Operator çš„ CRD é…ç½® ","date":"2021-06-09","objectID":"/nebula-operator-kind/:1:0","series":null,"tags":["Nebula Graph","Nebula Operator","K8s"],"title":"Nebula Operator Kindï¼Œä¸€é”®å•æœºç©è½¬ Nebula K8s é›†ç¾¤","uri":"/nebula-operator-kind/#nebula-operator-kind-æ˜¯ä»€ä¹ˆ"},{"categories":["Nebula Graph"],"content":"å¦‚ä½•ä½¿ç”¨å®‰è£…ï¼š curl -sL nebula-kind.siwei.io/install.sh | bash æˆåŠŸä¹‹åï¼š ç”¨ ~/.nebula-kind/bin/console ä¸€è¡Œè¿æ¥é›†ç¾¤ï¼š ~/.nebula-kind/bin/console -u user -p password --address=127.0.0.1 --port=30000 ","date":"2021-06-09","objectID":"/nebula-operator-kind/:2:0","series":null,"tags":["Nebula Graph","Nebula Operator","K8s"],"title":"Nebula Operator Kindï¼Œä¸€é”®å•æœºç©è½¬ Nebula K8s é›†ç¾¤","uri":"/nebula-operator-kind/#å¦‚ä½•ä½¿ç”¨"},{"categories":["Nebula Graph"],"content":"è¯¦ç»†ä¿¡æ¯Repo çš„åœ°å€æ˜¯ï¼šhttps://github.com/wey-gu/nebula-operator-kind ï¼Œé‡Œè¾¹æœ‰æ›´å¤šçš„ä¿¡æ¯ï¼Œæ¬¢è¿å¤§å®¶è¯•ç”¨ã€åé¦ˆã€PR å“ˆï¼ Updated Sept. 2021 å¦‚æœåœ¨ KubeSphere All-in-one ç¯å¢ƒå®‰è£…ï¼š curl -sL nebula-kind.siwei.io/install-ks-1.sh | bash å¦‚æœåœ¨ Minikubeã€å…¶ä»– K8s ä¹‹ä¸­å®‰è£… curl -sL nebula-kind.siwei.io/install-on-k8s.sh | bash é¢˜å›¾ç‰ˆæƒï¼šMaik Hankemann ","date":"2021-06-09","objectID":"/nebula-operator-kind/:3:0","series":null,"tags":["Nebula Graph","Nebula Operator","K8s"],"title":"Nebula Operator Kindï¼Œä¸€é”®å•æœºç©è½¬ Nebula K8s é›†ç¾¤","uri":"/nebula-operator-kind/#è¯¦ç»†ä¿¡æ¯"},{"categories":null,"content":"æ‚¨å¥½ï¼Œæˆ‘æ˜¯å¤æ€ä¸ºã€‚æˆ‘æ˜¯ä¸€ä¸ªåœ¨ä¸Šæµ·çš„è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæˆ‘åœ¨ vesoft æ‹…ä»» Nebula Graphï¼ˆå¼€æºçš„åˆ†å¸ƒå¼å›¾æ•°æ®åº“ï¼‰çš„ç¤¾åŒºå¼€å‘è€…å¸ƒé“å¸ˆã€‚ æˆ‘çš„å·¥ä½œæ˜¯é€šè¿‡å›´ç»• Nebula Graph Database åˆ›ä½œå†…å®¹ï¼Œæ„å»ºå·¥å…·æ¥æ”¹å–„å¼€å‘è€…çš„å­¦ä¹ ã€å¼€å‘ã€ç¤¾åŒºå‚ä¸ä½“éªŒã€‚ æˆ‘åœ¨å¼€æºç¤¾åŒºå¼€æ”¾çš„å·¥ä½œï¼Œå¹¶ï¼ˆèŠ±äº†èŒä¸šç”Ÿæ¶¯ä¸­çš„å‰äº›å¹´æ„è¯†åˆ°ï¼‰çƒ­çˆ±ç”¨è‡ªå·±çš„æ€æƒ³å’Œå­¦åˆ°çš„æŠ€æœ¯å¸®åŠ©åˆ°åˆ«äººï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ç§çš„è£å¹¸å’Œå®è´µçš„æœºé‡ã€‚ 1 ","date":"2021-06-04","objectID":"/about/:0:0","series":null,"tags":null,"title":"","uri":"/about/#æ‚¨å¥½æˆ‘æ˜¯å¤æ€ä¸º"},{"categories":null,"content":"æœ€è¿‘çš„å¼€æºé¡¹ç›® Nebula-Corp-Rel-Graph Nebula-Corp-Rel-Graphï¼ŒåŸºäºå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€ç³»ç»Ÿ é˜…è¯»å…¨æ–‡ Nebula-Siwi Nebula-Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ é˜…è¯»å…¨æ–‡ Nebula-Holdshare Nebula-Holdshareï¼Œå›¾æ•°æ®åº“åº”ç”¨ç¤ºä¾‹ï¼šè‚¡æƒå…³ç³»ç©¿é€ é˜…è¯»å…¨æ–‡ Nebula-KIND Nebula-Kindï¼Œæ— éœ€ä¾èµ–ï¼Œä¸€é”®å®‰è£…å°é²œåŸºäº Nebula Operator çš„ K8s Nebula Graph Clusterã€‚æ³¨ï¼š KIND æ˜¯ä¸€ä¸ª K8s çš„ SIGï¼Œä»£è¡¨ K8s in Dockerã€‚ é˜…è¯»å…¨æ–‡ Nebula-Up Nebula-upï¼Œä¸€é”®æ‹‰èµ·ä¸€ä¸ª Nebula æµ‹è¯•ç¯å¢ƒï¼Œæ”¯æŒ mscOSï¼ŒWindows 10ï¼ŒCentOS å’Œ Ubuntuã€‚ é˜…è¯»å…¨æ–‡ VSCode-nGQL VSCode-nGQLï¼ŒNebula Graph çš„ VS Code æ’ä»¶ï¼Œngql è¯­æ³•é«˜äº®ã€‚ é˜…è¯»å…¨æ–‡ IPython-nGQL Nebula Graph çš„ Jupyter Notebook å’Œ IPython æ’ä»¶ï¼Œæ–¹ä¾¿åœ¨ Notebook ä¹‹ä¸­åµŒå…¥ nGQL çš„ query å’Œ ç»“æœçš„è°ƒè¯•ã€‚ é˜…è¯»å…¨æ–‡ nebula-insights æœ¬æ–‡ä»‹ç»æˆ‘ä»¬å¦‚ä½•ç”¨å…¬æœ‰äº‘ Serverless æŠ€æœ¯ï¼šGoogle Cloud Schedulerï¼ŒGoogle Cloud Functions å’Œ BigQuery æ­å»ºæ•°æ®ç®¡é“ï¼Œæ”¶é›†æ¢ç´¢å¼€æºç¤¾åŒºæ´å¯Ÿã€‚å¹¶å°†å…¨éƒ¨ä»£ç å¼€æºåœ¨ GitHubã€‚ é˜…è¯»å…¨æ–‡ ","date":"2021-06-04","objectID":"/about/:1:0","series":null,"tags":null,"title":"","uri":"/about/#æœ€è¿‘çš„å¼€æºé¡¹ç›®"},{"categories":null,"content":"æˆ‘çš„æ‰‹ç»˜ Nebula Operator Explained Nebula Graph K8s Operator ä»‹ç» é˜…è¯»å…¨æ–‡ Nebula Config Explained Nebula Graph é…ç½®è¯¦è§£ é˜…è¯»å…¨æ–‡ Nebula Index Demystified Nebula Graph åŸç”Ÿç´¢å¼•è§£è°œ é˜…è¯»å…¨æ–‡ Nebula Data Import Options Nebula Graph æä¾›äº†å¥½å¤šç§æ•°æ®å¯¼å…¥çš„å·¥å…·ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ é˜…è¯»å…¨æ–‡ Nebula Deployment Options Nebula Graph æœ‰å¾ˆå¤šç§åˆ†å‘ã€éƒ¨ç½²æ–¹å¼ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•é€‰æ‹©å®ƒä»¬å‘¢ï¼Ÿ é˜…è¯»å…¨æ–‡ Nebula Intro æ–°æ‰‹ç©è½¬ Nebula Graph ç³»åˆ—å¼€ç¯‡ã€‚ é˜…è¯»å…¨æ–‡ ","date":"2021-06-04","objectID":"/about/:2:0","series":null,"tags":null,"title":"","uri":"/about/#æˆ‘çš„æ‰‹ç»˜"},{"categories":null,"content":"æˆ‘çš„ä¸Šæ‰‹è¯¾ç¨‹ è‚¡æƒç©¿é€æ•™ç¨‹ ä¸Šæ‰‹å®æˆ˜è‚¡æƒç”¨å›¾æ•°æ®åº“å…³ç³»ç©¿é€ é˜…è¯»å…¨æ–‡ Siwi ä¸Šæ‰‹å®æˆ˜ä» 0 åˆ¶ä½œä¸€ä¸ªåŸºäºå›¾è°±çš„è¯­éŸ³æ™ºèƒ½åŠ©æ‰‹ é˜…è¯»å…¨æ–‡ ","date":"2021-06-04","objectID":"/about/:3:0","series":null,"tags":null,"title":"","uri":"/about/#æˆ‘çš„ä¸Šæ‰‹è¯¾ç¨‹"},{"categories":null,"content":"æˆ‘çš„æ¼”è®² Data on K8s Community 2021 GraphDB on Kubesphere é˜…è¯»å…¨æ–‡ K8s Community Day 2021 Openfunction + GraphDB é˜…è¯»å…¨æ–‡ COScon 2021 æˆ‘çš„å¼€æºä¹‹è·¯ é˜…è¯»å…¨æ–‡ PyCon China 2021 å›¾æ•°æ®åº“è§£è°œä¸ Python çš„å›¾åº“åº”ç”¨å®è·µ é˜…è¯»å…¨æ–‡ K8s ä¸Šçš„å›¾æ•°æ®åº“ Nebula K8s Operator çš„å®ç°è§£æï¼Œå›¾æ•°æ®åº“åº”ç”¨åœ¨ K8s + OpenFunction ä¸Šçš„è½åœ°æ¼”ç¤º é˜…è¯»å…¨æ–‡ nMeetup: Nebula åº”ç”¨ä¸Šæ‰‹å®æ“ ä»å¤´å®æ“ Nebula çš„éƒ¨ç½²ï¼Œè‚¡æƒç©¿é€ï¼Œå›¾ç®—æ³•è¿ç®—ï¼Œè¯­éŸ³æ™ºèƒ½åŠ©æ‰‹ã€‚ é˜…è¯»å…¨æ–‡ How to Train your Dragon å¦‚ä½•æˆä¸ºå¼€æºå¼€å‘è€…ï¼ˆå¸ƒé“å¸ˆï¼‰ã€‚ é˜…è¯»å…¨æ–‡ ","date":"2021-06-04","objectID":"/about/:4:0","series":null,"tags":null,"title":"","uri":"/about/#æˆ‘çš„æ¼”è®²"},{"categories":null,"content":"è¿‡å¾€çš„ç»å†æˆ‘æ›¾åœ¨çˆ±ç«‹ä¿¡å·¥ä½œäº†è¿‘åå¹´ï¼š2011 å¹´åˆ° 2021 å¹´ã€‚ æˆ‘æ˜¯äº‘è®¡ç®—äº§å“ Cloud Execution Envrioment (CEE) 2 ç ”å‘å›¢é˜Ÿçš„ç³»ç»Ÿç»ç† 3ï¼Œæˆ‘å¤§éƒ¨åˆ†çš„å·¥ä½œæ˜¯é€šè¿‡è®¾è®¡å¼€å‘ 20 å¤šä¸ª CEE 6.6.2 å’Œ CEE 10 çš„åŠŸèƒ½ä¸æ”¹è¿›ï¼Œæ¶µç›–è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œã€ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œå®‰å…¨ç­‰é¢†åŸŸï¼Œæ¥å¸®åŠ©çˆ±ç«‹ä¿¡ IaaS äº§å“ä¸è§£å†³æ–¹æ¡ˆä¸æ–­è¿›åŒ–ã€‚ åŒæ—¶ï¼Œæˆ‘ä¹Ÿè´Ÿè´£ CEE äº§å“åœ¨ä¸­å›½åŒºçš„å¸ƒé“ï¼ˆé¢å‘å¤–éƒ¨ä¸å†…éƒ¨ï¼‰ã€‚ æˆ‘æ›¾åœ¨ note.siwei.info è®°å½•ä¸€äº›æƒ³æ³•å’Œç¬”è®°ï¼Œä»2021å¹´æ˜¥å¤©å¼€å§‹ï¼Œæˆ‘ä¼šæŠŠæƒ³æ³•è®°å½•ä¸‹æ¥ç•™åœ¨ siwei.io ","date":"2021-06-04","objectID":"/about/:5:0","series":null,"tags":null,"title":"","uri":"/about/#è¿‡å¾€çš„ç»å†"},{"categories":null,"content":"è”ç³»æˆ‘æ‚¨æœ€å¥½é€šè¿‡ twitterï¼Œé‚®ç®± wey.gu@vesoft.com æ‰¾åˆ°æˆ‘ã€‚ å¦‚æœå¿…é¡»ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡å¾®ä¿¡æ‰¾åˆ°æˆ‘ï¼Œå¾®ä¿¡ ID å¦‚ä¸‹ï¼Œè¯·æ·»åŠ æ³¨æ˜æ‚¨çš„æ¥æ„ã€‚ echo c2l2dmVpCg== | base64 -d æˆ‘å’Œ Ahmet Alp Balkan çš„ è¿™ä¸ªæ¨æ–‡ æ„ŸåŒèº«å—ï¼š Working in open source (and getting paid for it) is a privilege. Itâ€™s a career boost, makes you lots of friends across the industry, and gives you a public brand. I am one of the â€œlucky fewâ€ \u0026 thankful to Microsoft and Google who let me work on OSS nearly all my career. â€” ahmetb.yaml î¨€ (@ahmetb) February 19, 2021 Â â†©ï¸ Ericssonâ€™s Telco. Infrastructure as a Service product offerring: Cloud Execution EnvironmentÂ â†©ï¸ System Manager, PDU Cloud: å·¥ä½œæè¿°Â â†©ï¸ ","date":"2021-06-04","objectID":"/about/:6:0","series":null,"tags":null,"title":"","uri":"/about/#è”ç³»æˆ‘"},{"categories":["Nebula Graph"],"content":"æœ¬æ–‡ä½œè€…åˆ†æäº† Chia Network çš„å…¨é“¾æ•°æ®ï¼Œå¹¶åšäº†å°†å…¨é“¾æ•°æ®å¯¼å…¥å›¾æ•°æ®åº“ï¼šNebula Graph ä¹‹ä¸­çš„å°è¯•ï¼Œä»è€Œå¯è§†åŒ–åœ°æ¢ç´¢äº† Chia å›¾ä¸­æ•°æ®ä¹‹é—´çš„å…³è”å…³ç³»ã€‚","date":"2021-05-26","objectID":"/nebula-chia/","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/"},{"categories":["Nebula Graph"],"content":" è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘å…¨ç½‘é¦–æ¬¡åœ°åˆ†æäº† Chia Network çš„å…¨é“¾æ•°æ®ï¼Œå¹¶åšäº†å°†å…¨é“¾æ•°æ®å¯¼å…¥å›¾æ•°æ®åº“ï¼šNebula Graph ä¹‹ä¸­çš„å°è¯•ï¼Œä»è€Œå¯è§†åŒ–åœ°æ¢ç´¢äº† Chia å›¾ä¸­æ•°æ®ä¹‹é—´çš„å…³è”å…³ç³»ã€‚ æˆ‘æŠŠæ¶‰åŠçš„ä»£ç å¼€æºåœ¨äº†è¿™é‡Œï¼šhttps://github.com/wey-gu/nebula-chia ","date":"2021-05-26","objectID":"/nebula-chia/:0:0","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#"},{"categories":["Nebula Graph"],"content":"1. Chia æ˜¯ä»€ä¹ˆ?Chia Network æ˜¯ç”± BitTorrent çš„ä½œè€… Bram Cohen çš„å›¢é˜Ÿåœ¨ 2017 å¹´åˆ›å»ºçš„åŒºå—é“¾é¡¹ç›®ã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:1:0","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#1-chia-æ˜¯ä»€ä¹ˆ"},{"categories":["Nebula Graph"],"content":"1.1 ä¸ºä»€ä¹ˆå†æä¸€ä¸ªåŒºå—é“¾?Chia ç”¨äº†å…¨æ–°çš„ä¸­æœ¬èªå…±è¯†ç®—æ³•ï¼Œè¿™ä¸ªç®—æ³•é€šè¿‡ä¸å…è®¸å¹¶è¡Œè®¡ç®—ï¼Œè®©æŒ–çŸ¿ï¼ˆProof of Workï¼‰æ‰€éœ€ç®—åŠ›å’Œèƒ½è€—é™åˆ°éå¸¸ä½ï¼Œè¿™ä½¿å¾—è¶…å¤§ç»„ç»‡ã€ç©å®¶æ²¡æ³•åƒåœ¨å…¶ä»–çš„åŒºå—é“¾é¡¹ç›®é‚£æ ·æœ‰ç®—åŠ›çš„ç»å¯¹ä¼˜åŠ¿ï¼Œä¹Ÿä¸€å®šç¨‹åº¦ä¸Šè§„é¿äº†èƒ½æºçš„æµªè´¹ã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:1:1","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#11-ä¸ºä»€ä¹ˆå†æä¸€ä¸ªåŒºå—é“¾"},{"categories":["Nebula Graph"],"content":"1.2 å¦‚ä½•è¿æ¥Chia?æˆ‘ä»¬å¯ä»¥é€šè¿‡ Chia Network çš„å®¢æˆ·ç«¯æ¥è®¿é—®å®ƒï¼Œè¿™ä¸ªå®¢æˆ·ç«¯æ˜¯ Electron + Python çš„ç¨‹åºï¼Œå¤©ç„¶è·¨å¹³å°ï¼Œæ—¢æœ‰ GUI åˆæœ‰ CLI çš„æ–¹å¼ã€‚ 1.2.1 å®‰è£…åªéœ€è¦æŒ‰ç…§å®˜æ–¹çš„ Guide æ¥ä¸‹è½½å®‰è£…å°±å¥½ï¼Œ https://github.com/Chia-Network/chia-blockchain/wiki/INSTALLï¼Œæˆ‘åœ¨ M1 Mac ä¸‹å®‰è£…çš„æ—¶å€™è„šæœ¬å‡ºäº†ç‚¹å°é—®é¢˜ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºæ‹‰å–äºŒè¿›åˆ¶ wheel æ–‡ä»¶ç½‘ç»œå‡ºé—®é¢˜èµ°åˆ°äº†ç¼–è¯‘ wheelçš„é€»è¾‘ï¼Œè€Œé‚£é‡Œæ˜¯ä¾èµ– cargoçš„ï¼Œå¦‚æœå¤§å®¶é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥æå‰æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ rustï¼Œæˆ–è€… cherry-pick æˆ‘çš„è¿™ä¸ª PR ã€‚ 1.2.2 è¿è¡Œ æŒ‰ç…§å®˜æ–¹ guideï¼Œæ¯”å¦‚ macOS æ¥è¯´ï¼Œæœ€åä¸€æ­¥æ‰§è¡Œnpm run electron \u0026 å°±æ˜¯è¿è¡Œå®ƒçš„GUIå®¢æˆ·ç«¯ã€‚ å¦‚æœå¤§å®¶åƒæˆ‘ä¸€æ ·å–œæ¬¢ CLIï¼Œç›´æ¥åœ¨æ‰§è¡Œå®Œ . ./activate ä¹‹åå°±å¯ä»¥ chia --helpäº†å“ˆâ˜ºï¼Œé‡Œè¾¹æœ‰åªå¯åŠ¨éƒ¨åˆ†æœåŠ¡çš„æ–¹å¼ï¼ˆç›¸æ¯” GUI å¯åŠ¨æ‰€æœ‰æ¥è¯´)ã€‚ åœ¨è¿è¡Œä¹‹åï¼Œå¦‚æœä½ çš„ç½‘ç»œä¸æ˜¯å¤šå±‚ NAT çš„é‚£ç§ï¼Œç†è®ºä¸Šæ‚¨å¯ä»¥è¿åˆ° mainnet å¹¶ä¸”è‡ªåŠ¨å’Œä¸»é“¾åŒæ­¥æ•°æ®äº†ï¼Œå¦‚æœæ‚¨æ˜¯ç¬¬äºŒæ¬¡è¿è¡Œï¼Œè¿æ¥ä¸»é“¾ï¼Œä¸€å¼€å§‹å¯èƒ½æœ‰ä¸€é˜µå­åŒæ­¥çš„block æ•°æ˜¯ä¸å˜çš„ï¼Œä¹Ÿæ²¡æœ‰ peer è¿è¿‡æ¥ï¼Œä¸å¿…æƒŠæ…Œï¼Œç­‰ä¸€ä¸‹å°±å¥½äº†ã€‚ Tips: ç¬¬ä¸€æ¬¡è¿åˆ° Chia Network çš„åŒå­¦ä»¬ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé’±åŒ…ï¼ŒåŠçš„ä¿å­˜é‚£ä¸€ä¸²è¯ï¼Œå®ƒä»¬å°±æ˜¯ä½ çš„ç§é’¥å“¦ã€‚ ä¸‡ä¸€ï¼Œå¦‚æœçœŸçš„è¿ä¸ä¸Šçš„è¯ï¼Œå¯èƒ½éœ€è¦åœ¨è·¯ç”±ä¸Šé…ç½®ï¼ŒUPnPï¼Œé˜²ç«å¢™è¦å…è®¸ 8444ã€‚ 1.2.3 è®¿é—® Chia çš„æ•°æ®Chia çš„å®¢æˆ·ç«¯æŠŠæ•°æ®å­˜åœ¨äº†å‡ ä¸ª SQLite æ•°æ®åº“é‡Œï¼Œå®ƒä»¬çš„è·¯å¾„æ˜¯æˆ‘ä»¬å®‰è£…å®¢æˆ·ç«¯çš„ç”¨æˆ·çš„å®¶ç›®å½•ï¼š~/.chia/mainnet ä¸‹è¾¹å°±æ˜¯è¿è¡Œèµ·æ¥ Chia ä¹‹åç”Ÿæˆçš„ä¸»è¦çš„ä¸¤ä¸ªæ•°æ®åº“çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼š ~/.chia/mainnet/db â¯ ll -h total 4350416 -rw-r--r-- 1 weyl staff 2.0G May 6 12:06 blockchain_v1_mainnet.sqlite -rw-r--r-- 1 weyl staff 64K May 6 11:17 blockchain_v1_mainnet.sqlite-shm -rw-r--r-- 1 weyl staff 20M May 6 12:10 blockchain_v1_mainnet.sqlite-wal -rw-r--r-- 1 weyl staff 1.8M May 6 11:46 peer_table_node.sqlite -rw-r--r-- 1 weyl staff 32K May 5 17:30 peer_table_node.sqlite-shm -rw-r--r-- 1 weyl staff 5.4M May 6 11:46 peer_table_node.sqlite-wal ~/.chia/mainnet/wallet/db â¯ ll -h total 3055848 -rw-r--r-- 1 weyl staff 1.4G May 7 15:32 blockchain_wallet_v1_mainnet_903996200.sqlite -rw-r--r-- 1 weyl staff 32K May 7 15:24 blockchain_wallet_v1_mainnet_903996200.sqlite-shm -rw-r--r-- 1 weyl staff 4.0M May 7 15:32 blockchain_wallet_v1_mainnet_903996200.sqlite-wal -rw-r--r-- 1 weyl staff 16K May 7 15:24 wallet_peers.sqlite ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç”¨ SQLite Browserï¼Œä¸€ä¸ª SQlite æ•°æ®åº“ï¼ˆæ–‡ä»¶ï¼‰çš„æµè§ˆå™¨æ¥çœ‹çœ‹å®ƒã€‚ SQlite æµè§ˆå™¨çš„å®˜ç½‘æ˜¯ https://sqlitebrowser.org/ ã€‚åœ¨ä¸‹è½½ï¼Œå®‰è£…ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç‚¹å‡» Open Database/æ‰“å¼€æ•°æ®åº“ é€‰æ‹©æµè§ˆä¸Šè¾¹åˆ—å‡ºæ¥çš„ä¸¤ä¸ª .sqlite æ‰©å±•åçš„æ•°æ®åº“æ–‡ä»¶ã€‚ æ‰“å¼€æ•°æ®åº“ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ç¬¬ä¸€ä¸ªæ ‡ç­¾ Database Schema æ¥çœ‹çœ‹è¡¨çš„ç»“æ„ã€‚ æˆ‘ä»¬è¿˜èƒ½åƒç±»ä¼¼äº Excel ä¸€æ ·å»çœ‹è¡¨çš„æ•°æ®ï¼Œè¿˜å¯ä»¥ Filter/è¿‡æ»¤ã€Sort/æ’åºä»»æ„åˆ—ã€‚ ä¸‹ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ¥ç®€å•çœ‹çœ‹è¡¨é‡Œçš„æ•°æ®ã€‚ Tips: è¿™é‡Œè¾¹ï¼Œ~/.chia/mainnet/wallet å’Œè£¸ç›®å½• ~/.chia/mainnet ä¸‹è¾¹çš„ db é‡Œåˆ†åˆ«éƒ½æœ‰è¡¨æ–‡ä»¶ï¼Œä»–ä»¬çš„ä¿¡æ¯æ˜¯æœ‰é‡å¤çš„ï¼Œå¤§å®¶å¯ä»¥åˆ†åˆ«æ‰“å¼€çœ‹çœ‹å“¦ï¼Œå³ä½¿æ˜¯ç›¸åŒçš„è¡¨çš„åå­—ï¼Œæ¯”å¦‚ block_record å†…é‡Œçš„ä¿¡æ¯ä¹Ÿç•¥æœ‰å·®åˆ«ï¼Œå¦‚æœå¤§å®¶çŸ¥é“ä¸ºä»€ä¹ˆæœ‰è¿™æ ·çš„å·®åˆ«ï¼Œæ¬¢è¿æµè§ˆå‘Šè¯‰å¤§å®¶å“ˆï¼Œå¯èƒ½è¦ä»”ç»†ç ”ç©¶ä¸€ä¸‹å®¢æˆ·ç«¯ã€é’±åŒ…ç­‰ä»£ç æ‰è¡Œï¼Œå¹¸è¿çš„æ˜¯ï¼Œå®ƒä»¬ç›¸å¯¹æ¯”è¾ƒå¥½é˜…è¯»ï¼Œæ˜¯ Python å†™çš„ï¼š https://github.com/Chia-Network/chia-blockchain ã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:1:2","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#12-å¦‚ä½•è¿æ¥chia"},{"categories":["Nebula Graph"],"content":"1.2 å¦‚ä½•è¿æ¥Chia?æˆ‘ä»¬å¯ä»¥é€šè¿‡ Chia Network çš„å®¢æˆ·ç«¯æ¥è®¿é—®å®ƒï¼Œè¿™ä¸ªå®¢æˆ·ç«¯æ˜¯ Electron + Python çš„ç¨‹åºï¼Œå¤©ç„¶è·¨å¹³å°ï¼Œæ—¢æœ‰ GUI åˆæœ‰ CLI çš„æ–¹å¼ã€‚ 1.2.1 å®‰è£…åªéœ€è¦æŒ‰ç…§å®˜æ–¹çš„ Guide æ¥ä¸‹è½½å®‰è£…å°±å¥½ï¼Œ https://github.com/Chia-Network/chia-blockchain/wiki/INSTALLï¼Œæˆ‘åœ¨ M1 Mac ä¸‹å®‰è£…çš„æ—¶å€™è„šæœ¬å‡ºäº†ç‚¹å°é—®é¢˜ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºæ‹‰å–äºŒè¿›åˆ¶ wheel æ–‡ä»¶ç½‘ç»œå‡ºé—®é¢˜èµ°åˆ°äº†ç¼–è¯‘ wheelçš„é€»è¾‘ï¼Œè€Œé‚£é‡Œæ˜¯ä¾èµ– cargoçš„ï¼Œå¦‚æœå¤§å®¶é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥æå‰æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ rustï¼Œæˆ–è€… cherry-pick æˆ‘çš„è¿™ä¸ª PR ã€‚ 1.2.2 è¿è¡Œ æŒ‰ç…§å®˜æ–¹ guideï¼Œæ¯”å¦‚ macOS æ¥è¯´ï¼Œæœ€åä¸€æ­¥æ‰§è¡Œnpm run electron \u0026 å°±æ˜¯è¿è¡Œå®ƒçš„GUIå®¢æˆ·ç«¯ã€‚ å¦‚æœå¤§å®¶åƒæˆ‘ä¸€æ ·å–œæ¬¢ CLIï¼Œç›´æ¥åœ¨æ‰§è¡Œå®Œ . ./activate ä¹‹åå°±å¯ä»¥ chia --helpäº†å“ˆâ˜ºï¼Œé‡Œè¾¹æœ‰åªå¯åŠ¨éƒ¨åˆ†æœåŠ¡çš„æ–¹å¼ï¼ˆç›¸æ¯” GUI å¯åŠ¨æ‰€æœ‰æ¥è¯´)ã€‚ åœ¨è¿è¡Œä¹‹åï¼Œå¦‚æœä½ çš„ç½‘ç»œä¸æ˜¯å¤šå±‚ NAT çš„é‚£ç§ï¼Œç†è®ºä¸Šæ‚¨å¯ä»¥è¿åˆ° mainnet å¹¶ä¸”è‡ªåŠ¨å’Œä¸»é“¾åŒæ­¥æ•°æ®äº†ï¼Œå¦‚æœæ‚¨æ˜¯ç¬¬äºŒæ¬¡è¿è¡Œï¼Œè¿æ¥ä¸»é“¾ï¼Œä¸€å¼€å§‹å¯èƒ½æœ‰ä¸€é˜µå­åŒæ­¥çš„block æ•°æ˜¯ä¸å˜çš„ï¼Œä¹Ÿæ²¡æœ‰ peer è¿è¿‡æ¥ï¼Œä¸å¿…æƒŠæ…Œï¼Œç­‰ä¸€ä¸‹å°±å¥½äº†ã€‚ Tips: ç¬¬ä¸€æ¬¡è¿åˆ° Chia Network çš„åŒå­¦ä»¬ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé’±åŒ…ï¼ŒåŠçš„ä¿å­˜é‚£ä¸€ä¸²è¯ï¼Œå®ƒä»¬å°±æ˜¯ä½ çš„ç§é’¥å“¦ã€‚ ä¸‡ä¸€ï¼Œå¦‚æœçœŸçš„è¿ä¸ä¸Šçš„è¯ï¼Œå¯èƒ½éœ€è¦åœ¨è·¯ç”±ä¸Šé…ç½®ï¼ŒUPnPï¼Œé˜²ç«å¢™è¦å…è®¸ 8444ã€‚ 1.2.3 è®¿é—® Chia çš„æ•°æ®Chia çš„å®¢æˆ·ç«¯æŠŠæ•°æ®å­˜åœ¨äº†å‡ ä¸ª SQLite æ•°æ®åº“é‡Œï¼Œå®ƒä»¬çš„è·¯å¾„æ˜¯æˆ‘ä»¬å®‰è£…å®¢æˆ·ç«¯çš„ç”¨æˆ·çš„å®¶ç›®å½•ï¼š~/.chia/mainnet ä¸‹è¾¹å°±æ˜¯è¿è¡Œèµ·æ¥ Chia ä¹‹åç”Ÿæˆçš„ä¸»è¦çš„ä¸¤ä¸ªæ•°æ®åº“çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼š ~/.chia/mainnet/db â¯ ll -h total 4350416 -rw-r--r-- 1 weyl staff 2.0G May 6 12:06 blockchain_v1_mainnet.sqlite -rw-r--r-- 1 weyl staff 64K May 6 11:17 blockchain_v1_mainnet.sqlite-shm -rw-r--r-- 1 weyl staff 20M May 6 12:10 blockchain_v1_mainnet.sqlite-wal -rw-r--r-- 1 weyl staff 1.8M May 6 11:46 peer_table_node.sqlite -rw-r--r-- 1 weyl staff 32K May 5 17:30 peer_table_node.sqlite-shm -rw-r--r-- 1 weyl staff 5.4M May 6 11:46 peer_table_node.sqlite-wal ~/.chia/mainnet/wallet/db â¯ ll -h total 3055848 -rw-r--r-- 1 weyl staff 1.4G May 7 15:32 blockchain_wallet_v1_mainnet_903996200.sqlite -rw-r--r-- 1 weyl staff 32K May 7 15:24 blockchain_wallet_v1_mainnet_903996200.sqlite-shm -rw-r--r-- 1 weyl staff 4.0M May 7 15:32 blockchain_wallet_v1_mainnet_903996200.sqlite-wal -rw-r--r-- 1 weyl staff 16K May 7 15:24 wallet_peers.sqlite ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç”¨ SQLite Browserï¼Œä¸€ä¸ª SQlite æ•°æ®åº“ï¼ˆæ–‡ä»¶ï¼‰çš„æµè§ˆå™¨æ¥çœ‹çœ‹å®ƒã€‚ SQlite æµè§ˆå™¨çš„å®˜ç½‘æ˜¯ https://sqlitebrowser.org/ ã€‚åœ¨ä¸‹è½½ï¼Œå®‰è£…ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç‚¹å‡» Open Database/æ‰“å¼€æ•°æ®åº“ é€‰æ‹©æµè§ˆä¸Šè¾¹åˆ—å‡ºæ¥çš„ä¸¤ä¸ª .sqlite æ‰©å±•åçš„æ•°æ®åº“æ–‡ä»¶ã€‚ æ‰“å¼€æ•°æ®åº“ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ç¬¬ä¸€ä¸ªæ ‡ç­¾ Database Schema æ¥çœ‹çœ‹è¡¨çš„ç»“æ„ã€‚ æˆ‘ä»¬è¿˜èƒ½åƒç±»ä¼¼äº Excel ä¸€æ ·å»çœ‹è¡¨çš„æ•°æ®ï¼Œè¿˜å¯ä»¥ Filter/è¿‡æ»¤ã€Sort/æ’åºä»»æ„åˆ—ã€‚ ä¸‹ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ¥ç®€å•çœ‹çœ‹è¡¨é‡Œçš„æ•°æ®ã€‚ Tips: è¿™é‡Œè¾¹ï¼Œ~/.chia/mainnet/wallet å’Œè£¸ç›®å½• ~/.chia/mainnet ä¸‹è¾¹çš„ db é‡Œåˆ†åˆ«éƒ½æœ‰è¡¨æ–‡ä»¶ï¼Œä»–ä»¬çš„ä¿¡æ¯æ˜¯æœ‰é‡å¤çš„ï¼Œå¤§å®¶å¯ä»¥åˆ†åˆ«æ‰“å¼€çœ‹çœ‹å“¦ï¼Œå³ä½¿æ˜¯ç›¸åŒçš„è¡¨çš„åå­—ï¼Œæ¯”å¦‚ block_record å†…é‡Œçš„ä¿¡æ¯ä¹Ÿç•¥æœ‰å·®åˆ«ï¼Œå¦‚æœå¤§å®¶çŸ¥é“ä¸ºä»€ä¹ˆæœ‰è¿™æ ·çš„å·®åˆ«ï¼Œæ¬¢è¿æµè§ˆå‘Šè¯‰å¤§å®¶å“ˆï¼Œå¯èƒ½è¦ä»”ç»†ç ”ç©¶ä¸€ä¸‹å®¢æˆ·ç«¯ã€é’±åŒ…ç­‰ä»£ç æ‰è¡Œï¼Œå¹¸è¿çš„æ˜¯ï¼Œå®ƒä»¬ç›¸å¯¹æ¯”è¾ƒå¥½é˜…è¯»ï¼Œæ˜¯ Python å†™çš„ï¼š https://github.com/Chia-Network/chia-blockchain ã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:1:2","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#121-å®‰è£…"},{"categories":["Nebula Graph"],"content":"1.2 å¦‚ä½•è¿æ¥Chia?æˆ‘ä»¬å¯ä»¥é€šè¿‡ Chia Network çš„å®¢æˆ·ç«¯æ¥è®¿é—®å®ƒï¼Œè¿™ä¸ªå®¢æˆ·ç«¯æ˜¯ Electron + Python çš„ç¨‹åºï¼Œå¤©ç„¶è·¨å¹³å°ï¼Œæ—¢æœ‰ GUI åˆæœ‰ CLI çš„æ–¹å¼ã€‚ 1.2.1 å®‰è£…åªéœ€è¦æŒ‰ç…§å®˜æ–¹çš„ Guide æ¥ä¸‹è½½å®‰è£…å°±å¥½ï¼Œ https://github.com/Chia-Network/chia-blockchain/wiki/INSTALLï¼Œæˆ‘åœ¨ M1 Mac ä¸‹å®‰è£…çš„æ—¶å€™è„šæœ¬å‡ºäº†ç‚¹å°é—®é¢˜ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºæ‹‰å–äºŒè¿›åˆ¶ wheel æ–‡ä»¶ç½‘ç»œå‡ºé—®é¢˜èµ°åˆ°äº†ç¼–è¯‘ wheelçš„é€»è¾‘ï¼Œè€Œé‚£é‡Œæ˜¯ä¾èµ– cargoçš„ï¼Œå¦‚æœå¤§å®¶é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥æå‰æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ rustï¼Œæˆ–è€… cherry-pick æˆ‘çš„è¿™ä¸ª PR ã€‚ 1.2.2 è¿è¡Œ æŒ‰ç…§å®˜æ–¹ guideï¼Œæ¯”å¦‚ macOS æ¥è¯´ï¼Œæœ€åä¸€æ­¥æ‰§è¡Œnpm run electron \u0026 å°±æ˜¯è¿è¡Œå®ƒçš„GUIå®¢æˆ·ç«¯ã€‚ å¦‚æœå¤§å®¶åƒæˆ‘ä¸€æ ·å–œæ¬¢ CLIï¼Œç›´æ¥åœ¨æ‰§è¡Œå®Œ . ./activate ä¹‹åå°±å¯ä»¥ chia --helpäº†å“ˆâ˜ºï¼Œé‡Œè¾¹æœ‰åªå¯åŠ¨éƒ¨åˆ†æœåŠ¡çš„æ–¹å¼ï¼ˆç›¸æ¯” GUI å¯åŠ¨æ‰€æœ‰æ¥è¯´)ã€‚ åœ¨è¿è¡Œä¹‹åï¼Œå¦‚æœä½ çš„ç½‘ç»œä¸æ˜¯å¤šå±‚ NAT çš„é‚£ç§ï¼Œç†è®ºä¸Šæ‚¨å¯ä»¥è¿åˆ° mainnet å¹¶ä¸”è‡ªåŠ¨å’Œä¸»é“¾åŒæ­¥æ•°æ®äº†ï¼Œå¦‚æœæ‚¨æ˜¯ç¬¬äºŒæ¬¡è¿è¡Œï¼Œè¿æ¥ä¸»é“¾ï¼Œä¸€å¼€å§‹å¯èƒ½æœ‰ä¸€é˜µå­åŒæ­¥çš„block æ•°æ˜¯ä¸å˜çš„ï¼Œä¹Ÿæ²¡æœ‰ peer è¿è¿‡æ¥ï¼Œä¸å¿…æƒŠæ…Œï¼Œç­‰ä¸€ä¸‹å°±å¥½äº†ã€‚ Tips: ç¬¬ä¸€æ¬¡è¿åˆ° Chia Network çš„åŒå­¦ä»¬ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé’±åŒ…ï¼ŒåŠçš„ä¿å­˜é‚£ä¸€ä¸²è¯ï¼Œå®ƒä»¬å°±æ˜¯ä½ çš„ç§é’¥å“¦ã€‚ ä¸‡ä¸€ï¼Œå¦‚æœçœŸçš„è¿ä¸ä¸Šçš„è¯ï¼Œå¯èƒ½éœ€è¦åœ¨è·¯ç”±ä¸Šé…ç½®ï¼ŒUPnPï¼Œé˜²ç«å¢™è¦å…è®¸ 8444ã€‚ 1.2.3 è®¿é—® Chia çš„æ•°æ®Chia çš„å®¢æˆ·ç«¯æŠŠæ•°æ®å­˜åœ¨äº†å‡ ä¸ª SQLite æ•°æ®åº“é‡Œï¼Œå®ƒä»¬çš„è·¯å¾„æ˜¯æˆ‘ä»¬å®‰è£…å®¢æˆ·ç«¯çš„ç”¨æˆ·çš„å®¶ç›®å½•ï¼š~/.chia/mainnet ä¸‹è¾¹å°±æ˜¯è¿è¡Œèµ·æ¥ Chia ä¹‹åç”Ÿæˆçš„ä¸»è¦çš„ä¸¤ä¸ªæ•°æ®åº“çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼š ~/.chia/mainnet/db â¯ ll -h total 4350416 -rw-r--r-- 1 weyl staff 2.0G May 6 12:06 blockchain_v1_mainnet.sqlite -rw-r--r-- 1 weyl staff 64K May 6 11:17 blockchain_v1_mainnet.sqlite-shm -rw-r--r-- 1 weyl staff 20M May 6 12:10 blockchain_v1_mainnet.sqlite-wal -rw-r--r-- 1 weyl staff 1.8M May 6 11:46 peer_table_node.sqlite -rw-r--r-- 1 weyl staff 32K May 5 17:30 peer_table_node.sqlite-shm -rw-r--r-- 1 weyl staff 5.4M May 6 11:46 peer_table_node.sqlite-wal ~/.chia/mainnet/wallet/db â¯ ll -h total 3055848 -rw-r--r-- 1 weyl staff 1.4G May 7 15:32 blockchain_wallet_v1_mainnet_903996200.sqlite -rw-r--r-- 1 weyl staff 32K May 7 15:24 blockchain_wallet_v1_mainnet_903996200.sqlite-shm -rw-r--r-- 1 weyl staff 4.0M May 7 15:32 blockchain_wallet_v1_mainnet_903996200.sqlite-wal -rw-r--r-- 1 weyl staff 16K May 7 15:24 wallet_peers.sqlite ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç”¨ SQLite Browserï¼Œä¸€ä¸ª SQlite æ•°æ®åº“ï¼ˆæ–‡ä»¶ï¼‰çš„æµè§ˆå™¨æ¥çœ‹çœ‹å®ƒã€‚ SQlite æµè§ˆå™¨çš„å®˜ç½‘æ˜¯ https://sqlitebrowser.org/ ã€‚åœ¨ä¸‹è½½ï¼Œå®‰è£…ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç‚¹å‡» Open Database/æ‰“å¼€æ•°æ®åº“ é€‰æ‹©æµè§ˆä¸Šè¾¹åˆ—å‡ºæ¥çš„ä¸¤ä¸ª .sqlite æ‰©å±•åçš„æ•°æ®åº“æ–‡ä»¶ã€‚ æ‰“å¼€æ•°æ®åº“ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ç¬¬ä¸€ä¸ªæ ‡ç­¾ Database Schema æ¥çœ‹çœ‹è¡¨çš„ç»“æ„ã€‚ æˆ‘ä»¬è¿˜èƒ½åƒç±»ä¼¼äº Excel ä¸€æ ·å»çœ‹è¡¨çš„æ•°æ®ï¼Œè¿˜å¯ä»¥ Filter/è¿‡æ»¤ã€Sort/æ’åºä»»æ„åˆ—ã€‚ ä¸‹ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ¥ç®€å•çœ‹çœ‹è¡¨é‡Œçš„æ•°æ®ã€‚ Tips: è¿™é‡Œè¾¹ï¼Œ~/.chia/mainnet/wallet å’Œè£¸ç›®å½• ~/.chia/mainnet ä¸‹è¾¹çš„ db é‡Œåˆ†åˆ«éƒ½æœ‰è¡¨æ–‡ä»¶ï¼Œä»–ä»¬çš„ä¿¡æ¯æ˜¯æœ‰é‡å¤çš„ï¼Œå¤§å®¶å¯ä»¥åˆ†åˆ«æ‰“å¼€çœ‹çœ‹å“¦ï¼Œå³ä½¿æ˜¯ç›¸åŒçš„è¡¨çš„åå­—ï¼Œæ¯”å¦‚ block_record å†…é‡Œçš„ä¿¡æ¯ä¹Ÿç•¥æœ‰å·®åˆ«ï¼Œå¦‚æœå¤§å®¶çŸ¥é“ä¸ºä»€ä¹ˆæœ‰è¿™æ ·çš„å·®åˆ«ï¼Œæ¬¢è¿æµè§ˆå‘Šè¯‰å¤§å®¶å“ˆï¼Œå¯èƒ½è¦ä»”ç»†ç ”ç©¶ä¸€ä¸‹å®¢æˆ·ç«¯ã€é’±åŒ…ç­‰ä»£ç æ‰è¡Œï¼Œå¹¸è¿çš„æ˜¯ï¼Œå®ƒä»¬ç›¸å¯¹æ¯”è¾ƒå¥½é˜…è¯»ï¼Œæ˜¯ Python å†™çš„ï¼š https://github.com/Chia-Network/chia-blockchain ã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:1:2","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#122-è¿è¡Œ"},{"categories":["Nebula Graph"],"content":"1.2 å¦‚ä½•è¿æ¥Chia?æˆ‘ä»¬å¯ä»¥é€šè¿‡ Chia Network çš„å®¢æˆ·ç«¯æ¥è®¿é—®å®ƒï¼Œè¿™ä¸ªå®¢æˆ·ç«¯æ˜¯ Electron + Python çš„ç¨‹åºï¼Œå¤©ç„¶è·¨å¹³å°ï¼Œæ—¢æœ‰ GUI åˆæœ‰ CLI çš„æ–¹å¼ã€‚ 1.2.1 å®‰è£…åªéœ€è¦æŒ‰ç…§å®˜æ–¹çš„ Guide æ¥ä¸‹è½½å®‰è£…å°±å¥½ï¼Œ https://github.com/Chia-Network/chia-blockchain/wiki/INSTALLï¼Œæˆ‘åœ¨ M1 Mac ä¸‹å®‰è£…çš„æ—¶å€™è„šæœ¬å‡ºäº†ç‚¹å°é—®é¢˜ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºæ‹‰å–äºŒè¿›åˆ¶ wheel æ–‡ä»¶ç½‘ç»œå‡ºé—®é¢˜èµ°åˆ°äº†ç¼–è¯‘ wheelçš„é€»è¾‘ï¼Œè€Œé‚£é‡Œæ˜¯ä¾èµ– cargoçš„ï¼Œå¦‚æœå¤§å®¶é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥æå‰æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ rustï¼Œæˆ–è€… cherry-pick æˆ‘çš„è¿™ä¸ª PR ã€‚ 1.2.2 è¿è¡Œ æŒ‰ç…§å®˜æ–¹ guideï¼Œæ¯”å¦‚ macOS æ¥è¯´ï¼Œæœ€åä¸€æ­¥æ‰§è¡Œnpm run electron \u0026 å°±æ˜¯è¿è¡Œå®ƒçš„GUIå®¢æˆ·ç«¯ã€‚ å¦‚æœå¤§å®¶åƒæˆ‘ä¸€æ ·å–œæ¬¢ CLIï¼Œç›´æ¥åœ¨æ‰§è¡Œå®Œ . ./activate ä¹‹åå°±å¯ä»¥ chia --helpäº†å“ˆâ˜ºï¼Œé‡Œè¾¹æœ‰åªå¯åŠ¨éƒ¨åˆ†æœåŠ¡çš„æ–¹å¼ï¼ˆç›¸æ¯” GUI å¯åŠ¨æ‰€æœ‰æ¥è¯´)ã€‚ åœ¨è¿è¡Œä¹‹åï¼Œå¦‚æœä½ çš„ç½‘ç»œä¸æ˜¯å¤šå±‚ NAT çš„é‚£ç§ï¼Œç†è®ºä¸Šæ‚¨å¯ä»¥è¿åˆ° mainnet å¹¶ä¸”è‡ªåŠ¨å’Œä¸»é“¾åŒæ­¥æ•°æ®äº†ï¼Œå¦‚æœæ‚¨æ˜¯ç¬¬äºŒæ¬¡è¿è¡Œï¼Œè¿æ¥ä¸»é“¾ï¼Œä¸€å¼€å§‹å¯èƒ½æœ‰ä¸€é˜µå­åŒæ­¥çš„block æ•°æ˜¯ä¸å˜çš„ï¼Œä¹Ÿæ²¡æœ‰ peer è¿è¿‡æ¥ï¼Œä¸å¿…æƒŠæ…Œï¼Œç­‰ä¸€ä¸‹å°±å¥½äº†ã€‚ Tips: ç¬¬ä¸€æ¬¡è¿åˆ° Chia Network çš„åŒå­¦ä»¬ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé’±åŒ…ï¼ŒåŠçš„ä¿å­˜é‚£ä¸€ä¸²è¯ï¼Œå®ƒä»¬å°±æ˜¯ä½ çš„ç§é’¥å“¦ã€‚ ä¸‡ä¸€ï¼Œå¦‚æœçœŸçš„è¿ä¸ä¸Šçš„è¯ï¼Œå¯èƒ½éœ€è¦åœ¨è·¯ç”±ä¸Šé…ç½®ï¼ŒUPnPï¼Œé˜²ç«å¢™è¦å…è®¸ 8444ã€‚ 1.2.3 è®¿é—® Chia çš„æ•°æ®Chia çš„å®¢æˆ·ç«¯æŠŠæ•°æ®å­˜åœ¨äº†å‡ ä¸ª SQLite æ•°æ®åº“é‡Œï¼Œå®ƒä»¬çš„è·¯å¾„æ˜¯æˆ‘ä»¬å®‰è£…å®¢æˆ·ç«¯çš„ç”¨æˆ·çš„å®¶ç›®å½•ï¼š~/.chia/mainnet ä¸‹è¾¹å°±æ˜¯è¿è¡Œèµ·æ¥ Chia ä¹‹åç”Ÿæˆçš„ä¸»è¦çš„ä¸¤ä¸ªæ•°æ®åº“çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼š ~/.chia/mainnet/db â¯ ll -h total 4350416 -rw-r--r-- 1 weyl staff 2.0G May 6 12:06 blockchain_v1_mainnet.sqlite -rw-r--r-- 1 weyl staff 64K May 6 11:17 blockchain_v1_mainnet.sqlite-shm -rw-r--r-- 1 weyl staff 20M May 6 12:10 blockchain_v1_mainnet.sqlite-wal -rw-r--r-- 1 weyl staff 1.8M May 6 11:46 peer_table_node.sqlite -rw-r--r-- 1 weyl staff 32K May 5 17:30 peer_table_node.sqlite-shm -rw-r--r-- 1 weyl staff 5.4M May 6 11:46 peer_table_node.sqlite-wal ~/.chia/mainnet/wallet/db â¯ ll -h total 3055848 -rw-r--r-- 1 weyl staff 1.4G May 7 15:32 blockchain_wallet_v1_mainnet_903996200.sqlite -rw-r--r-- 1 weyl staff 32K May 7 15:24 blockchain_wallet_v1_mainnet_903996200.sqlite-shm -rw-r--r-- 1 weyl staff 4.0M May 7 15:32 blockchain_wallet_v1_mainnet_903996200.sqlite-wal -rw-r--r-- 1 weyl staff 16K May 7 15:24 wallet_peers.sqlite ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç”¨ SQLite Browserï¼Œä¸€ä¸ª SQlite æ•°æ®åº“ï¼ˆæ–‡ä»¶ï¼‰çš„æµè§ˆå™¨æ¥çœ‹çœ‹å®ƒã€‚ SQlite æµè§ˆå™¨çš„å®˜ç½‘æ˜¯ https://sqlitebrowser.org/ ã€‚åœ¨ä¸‹è½½ï¼Œå®‰è£…ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç‚¹å‡» Open Database/æ‰“å¼€æ•°æ®åº“ é€‰æ‹©æµè§ˆä¸Šè¾¹åˆ—å‡ºæ¥çš„ä¸¤ä¸ª .sqlite æ‰©å±•åçš„æ•°æ®åº“æ–‡ä»¶ã€‚ æ‰“å¼€æ•°æ®åº“ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ç¬¬ä¸€ä¸ªæ ‡ç­¾ Database Schema æ¥çœ‹çœ‹è¡¨çš„ç»“æ„ã€‚ æˆ‘ä»¬è¿˜èƒ½åƒç±»ä¼¼äº Excel ä¸€æ ·å»çœ‹è¡¨çš„æ•°æ®ï¼Œè¿˜å¯ä»¥ Filter/è¿‡æ»¤ã€Sort/æ’åºä»»æ„åˆ—ã€‚ ä¸‹ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ¥ç®€å•çœ‹çœ‹è¡¨é‡Œçš„æ•°æ®ã€‚ Tips: è¿™é‡Œè¾¹ï¼Œ~/.chia/mainnet/wallet å’Œè£¸ç›®å½• ~/.chia/mainnet ä¸‹è¾¹çš„ db é‡Œåˆ†åˆ«éƒ½æœ‰è¡¨æ–‡ä»¶ï¼Œä»–ä»¬çš„ä¿¡æ¯æ˜¯æœ‰é‡å¤çš„ï¼Œå¤§å®¶å¯ä»¥åˆ†åˆ«æ‰“å¼€çœ‹çœ‹å“¦ï¼Œå³ä½¿æ˜¯ç›¸åŒçš„è¡¨çš„åå­—ï¼Œæ¯”å¦‚ block_record å†…é‡Œçš„ä¿¡æ¯ä¹Ÿç•¥æœ‰å·®åˆ«ï¼Œå¦‚æœå¤§å®¶çŸ¥é“ä¸ºä»€ä¹ˆæœ‰è¿™æ ·çš„å·®åˆ«ï¼Œæ¬¢è¿æµè§ˆå‘Šè¯‰å¤§å®¶å“ˆï¼Œå¯èƒ½è¦ä»”ç»†ç ”ç©¶ä¸€ä¸‹å®¢æˆ·ç«¯ã€é’±åŒ…ç­‰ä»£ç æ‰è¡Œï¼Œå¹¸è¿çš„æ˜¯ï¼Œå®ƒä»¬ç›¸å¯¹æ¯”è¾ƒå¥½é˜…è¯»ï¼Œæ˜¯ Python å†™çš„ï¼š https://github.com/Chia-Network/chia-blockchain ã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:1:2","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#123-è®¿é—®-chia-çš„æ•°æ®"},{"categories":["Nebula Graph"],"content":"2. åˆ†æ Chia çš„æ•°æ®å¦‚æœå¤§å®¶ä»”ç»†çœ‹äº†ä¸Šè¾¹è¡¨ç»“æ„å®šä¹‰çš„æˆªå›¾ï¼Œå°±èƒ½æ³¨æ„åˆ°ä¸€äº›è¡¨çš„ä¸»è¦ä¿¡æ¯æ˜¯åµŒå¥—äºŒè¿›åˆ¶ KV Byteï¼Œæ‰€ä»¥åªä» SQLite å¹¶ä¸èƒ½çœ‹åˆ°æ‰€æœ‰ Chia çš„æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ï¼ˆç”¨ä¸€ä¸ªç¼–ç¨‹è¯­è¨€æ¥ï¼‰è¯»å–è¡¨é‡Œçš„ Byteã€‚ å¹¸è¿çš„æ˜¯ï¼Œè¿™ä»¶äº‹å„¿å› ä¸º Chia æ˜¯å¼€æºçš„ï¼Œè€Œä¸”æ˜¯ Python çš„ä»£ç ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç›´æ¥äº¤äº’å¼çš„åšã€‚ æˆ‘èŠ±äº†ä¸€ç‚¹ç‚¹æ—¶é—´åœ¨ Chia å®¢æˆ·ç«¯ä»£ç é‡Œæ‰¾åˆ°äº†éœ€è¦çš„å°è£…ç±»ï¼Œå€ŸåŠ©å®ƒï¼Œå¯ä»¥æ¯”è¾ƒæ–¹ä¾¿çš„åˆ†æ Chia å®¢æˆ·ç«¯åœ¨æœ¬åœ°çš„å…¨é“¾æ•°æ®ã€‚ å¦‚æœæ‚¨ä¸æ„Ÿå…´è¶£ç»†èŠ‚ï¼Œå¯ä»¥ç›´æ¥çœ‹æˆ‘åˆ†æçš„ç»“è®ºã€‚ ç»“è®ºä¹‹åï¼Œæˆ‘ä¹Ÿç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹æ˜¯æ€ä¹ˆè¯»å–å®ƒä»¬çš„ã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:2:0","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#2-åˆ†æ-chia-çš„æ•°æ®"},{"categories":["Nebula Graph"],"content":"2.0 TL;DR, ç»“è®ºæˆ‘ä»¬å¯ä»¥ä»è¡¨ä¸­è¯»å–åˆ°åŒºå—é“¾è®°å½•ï¼ˆBlock Record ï¼‰ï¼ŒChia å¸è®°å½•ï¼ˆCoin Recordï¼‰ã€‚ ä»åŒºå—è®°å½•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…³é”®çš„æ¶‰åŠäº¤æ˜“çš„ä¿¡æ¯ï¼š å…³è”çš„ Coin ï¼Œå…³è”çš„ Puzzleï¼ˆåœ°å€ï¼‰ï¼ŒCoin çš„å€¼(Amount) ä»å¸è®°å½•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…³é”®çš„æ¶‰åŠåŒºå—çš„ä¿¡æ¯ï¼š ç”Ÿæˆè¿™ä¸ª Coin æ‰€åœ¨åŒºå—é“¾é‡Œçš„ç´¢å¼•é«˜åº¦ï¼ˆConfirmed Indexï¼‰ å¦‚æœè¿™ä¸ªè®°å½•æ˜¯èŠ±è´¹ Coin çš„ï¼ŒèŠ±è´¹å®ƒçš„ç´¢å¼•é«˜åº¦ï¼ˆSpent Indexï¼‰ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ Coin Record â”‚ â”‚ Block Record â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Coin Name â”‚ â”‚ Height â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”¼â”€â”€â”€â–º Puzzle â”‚ â”‚ Header â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”¼â”€â”€â”€â–º Coin Parent â”‚ â”‚ Prev Header â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”¼â”€â”€â”€â–º Amount â”‚ â”‚ Block Body â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ farmer_puzzle_hash â”‚ â”‚ â”‚ â”‚ Time Stamp â”‚ â”‚ fees â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ pool_puzzle_hash â”‚ â””â”€â”€â”€â”€â”€â”¼â”€â”¼â”€â”¬â”€ Confirmed Index â”‚ â”‚ prev_transaction_block_hash â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ prev_transaction_block_height â”‚ â”‚ â”‚ â””â”€ Spent Index â”‚ â”‚ transactions_info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€ is_transaction_block â”‚ â”‚ Coinbase â”‚ â”‚ â”‚ sub_epoch_summary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ is Peak â”‚ â”‚ â”‚ â””â”€â”€is Block â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”¼â”€â–º Sub Epoch Segment â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ","date":"2021-05-26","objectID":"/nebula-chia/:2:1","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#20-tldr-ç»“è®º"},{"categories":["Nebula Graph"],"content":"2.1 å‡†å¤‡å› ä¸ºå®‰è£…å®¢æˆ·ç«¯ä¹‹åï¼Œæˆ‘ä»¬æœ¬åœ°å®é™…ä¸Šå·²ç»æœ‰äº†ç›¸å…³çš„ Python ç¯å¢ƒå’Œä¾èµ–ï¼Œåªéœ€è¦åœ¨é‡Œè¾¹è·‘èµ·æ¥å°±å¥½ã€‚ # æ³¨æ„ï¼Œæˆ‘ä»¬è¦ cd åˆ°ä¹‹å‰å®‰è£…å®¢æˆ·ç«¯æ—¶å€™å…‹éš†çš„ä»“åº“ã€‚ cd chia-blockchain # source activate è„šæœ¬æ¥åˆ‡æ¢åˆ°ä»“åº“å®‰è£…æ—¶å€™åˆ›å»ºçš„ Python è™šæ‹Ÿç¯å¢ƒï¼Œå¹¶è¿›åˆ° IPython é‡Œã€‚ source venv/bin/activate \u0026\u0026 pip install ipython \u0026\u0026 ipython ç„¶åè¯•ç€å¯¼å…¥å®¢æˆ·ç«¯é‡Œè¾¹å¸¦æœ‰çš„ Python çš„ Chia çš„å°è£…ç±»è¯•è¯•çœ‹ã€‚ In [1]: import sqlite3 ...: from chia.consensus.block_record import BlockRecord # å¯¼å…¥æˆåŠŸï¼Œæ²¡æœ‰æŠ¥é”™ In [2]: !pwd # æˆ‘çš„å®‰è£…å…‹éš†ç›®å½• /Users/weyl/chia-blockchain æ­å–œä½ åšå¥½äº†å‡†å¤‡ï¼Œæˆ‘ä»¬çœ‹çœ‹ Block Record é‡Œéƒ½æœ‰ä»€ä¹ˆã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:2:2","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#21-å‡†å¤‡"},{"categories":["Nebula Graph"],"content":"2.2 Chia é“¾çš„æ•°æ®2.2.1 åŒºå—è®°å½•åœ¨ä¸Šä¸€æ­¥çš„ IPython çª—å£ä¸‹ã€‚ # æ³¨æ„ï¼Œè¿™é‡Œçš„è·¯å¾„çš„å‰ç¼€æ˜¯æˆ‘ä»¬è‡ªå·±çš„å®¶ç›®å½•ï¼Œä¸åŒæ“ä½œç³»ç»Ÿï¼Œä¸åŒçš„ç”¨æˆ·éƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚ chia_db_path = \"/Users/weyl/.chia/mainnet/db/blockchain_v1_mainnet.sqlite\" cur = con.cursor() # è¿™é‡Œæˆ‘ä»¬å–ç¬¬ 201645 é«˜çš„åŒºå— rows = list(cur.execute('SELECT * FROM block_records WHERE height = 201645')) # è¿™é‡Œ 0 è¡¨ç¤º SELECT ç»“æœçš„ç¬¬ä¸€è¡Œï¼Œ3 è¡¨ç¤ºåœ¨ BlockRecord è¿™ä¸ªè¡¨é‡Œè¾¹ï¼ŒBlock çš„äºŒè¿›åˆ¶ BLOB æ˜¯ç¬¬å››åˆ—ï¼Œå‚è€ƒæœ¬ç« åº•éƒ¨çš„è¡¨å®šä¹‰éƒ¨åˆ† block_records_201645 = BlockRecord.from_bytes(rows[0][3]) dir(block_records_201645) # å¯ä»¥æŸ¥çœ‹ä¸€äº›å±æ€§ is_transaction_blockï¼Œtimestampï¼Œreward_claims_incorporated In [174]: block_records_201645.is_transaction_block Out[174]: True In [182]: from datetime import datetime In [183]: datetime.fromtimestamp(block_records_201645.timestamp) Out[183]: datetime.datetime(2021, 4, 29, 10, 8, 1) In [190]: block_records_201645.reward_claims_incorporated[0].to_json_dict() Out[190]: {'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6', 'amount': 1750000000000} # å¯ä»¥å¿«é€Ÿ print çœ‹å¤§éƒ¨åˆ†ä¿¡æ¯ print(block_records_201645) block_records_201645 çš„æ‰“å°ç»“æœå¦‚ä¸‹ã€‚ æ³¨æ„ï¼Œè¿™é‡Œæˆ‘æˆªæ–­äº†ä¸€äº›æ•°æ® {'challenge_block_info_hash': '0x4a562f1ffa7a06fe76b1df74dbdd6bdcfbf63139a6f1fc3291c606d7c976abf6', 'challenge_vdf_output': {'data': '0x0200a6b38d6b58d17129d71737088772561f22a44ef302fe45a70a763b878f998abfe35946df720bcb5d78e214b667bce801d597b46c867928c4b8926c342375a961f36cd63ec698bc25e5ce48c45d9a2074eded0e42d24dd1b50a59e699f671f0900100'}, 'deficit': 16, 'farmer_puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba', 'fees': 0, 'finished_challenge_slot_hashes': ['0x2b1a7b4859a8d3597b8e6cbe3b27ab97212be8b19e6867f2a4d0eef26c36340f'], 'finished_infused_challenge_slot_hashes': ['0xd0185a6493b10d84e696c6fc55ec1920e8a96791a604dedfe77635da460f354d'], 'finished_reward_slot_hashes': ['0xe2bcbf560471131a7fb87ffe3f9ddde03166a9b0092a50f1ed1599715857c365'], 'header_hash': '0x2791729e1c914f9c3908a0ad895b5846c86fc4e207cc463820123e9a299c39f3', 'height': 201645, 'infused_challenge_vdf_output': None, 'overflow': True, 'pool_puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba', 'prev_hash': '0xf126ecf64473beb9ae5b84137788100feb9d731c604877c0744cdc6025f4cbeb', 'prev_transaction_block_hash': '0x7103fe2f1aa96998f9ccf6fc98561b64c5f7a98cf942335c4c927fb2eaa9325a', 'prev_transaction_block_height': 201643, 'required_iters': 95752, 'reward_claims_incorporated': [{'amount': 1750000000000, 'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6'}, {'amount': 250000000000, 'parent_coin_info': '0x3ff07eb358e8255a65c30a2dce0e5fbb000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6'}, {'amount': 1750000000000, 'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313aa', 'puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba'}, {'amount': 250000000000, 'parent_coin_info': '0x3ff07eb358e8255a65c30a2dce0e5fbb000000000000000000000000000313a8', 'puzzle_hash': '0xcf178071f6aa6cb1c92f00943424bcc8cb774449bd60058fc08e9894f49a1ca4'}], 'reward_infusion_new_challenge': '0x660886f4ab030c07755f53362ae4253dfa93ea853cbc321218f58f159c75adaa', 'signage_point_index': 63, 'sub_epoch_summary_included': None, 'sub_slot_iters': 99614720, 'timestamp': 1619662081, 'total_iters': 660123219464, 'weight': 4121254} å¦å¤–ï¼Œæˆ‘ä»¬å–çš„è¿™ä¸ªè¡¨çš„å®šä¹‰å¦‚ä¸‹ã€‚ CREATETABLEblock_records(header_hashtextPRIMARYKEY,prev_hashtext,heightbigint,blockblob,#\u003c---- sub_epoch_summaryblob,is_peaktinyint,is_blocktinyint) 2.2.2 Chia å¸è®°å½•ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬å¯ä»¥è·å–ä¸€ä¸ª Coin çš„è®°å½•ï¼Œè¿™é‡Œè¾¹ï¼Œä»è¡¨çš„å®šä¹‰å¯ä»¥çœ‹åˆ°ï¼Œå”¯ä¸€äºŒè¿›åˆ¶ï¼ˆä¸èƒ½ç›´æ¥ä»æ•°æ®åº“æŸ¥è¯¢ä¸­è¢«äººè¯»æ‡‚ï¼‰çš„å­—æ®µå°±æ˜¯æ˜¯å¸å€¼ï¼Œä¸å­˜åœ¨åµŒå¥—çš„ç»“æ„ï¼Œæ‰€ä»¥ä¹Ÿå¹¶ä¸éœ€è¦å°è£…çš„ç±»æ‰èƒ½çœ‹æ¸…æ¥šé‡Œè¾¹çš„ä¿¡æ¯ã€‚ CREATETABLEcoin_record(coin_nametextPRIMARYKEY,confirmed_indexbigint,spent_indexbigint,spentint,coinbaseint,puzzle_hashtext,coin_parenttext,amountblob,timestampbigint) è¿™é‡Œå€¼å¾—æ³¨æ„çš„ä¿¡æ¯ä¸»è¦æ˜¯ spent_index å’Œ confirmed_indexã€‚ from chia","date":"2021-05-26","objectID":"/nebula-chia/:2:3","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#22-chia-é“¾çš„æ•°æ®"},{"categories":["Nebula Graph"],"content":"2.2 Chia é“¾çš„æ•°æ®2.2.1 åŒºå—è®°å½•åœ¨ä¸Šä¸€æ­¥çš„ IPython çª—å£ä¸‹ã€‚ # æ³¨æ„ï¼Œè¿™é‡Œçš„è·¯å¾„çš„å‰ç¼€æ˜¯æˆ‘ä»¬è‡ªå·±çš„å®¶ç›®å½•ï¼Œä¸åŒæ“ä½œç³»ç»Ÿï¼Œä¸åŒçš„ç”¨æˆ·éƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚ chia_db_path = \"/Users/weyl/.chia/mainnet/db/blockchain_v1_mainnet.sqlite\" cur = con.cursor() # è¿™é‡Œæˆ‘ä»¬å–ç¬¬ 201645 é«˜çš„åŒºå— rows = list(cur.execute('SELECT * FROM block_records WHERE height = 201645')) # è¿™é‡Œ 0 è¡¨ç¤º SELECT ç»“æœçš„ç¬¬ä¸€è¡Œï¼Œ3 è¡¨ç¤ºåœ¨ BlockRecord è¿™ä¸ªè¡¨é‡Œè¾¹ï¼ŒBlock çš„äºŒè¿›åˆ¶ BLOB æ˜¯ç¬¬å››åˆ—ï¼Œå‚è€ƒæœ¬ç« åº•éƒ¨çš„è¡¨å®šä¹‰éƒ¨åˆ† block_records_201645 = BlockRecord.from_bytes(rows[0][3]) dir(block_records_201645) # å¯ä»¥æŸ¥çœ‹ä¸€äº›å±æ€§ is_transaction_blockï¼Œtimestampï¼Œreward_claims_incorporated In [174]: block_records_201645.is_transaction_block Out[174]: True In [182]: from datetime import datetime In [183]: datetime.fromtimestamp(block_records_201645.timestamp) Out[183]: datetime.datetime(2021, 4, 29, 10, 8, 1) In [190]: block_records_201645.reward_claims_incorporated[0].to_json_dict() Out[190]: {'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6', 'amount': 1750000000000} # å¯ä»¥å¿«é€Ÿ print çœ‹å¤§éƒ¨åˆ†ä¿¡æ¯ print(block_records_201645) block_records_201645 çš„æ‰“å°ç»“æœå¦‚ä¸‹ã€‚ æ³¨æ„ï¼Œè¿™é‡Œæˆ‘æˆªæ–­äº†ä¸€äº›æ•°æ® {'challenge_block_info_hash': '0x4a562f1ffa7a06fe76b1df74dbdd6bdcfbf63139a6f1fc3291c606d7c976abf6', 'challenge_vdf_output': {'data': '0x0200a6b38d6b58d17129d71737088772561f22a44ef302fe45a70a763b878f998abfe35946df720bcb5d78e214b667bce801d597b46c867928c4b8926c342375a961f36cd63ec698bc25e5ce48c45d9a2074eded0e42d24dd1b50a59e699f671f0900100'}, 'deficit': 16, 'farmer_puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba', 'fees': 0, 'finished_challenge_slot_hashes': ['0x2b1a7b4859a8d3597b8e6cbe3b27ab97212be8b19e6867f2a4d0eef26c36340f'], 'finished_infused_challenge_slot_hashes': ['0xd0185a6493b10d84e696c6fc55ec1920e8a96791a604dedfe77635da460f354d'], 'finished_reward_slot_hashes': ['0xe2bcbf560471131a7fb87ffe3f9ddde03166a9b0092a50f1ed1599715857c365'], 'header_hash': '0x2791729e1c914f9c3908a0ad895b5846c86fc4e207cc463820123e9a299c39f3', 'height': 201645, 'infused_challenge_vdf_output': None, 'overflow': True, 'pool_puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba', 'prev_hash': '0xf126ecf64473beb9ae5b84137788100feb9d731c604877c0744cdc6025f4cbeb', 'prev_transaction_block_hash': '0x7103fe2f1aa96998f9ccf6fc98561b64c5f7a98cf942335c4c927fb2eaa9325a', 'prev_transaction_block_height': 201643, 'required_iters': 95752, 'reward_claims_incorporated': [{'amount': 1750000000000, 'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6'}, {'amount': 250000000000, 'parent_coin_info': '0x3ff07eb358e8255a65c30a2dce0e5fbb000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6'}, {'amount': 1750000000000, 'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313aa', 'puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba'}, {'amount': 250000000000, 'parent_coin_info': '0x3ff07eb358e8255a65c30a2dce0e5fbb000000000000000000000000000313a8', 'puzzle_hash': '0xcf178071f6aa6cb1c92f00943424bcc8cb774449bd60058fc08e9894f49a1ca4'}], 'reward_infusion_new_challenge': '0x660886f4ab030c07755f53362ae4253dfa93ea853cbc321218f58f159c75adaa', 'signage_point_index': 63, 'sub_epoch_summary_included': None, 'sub_slot_iters': 99614720, 'timestamp': 1619662081, 'total_iters': 660123219464, 'weight': 4121254} å¦å¤–ï¼Œæˆ‘ä»¬å–çš„è¿™ä¸ªè¡¨çš„å®šä¹‰å¦‚ä¸‹ã€‚ CREATETABLEblock_records(header_hashtextPRIMARYKEY,prev_hashtext,heightbigint,blockblob,#","date":"2021-05-26","objectID":"/nebula-chia/:2:3","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#221-åŒºå—è®°å½•"},{"categories":["Nebula Graph"],"content":"2.2 Chia é“¾çš„æ•°æ®2.2.1 åŒºå—è®°å½•åœ¨ä¸Šä¸€æ­¥çš„ IPython çª—å£ä¸‹ã€‚ # æ³¨æ„ï¼Œè¿™é‡Œçš„è·¯å¾„çš„å‰ç¼€æ˜¯æˆ‘ä»¬è‡ªå·±çš„å®¶ç›®å½•ï¼Œä¸åŒæ“ä½œç³»ç»Ÿï¼Œä¸åŒçš„ç”¨æˆ·éƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚ chia_db_path = \"/Users/weyl/.chia/mainnet/db/blockchain_v1_mainnet.sqlite\" cur = con.cursor() # è¿™é‡Œæˆ‘ä»¬å–ç¬¬ 201645 é«˜çš„åŒºå— rows = list(cur.execute('SELECT * FROM block_records WHERE height = 201645')) # è¿™é‡Œ 0 è¡¨ç¤º SELECT ç»“æœçš„ç¬¬ä¸€è¡Œï¼Œ3 è¡¨ç¤ºåœ¨ BlockRecord è¿™ä¸ªè¡¨é‡Œè¾¹ï¼ŒBlock çš„äºŒè¿›åˆ¶ BLOB æ˜¯ç¬¬å››åˆ—ï¼Œå‚è€ƒæœ¬ç« åº•éƒ¨çš„è¡¨å®šä¹‰éƒ¨åˆ† block_records_201645 = BlockRecord.from_bytes(rows[0][3]) dir(block_records_201645) # å¯ä»¥æŸ¥çœ‹ä¸€äº›å±æ€§ is_transaction_blockï¼Œtimestampï¼Œreward_claims_incorporated In [174]: block_records_201645.is_transaction_block Out[174]: True In [182]: from datetime import datetime In [183]: datetime.fromtimestamp(block_records_201645.timestamp) Out[183]: datetime.datetime(2021, 4, 29, 10, 8, 1) In [190]: block_records_201645.reward_claims_incorporated[0].to_json_dict() Out[190]: {'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6', 'amount': 1750000000000} # å¯ä»¥å¿«é€Ÿ print çœ‹å¤§éƒ¨åˆ†ä¿¡æ¯ print(block_records_201645) block_records_201645 çš„æ‰“å°ç»“æœå¦‚ä¸‹ã€‚ æ³¨æ„ï¼Œè¿™é‡Œæˆ‘æˆªæ–­äº†ä¸€äº›æ•°æ® {'challenge_block_info_hash': '0x4a562f1ffa7a06fe76b1df74dbdd6bdcfbf63139a6f1fc3291c606d7c976abf6', 'challenge_vdf_output': {'data': '0x0200a6b38d6b58d17129d71737088772561f22a44ef302fe45a70a763b878f998abfe35946df720bcb5d78e214b667bce801d597b46c867928c4b8926c342375a961f36cd63ec698bc25e5ce48c45d9a2074eded0e42d24dd1b50a59e699f671f0900100'}, 'deficit': 16, 'farmer_puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba', 'fees': 0, 'finished_challenge_slot_hashes': ['0x2b1a7b4859a8d3597b8e6cbe3b27ab97212be8b19e6867f2a4d0eef26c36340f'], 'finished_infused_challenge_slot_hashes': ['0xd0185a6493b10d84e696c6fc55ec1920e8a96791a604dedfe77635da460f354d'], 'finished_reward_slot_hashes': ['0xe2bcbf560471131a7fb87ffe3f9ddde03166a9b0092a50f1ed1599715857c365'], 'header_hash': '0x2791729e1c914f9c3908a0ad895b5846c86fc4e207cc463820123e9a299c39f3', 'height': 201645, 'infused_challenge_vdf_output': None, 'overflow': True, 'pool_puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba', 'prev_hash': '0xf126ecf64473beb9ae5b84137788100feb9d731c604877c0744cdc6025f4cbeb', 'prev_transaction_block_hash': '0x7103fe2f1aa96998f9ccf6fc98561b64c5f7a98cf942335c4c927fb2eaa9325a', 'prev_transaction_block_height': 201643, 'required_iters': 95752, 'reward_claims_incorporated': [{'amount': 1750000000000, 'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6'}, {'amount': 250000000000, 'parent_coin_info': '0x3ff07eb358e8255a65c30a2dce0e5fbb000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6'}, {'amount': 1750000000000, 'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313aa', 'puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba'}, {'amount': 250000000000, 'parent_coin_info': '0x3ff07eb358e8255a65c30a2dce0e5fbb000000000000000000000000000313a8', 'puzzle_hash': '0xcf178071f6aa6cb1c92f00943424bcc8cb774449bd60058fc08e9894f49a1ca4'}], 'reward_infusion_new_challenge': '0x660886f4ab030c07755f53362ae4253dfa93ea853cbc321218f58f159c75adaa', 'signage_point_index': 63, 'sub_epoch_summary_included': None, 'sub_slot_iters': 99614720, 'timestamp': 1619662081, 'total_iters': 660123219464, 'weight': 4121254} å¦å¤–ï¼Œæˆ‘ä»¬å–çš„è¿™ä¸ªè¡¨çš„å®šä¹‰å¦‚ä¸‹ã€‚ CREATETABLEblock_records(header_hashtextPRIMARYKEY,prev_hashtext,heightbigint,blockblob,#","date":"2021-05-26","objectID":"/nebula-chia/:2:3","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#222-chia-å¸è®°å½•"},{"categories":["Nebula Graph"],"content":"2.2 Chia é“¾çš„æ•°æ®2.2.1 åŒºå—è®°å½•åœ¨ä¸Šä¸€æ­¥çš„ IPython çª—å£ä¸‹ã€‚ # æ³¨æ„ï¼Œè¿™é‡Œçš„è·¯å¾„çš„å‰ç¼€æ˜¯æˆ‘ä»¬è‡ªå·±çš„å®¶ç›®å½•ï¼Œä¸åŒæ“ä½œç³»ç»Ÿï¼Œä¸åŒçš„ç”¨æˆ·éƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚ chia_db_path = \"/Users/weyl/.chia/mainnet/db/blockchain_v1_mainnet.sqlite\" cur = con.cursor() # è¿™é‡Œæˆ‘ä»¬å–ç¬¬ 201645 é«˜çš„åŒºå— rows = list(cur.execute('SELECT * FROM block_records WHERE height = 201645')) # è¿™é‡Œ 0 è¡¨ç¤º SELECT ç»“æœçš„ç¬¬ä¸€è¡Œï¼Œ3 è¡¨ç¤ºåœ¨ BlockRecord è¿™ä¸ªè¡¨é‡Œè¾¹ï¼ŒBlock çš„äºŒè¿›åˆ¶ BLOB æ˜¯ç¬¬å››åˆ—ï¼Œå‚è€ƒæœ¬ç« åº•éƒ¨çš„è¡¨å®šä¹‰éƒ¨åˆ† block_records_201645 = BlockRecord.from_bytes(rows[0][3]) dir(block_records_201645) # å¯ä»¥æŸ¥çœ‹ä¸€äº›å±æ€§ is_transaction_blockï¼Œtimestampï¼Œreward_claims_incorporated In [174]: block_records_201645.is_transaction_block Out[174]: True In [182]: from datetime import datetime In [183]: datetime.fromtimestamp(block_records_201645.timestamp) Out[183]: datetime.datetime(2021, 4, 29, 10, 8, 1) In [190]: block_records_201645.reward_claims_incorporated[0].to_json_dict() Out[190]: {'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6', 'amount': 1750000000000} # å¯ä»¥å¿«é€Ÿ print çœ‹å¤§éƒ¨åˆ†ä¿¡æ¯ print(block_records_201645) block_records_201645 çš„æ‰“å°ç»“æœå¦‚ä¸‹ã€‚ æ³¨æ„ï¼Œè¿™é‡Œæˆ‘æˆªæ–­äº†ä¸€äº›æ•°æ® {'challenge_block_info_hash': '0x4a562f1ffa7a06fe76b1df74dbdd6bdcfbf63139a6f1fc3291c606d7c976abf6', 'challenge_vdf_output': {'data': '0x0200a6b38d6b58d17129d71737088772561f22a44ef302fe45a70a763b878f998abfe35946df720bcb5d78e214b667bce801d597b46c867928c4b8926c342375a961f36cd63ec698bc25e5ce48c45d9a2074eded0e42d24dd1b50a59e699f671f0900100'}, 'deficit': 16, 'farmer_puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba', 'fees': 0, 'finished_challenge_slot_hashes': ['0x2b1a7b4859a8d3597b8e6cbe3b27ab97212be8b19e6867f2a4d0eef26c36340f'], 'finished_infused_challenge_slot_hashes': ['0xd0185a6493b10d84e696c6fc55ec1920e8a96791a604dedfe77635da460f354d'], 'finished_reward_slot_hashes': ['0xe2bcbf560471131a7fb87ffe3f9ddde03166a9b0092a50f1ed1599715857c365'], 'header_hash': '0x2791729e1c914f9c3908a0ad895b5846c86fc4e207cc463820123e9a299c39f3', 'height': 201645, 'infused_challenge_vdf_output': None, 'overflow': True, 'pool_puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba', 'prev_hash': '0xf126ecf64473beb9ae5b84137788100feb9d731c604877c0744cdc6025f4cbeb', 'prev_transaction_block_hash': '0x7103fe2f1aa96998f9ccf6fc98561b64c5f7a98cf942335c4c927fb2eaa9325a', 'prev_transaction_block_height': 201643, 'required_iters': 95752, 'reward_claims_incorporated': [{'amount': 1750000000000, 'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6'}, {'amount': 250000000000, 'parent_coin_info': '0x3ff07eb358e8255a65c30a2dce0e5fbb000000000000000000000000000313ab', 'puzzle_hash': '0xbbb014f41d88c74b78501b36e4863d3382bfda9ae3c4d30a1b6df72b962502b6'}, {'amount': 1750000000000, 'parent_coin_info': '0xccd5bb71183532bff220ba46c268991a000000000000000000000000000313aa', 'puzzle_hash': '0x4bc6435b409bcbabe53870dae0f03755f6aabb4594c5915ec983acf12a5d1fba'}, {'amount': 250000000000, 'parent_coin_info': '0x3ff07eb358e8255a65c30a2dce0e5fbb000000000000000000000000000313a8', 'puzzle_hash': '0xcf178071f6aa6cb1c92f00943424bcc8cb774449bd60058fc08e9894f49a1ca4'}], 'reward_infusion_new_challenge': '0x660886f4ab030c07755f53362ae4253dfa93ea853cbc321218f58f159c75adaa', 'signage_point_index': 63, 'sub_epoch_summary_included': None, 'sub_slot_iters': 99614720, 'timestamp': 1619662081, 'total_iters': 660123219464, 'weight': 4121254} å¦å¤–ï¼Œæˆ‘ä»¬å–çš„è¿™ä¸ªè¡¨çš„å®šä¹‰å¦‚ä¸‹ã€‚ CREATETABLEblock_records(header_hashtextPRIMARYKEY,prev_hashtext,heightbigint,blockblob,#","date":"2021-05-26","objectID":"/nebula-chia/:2:3","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#223-puzzles-addressåœ°å€"},{"categories":["Nebula Graph"],"content":"3. å¦‚ä½•æ¢ç´¢ Chia é“¾éšç€æˆ‘ä»¬ä¹‹å‰åˆ†æçš„ä¿¡æ¯ï¼Œè‡ªç„¶åœ°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Chia åŒºå—é“¾ä¸­çš„ä¿¡æ¯å–å‡ºæ¥ï¼Œç”¨å›¾ï¼ˆGraphï¼‰æ¥è¡¨ç¤ºï¼Œè¿™é‡Œçš„å›¾å¹¶ä¸æ˜¯ï¼ˆGraphicï¼‰å›¾å½¢ã€å›¾ç”»çš„æ„æ€ï¼Œæ˜¯æ•°å­¦ã€å›¾è®ºä¸­çš„å›¾ã€‚ åœ¨å›¾çš„è¯­å¢ƒä¸‹ï¼Œæœ€ä¸»è¦çš„ä¸¤ä¸ªå…ƒç´ å°±æ˜¯é¡¶ç‚¹ï¼ˆVertexï¼‰å’Œè¾¹ï¼ˆEdgeï¼‰ã€‚ é¡¶ç‚¹è¡¨ç¤ºä¸€ä¸ªå®ä½“ï¼Œè€Œè¾¹è¡¨ç¤ºå®ä½“ä¹‹é—´çš„æŸç§å…³ç³»ï¼Œè¿™ç§å…³ç³»å¯ä»¥æ˜¯å¯¹ç­‰çš„ï¼ˆæ— æ–¹å‘çš„ï¼‰ä¹Ÿå¯ä»¥æ˜¯æœ‰æ–¹å‘çš„ã€‚ è¿™é‡Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™é‡Œçš„ä¿¡æ¯æŠ½è±¡æ˜ å°„åˆ°å¦‚å›¾çš„å›¾æ¨¡å‹é‡Œï¼š Block é¡¶ç‚¹ Coin é¡¶ç‚¹ Puzzle é¡¶ç‚¹ spends è¾¹ï¼ˆBlock åˆ° Coinï¼‰ confirms è¾¹ ï¼ˆBlock åˆ° Coinï¼‰ belongs_to è¾¹ï¼ˆCoin åˆ° Puzzleï¼‰ è¿™é‡Œï¼Œæˆ‘ä»¬åº”ç”¨çš„å›¾æ˜¯ä¸€ç§å«åšå±æ€§å›¾çš„å½¢å¼ï¼Œé™¤äº†ç‚¹å’Œè¾¹çš„å…³ç³»ä¹‹å¤–ã€‚è¿™ä¸¤ç§å®ä½“ï¼ˆç‚¹ã€è¾¹ï¼‰è¿˜æœ‰å…¶ä»–ä¿¡æ¯åªå’Œå®ƒä»¬çš„ä¸€ä¸ªå®ä¾‹ç›¸å…³ï¼Œæ‰€ä»¥å†å®šä¹‰ä¸ºé¡¶ç‚¹ã€è¾¹å°±ä¸æ˜¯å¾ˆé€‚åˆï¼Œè¿™äº›ä¿¡æ¯å°±ä½œä¸ºç‚¹ã€è¾¹çš„å±æ€§ï¼ˆprepertyï¼‰å­˜åœ¨ã€‚ è¿™ç§ä¸ºäº†å¤„ç†å®ä½“ä¹‹é—´å…³è”ã€æ¶‰åŠå®ä½“ã€å…³è”çš„å±æ€§ä¿¡æ¯çš„ï¼Œä¹Ÿå°±æ˜¯\"å±æ€§å›¾\"çš„å­˜å‚¨ä¿¡æ¯çš„æ–¹å¼åœ¨è®¡ç®—æœºé¢†åŸŸè¶Šæ¥è¶Šæµè¡Œï¼Œç”šè‡³æœ‰ä¸“é—¨ä¸ºæ­¤ç»“æ„è€ŒåŸç”Ÿå¼€å‘çš„æ•°æ®åº“â€”â€”å›¾æ•°æ®åº“ï¼ˆGraph Databaseï¼‰ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨çš„å°±æ˜¯ä¸€ä¸ªå«åš Nebula Graph çš„å›¾æ•°æ®åº“ï¼Œå®ƒæ˜¯ä¸€ä¸ªç°ä»£çš„ã€ä¸ºè¶…å¤§è§„æ¨¡åˆ†éƒ¨ç½²æ¶æ„è®¾è®¡çš„ã€åŸç”Ÿå­˜å‚¨ã€æŸ¥è¯¢ã€è®¡ç®—å›¾æ•°æ®çš„é¡¹ç›®ï¼Œæ›´æ£’çš„æ˜¯ï¼Œå®ƒæ˜¯äº§ç”Ÿäºç¤¾åŒºçš„å¼€æºäº§å“ã€‚ Tips: å®‰è£… Nebula Graph ä¸€èˆ¬æ¥è¯´ï¼Œé¢å‘è¶…å¤§è§„æ¨¡æ•°æ®çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¤©ç„¶çš„éƒ½æ˜¯ä¸å®¹æ˜“è½»é‡éƒ¨ç½²çš„ï¼Œå¤§å®¶å¦‚æœç¬¬ä¸€æ¬¡ä½¿ç”¨çš„è¯å¯ä»¥è¯•è¯•æˆ‘å†™çš„ä¸€ä¸ªå«åš nebula-up çš„å°å·¥å…·ï¼Œå¯ä»¥ä¸€è¡ŒæŒ‡ä»¤éƒ¨ç½²ä¸€ä¸ªç”¨æ¥è¯•ç”¨ã€å­¦ä¹ çš„ Nebula Graph é›†ç¾¤ï¼Œåœ°å€åœ¨è¿™é‡Œï¼š https://github.com/wey-gu/nebula-up/ ã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:3:0","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#3-å¦‚ä½•æ¢ç´¢-chia-é“¾"},{"categories":["Nebula Graph"],"content":"3.1 Nebula Graph å¯¼å…¥ Chia æ•°æ®åˆ°å›¾æ•°æ®åº“æˆ‘ä»¬åˆ†ä¸¤æ­¥èµ°ï¼Œç¬¬ä¸€æ­¥è¿™æŠŠ Chia Network æ•°æ®è½¬æ¢æˆ CSV æ–‡ä»¶ï¼Œç¬¬äºŒæ­¥ä½¿ç”¨ Nebula çš„ Nebula-Importer æŠŠæ•°æ®å¯¼å…¥ Nebula Graphã€‚ 3.1.1 æ•°æ®è½¬æ¢è¿™éƒ¨åˆ†çš„ä»£ç æˆ‘å¼€æºåœ¨è¿™é‡Œäº†: https://github.com/wey-gu/nebula-chia ä½¿ç”¨å®ƒåªéœ€è¦åœ¨ Chia Network çš„ python venv ä¸‹å®‰è£…å®ƒ: python3 -m pip install nebula-chia ç„¶åè°ƒç”¨ ChaiBatchConvertor å°±å¯ä»¥åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ª CSV æ–‡ä»¶ã€‚ è¿™é‡Œè¾¹æœ‰ä¸€äº›å¯ä»¥é…ç½®çš„å‚æ•°ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä»£ç  nebulachia/convertor.py from nebulachia.convertor import ChiaBatchConvertor c = ChaiBatchConvertor( block_record_limit=0, coin_record_limit=0, write_batch_size=10000) c.convert_block_record() c.convert_coin_record() ç”Ÿæˆçš„æ–‡ä»¶ï¼š $ ls -lth -rw-r--r-- 1 weyl staff 173M May 19 13:01 coin_record.csv -rw-r--r-- 1 weyl staff 77M May 19 12:59 block_record.csv è¿™é‡Œè¾¹å­—æ®µçš„å«ä¹‰å’Œç±»å‹ï¼Œå¯ä»¥å‚è€ƒä»£ç ä¸­ block_record_row å’Œ coin_record_row çš„ __doc__ In [466]: print(c.coin_record_row.__doc__) Parse row and return a CSV block coin row list. CREATE TABLE coin_record( coin_name text PRIMARY KEY, confirmed_index bigint, spent_index bigint, spent int, coinbase int, puzzle_hash text, coin_parent text, amount blob, timestamp bigint) Coin Record CSV Head: 0 1(int) 2(int) 3(bool) coin_name|confirmed_index|spent_index|spent| 4(bool) 5 6 7(int) coinbase|puzzle_hash|coin_parent|amount| 8(timestamp) timestamp| 9 10 confirmed_hash|spent_hash In [467]: print(c.block_record_row.__doc__) Parse row and return a CSV block record row list. CREATE TABLE block_records( header_hash text PRIMARY KEY, prev_hash text, height bigint, block blob, sub_epoch_summary blob, is_peak tinyint, is_block tinyint) Block Record CSV Head: 0 1 2(int) 3(bool) 4(bool) header_hash|prev_hash|height|is_peak|is_block| 5(int) deficit| 6 challenge_block_info_hash| 7 farmer_puzzle_hash| 8(int) fees| 9 prev_transaction_block_hash| 10 prev_transaction_block_height| 11 12(int) required_iters|signage_point_index| 13(timestamp) timestamp 3.1.1 æ•°æ®å¯¼å…¥æœ‰äº† CSV æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© Nebula-Importer å¯¼å…¥æ•°æ®åˆ°å›¾æ•°æ®åº“ä¸­ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬å†™å¥½äº† nebula-importer çš„é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…æ¶µäº†å¦‚ä¸‹ä¿¡æ¯: åœ¨ Nebula Graph ä¸­åˆ›å»ºéœ€è¦çš„æ•°æ®æ¨¡å‹ Schemaï¼Œè¿™å’Œæˆ‘ä»¬å‰è¾¹åšçš„å›¾æ˜ å°„çš„ä¿¡æ¯æ˜¯ç­‰ä»·çš„ æè¿° CSV æ–‡ä»¶ä¹‹ä¸­çš„ Column çš„æ•°æ®åˆ°å›¾æ¨¡å‹ï¼ˆç‚¹ï¼Œè¾¹ï¼Œç‚¹æˆ–è¾¹çš„å±æ€§ï¼‰æ˜ å°„å…³ç³» # è¿™é‡Œï¼Œæˆ‘çš„ csv æ–‡ä»¶å’Œ é…ç½®æ–‡ä»¶éƒ½æ”¾åœ¨ /home/wei.gu/chia ä¹‹ä¸‹ # æˆ‘ä½¿ç”¨ docker-compose é»˜è®¤é…ç½®éƒ¨ç½²çš„ Nebula Graph, # å®ƒåˆ›å»ºäº†å« nebula-docker-compose_nebula-net çš„ docker ç½‘ç»œ docker run --rm -ti \\ --network=nebula-docker-compose_nebula-net \\ -v /home/wei.gu/chia/nebula-chia.yaml:/root/nebula-chia.yaml \\ -v /home/wei.gu/chia:/root \\ vesoft/nebula-importer:v2 \\ --config /root/nebula-chia.yaml è¿™é‡Œæˆ‘å±•ç¤ºä¸€ä¸ªå¯¼å…¥çš„ç»“æœç¤ºä¾‹ï¼Œæˆ‘åœ¨å•æœºéƒ¨ç½²çš„ Nebula Graph é‡Œå¯¼å…¥äº†æˆ‘ä¸€ä¸¤å‘¨ä¹‹å‰å–çš„å…¨é‡ Chia Network æ•°æ®çš„ç»“æœã€‚ ... 2021/05/19 09:55:09 [INFO] reader.go:180: Total lines of file(/root/coin_record.csv) is: 547557, error lines: 0 2021/05/19 09:55:09 [INFO] statsmgr.go:61: Done(/root/coin_record.csv): Time(4385.88s), Finished(4512927), Failed(0), Latency AVG(1305us), Batches Req AVG(2015us), Rows AVG(1028.42/s) 2021/05/19 09:55:10 --- END OF NEBULA IMPORTER --- ","date":"2021-05-26","objectID":"/nebula-chia/:3:1","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#31-nebula-graph-å¯¼å…¥-chia-æ•°æ®åˆ°å›¾æ•°æ®åº“"},{"categories":["Nebula Graph"],"content":"3.1 Nebula Graph å¯¼å…¥ Chia æ•°æ®åˆ°å›¾æ•°æ®åº“æˆ‘ä»¬åˆ†ä¸¤æ­¥èµ°ï¼Œç¬¬ä¸€æ­¥è¿™æŠŠ Chia Network æ•°æ®è½¬æ¢æˆ CSV æ–‡ä»¶ï¼Œç¬¬äºŒæ­¥ä½¿ç”¨ Nebula çš„ Nebula-Importer æŠŠæ•°æ®å¯¼å…¥ Nebula Graphã€‚ 3.1.1 æ•°æ®è½¬æ¢è¿™éƒ¨åˆ†çš„ä»£ç æˆ‘å¼€æºåœ¨è¿™é‡Œäº†: https://github.com/wey-gu/nebula-chia ä½¿ç”¨å®ƒåªéœ€è¦åœ¨ Chia Network çš„ python venv ä¸‹å®‰è£…å®ƒ: python3 -m pip install nebula-chia ç„¶åè°ƒç”¨ ChaiBatchConvertor å°±å¯ä»¥åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ª CSV æ–‡ä»¶ã€‚ è¿™é‡Œè¾¹æœ‰ä¸€äº›å¯ä»¥é…ç½®çš„å‚æ•°ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä»£ç  nebulachia/convertor.py from nebulachia.convertor import ChiaBatchConvertor c = ChaiBatchConvertor( block_record_limit=0, coin_record_limit=0, write_batch_size=10000) c.convert_block_record() c.convert_coin_record() ç”Ÿæˆçš„æ–‡ä»¶ï¼š $ ls -lth -rw-r--r-- 1 weyl staff 173M May 19 13:01 coin_record.csv -rw-r--r-- 1 weyl staff 77M May 19 12:59 block_record.csv è¿™é‡Œè¾¹å­—æ®µçš„å«ä¹‰å’Œç±»å‹ï¼Œå¯ä»¥å‚è€ƒä»£ç ä¸­ block_record_row å’Œ coin_record_row çš„ __doc__ In [466]: print(c.coin_record_row.__doc__) Parse row and return a CSV block coin row list. CREATE TABLE coin_record( coin_name text PRIMARY KEY, confirmed_index bigint, spent_index bigint, spent int, coinbase int, puzzle_hash text, coin_parent text, amount blob, timestamp bigint) Coin Record CSV Head: 0 1(int) 2(int) 3(bool) coin_name|confirmed_index|spent_index|spent| 4(bool) 5 6 7(int) coinbase|puzzle_hash|coin_parent|amount| 8(timestamp) timestamp| 9 10 confirmed_hash|spent_hash In [467]: print(c.block_record_row.__doc__) Parse row and return a CSV block record row list. CREATE TABLE block_records( header_hash text PRIMARY KEY, prev_hash text, height bigint, block blob, sub_epoch_summary blob, is_peak tinyint, is_block tinyint) Block Record CSV Head: 0 1 2(int) 3(bool) 4(bool) header_hash|prev_hash|height|is_peak|is_block| 5(int) deficit| 6 challenge_block_info_hash| 7 farmer_puzzle_hash| 8(int) fees| 9 prev_transaction_block_hash| 10 prev_transaction_block_height| 11 12(int) required_iters|signage_point_index| 13(timestamp) timestamp 3.1.1 æ•°æ®å¯¼å…¥æœ‰äº† CSV æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© Nebula-Importer å¯¼å…¥æ•°æ®åˆ°å›¾æ•°æ®åº“ä¸­ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬å†™å¥½äº† nebula-importer çš„é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…æ¶µäº†å¦‚ä¸‹ä¿¡æ¯: åœ¨ Nebula Graph ä¸­åˆ›å»ºéœ€è¦çš„æ•°æ®æ¨¡å‹ Schemaï¼Œè¿™å’Œæˆ‘ä»¬å‰è¾¹åšçš„å›¾æ˜ å°„çš„ä¿¡æ¯æ˜¯ç­‰ä»·çš„ æè¿° CSV æ–‡ä»¶ä¹‹ä¸­çš„ Column çš„æ•°æ®åˆ°å›¾æ¨¡å‹ï¼ˆç‚¹ï¼Œè¾¹ï¼Œç‚¹æˆ–è¾¹çš„å±æ€§ï¼‰æ˜ å°„å…³ç³» # è¿™é‡Œï¼Œæˆ‘çš„ csv æ–‡ä»¶å’Œ é…ç½®æ–‡ä»¶éƒ½æ”¾åœ¨ /home/wei.gu/chia ä¹‹ä¸‹ # æˆ‘ä½¿ç”¨ docker-compose é»˜è®¤é…ç½®éƒ¨ç½²çš„ Nebula Graph, # å®ƒåˆ›å»ºäº†å« nebula-docker-compose_nebula-net çš„ docker ç½‘ç»œ docker run --rm -ti \\ --network=nebula-docker-compose_nebula-net \\ -v /home/wei.gu/chia/nebula-chia.yaml:/root/nebula-chia.yaml \\ -v /home/wei.gu/chia:/root \\ vesoft/nebula-importer:v2 \\ --config /root/nebula-chia.yaml è¿™é‡Œæˆ‘å±•ç¤ºä¸€ä¸ªå¯¼å…¥çš„ç»“æœç¤ºä¾‹ï¼Œæˆ‘åœ¨å•æœºéƒ¨ç½²çš„ Nebula Graph é‡Œå¯¼å…¥äº†æˆ‘ä¸€ä¸¤å‘¨ä¹‹å‰å–çš„å…¨é‡ Chia Network æ•°æ®çš„ç»“æœã€‚ ... 2021/05/19 09:55:09 [INFO] reader.go:180: Total lines of file(/root/coin_record.csv) is: 547557, error lines: 0 2021/05/19 09:55:09 [INFO] statsmgr.go:61: Done(/root/coin_record.csv): Time(4385.88s), Finished(4512927), Failed(0), Latency AVG(1305us), Batches Req AVG(2015us), Rows AVG(1028.42/s) 2021/05/19 09:55:10 --- END OF NEBULA IMPORTER --- ","date":"2021-05-26","objectID":"/nebula-chia/:3:1","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#311-æ•°æ®è½¬æ¢"},{"categories":["Nebula Graph"],"content":"3.1 Nebula Graph å¯¼å…¥ Chia æ•°æ®åˆ°å›¾æ•°æ®åº“æˆ‘ä»¬åˆ†ä¸¤æ­¥èµ°ï¼Œç¬¬ä¸€æ­¥è¿™æŠŠ Chia Network æ•°æ®è½¬æ¢æˆ CSV æ–‡ä»¶ï¼Œç¬¬äºŒæ­¥ä½¿ç”¨ Nebula çš„ Nebula-Importer æŠŠæ•°æ®å¯¼å…¥ Nebula Graphã€‚ 3.1.1 æ•°æ®è½¬æ¢è¿™éƒ¨åˆ†çš„ä»£ç æˆ‘å¼€æºåœ¨è¿™é‡Œäº†: https://github.com/wey-gu/nebula-chia ä½¿ç”¨å®ƒåªéœ€è¦åœ¨ Chia Network çš„ python venv ä¸‹å®‰è£…å®ƒ: python3 -m pip install nebula-chia ç„¶åè°ƒç”¨ ChaiBatchConvertor å°±å¯ä»¥åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ª CSV æ–‡ä»¶ã€‚ è¿™é‡Œè¾¹æœ‰ä¸€äº›å¯ä»¥é…ç½®çš„å‚æ•°ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä»£ç  nebulachia/convertor.py from nebulachia.convertor import ChiaBatchConvertor c = ChaiBatchConvertor( block_record_limit=0, coin_record_limit=0, write_batch_size=10000) c.convert_block_record() c.convert_coin_record() ç”Ÿæˆçš„æ–‡ä»¶ï¼š $ ls -lth -rw-r--r-- 1 weyl staff 173M May 19 13:01 coin_record.csv -rw-r--r-- 1 weyl staff 77M May 19 12:59 block_record.csv è¿™é‡Œè¾¹å­—æ®µçš„å«ä¹‰å’Œç±»å‹ï¼Œå¯ä»¥å‚è€ƒä»£ç ä¸­ block_record_row å’Œ coin_record_row çš„ __doc__ In [466]: print(c.coin_record_row.__doc__) Parse row and return a CSV block coin row list. CREATE TABLE coin_record( coin_name text PRIMARY KEY, confirmed_index bigint, spent_index bigint, spent int, coinbase int, puzzle_hash text, coin_parent text, amount blob, timestamp bigint) Coin Record CSV Head: 0 1(int) 2(int) 3(bool) coin_name|confirmed_index|spent_index|spent| 4(bool) 5 6 7(int) coinbase|puzzle_hash|coin_parent|amount| 8(timestamp) timestamp| 9 10 confirmed_hash|spent_hash In [467]: print(c.block_record_row.__doc__) Parse row and return a CSV block record row list. CREATE TABLE block_records( header_hash text PRIMARY KEY, prev_hash text, height bigint, block blob, sub_epoch_summary blob, is_peak tinyint, is_block tinyint) Block Record CSV Head: 0 1 2(int) 3(bool) 4(bool) header_hash|prev_hash|height|is_peak|is_block| 5(int) deficit| 6 challenge_block_info_hash| 7 farmer_puzzle_hash| 8(int) fees| 9 prev_transaction_block_hash| 10 prev_transaction_block_height| 11 12(int) required_iters|signage_point_index| 13(timestamp) timestamp 3.1.1 æ•°æ®å¯¼å…¥æœ‰äº† CSV æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© Nebula-Importer å¯¼å…¥æ•°æ®åˆ°å›¾æ•°æ®åº“ä¸­ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬å†™å¥½äº† nebula-importer çš„é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…æ¶µäº†å¦‚ä¸‹ä¿¡æ¯: åœ¨ Nebula Graph ä¸­åˆ›å»ºéœ€è¦çš„æ•°æ®æ¨¡å‹ Schemaï¼Œè¿™å’Œæˆ‘ä»¬å‰è¾¹åšçš„å›¾æ˜ å°„çš„ä¿¡æ¯æ˜¯ç­‰ä»·çš„ æè¿° CSV æ–‡ä»¶ä¹‹ä¸­çš„ Column çš„æ•°æ®åˆ°å›¾æ¨¡å‹ï¼ˆç‚¹ï¼Œè¾¹ï¼Œç‚¹æˆ–è¾¹çš„å±æ€§ï¼‰æ˜ å°„å…³ç³» # è¿™é‡Œï¼Œæˆ‘çš„ csv æ–‡ä»¶å’Œ é…ç½®æ–‡ä»¶éƒ½æ”¾åœ¨ /home/wei.gu/chia ä¹‹ä¸‹ # æˆ‘ä½¿ç”¨ docker-compose é»˜è®¤é…ç½®éƒ¨ç½²çš„ Nebula Graph, # å®ƒåˆ›å»ºäº†å« nebula-docker-compose_nebula-net çš„ docker ç½‘ç»œ docker run --rm -ti \\ --network=nebula-docker-compose_nebula-net \\ -v /home/wei.gu/chia/nebula-chia.yaml:/root/nebula-chia.yaml \\ -v /home/wei.gu/chia:/root \\ vesoft/nebula-importer:v2 \\ --config /root/nebula-chia.yaml è¿™é‡Œæˆ‘å±•ç¤ºä¸€ä¸ªå¯¼å…¥çš„ç»“æœç¤ºä¾‹ï¼Œæˆ‘åœ¨å•æœºéƒ¨ç½²çš„ Nebula Graph é‡Œå¯¼å…¥äº†æˆ‘ä¸€ä¸¤å‘¨ä¹‹å‰å–çš„å…¨é‡ Chia Network æ•°æ®çš„ç»“æœã€‚ ... 2021/05/19 09:55:09 [INFO] reader.go:180: Total lines of file(/root/coin_record.csv) is: 547557, error lines: 0 2021/05/19 09:55:09 [INFO] statsmgr.go:61: Done(/root/coin_record.csv): Time(4385.88s), Finished(4512927), Failed(0), Latency AVG(1305us), Batches Req AVG(2015us), Rows AVG(1028.42/s) 2021/05/19 09:55:10 --- END OF NEBULA IMPORTER --- ","date":"2021-05-26","objectID":"/nebula-chia/:3:1","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#311-æ•°æ®å¯¼å…¥"},{"categories":["Nebula Graph"],"content":"3.2 æ¢ç´¢ Chia çš„å›¾æ•°æ®3.2.1 ç”¨å›¾æ•°æ®åº“çš„ Querieså¯¼å…¥ Chia é“¾çš„ç½‘ç»œåˆ° Nebula Graph ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‡Œè¾¹å¿«é€ŸæŸ¥è¯¢æ•°æ®ä¹‹é—´çš„å…³è”ã€‚ æ¯”å¦‚è¿™ä¸ªæŸ¥è¯¢è¡¨ç¤ºä»åŒºå— 524aa2013781ff4cd9d2b5dc... æŸ¥èµ·ï¼Œç»è¿‡ä¸‰ç§è¾¹ farmer_puzzle, spends, confirms åŒå‘éå†çš„ç»“æœã€‚ GO5STEPSFROM\\\"524aa2013781ff4cd9d2b5dce40647b670d722e2de25bd2e2b79970a8ec435ee\"\\OVERfarmer_puzzle,spends,confirmsBIDIRECT...Got419437rows(timespent735120/1170946us)Wed,19May202110:11:28UTC å†æ¯”å¦‚ï¼Œè®¡ç®—ä¸€ä¸ª Puzzle åœ°å€ä¸Šçš„ä½™é¢ï¼ˆæ‰€æœ‰ coin çš„æ€»ä»·å€¼ï¼‰æ¯”å¦‚è¿™ä¸ªpuzzle bbe39134ccc32c08fdeff... GO1STEPFROM\"bbe39134ccc32c08fdeff4d2c19d1d1f4f7e48cdaf79d37397bc3136ce9b3cb7\"\\OVERbelongs_toREVERSELY\\YIELDCASE$$.coin.is_spent\\WHENtrueTHEN$$.coin.amount\\WHENfalseTHEN-$$.coin.amount\\ENDASAmount|YIELDsum($-.Amount) 3.2.2 ç”¨ Nebula Studio å¯è§†åŒ–æ¢ç´¢Nebula Graph ä¸ºæˆ‘ä»¬æä¾›äº†å›¾å½¢åŒ–ç•Œé¢ï¼Œæœ‰äº†å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ›´ç¬¦åˆäººè„‘çš„æ–¹å¼åœ°æŸ¥çœ‹ Chia Network ä¸­çš„æ•°æ®ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬è¿˜æ˜¯å›åˆ°ä¸Šè¾¹çš„é‚£ä¸ªåŒºå—ï¼Œä»è¿™é‡ŒæŸ¥è¯¢ã€‚ æˆ‘ä»¬å°±è·å¾—äº†è¿™ä¸ª block ç±»å‹çš„ä¸€ä¸ªç‚¹/ vertexã€‚æˆ‘ä»¬å¯ä»¥ä»ä»–å¼€å§‹è¿›ä¸€æ­¥æ¢ç´¢ï¼Œå…ˆé¼ æ ‡å•å‡»è¿™ä¸ªç‚¹ï¼Œåœ¨æ‹“å±•æ¡ä»¶é‡ŒæŠŠæ–¹å‘é€‰æ‹©åŒå‘ï¼Œé»˜è®¤çš„è¾¹ç±»å‹æ˜¯æ‰€æœ‰çš„è¾¹ç±»å‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠæ‰€æœ‰ æ­¥æ•°å†…ç›¸å…³è”çš„æ•°æ®ä¸€ä¸‹å­å…¨éƒ½æ‰¾å‡ºæ¥ã€‚ é€‰æ‹©å¥½æ‹“å±•æ¡ä»¶ä¹‹åï¼Œç‚¹å‡»æ‹“å±•å°±å¯ä»¥ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©äº†æ­¥æ•°ä¸º 1ï¼Œç‚¹å‡»æ‹“å±•ï¼ˆæˆ–è€…åŒå‡»è¦æ‹“å±•çš„ç‚¹ï¼‰ï¼Œä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€ŸåŒå‡»å…¶ä»–çš„ç‚¹ç»§ç»­æ‹“å±•ï¼Œè¿™æ˜¯æˆ‘é¼ æ ‡ç‚¹äº†å‡ æ¬¡ä¹‹åçœ‹åˆ°çš„æ ·å­ï¼š æˆ‘ä»¬æ¥ä¸‹æ¥å†è¯•è¯•æ‹“å±•çš„æ­¥æ•°ä¸º 2ï¼Œç‚¹å‡»æ‹“å±•ï¼ˆæˆ–è€…åŒå‡»è¦æ‹“å±•çš„ç‚¹ï¼‰ï¼Œçœ‹èµ·æ¥æ‰¾åˆ°äº†æœ‰æ„æ€çš„ä¿¡æ¯ã€‚ æˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªæœ‰å¾ˆå¤šè¾¹çš„é»‘è‰²çš„ç‚¹ã€‚ é€šè¿‡æŸ¥çœ‹è¿™ä¸ªç‚¹å’Œæˆ‘ä»¬å¼€å§‹æŸ¥çœ‹çš„ block ä¹‹é—´çš„è¾¹ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªç‚¹æ­£æ˜¯ farm è¿™ä¸ª block çš„åœ°å€ï¼Œè¿™ä¸ªåœ°å€ä¸‹è¾¹æœ‰éå¸¸å¤šçš„ coinã€‚ è¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œæœ‰äº†è¿™ä¸ªå¯¼å…¥åˆ° Nebula Graph å›¾æ•°æ®çš„åŸºç¡€ï¼Œæˆ‘ä»¬å¯ä»¥åšå¾ˆå¤šæœ‰æ„æ€çš„åˆ†æå’Œæ´å¯Ÿï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è¯•è¯•çœ‹ï¼Œå¾—åˆ°æ›´æœ‰æ„æ€çš„ç»“æœåˆ†äº«ç»™å…¶ä»–åŒå­¦ã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:3:2","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#32-æ¢ç´¢-chia-çš„å›¾æ•°æ®"},{"categories":["Nebula Graph"],"content":"3.2 æ¢ç´¢ Chia çš„å›¾æ•°æ®3.2.1 ç”¨å›¾æ•°æ®åº“çš„ Querieså¯¼å…¥ Chia é“¾çš„ç½‘ç»œåˆ° Nebula Graph ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‡Œè¾¹å¿«é€ŸæŸ¥è¯¢æ•°æ®ä¹‹é—´çš„å…³è”ã€‚ æ¯”å¦‚è¿™ä¸ªæŸ¥è¯¢è¡¨ç¤ºä»åŒºå— 524aa2013781ff4cd9d2b5dc... æŸ¥èµ·ï¼Œç»è¿‡ä¸‰ç§è¾¹ farmer_puzzle, spends, confirms åŒå‘éå†çš„ç»“æœã€‚ GO5STEPSFROM\\\"524aa2013781ff4cd9d2b5dce40647b670d722e2de25bd2e2b79970a8ec435ee\"\\OVERfarmer_puzzle,spends,confirmsBIDIRECT...Got419437rows(timespent735120/1170946us)Wed,19May202110:11:28UTC å†æ¯”å¦‚ï¼Œè®¡ç®—ä¸€ä¸ª Puzzle åœ°å€ä¸Šçš„ä½™é¢ï¼ˆæ‰€æœ‰ coin çš„æ€»ä»·å€¼ï¼‰æ¯”å¦‚è¿™ä¸ªpuzzle bbe39134ccc32c08fdeff... GO1STEPFROM\"bbe39134ccc32c08fdeff4d2c19d1d1f4f7e48cdaf79d37397bc3136ce9b3cb7\"\\OVERbelongs_toREVERSELY\\YIELDCASE$$.coin.is_spent\\WHENtrueTHEN$$.coin.amount\\WHENfalseTHEN-$$.coin.amount\\ENDASAmount|YIELDsum($-.Amount) 3.2.2 ç”¨ Nebula Studio å¯è§†åŒ–æ¢ç´¢Nebula Graph ä¸ºæˆ‘ä»¬æä¾›äº†å›¾å½¢åŒ–ç•Œé¢ï¼Œæœ‰äº†å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ›´ç¬¦åˆäººè„‘çš„æ–¹å¼åœ°æŸ¥çœ‹ Chia Network ä¸­çš„æ•°æ®ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬è¿˜æ˜¯å›åˆ°ä¸Šè¾¹çš„é‚£ä¸ªåŒºå—ï¼Œä»è¿™é‡ŒæŸ¥è¯¢ã€‚ æˆ‘ä»¬å°±è·å¾—äº†è¿™ä¸ª block ç±»å‹çš„ä¸€ä¸ªç‚¹/ vertexã€‚æˆ‘ä»¬å¯ä»¥ä»ä»–å¼€å§‹è¿›ä¸€æ­¥æ¢ç´¢ï¼Œå…ˆé¼ æ ‡å•å‡»è¿™ä¸ªç‚¹ï¼Œåœ¨æ‹“å±•æ¡ä»¶é‡ŒæŠŠæ–¹å‘é€‰æ‹©åŒå‘ï¼Œé»˜è®¤çš„è¾¹ç±»å‹æ˜¯æ‰€æœ‰çš„è¾¹ç±»å‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠæ‰€æœ‰ æ­¥æ•°å†…ç›¸å…³è”çš„æ•°æ®ä¸€ä¸‹å­å…¨éƒ½æ‰¾å‡ºæ¥ã€‚ é€‰æ‹©å¥½æ‹“å±•æ¡ä»¶ä¹‹åï¼Œç‚¹å‡»æ‹“å±•å°±å¯ä»¥ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©äº†æ­¥æ•°ä¸º 1ï¼Œç‚¹å‡»æ‹“å±•ï¼ˆæˆ–è€…åŒå‡»è¦æ‹“å±•çš„ç‚¹ï¼‰ï¼Œä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€ŸåŒå‡»å…¶ä»–çš„ç‚¹ç»§ç»­æ‹“å±•ï¼Œè¿™æ˜¯æˆ‘é¼ æ ‡ç‚¹äº†å‡ æ¬¡ä¹‹åçœ‹åˆ°çš„æ ·å­ï¼š æˆ‘ä»¬æ¥ä¸‹æ¥å†è¯•è¯•æ‹“å±•çš„æ­¥æ•°ä¸º 2ï¼Œç‚¹å‡»æ‹“å±•ï¼ˆæˆ–è€…åŒå‡»è¦æ‹“å±•çš„ç‚¹ï¼‰ï¼Œçœ‹èµ·æ¥æ‰¾åˆ°äº†æœ‰æ„æ€çš„ä¿¡æ¯ã€‚ æˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªæœ‰å¾ˆå¤šè¾¹çš„é»‘è‰²çš„ç‚¹ã€‚ é€šè¿‡æŸ¥çœ‹è¿™ä¸ªç‚¹å’Œæˆ‘ä»¬å¼€å§‹æŸ¥çœ‹çš„ block ä¹‹é—´çš„è¾¹ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªç‚¹æ­£æ˜¯ farm è¿™ä¸ª block çš„åœ°å€ï¼Œè¿™ä¸ªåœ°å€ä¸‹è¾¹æœ‰éå¸¸å¤šçš„ coinã€‚ è¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œæœ‰äº†è¿™ä¸ªå¯¼å…¥åˆ° Nebula Graph å›¾æ•°æ®çš„åŸºç¡€ï¼Œæˆ‘ä»¬å¯ä»¥åšå¾ˆå¤šæœ‰æ„æ€çš„åˆ†æå’Œæ´å¯Ÿï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è¯•è¯•çœ‹ï¼Œå¾—åˆ°æ›´æœ‰æ„æ€çš„ç»“æœåˆ†äº«ç»™å…¶ä»–åŒå­¦ã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:3:2","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#321-ç”¨å›¾æ•°æ®åº“çš„-queries"},{"categories":["Nebula Graph"],"content":"3.2 æ¢ç´¢ Chia çš„å›¾æ•°æ®3.2.1 ç”¨å›¾æ•°æ®åº“çš„ Querieså¯¼å…¥ Chia é“¾çš„ç½‘ç»œåˆ° Nebula Graph ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‡Œè¾¹å¿«é€ŸæŸ¥è¯¢æ•°æ®ä¹‹é—´çš„å…³è”ã€‚ æ¯”å¦‚è¿™ä¸ªæŸ¥è¯¢è¡¨ç¤ºä»åŒºå— 524aa2013781ff4cd9d2b5dc... æŸ¥èµ·ï¼Œç»è¿‡ä¸‰ç§è¾¹ farmer_puzzle, spends, confirms åŒå‘éå†çš„ç»“æœã€‚ GO5STEPSFROM\\\"524aa2013781ff4cd9d2b5dce40647b670d722e2de25bd2e2b79970a8ec435ee\"\\OVERfarmer_puzzle,spends,confirmsBIDIRECT...Got419437rows(timespent735120/1170946us)Wed,19May202110:11:28UTC å†æ¯”å¦‚ï¼Œè®¡ç®—ä¸€ä¸ª Puzzle åœ°å€ä¸Šçš„ä½™é¢ï¼ˆæ‰€æœ‰ coin çš„æ€»ä»·å€¼ï¼‰æ¯”å¦‚è¿™ä¸ªpuzzle bbe39134ccc32c08fdeff... GO1STEPFROM\"bbe39134ccc32c08fdeff4d2c19d1d1f4f7e48cdaf79d37397bc3136ce9b3cb7\"\\OVERbelongs_toREVERSELY\\YIELDCASE$$.coin.is_spent\\WHENtrueTHEN$$.coin.amount\\WHENfalseTHEN-$$.coin.amount\\ENDASAmount|YIELDsum($-.Amount) 3.2.2 ç”¨ Nebula Studio å¯è§†åŒ–æ¢ç´¢Nebula Graph ä¸ºæˆ‘ä»¬æä¾›äº†å›¾å½¢åŒ–ç•Œé¢ï¼Œæœ‰äº†å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ›´ç¬¦åˆäººè„‘çš„æ–¹å¼åœ°æŸ¥çœ‹ Chia Network ä¸­çš„æ•°æ®ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬è¿˜æ˜¯å›åˆ°ä¸Šè¾¹çš„é‚£ä¸ªåŒºå—ï¼Œä»è¿™é‡ŒæŸ¥è¯¢ã€‚ æˆ‘ä»¬å°±è·å¾—äº†è¿™ä¸ª block ç±»å‹çš„ä¸€ä¸ªç‚¹/ vertexã€‚æˆ‘ä»¬å¯ä»¥ä»ä»–å¼€å§‹è¿›ä¸€æ­¥æ¢ç´¢ï¼Œå…ˆé¼ æ ‡å•å‡»è¿™ä¸ªç‚¹ï¼Œåœ¨æ‹“å±•æ¡ä»¶é‡ŒæŠŠæ–¹å‘é€‰æ‹©åŒå‘ï¼Œé»˜è®¤çš„è¾¹ç±»å‹æ˜¯æ‰€æœ‰çš„è¾¹ç±»å‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠæ‰€æœ‰ æ­¥æ•°å†…ç›¸å…³è”çš„æ•°æ®ä¸€ä¸‹å­å…¨éƒ½æ‰¾å‡ºæ¥ã€‚ é€‰æ‹©å¥½æ‹“å±•æ¡ä»¶ä¹‹åï¼Œç‚¹å‡»æ‹“å±•å°±å¯ä»¥ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©äº†æ­¥æ•°ä¸º 1ï¼Œç‚¹å‡»æ‹“å±•ï¼ˆæˆ–è€…åŒå‡»è¦æ‹“å±•çš„ç‚¹ï¼‰ï¼Œä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€ŸåŒå‡»å…¶ä»–çš„ç‚¹ç»§ç»­æ‹“å±•ï¼Œè¿™æ˜¯æˆ‘é¼ æ ‡ç‚¹äº†å‡ æ¬¡ä¹‹åçœ‹åˆ°çš„æ ·å­ï¼š æˆ‘ä»¬æ¥ä¸‹æ¥å†è¯•è¯•æ‹“å±•çš„æ­¥æ•°ä¸º 2ï¼Œç‚¹å‡»æ‹“å±•ï¼ˆæˆ–è€…åŒå‡»è¦æ‹“å±•çš„ç‚¹ï¼‰ï¼Œçœ‹èµ·æ¥æ‰¾åˆ°äº†æœ‰æ„æ€çš„ä¿¡æ¯ã€‚ æˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªæœ‰å¾ˆå¤šè¾¹çš„é»‘è‰²çš„ç‚¹ã€‚ é€šè¿‡æŸ¥çœ‹è¿™ä¸ªç‚¹å’Œæˆ‘ä»¬å¼€å§‹æŸ¥çœ‹çš„ block ä¹‹é—´çš„è¾¹ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªç‚¹æ­£æ˜¯ farm è¿™ä¸ª block çš„åœ°å€ï¼Œè¿™ä¸ªåœ°å€ä¸‹è¾¹æœ‰éå¸¸å¤šçš„ coinã€‚ è¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œæœ‰äº†è¿™ä¸ªå¯¼å…¥åˆ° Nebula Graph å›¾æ•°æ®çš„åŸºç¡€ï¼Œæˆ‘ä»¬å¯ä»¥åšå¾ˆå¤šæœ‰æ„æ€çš„åˆ†æå’Œæ´å¯Ÿï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è¯•è¯•çœ‹ï¼Œå¾—åˆ°æ›´æœ‰æ„æ€çš„ç»“æœåˆ†äº«ç»™å…¶ä»–åŒå­¦ã€‚ ","date":"2021-05-26","objectID":"/nebula-chia/:3:2","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#322-ç”¨-nebula-studio-å¯è§†åŒ–æ¢ç´¢"},{"categories":["Nebula Graph"],"content":"4. æ€»ç»“è¿™ç¯‡æ–‡ç« é‡Œï¼Œåœ¨æˆ‘ä»¬ç®€å•ä»‹ç»äº† Chia Network ä¹‹åï¼Œæˆ‘ä»¬é¦–æ¬¡çš„å¸¦å¤§å®¶ä¸€èµ·ä»å®‰è£…ä¸€ä¸ª Chia ç»ˆç«¯ï¼Œåˆ°åˆ†æç»ˆç«¯åŒæ­¥åˆ°æœ¬åœ°çš„ Chia å…¨ç½‘æ•°æ®ï¼Œå€ŸåŠ©äº Chia ç»ˆç«¯å¼€æºçš„ Python ä»£ç åº“ï¼Œæˆ‘ä»¬åˆ†æäº†å…¨ç½‘æ•°æ®é‡Œçš„é‡è¦ä¿¡æ¯ã€‚ ä¹‹åï¼Œæˆ‘ä»¬å¼€æºäº†ä¸€ä¸ªå°å·¥å…· Nebula-Chiaï¼Œæœ‰äº†å®ƒï¼Œå°±å¯ä»¥æŠŠ Chia çš„å…¨ç½‘æ•°æ®è½¬æ¢æˆ CSV æ ¼å¼ï¼Œè¿™æ ·ï¼Œå°±å¯ä»¥å€ŸåŠ© nebula-importer æŠŠæ‰€æœ‰çš„æ•°æ®å¯¼å…¥åˆ°ä¸€ä¸ªå…ˆè¿›çš„å›¾æ•°æ®åº“ï¼ˆNebula Graphï¼‰ä¸­ã€‚ Nebula Graph çš„é¡¹ç›®åœ°å€æ˜¯ https://github.com/vesoft-inc/nebula-graph Nebula-Chia æˆ‘ä¹Ÿå¼€æºåœ¨ https://github.com/wey-gu/nebula-chia åœ¨å›¾æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†åšåŸºæœ¬ Query çš„ä¾‹å­å’Œå€ŸåŠ©å›¾æ•°æ®åº“è‡ªå¸¦çš„å¯è§†åŒ–å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“åœ°è·å– Chia å…¨ç½‘æ•°æ®ä¹‹é—´å…³è”å…³ç³»ï¼Œæœ‰äº†è¿™ä¸ªä½œä¸ºåŸºç¡€ï¼Œè¿™äº›æ•°æ®ä¸­æ´å¯Ÿçš„æ½œåŠ›å’Œå¯ä»¥å°è¯•çš„æœ‰æ„æ€äº‹æƒ…å¯ä»¥æ¯”è¾ƒç›´è§‚å’Œé«˜æ•ˆåœ°è¿›ä¸€æ­¥æ¢ç´¢äº†ï¼ æ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿ ","date":"2021-05-26","objectID":"/nebula-chia/:4:0","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#4-æ€»ç»“"},{"categories":["Nebula Graph"],"content":"5. å¼•ç”¨ https://www.chia.net/faq/ https://chialisp.com/docs/ https://www.chiaexplorer.com/chia-coins https://docs.google.com/document/d/1tmRIb7lgi4QfKkNaxuKOBHRmwbVlGL4f7EsBDr_5xZE https://github.com/sipa/bech32/tree/master/ref/python https://github.com/Chia-Network/chia-blockchain/blob/main/README.md https://www.chia.net/assets/ChiaGreenPaper.pdf https://docs.nebula-graph.com.cn é¢˜å›¾ç‰ˆæƒï¼šIcons8 Team ","date":"2021-05-26","objectID":"/nebula-chia/:5:0","series":null,"tags":["Nebula Graph","Chia Network"],"title":"ç”¨å›¾æ•°æ®åº“å¯è§†åŒ–æ¢ç´¢ Chia Network åŒºå—é“¾æ•°æ®","uri":"/nebula-chia/#5-å¼•ç”¨"},{"categories":null,"content":" Nebula-Corp-Rel-Graph Nebula-Corp-Rel-Graphï¼ŒåŸºäºå›¾æ•°æ®åº“çš„è‚¡æƒç©¿é€ç³»ç»Ÿ é˜…è¯»å…¨æ–‡ Nebula-Siwi Nebula-Siwiï¼ŒåŸºäºå›¾æ•°æ®åº“çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹ é˜…è¯»å…¨æ–‡ Nebula-Holdshare Nebula-Holdshareï¼Œå›¾æ•°æ®åº“åº”ç”¨ç¤ºä¾‹ï¼šè‚¡æƒå…³ç³»ç©¿é€ é˜…è¯»å…¨æ–‡ Nebula-KIND Nebula-Kindï¼Œæ— éœ€ä¾èµ–ï¼Œä¸€é”®å®‰è£…å°é²œåŸºäº Nebula Operator çš„ K8s Nebula Graph Clusterã€‚æ³¨ï¼š KIND æ˜¯ä¸€ä¸ª K8s çš„ SIGï¼Œä»£è¡¨ K8s in Dockerã€‚ é˜…è¯»å…¨æ–‡ Nebula-Up Nebula-upï¼Œä¸€é”®æ‹‰èµ·ä¸€ä¸ª Nebula æµ‹è¯•ç¯å¢ƒï¼Œæ”¯æŒ mscOSï¼ŒWindows 10ï¼ŒCentOS å’Œ Ubuntuã€‚ é˜…è¯»å…¨æ–‡ VSCode-nGQL VSCode-nGQLï¼ŒNebula Graph çš„ VS Code æ’ä»¶ï¼Œngql è¯­æ³•é«˜äº®ã€‚ é˜…è¯»å…¨æ–‡ Nebula-Chia Nebula-Chiaï¼Œå°† Chia Network å…¨é“¾å¯¼å…¥ Nebula Graph ä¸­çš„æ¢ç´¢åˆ†äº«å’Œè½¬æ¢å·¥å…·ï¼ˆä¸€å¹¶å¼€æºå‡ºæ¥ï¼‰ã€‚ é˜…è¯»å…¨æ–‡ IPython-nGQL Nebula Graph çš„ Jupyter Notebook å’Œ IPython æ’ä»¶ï¼Œæ–¹ä¾¿åœ¨ Notebook ä¹‹ä¸­åµŒå…¥ nGQL çš„ query å’Œ ç»“æœçš„è°ƒè¯•ã€‚ é˜…è¯»å…¨æ–‡ nebula-insights æœ¬æ–‡ä»‹ç»æˆ‘ä»¬å¦‚ä½•ç”¨å…¬æœ‰äº‘ Serverless æŠ€æœ¯ï¼šGoogle Cloud Schedulerï¼ŒGoogle Cloud Functions å’Œ BigQuery æ­å»ºæ•°æ®ç®¡é“ï¼Œæ”¶é›†æ¢ç´¢å¼€æºç¤¾åŒºæ´å¯Ÿã€‚å¹¶å°†å…¨éƒ¨ä»£ç å¼€æºåœ¨ GitHubã€‚ é˜…è¯»å…¨æ–‡ ","date":"2021-05-26","objectID":"/projects/:0:0","series":null,"tags":null,"title":"ä¸ªäººé¡¹ç›®","uri":"/projects/#"},{"categories":null,"content":" Nebula Operator Explained Nebula Graph K8s Operator ä»‹ç» é˜…è¯»å…¨æ–‡ Nebula Config Explained Nebula Graph é…ç½®è¯¦è§£ é˜…è¯»å…¨æ–‡ Nebula Index Demystified Nebula Graph åŸç”Ÿç´¢å¼•è§£è°œ é˜…è¯»å…¨æ–‡ Nebula Data Import Options Nebula Graph æä¾›äº†å¥½å¤šç§æ•°æ®å¯¼å…¥çš„å·¥å…·ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ é˜…è¯»å…¨æ–‡ Nebula Deployment Options Nebula Graph æœ‰å¾ˆå¤šç§åˆ†å‘ã€éƒ¨ç½²æ–¹å¼ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•é€‰æ‹©å®ƒä»¬å‘¢ï¼Ÿ é˜…è¯»å…¨æ–‡ Nebula Intro æ–°æ‰‹ç©è½¬ Nebula Graph ç³»åˆ—å¼€ç¯‡ã€‚ é˜…è¯»å…¨æ–‡ ","date":"2021-05-26","objectID":"/sketch-notes/:0:0","series":null,"tags":null,"title":"æ‰‹ç»˜ç¬”è®°","uri":"/sketch-notes/#"},{"categories":["sketches"],"content":"Nebula Graph Core Arch.","date":"2021-05-25","objectID":"/sketches/nebula-core-arch/","series":null,"tags":["Nebula Graph","Core"],"title":"Nebula Core Arch","uri":"/sketches/nebula-core-arch/"},{"categories":["sketches"],"content":"Bilibili ä¸Š ä¸‹ ","date":"2021-05-25","objectID":"/sketches/nebula-core-arch/:1:0","series":null,"tags":["Nebula Graph","Core"],"title":"Nebula Core Arch","uri":"/sketches/nebula-core-arch/#bilibili"},{"categories":["sketches"],"content":"Youtube ä¸Š ä¸‹ ","date":"2021-05-25","objectID":"/sketches/nebula-core-arch/:2:0","series":null,"tags":["Nebula Graph","Core"],"title":"Nebula Core Arch","uri":"/sketches/nebula-core-arch/#youtube"},{"categories":["Nebula Graph"],"content":"VSCode-ngql æ˜¯ Nebula Graph çš„ VS Code ä¹‹ä¸­å¯¹ nGQL è¯­æ³•é«˜äº®çš„æ’ä»¶ã€‚","date":"2021-05-05","objectID":"/vscode-ngql/","series":null,"tags":["Nebula Graph","vscode","ngql"],"title":"VSCode-ngqlï¼ŒNebula Graph çš„ VSCode è¯­æ³•é«˜äº®æ’ä»¶ã€‚","uri":"/vscode-ngql/"},{"categories":["Nebula Graph"],"content":" VSCode-ngql æ˜¯ Nebula Graph çš„ VS Code ä¹‹ä¸­å¯¹ nGQL è¯­æ³•é«˜äº®çš„æ’ä»¶ã€‚ æ‚¨å¯ä»¥ä» è¿™é‡Œ ç›´æ¥ä¸‹è½½å®‰è£…è¯•ç”¨ã€‚ ","date":"2021-05-05","objectID":"/vscode-ngql/:0:0","series":null,"tags":["Nebula Graph","vscode","ngql"],"title":"VSCode-ngqlï¼ŒNebula Graph çš„ VSCode è¯­æ³•é«˜äº®æ’ä»¶ã€‚","uri":"/vscode-ngql/#"},{"categories":["Nebula Graph"],"content":"VS Code nGQL Syntax Highlight","date":"2021-05-05","objectID":"/vscode-ngql/:0:0","series":null,"tags":["Nebula Graph","vscode","ngql"],"title":"VSCode-ngqlï¼ŒNebula Graph çš„ VSCode è¯­æ³•é«˜äº®æ’ä»¶ã€‚","uri":"/vscode-ngql/#vs-code-ngql-syntax-highlight"},{"categories":["Nebula Graph"],"content":"DownloadSearch ngql from the market or click here. ","date":"2021-05-05","objectID":"/vscode-ngql/:1:0","series":null,"tags":["Nebula Graph","vscode","ngql"],"title":"VSCode-ngqlï¼ŒNebula Graph çš„ VSCode è¯­æ³•é«˜äº®æ’ä»¶ã€‚","uri":"/vscode-ngql/#download"},{"categories":["Nebula Graph"],"content":"Features Highlighting all Keywords, Functions of a given .ngql file ","date":"2021-05-05","objectID":"/vscode-ngql/:2:0","series":null,"tags":["Nebula Graph","vscode","ngql"],"title":"VSCode-ngqlï¼ŒNebula Graph çš„ VSCode è¯­æ³•é«˜äº®æ’ä»¶ã€‚","uri":"/vscode-ngql/#features"},{"categories":["Nebula Graph"],"content":"Release Notes","date":"2021-05-05","objectID":"/vscode-ngql/:3:0","series":null,"tags":["Nebula Graph","vscode","ngql"],"title":"VSCode-ngqlï¼ŒNebula Graph çš„ VSCode è¯­æ³•é«˜äº®æ’ä»¶ã€‚","uri":"/vscode-ngql/#release-notes"},{"categories":["Nebula Graph"],"content":"0.0.1Initial release, only .ngql Syntax is supported. ","date":"2021-05-05","objectID":"/vscode-ngql/:3:1","series":null,"tags":["Nebula Graph","vscode","ngql"],"title":"VSCode-ngqlï¼ŒNebula Graph çš„ VSCode è¯­æ³•é«˜äº®æ’ä»¶ã€‚","uri":"/vscode-ngql/#001"},{"categories":["Nebula Graph"],"content":"0.0.2Lower supported vscode version till ^1.50.1 ","date":"2021-05-05","objectID":"/vscode-ngql/:3:2","series":null,"tags":["Nebula Graph","vscode","ngql"],"title":"VSCode-ngqlï¼ŒNebula Graph çš„ VSCode è¯­æ³•é«˜äº®æ’ä»¶ã€‚","uri":"/vscode-ngql/#002"},{"categories":["Nebula Graph"],"content":"Reference https://docs.nebula-graph.com.cn/ https://github.com/vesoft-inc/nebula-graph/blob/master/src/parser/scanner.lex ","date":"2021-05-05","objectID":"/vscode-ngql/:4:0","series":null,"tags":["Nebula Graph","vscode","ngql"],"title":"VSCode-ngqlï¼ŒNebula Graph çš„ VSCode è¯­æ³•é«˜äº®æ’ä»¶ã€‚","uri":"/vscode-ngql/#reference"},{"categories":["Big Data","Cloud"],"content":"æœ¬æ–‡ä»‹ç»æˆ‘ä»¬å¦‚ä½•ç”¨å…¬æœ‰äº‘ Serverless æŠ€æœ¯ï¼šGoogle Cloud Schedulerï¼ŒGoogle Cloud Functions å’Œ BigQuery æ­å»ºæ•°æ®ç®¡é“ï¼Œæ”¶é›†æ¢ç´¢å¼€æºç¤¾åŒºæ´å¯Ÿã€‚å¹¶å°†å…¨éƒ¨ä»£ç å¼€æºåœ¨ GitHubã€‚","date":"2021-05-03","objectID":"/nebula-insights/","series":null,"tags":["Nebula Graph","serverless","Cloud","FaaS"],"title":"Nebula-Insightsï¼Œæˆ‘ä»¬åŸºäº Serverless æ¶æ„çš„æ•°æ®ç®¡é“æ–¹æ¡ˆä¸ä»£ç åˆ†äº«ã€‚","uri":"/nebula-insights/"},{"categories":["Big Data","Cloud"],"content":" è¿™æ˜¯æˆ‘é¦–å‘åœ¨ Datawhale çš„æ–‡ç« ï¼Œä»‹ç»æˆ‘ä»¬å¦‚ä½•ç”¨å…¬æœ‰äº‘ Serverless æŠ€æœ¯ï¼šGoogle Cloud Schedulerï¼ŒGoogle Cloud Functions å’Œ BigQuery æ­å»ºæ•°æ®ç®¡é“ï¼Œæ”¶é›†æ¢ç´¢å¼€æºç¤¾åŒºæ´å¯Ÿã€‚å¹¶å°†å…¨éƒ¨ä»£ç å¼€æºåœ¨ GitHubã€‚ å¼•å­ æˆ‘ä»¬æƒ³è¦æ”¶é›†ä¸€äº›å¸®åŠ© Nebula Graph ç¤¾åŒºè¿è¥çš„ metricsï¼Œå¸Œæœ›èƒ½ä»ä¸åŒæ¥æºçš„æ•°æ®è‡ªåŠ¨åŒ–å‘¨æœŸæ€§æ”¶é›†ã€å¤„ç†ã€å¹¶æ–¹ä¾¿åœ°å±•ç°å‡ºæ¥åšæ•°æ®é©±åŠ¨åˆ†æçš„åŸºç¡€è®¾æ–½ã€‚ Nebula Graph æ˜¯ä¸€ä¸ªç°ä»£çš„å¼€æºåˆ†å¸ƒå¼å›¾æ•°æ®åº“(Graph Database)ï¼Œæ¬¢è¿åŒå­¦ä»¬ä»: å®˜ç½‘: https://nebula-graph.com.cn Bilibili: https://space.bilibili.com/472621355 GitHub:https://github.com/vesoft-inc/nebula-graph äº†è§£æˆ‘ä»¬å“ˆã€‚ ","date":"2021-05-03","objectID":"/nebula-insights/:0:0","series":null,"tags":["Nebula Graph","serverless","Cloud","FaaS"],"title":"Nebula-Insightsï¼Œæˆ‘ä»¬åŸºäº Serverless æ¶æ„çš„æ•°æ®ç®¡é“æ–¹æ¡ˆä¸ä»£ç åˆ†äº«ã€‚","uri":"/nebula-insights/#"},{"categories":["Big Data","Cloud"],"content":"éœ€æ±‚ æ–¹ä¾¿å¢åŠ æ–°çš„æ•°æ® æ•°æ®æ”¶é›†æ— éœ€äººä¸ºè§¦å‘ï¼ˆè‡ªåŠ¨ã€å‘¨æœŸæ€§ï¼‰ æ¯å¤©æ•°æ®é‡ä¸è¶…è¿‡1000æ¡ æ•°æ®å¯ä»¥ç”Ÿæˆ dashboardï¼Œä¹Ÿå¯ä»¥æ”¯æŒç»Ÿè®¡åˆ†æœŸ query é«˜å¯ç”¨ï¼Œæ•°æ®å®‰å…¨ ä½é¢„ç®—ï¼Œå°½å¯èƒ½ä¸éœ€è¦è¿ç»´äººåŠ› ","date":"2021-05-03","objectID":"/nebula-insights/:1:0","series":null,"tags":["Nebula Graph","serverless","Cloud","FaaS"],"title":"Nebula-Insightsï¼Œæˆ‘ä»¬åŸºäº Serverless æ¶æ„çš„æ•°æ®ç®¡é“æ–¹æ¡ˆä¸ä»£ç åˆ†äº«ã€‚","uri":"/nebula-insights/#éœ€æ±‚"},{"categories":["Big Data","Cloud"],"content":"éœ€æ±‚åˆ†ææˆ‘ä»¬éœ€è¦æ­å»ºä¸€ä¸ªç³»ç»Ÿèƒ½å®ç° ä¸€ä¸ªèƒ½å‘¨æœŸæ€§è§¦å‘è·å–æ•°æ®çš„äº‹ä»¶çš„æœåŠ¡: scheduler ä¸€ä¸ªè§¦å‘ä¹‹åï¼ŒæŠŠæ•°æ® ETL åˆ°æ•°æ®åº“ä¸­çš„æœåŠ¡: ETL worker ä¸€ä¸ªæ•°æ®ä»“åº“ ä¸€ä¸ªèƒ½å¤ŸæŠŠæ•°æ®åº“ä½œä¸ºæºï¼Œå…è®¸ç”¨æˆ· queryï¼Œå±•ç¤ºæ•°æ®çš„ç•Œé¢: Data-UI è¿™ä¸ªéœ€æ±‚çš„ç‰¹ç‚¹æ˜¯è™½ç„¶æ•°æ®é‡å¾ˆå°ã€ä½†æ˜¯è¦æ±‚æœåŠ¡é«˜å¯ç”¨ã€å®‰å…¨ã€‚å› ä¸ºè¿™ç§æƒ…å†µä¸‹è‡ªå»ºæœåŠ¡å™¨è¿˜éœ€è¦ä¿è¯HAå’Œæ•°æ®å®‰å…¨ä¼šä¸€å®šä¼šæ¶ˆè€—æ˜‚è´µè¿ç»´äººåŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½é‡é¿å…åœ¨è‡ªå·±ç»´æŠ¤çš„æœåŠ¡å™¨ä¸­æ­å»º scheduler, å’Œæ•°æ®åº“ã€‚ æœ€ç»ˆï¼Œæˆ‘ä»¬é€‰æ‹©äº†å°½é‡ä½¿ç”¨å…¬æœ‰äº‘çš„ aaS çš„æ–¹æ¡ˆ: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Google Cloud Scheduler â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º GitHub API Server â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Google Cloud Functions â”œâ”€â”€â”€â”¤ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Docker Hub API Server â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Google BigQuery â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ... â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Aliyun OSS API â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ Google Data Studio â”‚ â”‚ â”Œâ”€â”€â” â”‚ â”‚ â”Œâ”€â”€â” â”‚ â”‚ â”Œâ”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”´â”€â”€â”´â”€â”´â”€â”€â”´â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜ å› ä¸ºæˆ‘ä¸ªäººæ¯”è¾ƒç†Ÿæ‚‰ Google Cloud Platform(GCP)çš„åŸå› ï¼ŒåŠ ä¸ŠGCPåœ¨å¤§æ•°æ®å¤„ç†ä¸Šæ¯”è¾ƒé¢†å…ˆï¼Œå†åŠ ä¸ŠGoogleæä¾›çš„ free tieré¢åº¦éå¸¸å¤§æ–¹ï¼Œä»¥è‡³äºåœ¨æˆ‘ä»¬è¿™ä¸ªæ•°æ®é‡ä¸‹ï¼Œæ‰€æœ‰workloadéƒ½ä¼šæ˜¯å…è´¹çš„ã€‚ è¿™ä¸ªæ–¹æ¡ˆæœ€åé€‰æ‹©äº†å…¨æ ˆ Google Cloudï¼Œç„¶è€Œï¼Œè¿™å®é™…ä¸Šåªæ˜¯ä¸€ä¸ªå‚è€ƒï¼ŒåŒå­¦ä»¬å®Œå…¨å¯ä»¥åœ¨å…¶ä»–å…¬æœ‰äº‘æä¾›å•†é‚£é‡Œæ‰¾åˆ°å¯¹åº”çš„æœåŠ¡ã€‚ è¿™é‡Œæˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œ Google Cloud Scheduleræ˜¯è‡ªè§£é‡Šçš„ï¼Œä¸ç”¨å¤šä»‹ç»äº†ã€‚ è€Œ Google Cloud Functionsæ˜¯GCPçš„æ— æœåŠ¡å™¨(serverless)çš„ Function as a ServiceæœåŠ¡ï¼Œå®ƒçš„å¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥æŠŠæ— çŠ¶æ€çš„ event-driven çš„ workload ä»£ç æ”¾ä¸Šå»ï¼Œå®ƒæ˜¯æŒ‰éœ€ä»˜è´¹ï¼ˆpay as you go)çš„ï¼Œç±»ä¼¼çš„æœåŠ¡è¿˜æœ‰ Google Cloud Runï¼Œåè€…çš„åŒºåˆ«åœ¨äºæˆ‘ä»¬æä¾›çš„æ˜¯ä¸€ä¸ªdocker/containerï¼ˆè¿™ä½¿å¾—èƒ½æ”¯æŒçš„è¿è¡Œç¯å¢ƒå¯ä»¥ä½¿ä»»ä½•èƒ½è·‘åœ¨å®¹å™¨é‡Œçš„ä¸œè¥¿ï¼‰ï¼Œè€Œ Cloud Functionsæ˜¯æŠŠæˆ‘ä»¬çš„ä»£ç æ–‡ä»¶æ”¾ä¸Šå»ã€‚ä»–ä»¬çš„æ•ˆæœæ˜¯ç±»ä¼¼çš„ï¼Œå› ä¸ºæˆ‘å‡†å¤‡ç”¨Pythonæ¥åš ETLçš„ä¸œè¥¿ï¼ŒClouf Functionså·²ç»æ”¯æŒäº†ï¼Œæˆ‘å°±ç›´æ¥é€‰æ‹©å®ƒäº†ã€‚ åœ¨scheduleré‡Œè¾¹ï¼Œæˆ‘å®šä¹‰äº†æ¯ä¸€å¤©å®ƒå‘ä¸€ä¸ª pub/subï¼ˆç±»ä¼¼äºkafkaï¼Œè¿™é‡Œgoogleå¯ä»¥ä¿è¯è‡³å°‘å‘æˆåŠŸä¸€æ¬¡ï¼‰æ¶ˆæ¯ç»™ Cloud Functionsï¼Œç„¶å Cloud Functionsä¼šå»åš ETLçš„å·¥ä½œã€‚ è¿™é‡Œï¼Œå®é™…ä¸Šæˆ‘çš„è®¾è®¡é‡Œè¿™ä¸ªè§¦å‘çš„å‡½æ•°è°ƒä¼šæŠŠæ•°æ®ä»APIé‚£é‡Œè·å–ä¸‹æ¥ï¼Œåœ¨å†…å­˜é‡Œå¤„ç†å¥½ä¹‹åï¼Œå­˜å‚¨åˆ°åœ¨å¯¹è±¡å­˜å‚¨é‡Œä¸º JSON æ–‡ä»¶ï¼Œç„¶åå†è°ƒç”¨ Google BigQuery çš„ APIè®© BigQueryç›´æ¥ä»å¯¹å¯¹è±¡å­˜å‚¨é‡Œæ‹‰å– JSON æ–‡ä»¶ï¼Œå¯¼å…¥è®°å½•åˆ°ç›¸åº”çš„è¡¨ä¹‹ä¸­ã€‚ Google BigQuery ä½œä¸ºGCP ç‰¹åˆ«æœ‰ç«äº‰åŠ›çš„ä¸€ä¸ªäº§å“ï¼Œæ˜¯å®ƒæ•°æ®ä»“åº“ï¼ŒBigQuery å¯ä»¥æ— é™æ‰©å®¹ï¼Œæ”¯æŒæµ·é‡æ•°æ®å¯¼å…¥ï¼Œæ”¯æŒ SQL-like çš„ queryï¼Œè¿˜è‡ªå¸¦MLç®—æ³•ï¼Œé€šè¿‡SQLå°±èƒ½è°ƒç”¨è¿™äº›ç®—æ³•ã€‚å®ƒå¯ä»¥å’Œå¾ˆå¤šGCPä»¥åŠç¬¬ä¸‰æ–¹çš„ç»„ä»¶å¯ä»¥é›†æˆèµ·æ¥ã€‚ Google Data Studio æ˜¯GCPçš„æ•°æ® Insightsäº§å“ï¼Œå¦‚æœå¤§å®¶ç”¨è¿‡ Google Analytics åº”è¯¥å·²ç»ç”¨è¿‡å®ƒäº†ã€‚ ","date":"2021-05-03","objectID":"/nebula-insights/:1:1","series":null,"tags":["Nebula Graph","serverless","Cloud","FaaS"],"title":"Nebula-Insightsï¼Œæˆ‘ä»¬åŸºäº Serverless æ¶æ„çš„æ•°æ®ç®¡é“æ–¹æ¡ˆä¸ä»£ç åˆ†äº«ã€‚","uri":"/nebula-insights/#éœ€æ±‚åˆ†æ"},{"categories":["Big Data","Cloud"],"content":"æ•°æ®çš„è·å–ï¼ŒAPIæˆ‘ä»¬ç¬¬ä¸€é˜¶æ®µæƒ³è¦æ”¶é›†çš„æ•°æ®æ¥æºæ˜¯ GitHub ä¸Šï¼Œç¤¾åŒºé¡¹ç›®çš„ç»Ÿè®¡æ•°æ®ã€Docker Hubä¸Šï¼Œç¤¾åŒºé•œåƒçš„æ‹‰å–è®¡æ•°ï¼Œä¹‹åï¼Œä¼šå¢åŠ æ›´å¤šç»´åº¦çš„æ•°æ®ã€‚ Github API, ref: https://pygithub.readthedocs.io è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨äº†ä¸€ä¸ªGithub APIçš„ä¸€ä¸ª Python å°è£…ï¼Œä¸‹è¾¹æ˜¯åœ¨ IDLE/iPython/Jupyter é‡Œå°è¯•çš„ä¾‹å­ # å®ä¾‹åŒ–ä¸€ä¸ªclient g = Github(login_or_token=token, timeout=60, retry=Retry( total=10, status_forcelist=(500, 502, 504), backoff_factor=0.3)) # é…ç½®å¥½è¦è·å–çš„repoçš„ä¿¡æ¯ org_str = \"vesoft-inc\" org = g.get_organization(org_str) repos = org.get_repos() # è¿™é‡Œreposæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ–¹ä¾¿çœ‹åˆ°é‡Œè¾¹çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬æŠŠå®ƒ list ä¸€ä¸‹å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„repo: list(repos) [Repository(full_name=\"vesoft-inc/nebula\"), Repository(full_name=\"vesoft-inc/nebula-docs\"), Repository(full_name=\"vesoft-inc/nebula-dev-docker\"), Repository(full_name=\"vesoft-inc/github-statistics\"), Repository(full_name=\"vesoft-inc/nebula-docker-compose\"), Repository(full_name=\"vesoft-inc/nebula-go\"), Repository(full_name=\"vesoft-inc/nebula-java\"), Repository(full_name=\"vesoft-inc/nebula-python\"), Repository(full_name=\"vesoft-inc/nebula-importer\"), Repository(full_name=\"vesoft-inc/nebula-third-party\"), Repository(full_name=\"vesoft-inc/nebula-storage\"), Repository(full_name=\"vesoft-inc/nebula-graph\"), Repository(full_name=\"vesoft-inc/nebula-common\"), Repository(full_name=\"vesoft-inc/nebula-stats-exporter\"), Repository(full_name=\"vesoft-inc/nebula-web-docker\"), Repository(full_name=\"vesoft-inc/nebula-bench\"), Repository(full_name=\"vesoft-inc/nebula-console\"), Repository(full_name=\"vesoft-inc/nebula-docs-cn\"), Repository(full_name=\"vesoft-inc/nebula-chaos\"), Repository(full_name=\"vesoft-inc/nebula-clients\"), Repository(full_name=\"vesoft-inc/nebula-spark-utils\"), Repository(full_name=\"vesoft-inc/nebula-node\"), Repository(full_name=\"vesoft-inc/nebula-rust\"), Repository(full_name=\"vesoft-inc/nebula-cpp\"), Repository(full_name=\"vesoft-inc/nebula-http-gateway\"), Repository(full_name=\"vesoft-inc/nebula-flink-connector\"), Repository(full_name=\"vesoft-inc/nebula-community\"), Repository(full_name=\"vesoft-inc/nebula-br\"), Repository(full_name=\"vesoft-inc/.github\")] # repo0 æ˜¯ vesoft-inc/nebula è¿™ä¸ªrepoï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ get_clones_trafficï¼Œget_views_traffic æ¥è·å–è¿‡å»åå‡ å¤©çš„ cloneï¼Œview ç»Ÿè®¡ In [16]: repo0.get_clones_traffic() Out[16]: {'count': 362, 'uniques': 150, 'clones': [Clones(uniques=5, timestamp=2021-04-06 00:00:00, count=16), Clones(uniques=8, timestamp=2021-04-07 00:00:00, count=23), Clones(uniques=13, timestamp=2021-04-08 00:00:00, count=30), Clones(uniques=33, timestamp=2021-04-09 00:00:00, count=45), Clones(uniques=2, timestamp=2021-04-10 00:00:00, count=13), Clones(uniques=6, timestamp=2021-04-11 00:00:00, count=19), Clones(uniques=15, timestamp=2021-04-12 00:00:00, count=28), Clones(uniques=40, timestamp=2021-04-13 00:00:00, count=54), Clones(uniques=9, timestamp=2021-04-14 00:00:00, count=21), Clones(uniques=10, timestamp=2021-04-15 00:00:00, count=34), Clones(uniques=10, timestamp=2021-04-16 00:00:00, count=23), Clones(uniques=5, timestamp=2021-04-17 00:00:00, count=17), Clones(uniques=2, timestamp=2021-04-18 00:00:00, count=13), Clones(uniques=9, timestamp=2021-04-19 00:00:00, count=23), Clones(uniques=3, timestamp=2021-04-20 00:00:00, count=3)]} In [17]: repo0.get_views_traffic() Out[17]: {'count': 6019, 'uniques': 1134, 'views': [View(uniques=52, timestamp=2021-04-06 00:00:00, count=169), View(uniques=143, timestamp=2021-04-07 00:00:00, count=569), View(uniques=152, timestamp=2021-04-08 00:00:00, count=635), View(uniques=134, timestamp=2021-04-09 00:00:00, count=648), View(uniques=81, timestamp=2021-04-10 00:00:00, count=318), View(uniques=42, timestamp=2021-04-11 00:00:00, count=197), View(uniques=127, timestamp=2021-04-12 00:00:00, count=515), View(uniques=149, timestamp=2021-04-13 00:00:00, count=580), View(uniques=134, timestamp=2021-04-14 00:00:00, count=762), View(uniques=141, timestamp=2021-04-15 00:00:00, count=385), View(uniques=113, timestamp=2021-04-16 00:00:00, count=284), View(uniques=48, timestamp=2021-04-17 00:00:00, count=168), View(uniques=35, timestamp=2021-04-18 00:00:00, count=135), View(uniques=124, timestamp=2021-04-19 00:00:00, count=4","date":"2021-05-03","objectID":"/nebula-insights/:1:2","series":null,"tags":["Nebula Graph","serverless","Cloud","FaaS"],"title":"Nebula-Insightsï¼Œæˆ‘ä»¬åŸºäº Serverless æ¶æ„çš„æ•°æ®ç®¡é“æ–¹æ¡ˆä¸ä»£ç åˆ†äº«ã€‚","uri":"/nebula-insights/#æ•°æ®çš„è·å–api"},{"categories":["Big Data","Cloud"],"content":"å®ç°","date":"2021-05-03","objectID":"/nebula-insights/:2:0","series":null,"tags":["Nebula Graph","serverless","Cloud","FaaS"],"title":"Nebula-Insightsï¼Œæˆ‘ä»¬åŸºäº Serverless æ¶æ„çš„æ•°æ®ç®¡é“æ–¹æ¡ˆä¸ä»£ç åˆ†äº«ã€‚","uri":"/nebula-insights/#å®ç°"},{"categories":["Big Data","Cloud"],"content":"è®¡åˆ’ä»»åŠ¡è°ƒåº¦ with Cloud Schedulerå‰è¾¹æåˆ°ï¼ŒScheduler --\u003e Functions ä¸­é—´æ˜¯é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å®ç°çš„å¯é äº‹ä»¶è§¦å‘ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Google Cloud Pub/Subé‡Œåˆ›å»ºä¸€ä¸ªè®¢é˜…æ¶ˆæ¯ï¼Œåè¾¹æˆ‘ä»¬ä¼šæŠŠè¿™ä¸ªè®¢é˜…æ¶ˆæ¯ä» Scheduler å®šæœŸå‘é€ï¼Œå¹¶ä¸”åœ¨ Functionåˆ›å»ºçš„æ—¶å€™å®šä¹‰ä¸ºè§¦å‘æ¡ä»¶ã€‚ $ gcloud pubsub topics create nebula-insights-cron-topic $ gcloud pubsub subscriptions create cron-sub --topic nebula-insights-cron-topic ä»»åŠ¡çš„åˆ›å»ºéå¸¸ç›´æ¥ï¼Œåœ¨ Scheduler Web Console ä¸Šç›´æ¥å›¾å½¢åŒ–æ“ä½œå°±å¯ä»¥äº†ï¼Œè®°å¾—è¦é€‰æ‹©è§¦å‘ Pub/Sub æ¶ˆæ¯ä¸º cron-subï¼Œæ¶ˆæ¯ä¸»é¢˜ä¸º nebula-insights-cron-topic ","date":"2021-05-03","objectID":"/nebula-insights/:2:1","series":null,"tags":["Nebula Graph","serverless","Cloud","FaaS"],"title":"Nebula-Insightsï¼Œæˆ‘ä»¬åŸºäº Serverless æ¶æ„çš„æ•°æ®ç®¡é“æ–¹æ¡ˆä¸ä»£ç åˆ†äº«ã€‚","uri":"/nebula-insights/#è®¡åˆ’ä»»åŠ¡è°ƒåº¦-with-cloud-scheduler"},{"categories":["Big Data","Cloud"],"content":"ETL Worker with Python + Google Functionså½“ Scheduler æ¯å¤©å®šæ—¶å‘é€æ¶ˆæ¯ä¹‹åï¼Œæ¥æ”¶æ–¹å°±æ˜¯æˆ‘ä»¬è¦å®šä¹‰çš„ Google Functionsäº†ï¼Œå®ƒçš„å®šä¹‰å¦‚å›¾ ç¬¬ä¸€æ­¥ï¼Œé€‰æ‹©å®ƒçš„è§¦å‘ç±»å‹ä¸º Pub/Subï¼ŒåŒæ—¶è¦å®šä¹‰æ¶ˆæ¯çš„ä¸»é¢˜å’Œåå­—ã€‚ ç¬¬äºŒæ­¥å°±æ˜¯æŠŠä»£ç æ”¾è¿›å»: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º GitHub API Server â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Google Cloud Functions â—„â”€â”€â”€â–º â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Docker Hub API Server â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Google Cloud Storage â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ ... â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Aliyun OSS API â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ Google BigQuery â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ è¿™éƒ¨åˆ†çš„é€»è¾‘å°±æ˜¯é€šè¿‡å‰è¾¹åˆ†æäº†çš„APIå–å¾—ä¿¡æ¯ï¼Œç„¶åç»„è£…æˆéœ€è¦çš„æ ¼å¼å­˜åˆ° Cloud Storage(å¯¹è±¡å­˜å‚¨ï¼‰ï¼Œç„¶åå†å¯¼å…¥åˆ° BigQueryï¼ˆæ•°ä»“ï¼‰ä¹‹ä¸­ï¼Œå…¨éƒ¨ä»£ç åœ¨GitHubä¸Š: https://github.com/wey-gu/nebula-insights/blob/main/functions/data-fetching-0/main.py å¦å¤–ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªå®˜æ–¹æ•™ç¨‹ https://cloud.google.com/scheduler/docs/tut-pub-sub ","date":"2021-05-03","objectID":"/nebula-insights/:2:2","series":null,"tags":["Nebula Graph","serverless","Cloud","FaaS"],"title":"Nebula-Insightsï¼Œæˆ‘ä»¬åŸºäº Serverless æ¶æ„çš„æ•°æ®ç®¡é“æ–¹æ¡ˆä¸ä»£ç åˆ†äº«ã€‚","uri":"/nebula-insights/#etl-worker-with-python--google-functions"},{"categories":["Big Data","Cloud"],"content":"æ•°ä»“è¡¨ç»“æ„å®šä¹‰æ•°ä»“çš„è¡¨ç»“æ„æ¯”è¾ƒç›´æ¥ï¼Œschemaçš„å›¾è´´åœ¨ä¸‹è¾¹äº†ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒBigQueryæ”¯æŒåµŒå¥—çš„è¡¨ç»“æ„ï¼ˆè€Œä¸åƒä¸€èˆ¬å…³ç³»å‹æ•°æ®åº“é‚£æ ·éœ€è¦æŠŠè¿™æ ·çš„é€»è¾‘ç»“æ„ç”¨è¾…åŠ©è¡¨æ¥è¡¨ç¤ºï¼‰ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªåœºæ™¯ä¸‹éå¸¸æ–¹ä¾¿ï¼Œæ¯”å¦‚releaseè¡¨ä¸­çš„ assetsçš„ä¸‰ä¸ªåµŒå¥—å­—æ®µã€‚ æ›´è¯¦ç»†çš„ä¿¡æ¯å¯ä»¥å‚è€ƒGitHubä¸Šçš„ä»‹ç»å’Œä»£ç : https://github.com/wey-gu/nebula-insights#data-etl-bigquery-and-gcs ","date":"2021-05-03","objectID":"/nebula-insights/:2:3","series":null,"tags":["Nebula Graph","serverless","Cloud","FaaS"],"title":"Nebula-Insightsï¼Œæˆ‘ä»¬åŸºäº Serverless æ¶æ„çš„æ•°æ®ç®¡é“æ–¹æ¡ˆä¸ä»£ç åˆ†äº«ã€‚","uri":"/nebula-insights/#æ•°ä»“è¡¨ç»“æ„å®šä¹‰"},{"categories":["Big Data","Cloud"],"content":"æ•°æ®å¯è§†åŒ–åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥è‡ªåŠ¨åœ¨BigQueryé‡Œå­˜æœ‰æ¯å¤©æ”¶é›†çš„ä¸åŒæ¥æºçš„ç»Ÿè®¡æ•°æ®å•¦ï¼Œæœ‰äº†å®ƒï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© Data Studio æ¥ç”Ÿæˆå„å¼å„æ ·çš„å¯è§†åŒ–è¡¨ç¤ºã€‚ å‚è€ƒ https://cloud.google.com/bigquery/docs/visualize-data-studio ","date":"2021-05-03","objectID":"/nebula-insights/:2:4","series":null,"tags":["Nebula Graph","serverless","Cloud","FaaS"],"title":"Nebula-Insightsï¼Œæˆ‘ä»¬åŸºäº Serverless æ¶æ„çš„æ•°æ®ç®¡é“æ–¹æ¡ˆä¸ä»£ç åˆ†äº«ã€‚","uri":"/nebula-insights/#æ•°æ®å¯è§†åŒ–"},{"categories":["Big Data","Cloud"],"content":"æ€»ç»“è¿™æ ·ï¼Œæˆ‘ä»¬å®é™…ä¸Šä¸éœ€è¦ä»»ä½•è®¤ä¸ºç»´æŠ¤çš„æˆæœ¬å’ŒæŠ•å…¥ï¼Œå°±æ­å»ºäº†ä¸€æ•´ä¸ªæ•°æ®çš„æµæ°´çº¿ï¼Œå¹¶ä¸”åªéœ€è¦æŒ‰ç…§æ•°æ®ç”¨é‡ä»˜è´¹ï¼Œåœ¨æˆ‘ä»¬çš„æ•°æ®é‡ä¸‹ï¼ŒåŠæ—¶è€ƒè™‘æœªæ¥å¢åŠ æ•°åä¸ªæ–°çš„é‡åº¦çš„æ”¶é›†ï¼Œæˆ‘ä»¬ä¾ç„¶æ²¡æœ‰è¾¾åˆ°éœ€è¦ä»˜è´¹çš„ç”¨é‡ï¼Œæ˜¯ä¸æ˜¯å¾ˆCoolï¼Ÿ å› ä¸ºæ•°æ®åŒæ—¶å­˜åœ¨äºå¯¹è±¡å­˜å‚¨ä¸æ•°ä»“é‡Œï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿éšæ—¶æŠŠæ•°æ®å¯¼å…¥ä»»æ„å…¶ä»–å¹³å°ä¸Šã€‚ BigQueryè¿˜æœ‰ä¸€äº›éå¸¸å¸¸ç”¨çš„ï¼Œè‡ªå¸¦çš„æœºå™¨å­¦ä¹ çš„åŠŸèƒ½ï¼Œåªéœ€è¦å†™ä¸€ä¸ªSQL-Likeçš„queryå°±èƒ½è§¦å‘ç„¶åè·å¾—é¢„æµ‹ç»“æœï¼Œå¦‚æœæˆ‘ä»¬ç”¨åˆ°è¿™äº›åŠŸèƒ½çš„è¯ä¹Ÿä¼šå›åˆ° datawhale ä¸ºåŒå­¦ä»¬ç»§ç»­åˆ†äº«å“ˆã€‚ ç¬¬ä¸€æ¬¡åšæ•°æ®å·¥ç¨‹æ–¹é¢çš„åˆ†äº«ï¼Œå¦‚æœæœ‰é”™è¯¯çš„åœ°æ–¹æ¬¢è¿å¤§å®¶ä¸åæŒ‡å‡ºå“ˆ~~ è°¢è°¢ï¼ ","date":"2021-05-03","objectID":"/nebula-insights/:3:0","series":null,"tags":["Nebula Graph","serverless","Cloud","FaaS"],"title":"Nebula-Insightsï¼Œæˆ‘ä»¬åŸºäº Serverless æ¶æ„çš„æ•°æ®ç®¡é“æ–¹æ¡ˆä¸ä»£ç åˆ†äº«ã€‚","uri":"/nebula-insights/#æ€»ç»“"},{"categories":["Nebula Graph"],"content":"Nebula-upï¼Œä¸€é”®æ‹‰èµ·ä¸€ä¸ª Nebula æµ‹è¯•ç¯å¢ƒï¼Œæ”¯æŒ mscOSï¼ŒWindows 10ï¼ŒCentOS å’Œ Ubuntuã€‚","date":"2021-04-26","objectID":"/nebula-up/","series":null,"tags":["Nebula Graph","nebula-up"],"title":"Nebula-Upï¼Œä¸€é”®æ‹‰èµ·ä¸€ä¸ª Nebula æµ‹è¯•ç¯å¢ƒ","uri":"/nebula-up/"},{"categories":["Nebula Graph"],"content":" Nebula-up å¯ä»¥ä¸€é”®æ‹‰èµ·ä¸€ä¸ª Nebula æµ‹è¯•ç¯å¢ƒï¼Œæ”¯æŒ mscOSï¼ŒWindows 10ï¼ŒCentOS å’Œ Ubuntuã€‚ Nebula-Up is PoC utility to enable developer to bootstrap an nebula-graph cluster with nebula-graph-studio(Web UI) + nebula-graph-console(Command UI) ready out of box in an oneliner run. All required packages will handled with nebula-up as well, including Docker on Linux(Ubuntu/CentOS), Docker Desktop on macOS(including both Intel and M1 chip based), and Docker Desktop Windows. Also, itâ€™s optimized to leverage China Repo Mirrors(docker, brew, gitee, etcâ€¦) in case needed enable a smooth deployment for both Mainland China users and others. macOS and Linux with Shell: curl -fsSL nebula-up.siwei.io/install.sh | bash Windows with PowerShell(Working In Progress): iwr nebula-up.siwei.io/install.ps1 -useb | iex TBD: Finished Windows(Docker Desktop instead of the WSL 1\u00262 in initial phase) part, leveraging chocolatey package manager as homebrew was used in macOS Fully optimized for CN users, for now, git/apt/yum repo were not optimised, newly installed docker repo, brew repo were automatically optimised for CN internet access With nebula-graph version specification support, now itâ€™s hardcoded in 2.0.0-GA With uninstall/cleanup support Packaging similar content into homebrew/chocolatey? CI/UT ","date":"2021-04-26","objectID":"/nebula-up/:0:0","series":null,"tags":["Nebula Graph","nebula-up"],"title":"Nebula-Upï¼Œä¸€é”®æ‹‰èµ·ä¸€ä¸ª Nebula æµ‹è¯•ç¯å¢ƒ","uri":"/nebula-up/#"},{"categories":["Nebula Graph"],"content":"Nebula Graph çš„ Jupyter Notebook å’Œ IPython æ’ä»¶ï¼Œæ–¹ä¾¿åœ¨ Notebook ä¹‹ä¸­åµŒå…¥ nGQL çš„ query å’Œ ç»“æœçš„è°ƒè¯•ã€‚","date":"2021-03-07","objectID":"/ipython-ngql/","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/"},{"categories":["Nebula Graph"],"content":" Nebula Graph çš„ Jupyter Notebook å’Œ IPython æ’ä»¶ï¼Œæ–¹ä¾¿åœ¨ Notebook ä¹‹ä¸­åµŒå…¥ nGQL çš„ query å’Œ ç»“æœçš„è°ƒè¯•ã€‚ ipython-ngql is a python package to extend the ability to connect Nebula Graph from your Jupyter Notebook or iPython. Itâ€™s easier for data scientists to create, debug and share reusable and all-in-one Jupyter Notebooks with Nebula Graph interaction embedded. ipython-ngql is inspired by ipython-sql created by Catherine Devlin ","date":"2021-03-07","objectID":"/ipython-ngql/:0:0","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#"},{"categories":["Nebula Graph"],"content":"Get Started","date":"2021-03-07","objectID":"/ipython-ngql/:1:0","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#get-started"},{"categories":["Nebula Graph"],"content":"Installationipython-ngql could be installed either via pip or from this git repo itself. Install via pip pip install ipython-ngql Install inside the repo git clone git@github.com:wey-gu/ipython-ngql.git cd ipython-ngql python setup.py install ","date":"2021-03-07","objectID":"/ipython-ngql/:1:1","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#installation"},{"categories":["Nebula Graph"],"content":"Load it in Jupyter Notebook or iPython %load_ext ngql ","date":"2021-03-07","objectID":"/ipython-ngql/:1:2","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#load-it-in-jupyter-notebook-or-ipython"},{"categories":["Nebula Graph"],"content":"Connect to Nebula GraphArguments as below are needed to connect a Nebula Graph DB instance: Argument Description --address or -addr IP address of the Nebula Graph Instance --port or -P Port number of the Nebula Graph Instance --user or -u User name --password or -p Password Below is an exmple on connecting to 127.0.0.1:9669 with username: â€œuserâ€ and password: â€œpasswordâ€. %ngql --address 127.0.0.1 --port 9669 --user user --password password ","date":"2021-03-07","objectID":"/ipython-ngql/:1:3","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#connect-to-nebula-graph"},{"categories":["Nebula Graph"],"content":"Make QueriesNow two kind of iPtython Magics are supported: Option 1: The one line stype with %ngql: %ngql GO FROM \"Tom\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id; Option 2: The multiple lines stype with %%ngql %%ngql USE pokemon_club; SHOW TAGS; SHOW HOSTS; There will be other options in future, i.e. from a .ngql file. ","date":"2021-03-07","objectID":"/ipython-ngql/:1:4","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#make-queries"},{"categories":["Nebula Graph"],"content":"Query String with Variablesipython-ngql supports taking variables from the local namespace, with the help of Jinja2 template framework, itâ€™s supported to have queries like the below example. The actual query string should be GO FROM \"Sue\" OVER owns_pokemon ..., and \"{{ trainer }}\" was renderred as \"Sue\" by consuming the local variable trainer: In [8]: trainer = \"Sue\" In [9]: %%ngql ...: GO FROM \"{{ trainer }}\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name; ...: Out[9]: Trainer_Name 0 Jerry 1 Sue 2 Tom 3 Wey ","date":"2021-03-07","objectID":"/ipython-ngql/:1:5","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#query-string-with-variables"},{"categories":["Nebula Graph"],"content":"Configure ngql_result_styleBy default, ipython-ngql will use pandas dataframe as output style to enable more human readable output, while itâ€™s supported to use the raw thrift data format comes from the nebula2-python itself. This can be done ad-hoc with below one line: %config IPythonNGQL.ngql_result_style=\"raw\" After above line being executed, the output will be like: ResultSet(ExecutionResponse( error_code=0, latency_in_us=2844, data=DataSet( column_names=[b'Trainer_Name'], rows=[Row( values=[Value( sVal=b'Tom')]), Row( values=[Value( sVal=b'Jerry')]), Row( values=[Value( sVal=b'Sue')]), Row( values=[Value( sVal=b'Tom')]), Row( values=[Value( sVal=b'Wey')])]), space_name=b'pokemon_club')) The result are always stored in variable _ in Jupyter Notebook, thus, to tweak the result, just refer a new var to it like: In [10]: %config IPythonNGQL.ngql_result_style=\"raw\" In [11]: %%ngql USE pokemon_club; ...: GO FROM \"Tom\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id ...: | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name; ...: ...: Out[11]: ResultSet(ExecutionResponse( error_code=0, latency_in_us=3270, data=DataSet( column_names=[b'Trainer_Name'], rows=[Row( values=[Value( sVal=b'Tom')]), Row( values=[Value( sVal=b'Jerry')]), Row( values=[Value( sVal=b'Sue')]), Row( values=[Value( sVal=b'Tom')]), Row( values=[Value( sVal=b'Wey')])]), space_name=b'pokemon_club')) In [12]: r = _ In [13]: r.column_values(key='Trainer_Name')[0]._value.value Out[13]: b'Tom' ","date":"2021-03-07","objectID":"/ipython-ngql/:1:6","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#configure-ngql_result_style"},{"categories":["Nebula Graph"],"content":"Get HelpDonâ€™t remember anything or even relying on the cheatsheet here, oen takeaway for you: the help! In [7]: %ngql help Supported Configurations: ------------------------ \u003e How to config ngql_result_style in \"raw\", \"pandas\" %config IPythonNGQL.ngql_result_style=\"raw\" %config IPythonNGQL.ngql_result_style=\"pandas\" \u003e How to config ngql_verbose in True, False %config IPythonNGQL.ngql_verbose=True \u003e How to config max_connection_pool_size %config IPythonNGQL.max_connection_pool_size=10 Quick Start: ----------- \u003e Connect to Neubla Graph %ngql --address 127.0.0.1 --port 9669 --user user --password password \u003e Use Space %ngql USE nba \u003e Query %ngql SHOW TAGS; \u003e Multile Queries %%ngql SHOW TAGS; SHOW HOSTS; Reload ngql Magic %reload_ext ngql \u003e Variables in query, we are using Jinja2 here name = \"nba\" %ngql USE \"{{ name }}\" ","date":"2021-03-07","objectID":"/ipython-ngql/:1:7","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#get-help"},{"categories":["Nebula Graph"],"content":"ExamplesJupyter NotebookPlease refer here:https://github.com/wey-gu/ipython-ngql/blob/main/examples/get_started.ipynb iPython venv â¯ ipython In [1]: %load_ext ngql In [2]: %ngql --address 127.0.0.1 --port 9669 --user user --password password Connection Pool Created Out[2]: Name 0 pokemon_club In [3]: %ngql GO FROM \"Tom\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name Out[3]: Trainer_Name 0 Tom 1 Jerry 2 Sue 3 Tom 4 Wey In [4]: %%ngql ...: SHOW TAGS; ...: SHOW HOSTS; ...: ...: Out[4]: Host Port Status Leader count Leader distribution Partition distribution 0 storaged0 9779.0 ONLINE 0 No valid partition No valid partition 1 storaged1 9779.0 ONLINE 1 pokemon_club:1 pokemon_club:1 2 storaged2 9779.0 ONLINE 0 No valid partition No valid partition 3 Total NaN None 1 pokemon_club:1 pokemon_club:1 In [5]: trainer = \"Sue\" In [6]: %%ngql ...: GO FROM \"{{ trainer }}\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name; ...: Out[6]: Trainer_Name 0 Jerry 1 Sue 2 Tom 3 Wey In [7]: %ngql help Supported Configurations: ------------------------ \u003e How to config ngql_result_style in \"raw\", \"pandas\" %config IPythonNGQL.ngql_result_style=\"raw\" %config IPythonNGQL.ngql_result_style=\"pandas\" \u003e How to config ngql_verbose in True, False %config IPythonNGQL.ngql_verbose=True \u003e How to config max_connection_pool_size %config IPythonNGQL.max_connection_pool_size=10 Quick Start: ----------- \u003e Connect to Neubla Graph %ngql --address 127.0.0.1 --port 9669 --user user --password password \u003e Use Space %ngql USE nba \u003e Query %ngql SHOW TAGS; \u003e Multile Queries %%ngql SHOW TAGS; SHOW HOSTS; Reload ngql Magic %reload_ext ngql \u003e Variables in query, we are using Jinja2 here name = \"nba\" %ngql USE \"{{ name }}\" In [8]: trainer = \"Sue\" In [9]: %%ngql ...: GO FROM \"{{ trainer }}\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name; ...: ...: Out[9]: Trainer_Name 0 Jerry 1 Sue 2 Tom 3 Wey In [10]: %config IPythonNGQL.ngql_result_style=\"raw\" In [11]: %%ngql USE pokemon_club; ...: GO FROM \"Tom\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id ...: | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name; ...: ...: Out[11]: ResultSet(ExecutionResponse( error_code=0, latency_in_us=3270, data=DataSet( column_names=[b'Trainer_Name'], rows=[Row( values=[Value( sVal=b'Tom')]), Row( values=[Value( sVal=b'Jerry')]), Row( values=[Value( sVal=b'Sue')]), Row( values=[Value( sVal=b'Tom')]), Row( values=[Value( sVal=b'Wey')])]), space_name=b'pokemon_club')) In [12]: r = _ In [13]: r.column_values(key='Trainer_Name')[0]._value.value Out[13]: b'Tom' ","date":"2021-03-07","objectID":"/ipython-ngql/:1:8","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#examples"},{"categories":["Nebula Graph"],"content":"ExamplesJupyter NotebookPlease refer here:https://github.com/wey-gu/ipython-ngql/blob/main/examples/get_started.ipynb iPython venv â¯ ipython In [1]: %load_ext ngql In [2]: %ngql --address 127.0.0.1 --port 9669 --user user --password password Connection Pool Created Out[2]: Name 0 pokemon_club In [3]: %ngql GO FROM \"Tom\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name Out[3]: Trainer_Name 0 Tom 1 Jerry 2 Sue 3 Tom 4 Wey In [4]: %%ngql ...: SHOW TAGS; ...: SHOW HOSTS; ...: ...: Out[4]: Host Port Status Leader count Leader distribution Partition distribution 0 storaged0 9779.0 ONLINE 0 No valid partition No valid partition 1 storaged1 9779.0 ONLINE 1 pokemon_club:1 pokemon_club:1 2 storaged2 9779.0 ONLINE 0 No valid partition No valid partition 3 Total NaN None 1 pokemon_club:1 pokemon_club:1 In [5]: trainer = \"Sue\" In [6]: %%ngql ...: GO FROM \"{{ trainer }}\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name; ...: Out[6]: Trainer_Name 0 Jerry 1 Sue 2 Tom 3 Wey In [7]: %ngql help Supported Configurations: ------------------------ How to config ngql_result_style in \"raw\", \"pandas\" %config IPythonNGQL.ngql_result_style=\"raw\" %config IPythonNGQL.ngql_result_style=\"pandas\" How to config ngql_verbose in True, False %config IPythonNGQL.ngql_verbose=True How to config max_connection_pool_size %config IPythonNGQL.max_connection_pool_size=10 Quick Start: ----------- Connect to Neubla Graph %ngql --address 127.0.0.1 --port 9669 --user user --password password Use Space %ngql USE nba Query %ngql SHOW TAGS; Multile Queries %%ngql SHOW TAGS; SHOW HOSTS; Reload ngql Magic %reload_ext ngql Variables in query, we are using Jinja2 here name = \"nba\" %ngql USE \"{{ name }}\" In [8]: trainer = \"Sue\" In [9]: %%ngql ...: GO FROM \"{{ trainer }}\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name; ...: ...: Out[9]: Trainer_Name 0 Jerry 1 Sue 2 Tom 3 Wey In [10]: %config IPythonNGQL.ngql_result_style=\"raw\" In [11]: %%ngql USE pokemon_club; ...: GO FROM \"Tom\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id ...: | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name; ...: ...: Out[11]: ResultSet(ExecutionResponse( error_code=0, latency_in_us=3270, data=DataSet( column_names=[b'Trainer_Name'], rows=[Row( values=[Value( sVal=b'Tom')]), Row( values=[Value( sVal=b'Jerry')]), Row( values=[Value( sVal=b'Sue')]), Row( values=[Value( sVal=b'Tom')]), Row( values=[Value( sVal=b'Wey')])]), space_name=b'pokemon_club')) In [12]: r = _ In [13]: r.column_values(key='Trainer_Name')[0]._value.value Out[13]: b'Tom' ","date":"2021-03-07","objectID":"/ipython-ngql/:1:8","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#jupyter-notebook"},{"categories":["Nebula Graph"],"content":"ExamplesJupyter NotebookPlease refer here:https://github.com/wey-gu/ipython-ngql/blob/main/examples/get_started.ipynb iPython venv â¯ ipython In [1]: %load_ext ngql In [2]: %ngql --address 127.0.0.1 --port 9669 --user user --password password Connection Pool Created Out[2]: Name 0 pokemon_club In [3]: %ngql GO FROM \"Tom\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name Out[3]: Trainer_Name 0 Tom 1 Jerry 2 Sue 3 Tom 4 Wey In [4]: %%ngql ...: SHOW TAGS; ...: SHOW HOSTS; ...: ...: Out[4]: Host Port Status Leader count Leader distribution Partition distribution 0 storaged0 9779.0 ONLINE 0 No valid partition No valid partition 1 storaged1 9779.0 ONLINE 1 pokemon_club:1 pokemon_club:1 2 storaged2 9779.0 ONLINE 0 No valid partition No valid partition 3 Total NaN None 1 pokemon_club:1 pokemon_club:1 In [5]: trainer = \"Sue\" In [6]: %%ngql ...: GO FROM \"{{ trainer }}\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name; ...: Out[6]: Trainer_Name 0 Jerry 1 Sue 2 Tom 3 Wey In [7]: %ngql help Supported Configurations: ------------------------ How to config ngql_result_style in \"raw\", \"pandas\" %config IPythonNGQL.ngql_result_style=\"raw\" %config IPythonNGQL.ngql_result_style=\"pandas\" How to config ngql_verbose in True, False %config IPythonNGQL.ngql_verbose=True How to config max_connection_pool_size %config IPythonNGQL.max_connection_pool_size=10 Quick Start: ----------- Connect to Neubla Graph %ngql --address 127.0.0.1 --port 9669 --user user --password password Use Space %ngql USE nba Query %ngql SHOW TAGS; Multile Queries %%ngql SHOW TAGS; SHOW HOSTS; Reload ngql Magic %reload_ext ngql Variables in query, we are using Jinja2 here name = \"nba\" %ngql USE \"{{ name }}\" In [8]: trainer = \"Sue\" In [9]: %%ngql ...: GO FROM \"{{ trainer }}\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name; ...: ...: Out[9]: Trainer_Name 0 Jerry 1 Sue 2 Tom 3 Wey In [10]: %config IPythonNGQL.ngql_result_style=\"raw\" In [11]: %%ngql USE pokemon_club; ...: GO FROM \"Tom\" OVER owns_pokemon YIELD owns_pokemon._dst as pokemon_id ...: | GO FROM $-.pokemon_id OVER owns_pokemon REVERSELY YIELD owns_pokemon._dst AS Trainer_Name; ...: ...: Out[11]: ResultSet(ExecutionResponse( error_code=0, latency_in_us=3270, data=DataSet( column_names=[b'Trainer_Name'], rows=[Row( values=[Value( sVal=b'Tom')]), Row( values=[Value( sVal=b'Jerry')]), Row( values=[Value( sVal=b'Sue')]), Row( values=[Value( sVal=b'Tom')]), Row( values=[Value( sVal=b'Wey')])]), space_name=b'pokemon_club')) In [12]: r = _ In [13]: r.column_values(key='Trainer_Name')[0]._value.value Out[13]: b'Tom' ","date":"2021-03-07","objectID":"/ipython-ngql/:1:8","series":null,"tags":["Nebula Graph","iPython","Jupyter"],"title":"IPython-nGQL, Nebula Graph çš„ Jupyter æ’ä»¶","uri":"/ipython-ngql/#ipython"}]
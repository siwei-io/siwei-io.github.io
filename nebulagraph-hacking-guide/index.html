

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <title>NebulaGraph å†…æ ¸è´¡çŒ®å¼€å‘æŒ‡å— - siwei.io</title><meta name="Description" content="æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚"><meta property="og:title" content="NebulaGraph å†…æ ¸è´¡çŒ®å¼€å‘æŒ‡å—" />
<meta property="og:description" content="æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://siwei.io/nebulagraph-hacking-guide/" /><meta property="og:image" content="https://siwei.io/nebulagraph-hacking-guide/featured-image.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-23T14:57:07+08:00" />
<meta property="article:modified_time" content="2023-02-09T15:20:27+08:00" /><meta property="og:site_name" content="siwei.io" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://siwei.io/nebulagraph-hacking-guide/featured-image.png"/>
<meta name="twitter:title" content="NebulaGraph å†…æ ¸è´¡çŒ®å¼€å‘æŒ‡å—"/>
<meta name="twitter:description" content="æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚"/>
<meta name="application-name" content="DoIt">
<meta name="apple-mobile-web-app-title" content="DoIt">

<meta name="theme-color" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://siwei.io/nebulagraph-hacking-guide/" /><link rel="prev" href="https://siwei.io/ngql-execution-plan/" /><link rel="next" href="https://siwei.io/recommendation-system-with-graphdb/" />
<link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/color.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/fontawesome-free/all.min.css">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/animate/animate.min.css">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript>
    
    
    
    <meta name="baidu-site-verification" content="code-4R67zl7SwH" /><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "NebulaGraph å†…æ ¸è´¡çŒ®å¼€å‘æŒ‡å—",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/siwei.io\/nebulagraph-hacking-guide\/"
        },"image": ["https:\/\/siwei.io\/images\/site-feature-image.webp"],"genre": "posts","keywords": "NebulaGraph, contributing, open-source, å¼€å‘æŒ‡å—","wordcount":  6470 ,
        "url": "https:\/\/siwei.io\/nebulagraph-hacking-guide\/","datePublished": "2022-10-23T14:57:07+08:00","dateModified": "2023-02-09T15:20:27+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Wey Gu","logo": "https:\/\/siwei.io\/images\/site-feature-image.webp"},"author": {
                "@type": "Person",
                "name": "Wey Gu"
            },"description": "æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚"
    }
    </script><script src="//instant.page/5.2.0" defer type="module" integrity="sha384-jnZyxPjiipYXnSU0ygqeac2q7CVYMbh84q0uHVRRxEtvFPiQYbXWUorga2aqZJ0z"></script>
</head>

<body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">
        function setTheme(theme) {document.body.setAttribute('theme', theme); document.documentElement.style.setProperty('color-scheme', theme === 'light' ? 'light' : 'dark'); window.theme = theme;   window.isDark = window.theme !== 'light' }
        function saveTheme(theme) {window.localStorage && localStorage.setItem('theme', theme);}
        function getMeta(metaName) {const metas = document.getElementsByTagName('meta'); for (let i = 0; i < metas.length; i++) if (metas[i].getAttribute('name') === metaName) return metas[i]; return '';}
        if (window.localStorage && localStorage.getItem('theme')) {let theme = localStorage.getItem('theme');theme === 'light' || theme === 'dark' || theme === 'black' ? setTheme(theme) : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light')); } else { if ('auto' === 'light' || 'auto' === 'dark' || 'auto' === 'black') setTheme('auto'), saveTheme('auto'); else saveTheme('auto'), window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light');}
        let metaColors = {'light': '#f8f8f8','dark': '#252627','black': '#000000'}
        getMeta('theme-color').content = metaColors[document.body.getAttribute('theme')];
        window.switchThemeEventSet = new Set()
    </script>
    <div id="back-to-top"></div>
    <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="siwei.io"><span class="header-title-pre"><i class='fas fa-code-branch'></i></span>siwei.io</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/about/"> å…³äº </a><a class="menu-item" href="/projects/"> é¡¹ç›® </a><a class="menu-item" href="/sketch-notes/"> æ‰‹ç»˜ </a><a class="menu-item" href="/posts/"> åšå®¢ </a><a class="menu-item" href="/talk/"> æ¼”è®² </a><a class="menu-item" href="/cources/"> è¯¾ç¨‹ </a><a class="menu-item" href="https://vesoft.com/cn/careers/" rel="noopener noreferrer" target="_blank"> æ‹›è˜ </a><a class="menu-item" href="/about/#%E8%81%94%E7%B3%BB%E6%88%91"> è”ç³» </a><a class="menu-item" href="/path/"> å­¦ä¹ è·¯å¾„ </a><a class="menu-item" href="/podcast/"> æ’­å®¢ </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="é€‰æ‹©è¯­è¨€">ğŸŒ Chinese<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" title="é€‰æ‹©è¯­è¨€" id="language-select-desktop" onchange="location = this.value;"><option value="/nebulagraph-hacking-guide/" selected>ğŸŒ Chinese</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-select" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                    <select class="color-theme-select" id="theme-select-desktop" title="åˆ‡æ¢ä¸»é¢˜">
                        <option value="light">æµ…è‰²</option>
                        <option value="dark">æ·±è‰²</option>
                        <option value="black">é»‘è‰²</option>
                        <option value="auto">è·Ÿéšç³»ç»Ÿ</option>
                    </select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="siwei.io"><span class="header-title-pre"><i class='fas fa-code-branch'></i></span>siwei.io</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/about/" title="">å…³äº</a><a class="menu-item" href="/projects/" title="">é¡¹ç›®</a><a class="menu-item" href="/sketch-notes/" title="">æ‰‹ç»˜</a><a class="menu-item" href="/posts/" title="">åšå®¢</a><a class="menu-item" href="/talk/" title="">æ¼”è®²</a><a class="menu-item" href="/cources/" title="">è¯¾ç¨‹</a><a class="menu-item" href="https://vesoft.com/cn/careers/" title="" rel="noopener noreferrer" target="_blank">æ‹›è˜</a><a class="menu-item" href="/about/#%E8%81%94%E7%B3%BB%E6%88%91" title="">è”ç³»</a><a class="menu-item" href="/path/" title="">å­¦ä¹ è·¯å¾„</a><a class="menu-item" href="/podcast/" title="">æ’­å®¢</a><a href="javascript:void(0);" class="menu-item theme-select" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
                <select class="color-theme-select" id="theme-select-mobile" title="åˆ‡æ¢ä¸»é¢˜">
                    <option value="light">æµ…è‰²</option>
                    <option value="dark">æ·±è‰²</option>
                    <option value="black">é»‘è‰²</option>
                    <option value="auto">è·Ÿéšç³»ç»Ÿ</option>
                </select>
            </a><a href="javascript:void(0);" class="menu-item" title="é€‰æ‹©è¯­è¨€">ğŸŒ Chinese<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" title="é€‰æ‹©è¯­è¨€" onchange="location = this.value;"><option value="/nebulagraph-hacking-guide/" selected>ğŸŒ Chinese</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
            <div class="container"><div class="toc" id="toc-auto">
        <h2 class="toc-title">ç›®å½•</h2>
        <div class="toc-content" id="toc-content-auto"><nav id="TableOfContents">
  <ol>
    <li><a href="#nebulagraph-çš„æ¶æ„ç®€ä»‹">NebulaGraph çš„æ¶æ„ç®€ä»‹</a>
      <ol>
        <li><a href="#æœåŠ¡è¿›ç¨‹">æœåŠ¡ã€è¿›ç¨‹</a></li>
        <li><a href="#è®¡ç®—å±‚ä¸å­˜å‚¨å±‚">è®¡ç®—å±‚ä¸å­˜å‚¨å±‚</a>
          <ol>
            <li><a href="#graph-service-nebula-graphd">Graph Service: nebula-graphd</a></li>
            <li><a href="#meta-service-nebula-metad">Meta Service: nebula-metad</a></li>
            <li><a href="#storage-service-nebula-storaged">Storage Service: nebula-storaged</a></li>
          </ol>
        </li>
        <li><a href="#è¿›ç¨‹é—´é€šä¿¡æœåŠ¡å‘ç°æœºåˆ¶">è¿›ç¨‹é—´é€šä¿¡ã€æœåŠ¡å‘ç°æœºåˆ¶</a></li>
      </ol>
    </li>
    <li><a href="#å¼€å‘ç¯å¢ƒæ­å»º">å¼€å‘ç¯å¢ƒæ­å»º</a>
      <ol>
        <li><a href="#åˆ›å»ºä¸€ä¸ªå®¹å™¨åŒ–çš„-nebulagraph-é›†ç¾¤">åˆ›å»ºä¸€ä¸ªå®¹å™¨åŒ–çš„ NebulaGraph é›†ç¾¤</a></li>
        <li><a href="#ä»£ç è·å–">ä»£ç è·å–</a></li>
        <li><a href="#åˆ›å»ºå¼€å‘å®¹å™¨">åˆ›å»ºå¼€å‘å®¹å™¨</a></li>
        <li><a href="#ç¼–è¯‘ç¯å¢ƒ">ç¼–è¯‘ç¯å¢ƒ</a></li>
      </ol>
    </li>
    <li><a href="#è°ƒè¯•-nebulagraph">è°ƒè¯• NebulaGraph</a>
      <ol>
        <li><a href="#å®‰è£…ä¾èµ–">å®‰è£…ä¾èµ–</a></li>
        <li><a href="#å‡†å¤‡å®¢æˆ·ç«¯">å‡†å¤‡å®¢æˆ·ç«¯</a></li>
        <li><a href="#gdb-è¿è¡Œ-graphd">gdb è¿è¡Œ graphd</a></li>
      </ol>
    </li>
    <li><a href="#ä¿®æ”¹-nebulagraph-ä»£ç ">ä¿®æ”¹ NebulaGraph ä»£ç </a>
      <ol>
        <li><a href="#è¯»ä»£ç ">è¯»ä»£ç </a>
          <ol>
            <li><a href="#åœ¨å“ªé‡Œä¿®æ”¹">åœ¨å“ªé‡Œä¿®æ”¹</a></li>
          </ol>
        </li>
        <li><a href="#å¼€å§‹æ”¹ä»£ç ">å¼€å§‹æ”¹ä»£ç </a></li>
        <li><a href="#è°ƒè¯•ä»£ç ">è°ƒè¯•ä»£ç </a></li>
      </ol>
    </li>
    <li><a href="#æäº¤-pr">æäº¤ PR</a>
      <ol>
        <li><a href="#æäº¤åˆ°ä¸ªäººè¿œç¨‹åˆ†æ”¯">æäº¤åˆ°ä¸ªäººè¿œç¨‹åˆ†æ”¯</a>
          <ol>
            <li><a href="#commit-æœ¬åœ°ä¿®æ”¹">commit æœ¬åœ°ä¿®æ”¹</a></li>
            <li><a href="#æäº¤åˆ°è‡ªå·±è¿œç¨‹çš„åˆ†æ”¯">æäº¤åˆ°è‡ªå·±è¿œç¨‹çš„åˆ†æ”¯</a></li>
            <li><a href="#åœ¨ä¸ªäººè¿œç¨‹åˆ†å‰åˆ†æ”¯ä¸Šåˆ›å»º-pr">åœ¨ä¸ªäººè¿œç¨‹åˆ†å‰åˆ†æ”¯ä¸Šåˆ›å»º PR</a></li>
          </ol>
        </li>
        <li><a href="#è°ƒè¯•-ci-æµ‹è¯•ä»£ç ">è°ƒè¯• CI æµ‹è¯•ä»£ç </a>
          <ol>
            <li><a href="#ctest">CTest</a></li>
            <li><a href="#tck">TCK</a></li>
          </ol>
        </li>
        <li><a href="#é‚€è¯·å†æ¬¡-review">é‚€è¯·å†æ¬¡ review</a></li>
      </ol>
    </li>
  </ol>
</nav></div>
    </div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC", "true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">NebulaGraph å†…æ ¸è´¡çŒ®å¼€å‘æŒ‡å—</h1><div class="post-meta">
            <div class="post-meta-line">
                <span class="post-author"><span class="author fas fa-user-circle fa-fw"></span><a href="https://siwei.io" title="Author" target="_blank" rel="noopener noreferrer author" class="author">Wey Gu</a>
                </span>&nbsp;<span class="post-category">æ”¶å½•äº </span>&nbsp;<span class="post-category">ç±»åˆ« <a href="/categories/nebula-graph/"><i class="far fa-folder fa-fw"></i>Nebula Graph</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-10-23">2022-10-23</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime="2023-02-09">2023-02-09</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 6470 å­—&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 13 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="featured-image"><img
        
        loading="eager"
        src="/nebulagraph-hacking-guide/featured-image.webp"
        srcset="/nebulagraph-hacking-guide/featured-image.webp, /nebulagraph-hacking-guide/featured-image.webp 1.5x, /nebulagraph-hacking-guide/featured-image.webp 2x"
        sizes="auto"
        alt="æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚"
        title="æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚" height="914"   width="1738" ></div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ol>
    <li><a href="#nebulagraph-çš„æ¶æ„ç®€ä»‹">NebulaGraph çš„æ¶æ„ç®€ä»‹</a>
      <ol>
        <li><a href="#æœåŠ¡è¿›ç¨‹">æœåŠ¡ã€è¿›ç¨‹</a></li>
        <li><a href="#è®¡ç®—å±‚ä¸å­˜å‚¨å±‚">è®¡ç®—å±‚ä¸å­˜å‚¨å±‚</a>
          <ol>
            <li><a href="#graph-service-nebula-graphd">Graph Service: nebula-graphd</a></li>
            <li><a href="#meta-service-nebula-metad">Meta Service: nebula-metad</a></li>
            <li><a href="#storage-service-nebula-storaged">Storage Service: nebula-storaged</a></li>
          </ol>
        </li>
        <li><a href="#è¿›ç¨‹é—´é€šä¿¡æœåŠ¡å‘ç°æœºåˆ¶">è¿›ç¨‹é—´é€šä¿¡ã€æœåŠ¡å‘ç°æœºåˆ¶</a></li>
      </ol>
    </li>
    <li><a href="#å¼€å‘ç¯å¢ƒæ­å»º">å¼€å‘ç¯å¢ƒæ­å»º</a>
      <ol>
        <li><a href="#åˆ›å»ºä¸€ä¸ªå®¹å™¨åŒ–çš„-nebulagraph-é›†ç¾¤">åˆ›å»ºä¸€ä¸ªå®¹å™¨åŒ–çš„ NebulaGraph é›†ç¾¤</a></li>
        <li><a href="#ä»£ç è·å–">ä»£ç è·å–</a></li>
        <li><a href="#åˆ›å»ºå¼€å‘å®¹å™¨">åˆ›å»ºå¼€å‘å®¹å™¨</a></li>
        <li><a href="#ç¼–è¯‘ç¯å¢ƒ">ç¼–è¯‘ç¯å¢ƒ</a></li>
      </ol>
    </li>
    <li><a href="#è°ƒè¯•-nebulagraph">è°ƒè¯• NebulaGraph</a>
      <ol>
        <li><a href="#å®‰è£…ä¾èµ–">å®‰è£…ä¾èµ–</a></li>
        <li><a href="#å‡†å¤‡å®¢æˆ·ç«¯">å‡†å¤‡å®¢æˆ·ç«¯</a></li>
        <li><a href="#gdb-è¿è¡Œ-graphd">gdb è¿è¡Œ graphd</a></li>
      </ol>
    </li>
    <li><a href="#ä¿®æ”¹-nebulagraph-ä»£ç ">ä¿®æ”¹ NebulaGraph ä»£ç </a>
      <ol>
        <li><a href="#è¯»ä»£ç ">è¯»ä»£ç </a>
          <ol>
            <li><a href="#åœ¨å“ªé‡Œä¿®æ”¹">åœ¨å“ªé‡Œä¿®æ”¹</a></li>
          </ol>
        </li>
        <li><a href="#å¼€å§‹æ”¹ä»£ç ">å¼€å§‹æ”¹ä»£ç </a></li>
        <li><a href="#è°ƒè¯•ä»£ç ">è°ƒè¯•ä»£ç </a></li>
      </ol>
    </li>
    <li><a href="#æäº¤-pr">æäº¤ PR</a>
      <ol>
        <li><a href="#æäº¤åˆ°ä¸ªäººè¿œç¨‹åˆ†æ”¯">æäº¤åˆ°ä¸ªäººè¿œç¨‹åˆ†æ”¯</a>
          <ol>
            <li><a href="#commit-æœ¬åœ°ä¿®æ”¹">commit æœ¬åœ°ä¿®æ”¹</a></li>
            <li><a href="#æäº¤åˆ°è‡ªå·±è¿œç¨‹çš„åˆ†æ”¯">æäº¤åˆ°è‡ªå·±è¿œç¨‹çš„åˆ†æ”¯</a></li>
            <li><a href="#åœ¨ä¸ªäººè¿œç¨‹åˆ†å‰åˆ†æ”¯ä¸Šåˆ›å»º-pr">åœ¨ä¸ªäººè¿œç¨‹åˆ†å‰åˆ†æ”¯ä¸Šåˆ›å»º PR</a></li>
          </ol>
        </li>
        <li><a href="#è°ƒè¯•-ci-æµ‹è¯•ä»£ç ">è°ƒè¯• CI æµ‹è¯•ä»£ç </a>
          <ol>
            <li><a href="#ctest">CTest</a></li>
            <li><a href="#tck">TCK</a></li>
          </ol>
        </li>
        <li><a href="#é‚€è¯·å†æ¬¡-review">é‚€è¯·å†æ¬¡ review</a></li>
      </ol>
    </li>
  </ol>
</nav></div>
            </div><div class="content" id="content"><blockquote>
<p>å¦‚ä½• build NebulaGraphï¼Ÿå¦‚ä½•ä¸º NebulaGraph å†…æ ¸åšè´¡çŒ®ï¼Ÿä»æœ¬ç« ä½œä¸ºåˆ‡å…¥ç‚¹å°±å¤Ÿäº†ã€‚</p>
</blockquote>
<h2 id="nebulagraph-çš„æ¶æ„ç®€ä»‹" class="headerLink">
    <a href="#nebulagraph-%e7%9a%84%e6%9e%b6%e6%9e%84%e7%ae%80%e4%bb%8b" class="header-mark"></a>1 NebulaGraph çš„æ¶æ„ç®€ä»‹</h2><p>ä¸ºäº†æ–¹ä¾¿å¯¹ NebulaGraph å°šæœªäº†è§£çš„è¯»è€…ä¹Ÿèƒ½å¿«é€Ÿç›´æ¥ä»è´¡çŒ®ä»£ç ä¸ºèµ·ç‚¹äº†è§£å®ƒï¼Œæˆ‘æŠŠå¼€å‘ã€è´¡çŒ®å†…æ ¸ä»£ç å…¥æ‰‹æ‰€éœ€è¦çš„åŸºæœ¬æ¶æ„çŸ¥è¯†ä¹Ÿåœ¨è¿™é‡Œä»¥æœ€å°ä¿¡æ¯é‡çš„å½¢å¼æ€»ç»“ä¸€ä¸‹ï¼Œä½œä¸ºå‰å¯¼çŸ¥è¯†ï¼Œè¯·èµ„æ·±çš„ NebulaGraph ç©å®¶ç›´æ¥è·³è¿‡è¿™ä¸€ç« èŠ‚ã€‚</p>
<h3 id="æœåŠ¡è¿›ç¨‹" class="headerLink">
    <a href="#%e6%9c%8d%e5%8a%a1%e8%bf%9b%e7%a8%8b" class="header-mark"></a>1.1 æœåŠ¡ã€è¿›ç¨‹</h3><p>NebulaGraph çš„æ¶æ„å’Œ Google Spannerï¼ŒTiDB å¾ˆç›¸ä¼¼ï¼Œæ ¸å¿ƒéƒ¨åˆ†åªæœ‰ä¸‰ç§æœåŠ¡ã€è¿›ç¨‹ï¼šGraph æœåŠ¡ã€Meta æœåŠ¡å’Œ Storage æœåŠ¡ã€‚å®ƒä»¬ä¹‹é—´å½¼æ­¤é€šè¿‡ TCP ä¹‹ä¸Šçš„ Thrift RPC åè®®è¿›è¡Œé€šä¿¡ã€‚</p>
<p><figure><a class="lightgallery" href="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/nebula-graph-architecture-1.png" title="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/nebula-graph-architecture-1.png" data-thumbnail="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/nebula-graph-architecture-1.png">
        <img
            
            loading="lazy"
            src="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/nebula-graph-architecture-1.png"
            srcset="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/nebula-graph-architecture-1.png, https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/nebula-graph-architecture-1.png 1.5x, https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/nebula-graph-architecture-1.png 2x"
            sizes="auto"
            alt="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/nebula-graph-architecture-1.png">
    </a></figure></p>
<h3 id="è®¡ç®—å±‚ä¸å­˜å‚¨å±‚" class="headerLink">
    <a href="#%e8%ae%a1%e7%ae%97%e5%b1%82%e4%b8%8e%e5%ad%98%e5%82%a8%e5%b1%82" class="header-mark"></a>1.2 è®¡ç®—å±‚ä¸å­˜å‚¨å±‚</h3><p>NebulaGraph æ˜¯å­˜å‚¨ä¸è®¡ç®—åˆ†ç¦»çš„æ¶æ„ï¼Œå®ƒçš„ Meta æœåŠ¡å’Œ Storage æœåŠ¡å…±åŒç»„æˆäº†å­˜å‚¨å±‚ï¼ŒGraph æœåŠ¡æ˜¯å†…æ ¸æä¾›çš„è®¡ç®—å±‚ã€‚</p>
<p>è¿™æ ·çš„è®¾è®¡ä½¿å¾— NebulaGraph çš„é›†ç¾¤éƒ¨ç½²å¯ä»¥çµæ´»æŒ‰éœ€åˆ†é…è®¡ç®—ã€å­˜å‚¨çš„èµ„æºï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä¸ºåŒä¸€ä¸ªé›†ç¾¤ä¸­åˆ›å»ºä¸åŒé…ç½®çš„ä¸¤ç»„ Graph æœåŠ¡å®ä¾‹ã€ç”¨æ¥é¢å‘ä¸åŒç±»å‹çš„ä¸šåŠ¡ã€‚</p>
<p>åŒæ—¶ï¼Œè®¡ç®—å±‚è§£è€¦äºå­˜å‚¨å±‚ä½¿å¾—åœ¨ NebulaGraph ä¹‹ä¸Šçš„æ„å»ºä¸åŒçš„ç‰¹å®šè®¡ç®—å±‚æˆä¸ºå¯èƒ½ï¼Œæ¯”å¦‚ NebulaGraph Algorithmã€NebulaGraph Analytics å°±æ˜¯åœ¨ NebulaGraph ä¹‹ä¸Šæ„å»ºäº†å¼‚æ„çš„å¦ä¸€ä¸ªè®¡ç®—å±‚ï¼Œå¦‚æœéœ€è¦ï¼Œä»»ä½•äººä¹Ÿå¯ä»¥å®šåˆ¶è‡ªå·±çš„ä¸“å±è®¡ç®—å±‚ï¼Œä»è€Œæ»¡è¶³ç»Ÿä¸€å›¾åŸºç¡€å­˜å‚¨ä¹‹ä¸Šçš„å¤åˆã€å¤šæ ·çš„è®¡ç®—éœ€æ±‚ã€‚</p>
<h4 id="graph-service-nebula-graphd" class="headerLink">
    <a href="#graph-service-nebula-graphd" class="header-mark"></a>1.2.1 Graph Service: nebula-graphd</h4><p>Graph æœåŠ¡æ˜¯å¯¹å¤–æ¥å—å›¾åº“ç™»å½•ã€å›¾æŸ¥è¯¢è¯·æ±‚ã€é›†ç¾¤ç®¡ç†æ“ä½œã€schema å®šä¹‰æ‰€ç›´æ¥è¿æ¥çš„æœåŠ¡ï¼Œä»–çš„è¿›ç¨‹åå­—å« graphdï¼Œè¡¨ç¤º nebula graph daemonã€‚</p>
<p>Graph æœåŠ¡çš„æ¯ä¸€ä¸ªè¿›ç¨‹æ˜¯æ— çŠ¶æ€çš„ï¼Œè¿™ä½¿å¾—æ¨ªå‘æ‰©ç¼© Graph æœåŠ¡çš„å®ä¾‹éå¸¸çµæ´»ã€ç®€å•ã€‚</p>
<p>Graph æœåŠ¡ä¹Ÿå« Query Engineï¼Œå…¶å†…éƒ¨å’Œä¼ ç»Ÿçš„æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡éå¸¸ç›¸ä¼¼ï¼Œåˆ†ä¸ºï¼šè§£æã€æ ¡éªŒã€è®¡åˆ’ã€æ‰§è¡Œå‡ éƒ¨åˆ†ã€‚</p>
<p><figure><a class="lightgallery" href="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/query-engine-architecture.png" title="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/query-engine-architecture.png" data-thumbnail="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/query-engine-architecture.png">
        <img
            
            loading="lazy"
            src="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/query-engine-architecture.png"
            srcset="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/query-engine-architecture.png, https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/query-engine-architecture.png 1.5x, https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/query-engine-architecture.png 2x"
            sizes="auto"
            alt="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/query-engine-architecture.png">
    </a></figure></p>
<h4 id="meta-service-nebula-metad" class="headerLink">
    <a href="#meta-service-nebula-metad" class="header-mark"></a>1.2.2 Meta Service: nebula-metad</h4><p>Meta æœåŠ¡é¡¾åæ€ä¹‰è´Ÿè´£å…ƒæ•°æ®ç®¡ç†ï¼Œè¿›ç¨‹åå­—å« metadã€‚è¿™äº›å…ƒæ•°æ®åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ‰€æœ‰çš„å›¾ç©ºé—´ã€Schema å®šä¹‰</li>
<li>ç”¨æˆ·é‰´æƒã€æˆæƒä¿¡æ¯</li>
<li>é›†ç¾¤æœåŠ¡çš„å‘ç°ä¸æœåŠ¡çš„åˆ†å¸ƒ</li>
<li>å›¾ç©ºé—´ä¸­çš„æ•°æ®åˆ†å¸ƒ</li>
</ul>
<p>Meta æœåŠ¡çš„è¿›ç¨‹å¯ä»¥å•å®ä¾‹éƒ¨ç½²ï¼Œåœ¨éå•æœºéƒ¨ç½²çš„åœºæ™¯ä¸‹ï¼Œä¸ºäº†æ•°æ®ã€æœåŠ¡çš„é«˜ SLA ï¼Œæˆ‘ä»¬å¯ä»¥å¥‡æ•°å¤šä¸ªå®ä¾‹çš„éƒ¨ç½²ï¼Œé€šå¸¸æ¥è¯´ 3 ä¸ª nebula-metad å°±è¶³å¤Ÿäº†ï¼Œä¸‰ä¸ª nebula-metad é€šè¿‡ RAFT å…±è¯†åè®®æ„æˆä¸€ä¸ªé›†ç¾¤æä¾›æœåŠ¡ã€‚</p>
<p><figure><a class="lightgallery" href="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/meta-architecture1.png" title="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/meta-architecture1.png" data-thumbnail="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/meta-architecture1.png">
        <img
            
            loading="lazy"
            src="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/meta-architecture1.png"
            srcset="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/meta-architecture1.png, https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/meta-architecture1.png 1.5x, https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/meta-architecture1.png 2x"
            sizes="auto"
            alt="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/meta-architecture1.png">
    </a></figure></p>
<h4 id="storage-service-nebula-storaged" class="headerLink">
    <a href="#storage-service-nebula-storaged" class="header-mark"></a>1.2.3 Storage Service: nebula-storaged</h4><p>Storage æœåŠ¡å­˜å‚¨æ‰€æœ‰çš„å›¾æ•°æ®ï¼Œè¿›ç¨‹åå­—å« storagedã€‚storaged åˆ†å¸ƒå¼åœ°å­˜å‚¨å›¾æ•°æ®ï¼Œä¸º Graph å†…éƒ¨çš„å›¾æŸ¥è¯¢æ‰§è¡ŒæœŸæä¾›åº•å±‚çš„å›¾è¯­ä¹‰å­˜å‚¨æ¥å£ï¼Œæ–¹ä¾¿ Storage å®¢æˆ·ç«¯é€šè¿‡ Thrift RPC åè®®é¢å‘æ¶‰åŠçš„ storaged ç¤ºä¾‹è¿›è¡Œå›¾è¯­ä¹‰çš„è¯»å†™ã€‚</p>
<p>å½“ NebulaGraph ä¸­å›¾ç©ºé—´çš„å‰¯æœ¬æ•°å¤§äº 1 çš„æ—¶å€™ï¼Œæ¯ä¸€ä¸ªåˆ†åŒºéƒ½ä¼šåœ¨ä¸åŒ storaged ç¤ºä¾‹ä¸Šæœ‰å‰¯æœ¬ï¼Œå‰¯æœ¬ä¹‹é—´åˆ™é€šè¿‡ RAFT åè®®åè°ƒåŒæ­¥ä¸è¯»å†™ã€‚</p>
<p><figure><a class="lightgallery" href="https://www-cdn.nebula-graph.com.cn/nebula-blog/nebula-reading-storage-architecture.png" title="https://www-cdn.nebula-graph.com.cn/nebula-blog/nebula-reading-storage-architecture.png" data-thumbnail="https://www-cdn.nebula-graph.com.cn/nebula-blog/nebula-reading-storage-architecture.png">
        <img
            
            loading="lazy"
            src="https://www-cdn.nebula-graph.com.cn/nebula-blog/nebula-reading-storage-architecture.png"
            srcset="https://www-cdn.nebula-graph.com.cn/nebula-blog/nebula-reading-storage-architecture.png, https://www-cdn.nebula-graph.com.cn/nebula-blog/nebula-reading-storage-architecture.png 1.5x, https://www-cdn.nebula-graph.com.cn/nebula-blog/nebula-reading-storage-architecture.png 2x"
            sizes="auto"
            alt="https://www-cdn.nebula-graph.com.cn/nebula-blog/nebula-reading-storage-architecture.png">
    </a></figure></p>
<blockquote>
<p>å‚è€ƒ <a href="https://docs.nebula-graph.com.cn/master/1.introduction/3.nebula-graph-architecture/1.architecture-overview/" target="_blank" rel="noopener noreferrer">æ–‡æ¡£ï¼šæ¶æ„ä»‹ç»</a>ï¼Œäº†è§£æ›´å¤šè¯¦æƒ…ï¼›</p>
<p>æ¨èé˜…è¯»ç¤¾åŒºå®˜æ–¹æ’­å®¢çš„æ¶æ„ç³»åˆ—æ–‡ç« ï¼š<a href="https://www.nebula-graph.com.cn/tags/%E6%9E%B6%E6%9E%84%E7%B3%BB%E5%88%97" target="_blank" rel="noopener noreferrer">nebula-graph.com.cn/tags/æ¶æ„ç³»åˆ—</a>ã€‚</p>
</blockquote>
<h3 id="è¿›ç¨‹é—´é€šä¿¡æœåŠ¡å‘ç°æœºåˆ¶" class="headerLink">
    <a href="#%e8%bf%9b%e7%a8%8b%e9%97%b4%e9%80%9a%e4%bf%a1%e6%9c%8d%e5%8a%a1%e5%8f%91%e7%8e%b0%e6%9c%ba%e5%88%b6" class="header-mark"></a>1.3 è¿›ç¨‹é—´é€šä¿¡ã€æœåŠ¡å‘ç°æœºåˆ¶</h3><p>graphdã€metadã€storaged ä¹‹é—´é€šè¿‡ Thrift åè®®è¿›è¡Œè¿œç¨‹è°ƒç”¨ï¼ˆRPCï¼‰ï¼Œä¸‹è¾¹ç»™ä¸€äº›ä¾‹å­ï¼š</p>
<p>graphd ä¼šé€šè¿‡ metaclient è°ƒç”¨ metad</p>
<ul>
<li>å°†è‡ªå·±æŠ¥å‘Šä¸ºä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„æœåŠ¡ï¼Œä»¥ä¾¿è¢«å‘ç°</li>
<li>ä¸ºç”¨æˆ·ï¼ˆä½¿ç”¨ graphclient ï¼‰ç™»å½•è¿›è¡Œ RPC è°ƒç”¨</li>
<li>å½“å®ƒå¤„ç† nGQL æŸ¥è¯¢æ—¶ï¼Œè·å–å›¾å½¢å­˜å‚¨åˆ†å¸ƒæƒ…å†µ</li>
</ul>
<p>graphd ä¼šé€šè¿‡ storageclient è°ƒç”¨ storaged</p>
<ul>
<li>åœ¨å¤„ç† nGQL æ—¶ï¼Œåœ¨å®ƒä» metad è·å¾—æ‰€éœ€çš„å…ƒä¿¡æ¯åï¼Œè¿›è¡Œå›¾å½¢æ•°æ®çš„è¯»/å†™</li>
</ul>
<p>storaged ä¼šé€šè¿‡  metaclientè°ƒç”¨ metad</p>
<ul>
<li>å°†è‡ªå·±æŠ¥å‘Šä¸ºä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„æœåŠ¡ï¼Œä»¥ä¾¿è¢«å‘ç°</li>
</ul>
<p>å½“ç„¶æœ‰çŠ¶æ€çš„å­˜å‚¨å¼•æ“å†…éƒ¨ä¹Ÿæœ‰é›†ç¾¤åŒæ­¥çš„æµé‡ä¸é€šä¿¡</p>
<ul>
<li>
<p>storaged ä¸å…¶ä»– storaged æœ‰ RAFT è¿æ¥</p>
</li>
<li>
<p>metad ä¸å…¶ä»– metad å®ä¾‹æœ‰ RAFT è¿æ¥</p>
</li>
</ul>
<h2 id="å¼€å‘ç¯å¢ƒæ­å»º" class="headerLink">
    <a href="#%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba" class="header-mark"></a>2 å¼€å‘ç¯å¢ƒæ­å»º</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹ NebulaGraph çš„æ„å»ºã€å¼€å‘ç¯å¢ƒçš„éƒ¨åˆ†ã€‚</p>
<p>NebulaGraph åªæ”¯æŒåœ¨ GNU/Linux åˆ†æ”¯ä¸­æ„å»ºï¼Œç›®å‰æ¥è¯´ï¼Œæœ€æ–¹ä¾¿çš„æ–¹å¼æ˜¯åœ¨ç¤¾åŒºé¢„å…ˆæä¾›å¥½äº†ä¾èµ–çš„å®¹å™¨é•œåƒçš„åŸºç¡€ä¸Šåœ¨å®¹å™¨å†…éƒ¨æ„å»ºã€è°ƒè¯• NebulaGraph ä»£ç çš„æ›´æ”¹å’Œ Debugã€‚</p>
<h3 id="åˆ›å»ºä¸€ä¸ªå®¹å™¨åŒ–çš„-nebulagraph-é›†ç¾¤" class="headerLink">
    <a href="#%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e5%ae%b9%e5%99%a8%e5%8c%96%e7%9a%84-nebulagraph-%e9%9b%86%e7%be%a4" class="header-mark"></a>2.1 åˆ›å»ºä¸€ä¸ªå®¹å™¨åŒ–çš„ NebulaGraph é›†ç¾¤</h3><p>ä¸ºäº†æ›´æ–¹ä¾¿åœ°è°ƒè¯•ä»£ç ï¼Œæˆ‘ä¹ æƒ¯æå‰åˆ›å»ºä¸€ä¸ª NebulaGraph Docker ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®˜æ–¹çš„ Docker-Compose æ–¹å¼éƒ¨ç½²ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘åœ¨å®˜æ–¹ Docker-Compose åŸºç¡€ä¹‹ä¸Šå¼„çš„ä¸€é”®éƒ¨ç½²å·¥å…·ï¼šnebula-up.siwei.ioã€‚</p>
<p>ä»¥ nebula-up ä¸ºä¾‹ï¼š</p>
<p>åœ¨æˆ‘ä»¬çš„ Linux å¼€å‘æœåŠ¡å™¨ä¸­æ‰§è¡Œ <code>curl -fsSL nebula-up.siwei.io/install.sh | bash</code> å°±å¯ä»¥äº†ã€‚</p>
<h3 id="ä»£ç è·å–" class="headerLink">
    <a href="#%e4%bb%a3%e7%a0%81%e8%8e%b7%e5%8f%96" class="header-mark"></a>2.2 ä»£ç è·å–</h3><p>NebulaGraph çš„ä»£ç ä»“åº“æ‰˜ç®¡åœ¨ GitHub ä¹‹ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ‰äº’è”ç½‘çš„åœ°æ–¹ç›´æ¥å…‹éš†ä¸‹æ¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone git@github.com:vesoft-inc/nebula.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> nebula
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åˆ›å»ºå¼€å‘å®¹å™¨" class="headerLink">
    <a href="#%e5%88%9b%e5%bb%ba%e5%bc%80%e5%8f%91%e5%ae%b9%e5%99%a8" class="header-mark"></a>2.3 åˆ›å»ºå¼€å‘å®¹å™¨</h3><p>æœ‰äº† NebulaGraph é›†ç¾¤ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© <a href="https://github.com/vesoft-inc/nebula-dev-docker/" target="_blank" rel="noopener noreferrer">https://github.com/vesoft-inc/nebula-dev-docker/</a> æä¾›çš„å¼€ç®±å³ç”¨å¼€å‘å®¹å™¨é•œåƒï¼Œæ­å»ºå¼€å‘ç¯å¢ƒï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">TAG</span><span class="o">=</span>ubuntu2004
</span></span><span class="line"><span class="cl">docker run -ti <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --network nebula-net <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --security-opt <span class="nv">seccomp</span><span class="o">=</span>unconfined <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -v <span class="s2">&#34;</span><span class="nv">$PWD</span><span class="s2">&#34;</span>:/home/nebula <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -w /home/nebula <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --name nebula_dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  vesoft/nebula-dev:<span class="nv">$TAG</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  bash
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>è¿™å…¶ä¸­ï¼Œ<code>-v &quot;$PWD&quot;</code> è¡¨ç¤ºå½“å‰çš„ NebulaGraph ä»£ç æœ¬åœ°çš„è·¯å¾„ä¼šè¢«æ˜ å°„åˆ°å¼€å‘å®¹å™¨å†…éƒ¨çš„ <code>/home/nebula</code>ï¼Œè€Œå¯åŠ¨çš„å®¹å™¨åå­—æ˜¯ <code>nebula_dev</code>ã€‚</p>
</blockquote>
<p>å¾…è¿™ä¸ªå®¹å™¨å¯åŠ¨ä¹‹åï¼Œæˆ‘ä»¬ä¼šè‡ªåŠ¨è¿›å…¥åˆ°è¿™ä¸ªå®¹å™¨çš„ bash shell ä¹‹ä¸­ï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥ <code>exit</code> é€€å‡ºå®¹å™¨ï¼Œå®ƒä¼šè¢«å…³é—­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å†æ¬¡å¯åŠ¨å®¹å™¨ï¼Œåªéœ€è¦æ‰§è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker start nebula_dev
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹åï¼Œæˆ‘ä»¬çš„ç¼–è¯‘ã€Debugã€æµ‹è¯•å·¥ä½œéƒ½åœ¨ <code>nebula_dev</code> å®¹å™¨å†…éƒ¨è¿›è¡Œï¼Œåœ¨å®¹å™¨æ˜¯è¿è¡ŒçŠ¶æ€çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥éšæ—¶æ–°å»ºä¸€ä¸ªå®¹å™¨å†…éƒ¨çš„ bash shell è¿›ç¨‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker <span class="nb">exec</span> -ti nebula_dev bash
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>æ³¨ï¼Œä¸ºäº†ä¿æŒç¼–è¯‘ç¯å¢ƒæ˜¯æœ€æ–°çš„ï¼Œæˆ‘ä»¬å¯ä»¥å®šæœŸåˆ é™¤ã€æ‹‰å–ã€é‡å»ºè¿™ä¸ªå¼€å‘å®¹å™¨ï¼Œä»¥ä¿æŒç¯å¢ƒä¸ä»£ç ç›¸åŒ¹é…ã€‚</p>
</blockquote>
<h3 id="ç¼–è¯‘ç¯å¢ƒ" class="headerLink">
    <a href="#%e7%bc%96%e8%af%91%e7%8e%af%e5%a2%83" class="header-mark"></a>2.4 ç¼–è¯‘ç¯å¢ƒ</h3><p>åœ¨ <code>nebula_dev</code> è¿™ä¸ªå®¹å™¨å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä»£ç ç¼–è¯‘ï¼š</p>
<p>è¿›å…¥ç¼–è¯‘å®¹å™¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker <span class="nb">exec</span> -ti nebula_dev bash
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”¨ CMake å‡†å¤‡ makefileï¼Œç¬¬ä¸€æ¬¡æ„å»ºçš„æ—¶å€™ï¼Œä¸ºäº†èŠ‚çœæ—¶é—´ã€å†…å­˜ï¼Œæˆ‘å…³é—­äº†æµ‹è¯•ï¼ˆ<code>-DENABLE_TESTING=OFF</code>ï¼‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
</span></span><span class="line"><span class="cl">cmake -DCMAKE_CXX_COMPILER<span class="o">=</span><span class="nv">$TOOLSET_CLANG_DIR</span>/bin/g++ -DCMAKE_C_COMPILER<span class="o">=</span><span class="nv">$TOOLSET_CLANG_DIR</span>/bin/gcc -DENABLE_WERROR<span class="o">=</span>OFF -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug -DENABLE_TESTING<span class="o">=</span>OFF ..
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¼€å§‹ç¼–è¯‘ï¼Œæ ¹æ®æœåŠ¡å™¨çš„ç©ºé—² CPU ä¸ªæ•°å’Œå†…å­˜é‡åŠ›è€Œè¡Œï¼Œæ¯”å¦‚æˆ‘åœ¨è‡ªå·± 72 æ ¸å¿ƒçš„æœåŠ¡å™¨ä¸Šå‡†å¤‡å…è®¸åŒæ—¶è¿è¡Œ 64 ä¸ª jobï¼Œåˆ™è¿è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">make -j64
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸€æ¬¡æ„å»ºçš„æ—¶é—´ä¼šæ…¢ä¸€äº›ï¼Œåœ¨ make æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡Œ <code>make install</code> æŠŠäºŒè¿›åˆ¶å®‰è£…åˆ°åƒç”Ÿäº§å®‰è£…æ—¶å€™ä¸€æ ·çš„è·¯å¾„ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@1827b82e88bf:/home/nebula/build# make install
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">root@1827b82e88bf:/home/nebula/build# ls /usr/local/nebula/bin
</span></span><span class="line"><span class="cl">db_dump  db_upgrader  meta_dump  nebula-graphd  nebula-metad  nebula-storaged
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">root@1827b82e88bf:/home/nebula/build# ls /usr/local/nebula/
</span></span><span class="line"><span class="cl">bin  etc  pids  scripts  share
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="è°ƒè¯•-nebulagraph" class="headerLink">
    <a href="#%e8%b0%83%e8%af%95-nebulagraph" class="header-mark"></a>3 è°ƒè¯• NebulaGraph</h2><p>ä»¥ GraphD è°ƒè¯•ä¸ºä¾‹ã€‚</p>
<h3 id="å®‰è£…ä¾èµ–" class="headerLink">
    <a href="#%e5%ae%89%e8%a3%85%e4%be%9d%e8%b5%96" class="header-mark"></a>3.1 å®‰è£…ä¾èµ–</h3><p>å®‰è£…ä¸€äº›åè¾¹ä¼šæ–¹ä¾¿ Debug é¢å¤–ç”¨åˆ°çš„ä¾èµ–</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># è£…ä¸€ä¸ª pingï¼Œæµ‹è¯•ä¸€ä¸‹ nebula-up å®‰è£…çš„é›†ç¾¤å¯ä»¥è®¿é—®</span>
</span></span><span class="line"><span class="cl">apt update <span class="o">&amp;&amp;</span> apt install iputils-ping -y
</span></span><span class="line"><span class="cl"><span class="c1"># ping graphd è¯•è¯•çœ‹</span>
</span></span><span class="line"><span class="cl">ping graphd -c <span class="m">4</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å®‰è£… gdb gdb-dashboard</span>
</span></span><span class="line"><span class="cl">apt install gdb -y
</span></span><span class="line"><span class="cl">wget -P ~ https://git.io/.gdbinit
</span></span><span class="line"><span class="cl">pip install pygments
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å‡†å¤‡å®¢æˆ·ç«¯" class="headerLink">
    <a href="#%e5%87%86%e5%a4%87%e5%ae%a2%e6%88%b7%e7%ab%af" class="header-mark"></a>3.2 å‡†å¤‡å®¢æˆ·ç«¯</h3><p>å‡†å¤‡ä¸€ä¸ª NebulaGraph çš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># æ–°å¼€ä¸€ä¸ª nebula_dev çš„ shell</span>
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> -ti nebula_dev bash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸‹è½½ nebula-console äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼Œå‘½åä¸º nebula-console å¹¶å®‰è£…åˆ° /usr/bin/ ä¸‹</span>
</span></span><span class="line"><span class="cl">wget https://github.com/vesoft-inc/nebula-console/releases/download/v3.2.0/nebula-console-linux-amd64-v3.2.0
</span></span><span class="line"><span class="cl">chmod +x nebula-console*
</span></span><span class="line"><span class="cl">mv nebula-console* /usr/bin/nebula-console
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿æ¥åˆ°å‰è¾¹æˆ‘ä»¬ nebula-up å‡†å¤‡çš„é›†ç¾¤ä¹‹ä¸Šï¼ŒåŠ è½½ basketballplayer è¿™ä¸ªæµ‹è¯•æ•°æ®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nebula-console -u root -p nebula --address<span class="o">=</span>graphd --port<span class="o">=</span><span class="m">9669</span>
</span></span><span class="line"><span class="cl">:play basketballplayer<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">exit</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="gdb-è¿è¡Œ-graphd" class="headerLink">
    <a href="#gdb-%e8%bf%90%e8%a1%8c-graphd" class="header-mark"></a>3.3 gdb è¿è¡Œ graphd</h3><p>æˆ‘ä»¬ç”¨ gdb æ‰§è¡Œåˆšåˆšç¼–è¯‘çš„ nebula-graphd äºŒè¿›åˆ¶ï¼Œè®©ä»–æˆä¸ºä¸€ä¸ªæ–°çš„ graphd æœåŠ¡ï¼Œåå­—å°±å« <code>nebula_dev</code>ã€‚</p>
<p>é¦–å…ˆå¯åŠ¨ gdb</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># æ–°å¼€ä¸€ä¸ª nebula_dev çš„ shell</span>
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> -ti nebula_dev bash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /usr/local/nebula/
</span></span><span class="line"><span class="cl">mkdir -p /home/nebula/build/log
</span></span><span class="line"><span class="cl">gdb bin/nebula-graphd
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ gdb å†…éƒ¨æ‰§è¡Œè®¾ç½®å¿…è¦çš„å‚æ•°</p>
<p>è·Ÿéš fork çš„å­è¿›ç¨‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="err">set</span> <span class="err">follow-fork-mode</span> <span class="err">child</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è®¾ç½®å¾…è°ƒè¯• graphd çš„å¯åŠ¨å‚æ•°ï¼ˆé…ç½®ï¼‰ï¼š</p>
<ul>
<li>meta_server_addrs å¡«å·²ç»å¯åŠ¨çš„é›†ç¾¤çš„æ‰€æœ‰ metad çš„åœ°å€</li>
<li>local_ip å’Œ ws_ip å¡«æœ¬å®¹å™¨çš„åŸŸåï¼Œport æ˜¯ graphd ç›‘å¬ç«¯å£</li>
<li>log_dir æ˜¯è¾“å‡ºæ—¥å¿—çš„ç›®å½•ï¼Œv å’Œ minloglevel æ˜¯æ—¥å¿—çš„è¾“å‡ºç­‰çº§</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="err">set</span> <span class="err">args</span> <span class="nv">--flagfile</span><span class="o">=</span>/usr/local/nebula/etc/nebula-graphd.conf.default <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --meta_server_addrs<span class="o">=</span>metad0:9559,metad1:9559,metad2:9559 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --port<span class="o">=</span><span class="m">9669</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --local_ip<span class="o">=</span>nebula_dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --ws_ip<span class="o">=</span>nebula_dev <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --ws_http_port<span class="o">=</span><span class="m">19669</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --log_dir<span class="o">=</span>/home/nebula/build/log <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --v<span class="o">=</span><span class="m">4</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --minloglevel<span class="o">=</span><span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæˆ‘ä»¬æƒ³åŠ æ–­ç‚¹åœ¨ <code>src/common/function/FunctionManager.cpp</code> 2783 è¡Œï¼Œå¯ä»¥å†æ‰§è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nf">b /home/nebula/src/common/function/FunctionManager.cpp</span><span class="o">:</span>2783
</span></span></code></pre></td></tr></table>
</div>
</div><p>é…ç½®å‰è¾¹å®‰è£…çš„ gdb-dashboardï¼Œä¸€ä¸ªå¼€æºçš„ gdb ç•Œé¢æ’ä»¶ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="c"># è®¾å®šåœ¨ gdb ç•Œé¢ä¸Šå±•ç¤º ä»£ç ã€å†å²ã€å›è°ƒæ ˆã€å˜é‡ã€è¡¨è¾¾å‡ ä¸ªéƒ¨åˆ†ï¼Œè¯¦ç»†å‚è€ƒ https://github.com/cyrus-and/gdb-dashboard
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="err">dashboard</span> <span class="err">-layout</span> <span class="err">source</span> <span class="err">history</span> <span class="err">stack</span> <span class="err">variables</span> <span class="err">expressions</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€åæˆ‘ä»¬è®©è¿›ç¨‹é€šè¿‡ gdb è·‘èµ·æ¥å§ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="err">run</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™ä¸ªçª—å£/shell ä¼šè¯ä¸‹è°ƒè¯• graphd ç¨‹åºäº†ã€‚</p>
<h2 id="ä¿®æ”¹-nebulagraph-ä»£ç " class="headerLink">
    <a href="#%e4%bf%ae%e6%94%b9-nebulagraph-%e4%bb%a3%e7%a0%81" class="header-mark"></a>4 ä¿®æ”¹ NebulaGraph ä»£ç </h2><p>è¿™é‡Œï¼Œæˆ‘ä»¥ <a href="https://github.com/vesoft-inc/nebula/issues/3513" target="_blank" rel="noopener noreferrer">#3513</a> è¿™ä¸ª issue ä¸ºä¾‹å­ï¼Œå¿«é€Ÿä»‹ç»ä¸€ä¸‹ä»£ç ä¿®æ”¹çš„è¿‡ç¨‹ã€‚</p>
<h3 id="è¯»ä»£ç " class="headerLink">
    <a href="#%e8%af%bb%e4%bb%a3%e7%a0%81" class="header-mark"></a>4.1 è¯»ä»£ç </h3><p>è¿™ä¸ª issue è¡¨è¾¾çš„å†…å®¹æ˜¯åœ¨æœ‰ä¸€å°éƒ¨åˆ†ç”¨æˆ·å†³å®šæŠŠ JSON ä»¥ String çš„å½¢å¼å­˜å‚¨åœ¨ NebulaGraph ä¸­çš„å±æ€§é‡Œï¼Œå› ä¸ºè¿™ç§æ–¹å¼æ¯”è¾ƒç½•è§ä¸”ä¸è¢«æ¨å´‡ï¼ŒNebulaGraph æ²¡æœ‰ç›´æ¥æ”¯æŒå¯¹ JSON String ç›´æ¥è§£æçš„æ–¹æ³•ã€‚</p>
<p>æœ¬æ¥è¿™ä¸ªåŠŸèƒ½æ˜¯ç­‰åˆ°å¾ˆå¸Œæœ›å¾—åˆ°æ”¯æŒçš„åŒå­¦è¿‡æ¥äº²è‡ªå»å®ç°çš„ï¼Œè€Œåœ¨ Issue ä¸­ï¼Œåˆšå¥½æœ‰ä¸€ä½æ–°æ‰‹è´¡çŒ®è€…åœ¨é‡Œè¾¹å›å¤æ±‚åŠ©å¦‚ä½•èƒ½å¼€å§‹å‚ä¸è¿™ä¸ªè´¡çŒ®ã€‚æ¥ç€è¿™ä¸ªå¥‘æœºï¼Œæˆ‘å»å‚ä¸è®¨è®ºçœ‹äº†ä¸€ä¸‹è¿™ä¸ªåŠŸèƒ½å¯ä»¥å®ç°æˆä»€ä¹ˆæ ·å­ï¼Œæœ€ç»ˆè®¨è®ºçš„ç»“æœæ˜¯å¯ä»¥åšæˆå’Œ MySQL ä¸­çš„ <code>JSON_EXTRACT</code> å‡½æ•°é‚£æ ·ï¼Œä½†æ˜¯æ”¹ä¸ºåªæ¥å— JSON Stringï¼Œæ— éœ€å¤„ç†è¾“å‡ºè·¯å¾„å‚æ•°ã€‚</p>
<p>è¿™ä¸ªä»»åŠ¡ä¸€å¥è¯æ¥è¯´å°±æ˜¯ä¸º NebulaGraph å¼•å…¥ä¸€ä¸ªè§£æ JSON String ä¸º Map çš„å‡½æ•°ã€‚é‚£ä¹ˆï¼Œåº”è¯¥å¤§æ¦‚å¦‚ä½•å®ç°è¿™ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ</p>
<h4 id="åœ¨å“ªé‡Œä¿®æ”¹" class="headerLink">
    <a href="#%e5%9c%a8%e5%93%aa%e9%87%8c%e4%bf%ae%e6%94%b9" class="header-mark"></a>4.1.1 åœ¨å“ªé‡Œä¿®æ”¹</h4><p>å¾ˆè‡ªç„¶ï¼Œå¼•å…¥æ–°çš„å‡½æ•°çš„æ›´æ”¹è‚¯å®šæœ‰å¾ˆå¤šï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°ä¹‹å‰å¢åŠ æ–°å‡½æ•°çš„ PR å°±å¯ä»¥å¿«é€ŸçŸ¥é“åœ¨å“ªäº›åœ°æ–¹ä¿®æ”¹äº†ã€‚</p>
<blockquote>
<p>å½“ç„¶æˆ‘ä»¬å¯ä»¥è‡ªåº•å‘ä¸Šå»äº†è§£ NebulaGraph æ•´ä½“çš„ä»£ç ç»“æ„ï¼Œç„¶åä¸€ç‚¹ç‚¹æ‰¾åˆ°å‡½æ•°å¤„ç†çš„ä½ç½®ï¼Œäº‹å®ä¸Šæœ‰çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿä¸å¾—ä¸è¿™ä¹ˆåšï¼Œè¿™æ—¶å€™é™¤äº†ä»£ç æœ¬èº«ï¼Œä¸€äº›é¢å‘è´¡çŒ®è€…çš„æ–‡ç« å¯èƒ½ä¼šå¸®åŠ©æˆ‘ä»¬äº‹åŠåŠŸå€å¯¹æ•´ä½“æœ‰ä¸€ä¸ªäº†è§£ï¼ŒNebulaGraph å®˜æ–¹åšå®¢é‡Œå°±æœ‰è¿™æ ·çš„ä¸€ä¸ªç³»åˆ—æ–‡ç« ï¼Œæ¨èå¤§å®¶åœ¨è´¡çŒ®çš„æ—¶å€™ä¹Ÿå»é€šè¯»ä¸€ä¸‹ï¼š<a href="https://www.nebula-graph.com.cn/posts/nebula-graph-source-code-reading-00" target="_blank" rel="noopener noreferrer">nebula-graph.com.cn/posts/nebula-graph-source-code-reading-00</a>ã€‚</p>
</blockquote>
<p>äºæ˜¯ï¼Œæˆ‘ä» <a href="https://github.com/vesoft-inc/nebula/pull/4526" target="_blank" rel="noopener noreferrer">#4526</a> è¿™ä¸ª PR é‡Œäº†è§£åˆ°æ‰€æœ‰å‡½æ•°å…¥å£éƒ½è¢«ç»Ÿä¸€ç®¡ç†åœ¨ <a href="https://github.com/vesoft-inc/nebula/blob/master/src/common/function/FunctionManager.cpp" target="_blank" rel="noopener noreferrer">src/common/function/FunctionManager.cpp</a> ä¹‹ä¸­ï¼Œé€šè¿‡æœç´¢ã€ç†è§£å…¶ä¸­å…¶ä»–æŸä¸€ä¸ªå‡½æ•°çš„å…³é”®è¯ä¹‹åå¯ä»¥å¾ˆå®¹æ˜“ç†è§£ä¸€ä¸ªå‡½æ•°å®ä½“çš„å…³é”®è¯ã€è¾“å…¥è¾“å‡ºæ•°æ®ç±»å‹ã€ä»¥åŠå®ƒçš„å¤„ç†é€»è¾‘çš„ä»£ç åœ¨å“ªé‡Œå®ç°ã€‚</p>
<p>åŒæ—¶ï¼Œæˆ‘æ³¨æ„åˆ°åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œ<code>src/common/function/test/FunctionManagerTest.cpp</code> ä¹‹ä¸­åˆ™æ˜¯æ‰€æœ‰è¿™äº›å‡½æ•°çš„å•å…ƒæµ‹è¯•ä»£ç ï¼Œç”¨åŒæ ·çš„æ–¹å¼ä¹Ÿå¯ä»¥çŸ¥é“æ–°åŠ çš„ä¸€ä¸ªå‡½æ•°éœ€è¦å¦‚ä½•åœ¨é‡Œè¾¹å®ç°åŸºäº gtest çš„å•å…ƒæµ‹è¯•ã€‚</p>
<h3 id="å¼€å§‹æ”¹ä»£ç " class="headerLink">
    <a href="#%e5%bc%80%e5%a7%8b%e6%94%b9%e4%bb%a3%e7%a0%81" class="header-mark"></a>4.2 å¼€å§‹æ”¹ä»£ç </h3><blockquote>
<p>æ³¨ï¼šåœ¨ä¿®æ”¹ä»£ç ä¹‹å‰ï¼Œè¯·ç¡®ä¿è‡ªå·±åœ¨æœ€æ–°çš„ master åˆ†æ”¯ä¹‹ä¸Šåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„åˆ†æ”¯ï¼Œè¿™é‡Œçš„ä¾‹å­ä¸­ï¼Œæˆ‘æŠŠåˆ†æ”¯åå­—å« <code>fn_JSON_EXTRACT</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git checkout master
</span></span><span class="line"><span class="cl">git pull
</span></span><span class="line"><span class="cl">git checkout -b fn_JSON_EXTRACT
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<p>é€šè¿‡ Google äº†è§£ä¸äº¤å‰éªŒè¯ NebulaGraph å†…éƒ¨ä½¿ç”¨çš„ utils åº“ï¼Œæˆ‘çŸ¥é“æˆ‘åº”è¯¥ç”¨ <code>folly::parseJson</code> æŠŠå­—ç¬¦ä¸²è¯»æˆ <code>folly::dynamic</code> ç„¶åå† cast æˆ NebulaGraph å†…ç½®çš„ Map() ç±»å‹ï¼Œç„¶åï¼Œå€ŸåŠ©äº StackOverflow/GitHub Copilotï¼Œæˆ‘ç»ˆäºå®Œæˆäº†ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„ä»£ç ä¿®æ”¹ã€‚</p>
<h3 id="è°ƒè¯•ä»£ç " class="headerLink">
    <a href="#%e8%b0%83%e8%af%95%e4%bb%a3%e7%a0%81" class="header-mark"></a>4.3 è°ƒè¯•ä»£ç </h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å…´å†²å†²åœ°æ”¹å¥½äº†ç¬¬ä¸€ç‰ˆçš„ä»£ç ï¼Œä¿¡å¿ƒæ»¡æ»¡åœ°å¼€å§‹ç¼–è¯‘ï¼å®é™…ä¸Šå› ä¸ºæ˜¯ CPP æ–°æ‰‹ï¼Œå³ä½¿åœ¨ Copilot çš„åŠ æŒä¸‹ï¼Œæˆ‘çš„ä»£ç è¿˜æ˜¯èŠ±äº†å¥½å‡ æ¬¡ä¿®æ”¹æ‰é€šè¿‡ç¼–è¯‘ã€‚</p>
<p>ç„¶åï¼Œæˆ‘å¼€å§‹ç”¨ GDB æŠŠä¿®æ”¹äº†çš„ GraphD å¯åŠ¨èµ·æ¥ï¼Œç”¨ console å‘èµ· <code>JSON_EXTRACT</code> çš„å‡½æ•°è°ƒç”¨ï¼Œå…ˆè°ƒé€šäº†æœŸå¾…ä¸­çš„æ•ˆæœï¼Œå¹¶è¯•ç€è·‘å‡ ç§å¼‚å¸¸çš„è¾“å…¥ï¼Œåœ¨å‘ç°æ–°é—®é¢˜ã€ä¿®æ”¹ã€ç¼–è¯‘ã€è°ƒè¯•çš„å‡ è½®å¾ªç¯ä¸‹è®©ä»£ç è¾¾åˆ°äº†æœŸæœ›çš„çŠ¶æ€ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘çŸ¥é“æˆ‘è¦æŠŠä»£ç æäº¤åˆ° GitHub è¯·é¡¹ç›®çš„èµ„æ·±è´¡çŒ®è€…å¸®å¿™ review å•¦ï¼</p>
<h2 id="æäº¤-pr" class="headerLink">
    <a href="#%e6%8f%90%e4%ba%a4-pr" class="header-mark"></a>5 æäº¤ PR</h2><p>PRï¼ˆPull Requestï¼‰æ˜¯ GitHub ä¸­æ–¹ä¾¿å¤šäººä»£ç åä½œã€ä»£ç å®¡æŸ¥ä¸­çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒé€šè¿‡æŠŠä¸€ä¸ª repo ä¸‹çš„åˆ†æ”¯ä¸è¿™ä¸ªå®¡æŸ¥åä½œçš„å®ä¾‹ï¼ˆPRï¼‰åšæ˜ å°„ï¼Œå¾—åˆ°ä¸€ä¸ªé¡¹ç›®ä¸‹å”¯ä¸€çš„ PR å·ç ä¹‹åï¼Œç”Ÿæˆå•ç‹¬çš„ç½‘é¡µï¼Œåœ¨è¿™ä¸ªç½‘é¡µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸åŒè´¡çŒ®è€…ä¹‹é—´çš„äº¤æµå’Œåç»­çš„ä»£ç æ›´æ–°ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä»£ç æäº¤è€…ä»¬å¯ä»¥ä¸€ç›´åœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šä¸æ–­æäº¤ä»£ç ç›´åˆ°ä»£ç çš„çŠ¶æ€è¢«å„æ–¹åŒæ„ä¹‹åï¼Œå°±å¯ä»¥åˆå¹¶ï¼ˆmergeï¼‰åˆ°ç›®çš„åˆ†æ”¯ä¸­ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºï¼š</p>
<ul>
<li>åˆ›å»º GitHub ä¸Šè¿œç¨‹çš„ä¸ªäººå¼€å‘åˆ†æ”¯</li>
<li>åŸºäºåˆ†æ”¯åˆ›å»ºç›®æ ‡é¡¹ç›®ä»“åº“ä¸­çš„ PR</li>
<li>åœ¨ PR ä¸­åä½œã€è®¨è®ºã€ä¸æ–­å†æ¬¡æäº¤åˆ°å¼€å‘åˆ†æ”¯ç›´åˆ°å¤šæ–¹è¾¾åˆ°åˆå¹¶ã€æˆ–è€…å…³é—­çš„å…±è¯†</li>
</ul>
<h3 id="æäº¤åˆ°ä¸ªäººè¿œç¨‹åˆ†æ”¯" class="headerLink">
    <a href="#%e6%8f%90%e4%ba%a4%e5%88%b0%e4%b8%aa%e4%ba%ba%e8%bf%9c%e7%a8%8b%e5%88%86%e6%94%af" class="header-mark"></a>5.1 æäº¤åˆ°ä¸ªäººè¿œç¨‹åˆ†æ”¯</h3><p>è¿™ä¸€æ­¥éª¤é‡Œï¼Œæˆ‘ä»¬è¦æŠŠå½“å‰çš„æœ¬åœ°æäº¤çš„ commitï¼Œæäº¤åˆ°è‡ªå·±çš„ GitHub åˆ†å‰ä¹‹ä¸­ã€‚</p>
<h4 id="commit-æœ¬åœ°ä¿®æ”¹" class="headerLink">
    <a href="#commit-%e6%9c%ac%e5%9c%b0%e4%bf%ae%e6%94%b9" class="header-mark"></a>5.1.1 commit æœ¬åœ°ä¿®æ”¹</h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬ç¡®è®¤ä¸€ä¸‹æœ¬åœ°çš„ä¿®æ”¹æ˜¯å¦éƒ½æ˜¯æœŸå¾…ä¸­çš„ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># å…ˆç¡®å®šä¿®æ”¹çš„æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl">$ git status
</span></span><span class="line"><span class="cl"><span class="c1"># å†çœ‹çœ‹ä¿®æ”¹çš„å†…å®¹</span>
</span></span><span class="line"><span class="cl">$ git diff
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åï¼ŒæŠŠå®ƒä»¬ commitï¼ˆæäº¤åœ¨æœ¬åœ°ä»“åº“ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># æ·»åŠ æ‰€æœ‰å½“å‰ç›®å½•ï¼ˆ. è¿™ä¸ªç‚¹è¡¨ç¤ºå½“å‰ç›®å½•ï¼‰ä¿®æ”¹è¿‡çš„æ–‡ä»¶ä¸ºå¾… commit</span>
</span></span><span class="line"><span class="cl">$ git add .
</span></span><span class="line"><span class="cl"><span class="c1"># ç„¶åæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹çŠ¶æ€ï¼Œè¿™äº›ä¿®æ”¹çš„æ–‡ä»¶çŠ¶æ€å·²ç»ä¸åŒäº†</span>
</span></span><span class="line"><span class="cl">$ git status
</span></span><span class="line"><span class="cl"><span class="c1"># æœ€åï¼Œæäº¤åœ¨æœ¬åœ°ä»“åº“ï¼Œå¹¶ç”¨ -m å‚æ•°æŒ‡å®šå•è¡Œçš„ commit message</span>
</span></span><span class="line"><span class="cl">$ git commit -m <span class="s2">&#34;feat: introduce function JSON_EXTRACT&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æäº¤åˆ°è‡ªå·±è¿œç¨‹çš„åˆ†æ”¯" class="headerLink">
    <a href="#%e6%8f%90%e4%ba%a4%e5%88%b0%e8%87%aa%e5%b7%b1%e8%bf%9c%e7%a8%8b%e7%9a%84%e5%88%86%e6%94%af" class="header-mark"></a>5.1.2 æäº¤åˆ°è‡ªå·±è¿œç¨‹çš„åˆ†æ”¯</h4><p>åœ¨æäº¤ä¹‹å‰ï¼Œè¦ç¡®ä¿è‡ªå·±çš„ GitHub è´¦å·ä¹‹ä¸‹ç¡®å®å­˜åœ¨ NebulaGraph ä»£ç ä»“åº“çš„åˆ†å‰ï¼ˆforkï¼‰ï¼Œæ¯”å¦‚æˆ‘çš„ GitHub è´¦å·æ˜¯ wey-guï¼Œæˆ‘è®¿é—®ï¼Œé‚£ä¹ˆæˆ‘å¯¹ <a href="https://github.com/vesoft-inc/nebula" target="_blank" rel="noopener noreferrer">https://github.com/vesoft-inc/nebula</a> çš„åˆ†å‰åº”è¯¥å°±æ˜¯ <a href="https://github.com/wey-gu/nebula" target="_blank" rel="noopener noreferrer">https://github.com/wey-gu/nebula</a> ã€‚</p>
<p>å¦‚æœè¿˜æ²¡æœ‰è‡ªå·±çš„åˆ†å‰ï¼Œå¯ä»¥ç›´æ¥åœ¨  <a href="https://github.com/vesoft-inc/nebula" target="_blank" rel="noopener noreferrer">https://github.com/vesoft-inc/nebula</a> ä¸Šç‚¹å‡»å³ä¸Šè§’çš„ Forkï¼Œåˆ›å»ºè‡ªå·±çš„åˆ†å‰ä»“åº“ã€‚</p>
<p>å½“è¿œç¨‹çš„ä¸ªäººåˆ†å‰å­˜åœ¨ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»£ç æäº¤ä¸Šå»äº†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># æ·»åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“å« wey</span>
</span></span><span class="line"><span class="cl">git remote add wey git@github.com:wey-gu/nebula.git
</span></span><span class="line"><span class="cl"><span class="c1"># æäº¤ JSON_EXTRACT åˆ†æ”¯åˆ° wey è¿™ä¸ª remote ä»“åº“</span>
</span></span><span class="line"><span class="cl">git push wey JSON_EXTRACT
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="åœ¨ä¸ªäººè¿œç¨‹åˆ†å‰åˆ†æ”¯ä¸Šåˆ›å»º-pr" class="headerLink">
    <a href="#%e5%9c%a8%e4%b8%aa%e4%ba%ba%e8%bf%9c%e7%a8%8b%e5%88%86%e5%8f%89%e5%88%86%e6%94%af%e4%b8%8a%e5%88%9b%e5%bb%ba-pr" class="header-mark"></a>5.1.3 åœ¨ä¸ªäººè¿œç¨‹åˆ†å‰åˆ†æ”¯ä¸Šåˆ›å»º PR</h4><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬è®¿é—®è¿™ä¸ªè¿œç¨‹åˆ†æ”¯ï¼šhttps://github.com/wey-gu/nebula/tree/fn_JSON_EXTRACT ï¼Œå°±èƒ½æ‰¾åˆ° Open PR çš„å…¥å£ï¼š</p>
<p><figure><a class="lightgallery" href="https://user-images.githubusercontent.com/1651790/197544575-c04a06cf-b867-409c-832e-f3d893fea784.png" title="https://user-images.githubusercontent.com/1651790/197544575-c04a06cf-b867-409c-832e-f3d893fea784.png" data-thumbnail="https://user-images.githubusercontent.com/1651790/197544575-c04a06cf-b867-409c-832e-f3d893fea784.png">
        <img
            
            loading="lazy"
            src="https://user-images.githubusercontent.com/1651790/197544575-c04a06cf-b867-409c-832e-f3d893fea784.png"
            srcset="https://user-images.githubusercontent.com/1651790/197544575-c04a06cf-b867-409c-832e-f3d893fea784.png, https://user-images.githubusercontent.com/1651790/197544575-c04a06cf-b867-409c-832e-f3d893fea784.png 1.5x, https://user-images.githubusercontent.com/1651790/197544575-c04a06cf-b867-409c-832e-f3d893fea784.png 2x"
            sizes="auto"
            alt="https://user-images.githubusercontent.com/1651790/197544575-c04a06cf-b867-409c-832e-f3d893fea784.png">
    </a></figure></p>
<p>ç„¶åç‚¹å‡» Open pull request æŒ‰é’®ï¼Œå°±è¿›å…¥åˆ°åˆ›å»º PR çš„ç•Œé¢äº†ï¼Œè¿™å’Œåœ¨ä¸€èˆ¬çš„è®ºå›é‡Œæäº¤ä¸€ä¸ªå¸–å­æ˜¯å¾ˆç±»ä¼¼çš„ï¼š</p>
<p><figure><a class="lightgallery" href="https://user-images.githubusercontent.com/1651790/197545824-93706cc7-32a9-4638-84eb-26573106aa28.png" title="https://user-images.githubusercontent.com/1651790/197545824-93706cc7-32a9-4638-84eb-26573106aa28.png" data-thumbnail="https://user-images.githubusercontent.com/1651790/197545824-93706cc7-32a9-4638-84eb-26573106aa28.png">
        <img
            
            loading="lazy"
            src="https://user-images.githubusercontent.com/1651790/197545824-93706cc7-32a9-4638-84eb-26573106aa28.png"
            srcset="https://user-images.githubusercontent.com/1651790/197545824-93706cc7-32a9-4638-84eb-26573106aa28.png, https://user-images.githubusercontent.com/1651790/197545824-93706cc7-32a9-4638-84eb-26573106aa28.png 1.5x, https://user-images.githubusercontent.com/1651790/197545824-93706cc7-32a9-4638-84eb-26573106aa28.png 2x"
            sizes="auto"
            alt="https://user-images.githubusercontent.com/1651790/197545824-93706cc7-32a9-4638-84eb-26573106aa28.png">
    </a></figure></p>
<p>æäº¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç­‰å¾…ã€æˆ–è€…é‚€è¯·å…¶ä»–äººæ¥åšä»£ç çš„å®¡æŸ¥ï¼ˆreviewï¼‰ï¼Œå¾€å¾€å…¶ä»–çš„è´¡çŒ®è€…éƒ½èƒ½ä»ä»–ä»¬çš„è§’åº¦ç»™å‡ºä¸€äº›ä»£ç ä¿®æ”¹çš„å»ºè®®å’Œæç¤ºï¼Œæˆ‘ä»¬éœ€è¦ç»è¿‡å‡ è½®çš„ä»£ç ä¿®æ”¹ã€è®¨è®ºä¹‹åä½¿å¾—ä»£ç è¾¾åˆ°æœ€ä½³çš„çŠ¶æ€ã€‚</p>
<p>è€Œè¿™äº›å®¡æŸ¥è€…ä¸­é™¤äº†ç¤¾åŒºçš„è´¡çŒ®è€…ï¼ˆäººç±»ï¼‰ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›è‡ªåŠ¨åŒ–çš„æœºå™¨äººï¼Œä»–ä»¬ä¼šåœ¨ä»£ç åº“ä¸­è‡ªåŠ¨åŒ–çš„é€šè¿‡æŒç»­é›†æˆï¼ˆCIï¼‰çš„æ–¹å¼è¿è¡Œä¸€äº›è‡ªåŠ¨åŒ–çš„å®¡æŸ¥å·¥ä½œï¼Œå¯èƒ½åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>CLAï¼šContributor License Agreementï¼ˆè´¡çŒ®è€…è®¸å¯åè®®ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªè¦ PR ä½œè€…åœ¨é¦–æ¬¡æäº¤ä»£ç åˆ°é¡¹ç›®æ—¶ç­¾ç½²çš„åè®®ï¼Œå› ä¸ºä»£ç å°†è¢«æäº¤åˆ°å…¬å…±ç©ºé—´ï¼Œè¿™ä»½åè®®çš„ç­¾ç½²æ„å‘³ç€ä½œè€…åŒæ„ä»£ç è¢«åˆ†äº«ã€å¤ç”¨ã€ä¿®æ”¹è¿™ä»¶äº‹æƒ…ã€‚</li>
<li>lintï¼šä»£ç é£æ ¼æ£€æŸ¥ï¼Œè¿™ä¹Ÿæ˜¯æœ€å¸¸è§çš„ CI ä»»åŠ¡</li>
<li>testï¼šå„ç§å±‚é¢çš„æµ‹è¯•æ£€æŸ¥ä»»åŠ¡</li>
</ul>
<p>é€šå¸¸æ¥è¯´ï¼Œè¿™äº›æ‰€æœ‰çš„è‡ªåŠ¨åŒ–å®¡æŸ¥æœºå™¨äººæ‰€ä»£è¡¨çš„ä»»åŠ¡ä¹Ÿéœ€è¦å…¨éƒ½é€šè¿‡ï¼Œä»£ç çš„çŠ¶æ€æ‰èƒ½è¢«è®¤ä¸ºæ˜¯å¯ä»¥åˆå¹¶çš„ï¼Œè€Œä¸å‡ºæ„å¤–ï¼Œæˆ‘é¦–æ¬¡æäº¤çš„ä»£ç æœç„¶æœ‰æµ‹è¯•çš„å¤±è´¥ã€‚</p>
<p><figure><a class="lightgallery" href="https://user-images.githubusercontent.com/1651790/197549538-4bba79b5-6b0a-42f4-b287-55061c08cbe8.png" title="https://user-images.githubusercontent.com/1651790/197549538-4bba79b5-6b0a-42f4-b287-55061c08cbe8.png" data-thumbnail="https://user-images.githubusercontent.com/1651790/197549538-4bba79b5-6b0a-42f4-b287-55061c08cbe8.png">
        <img
            
            loading="lazy"
            src="https://user-images.githubusercontent.com/1651790/197549538-4bba79b5-6b0a-42f4-b287-55061c08cbe8.png"
            srcset="https://user-images.githubusercontent.com/1651790/197549538-4bba79b5-6b0a-42f4-b287-55061c08cbe8.png, https://user-images.githubusercontent.com/1651790/197549538-4bba79b5-6b0a-42f4-b287-55061c08cbe8.png 1.5x, https://user-images.githubusercontent.com/1651790/197549538-4bba79b5-6b0a-42f4-b287-55061c08cbe8.png 2x"
            sizes="auto"
            alt="https://user-images.githubusercontent.com/1651790/197549538-4bba79b5-6b0a-42f4-b287-55061c08cbe8.png">
    </a></figure></p>
<h3 id="è°ƒè¯•-ci-æµ‹è¯•ä»£ç " class="headerLink">
    <a href="#%e8%b0%83%e8%af%95-ci-%e6%b5%8b%e8%af%95%e4%bb%a3%e7%a0%81" class="header-mark"></a>5.2 è°ƒè¯• CI æµ‹è¯•ä»£ç </h3><p>NebulaGraph é‡Œæ‰€æœ‰çš„ CI æµ‹è¯•ä»£ç ä¹Ÿéƒ½èƒ½åœ¨æœ¬åœ°è¢«è§¦å‘ï¼Œå¹¶ä¸”ï¼ˆæ˜¾ç„¶ï¼‰éƒ½æœ‰è¢«å•ç‹¬è§¦å‘çš„æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦æŒæ¡å®ƒä»¬è€Œä¸æ˜¯åœ¨æ¯æ¬¡ä¿®æ”¹ä¸€ä¸ªå°çš„æµ‹è¯•ä¿®å¤ä¹‹åæäº¤åˆ°æœåŠ¡å™¨ä¸Šç­‰ç€ CI åšå…¨é‡çš„è¿è¡Œï¼ˆè¿™æ ·å¸¸å¸¸å‡ ååˆ†é’Ÿå°±è¿™ä¹ˆæµªè´¹æ‰äº†ï¼‰ã€‚</p>
<h4 id="ctest" class="headerLink">
    <a href="#ctest" class="header-mark"></a>5.2.1 CTest</h4><p>åœ¨è¿™ä¸ªè·ç¦»çš„ PR æäº¤ä¸­ï¼Œæˆ‘ä¿®æ”¹çš„å‡½æ•°ä»£ç åŒä¸€å±‚çº§ä¸‹çš„å•å…ƒæµ‹è¯• CTest å°±æœ‰é—®é¢˜ï¼Œé—®é¢˜å¯èƒ½æ˜¯æµ‹è¯•ä»£ç æœ¬èº«é€ æˆã€æˆ‘ä»¬çš„ä¿®æ”¹ç ´åäº†åŸæ¥çš„æµ‹è¯•ç”¨ä¾‹å¯¼è‡´ã€äº¦æˆ–è€…æ˜¯æˆ‘ä»¬è‡ªå·±çš„æµ‹è¯•ç”¨ä¾‹å‘ç°äº†ä»£ç ä¿®æ”¹æœ¬èº«çš„é—®é¢˜ã€‚</p>
<p>è¿™æ¬¡ï¼Œæˆ‘ä»¬è¦æ ¹æ® CTest å¤±è´¥çš„æŠ¥é”™è¿›è¡Œæ’æŸ¥å’Œä»£ç ä¿®æ”¹ï¼Œç„¶åç¼–è¯‘ä»£ç ï¼Œåœ¨æœ¬åœ°è¿è¡Œä¸€ä¸‹è¿™ä¸ªå¤±è´¥çš„ç”¨ä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># æˆ‘ä»¬éœ€è¦è¿›å…¥åˆ°æˆ‘ä»¬çš„ç¼–è¯‘å®¹å™¨å†…éƒ¨çš„ build ç›®å½•ä¸‹</span>
</span></span><span class="line"><span class="cl">$ docker <span class="nb">exec</span> -ti nebula_dev bash
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> build
</span></span><span class="line"><span class="cl"><span class="c1"># åœ¨ -DENABLE_TESTING=ON ä¹‹ä¸­ç¼–è¯‘ï¼Œå¦‚æœä¹‹å‰çš„ç¼–è¯‘ job æ•°ä¸‹å†…å­˜å·²ç»è·‘æ»¡äº†çš„è¯ï¼Œè¿™æ¬¡å¯ä»¥æŠŠ job æ•°è°ƒå°ä¸€ç‚¹ï¼Œå› ä¸ºå¼€å¯æµ‹è¯•ä¼šå ç”¨æ›´å¤šå†…å­˜</span>
</span></span><span class="line"><span class="cl">$ cmake -DCMAKE_CXX_COMPILER<span class="o">=</span><span class="nv">$TOOLSET_CLANG_DIR</span>/bin/g++ -DCMAKE_C_COMPILER<span class="o">=</span><span class="nv">$TOOLSET_CLANG_DIR</span>/bin/gcc -DENABLE_WERROR<span class="o">=</span>OFF -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug -DENABLE_TESTING<span class="o">=</span>ON ..
</span></span><span class="line"><span class="cl">$ make -j <span class="m">48</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å¯ä»¥çœ‹åˆ°ç¼–è¯‘æˆåŠŸäº† CTest çš„å•å…ƒæµ‹è¯•äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="c1"># [100%] Linking CXX executable ../../../../bin/test/function_manager_test</span>
</span></span><span class="line"><span class="cl"><span class="c1"># [100%] Built target function_manager_test</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ‰§è¡Œé‡æ–°ä¿®æ”¹è¿‡çš„å•å…ƒæµ‹è¯•ï¼</span>
</span></span><span class="line"><span class="cl">$ bin/test/function_manager_test
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[==========]</span> Running <span class="m">11</span> tests from <span class="m">1</span> <span class="nb">test</span> suite.
</span></span><span class="line"><span class="cl"><span class="o">[</span>----------<span class="o">]</span> Global <span class="nb">test</span> environment set-up.
</span></span><span class="line"><span class="cl"><span class="o">[</span>----------<span class="o">]</span> <span class="m">11</span> tests from FunctionManagerTest
</span></span><span class="line"><span class="cl"><span class="o">[</span> RUN      <span class="o">]</span> FunctionManagerTest.testNull
</span></span><span class="line"><span class="cl"><span class="o">[</span>       OK <span class="o">]</span> FunctionManagerTest.testNull <span class="o">(</span><span class="m">0</span> ms<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> RUN      <span class="o">]</span> FunctionManagerTest.functionCall
</span></span><span class="line"><span class="cl">W20221020 23:35:18.579897 <span class="m">28679</span> Map.cpp:77<span class="o">]</span> JSON_EXTRACT nested layer 1: Map can be populated only by Bool, Double, Int, String value and null, now trying to parse from: object
</span></span><span class="line"><span class="cl"><span class="o">[</span>       OK <span class="o">]</span> FunctionManagerTest.functionCall <span class="o">(</span><span class="m">2</span> ms<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> RUN      <span class="o">]</span> FunctionManagerTest.time
</span></span><span class="line"><span class="cl"><span class="o">[</span>       OK <span class="o">]</span> FunctionManagerTest.time <span class="o">(</span><span class="m">0</span> ms<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> RUN      <span class="o">]</span> FunctionManagerTest.returnType
</span></span><span class="line"><span class="cl"><span class="o">[</span>       OK <span class="o">]</span> FunctionManagerTest.returnType <span class="o">(</span><span class="m">0</span> ms<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> RUN      <span class="o">]</span> FunctionManagerTest.SchemaRelated
</span></span><span class="line"><span class="cl"><span class="o">[</span>       OK <span class="o">]</span> FunctionManagerTest.SchemaRelated <span class="o">(</span><span class="m">0</span> ms<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> RUN      <span class="o">]</span> FunctionManagerTest.ScalarFunctionTest
</span></span><span class="line"><span class="cl"><span class="o">[</span>       OK <span class="o">]</span> FunctionManagerTest.ScalarFunctionTest <span class="o">(</span><span class="m">0</span> ms<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> RUN      <span class="o">]</span> FunctionManagerTest.ListFunctionTest
</span></span><span class="line"><span class="cl"><span class="o">[</span>       OK <span class="o">]</span> FunctionManagerTest.ListFunctionTest <span class="o">(</span><span class="m">0</span> ms<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> RUN      <span class="o">]</span> FunctionManagerTest.duplicateEdgesORVerticesInPath
</span></span><span class="line"><span class="cl"><span class="o">[</span>       OK <span class="o">]</span> FunctionManagerTest.duplicateEdgesORVerticesInPath <span class="o">(</span><span class="m">0</span> ms<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> RUN      <span class="o">]</span> FunctionManagerTest.ReversePath
</span></span><span class="line"><span class="cl"><span class="o">[</span>       OK <span class="o">]</span> FunctionManagerTest.ReversePath <span class="o">(</span><span class="m">0</span> ms<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> RUN      <span class="o">]</span> FunctionManagerTest.DataSetRowCol
</span></span><span class="line"><span class="cl"><span class="o">[</span>       OK <span class="o">]</span> FunctionManagerTest.DataSetRowCol <span class="o">(</span><span class="m">0</span> ms<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span> RUN      <span class="o">]</span> FunctionManagerTest.PurityTest
</span></span><span class="line"><span class="cl"><span class="o">[</span>       OK <span class="o">]</span> FunctionManagerTest.PurityTest <span class="o">(</span><span class="m">0</span> ms<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>----------<span class="o">]</span> <span class="m">11</span> tests from FunctionManagerTest <span class="o">(</span><span class="m">5</span> ms total<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>----------<span class="o">]</span> Global <span class="nb">test</span> environment tear-down
</span></span><span class="line"><span class="cl"><span class="o">[==========]</span> <span class="m">11</span> tests from <span class="m">1</span> <span class="nb">test</span> suite ran. <span class="o">(</span><span class="m">5</span> ms total<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>  PASSED  <span class="o">]</span> <span class="m">11</span> tests.
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆåŠŸï¼</p>
<p>äºæ˜¯ï¼Œæˆ‘æŠŠæ–°çš„æ›´æ”¹æäº¤åˆ°è¿œç¨‹åˆ†æ”¯ä¸Šï¼Œåœ¨ PR çš„ç½‘é¡µä¸­ï¼Œå¯ä»¥çœ‹åˆ° CI å·²ç»åœ¨æ–°çš„æäº¤çš„è§¦å‘ä¸‹é‡æ–°ç¼–è¯‘ã€æ‰§è¡Œäº†ï¼Œè¿‡ä¸€ä¼šå„¿æœç„¶éƒ½ pass äº†ï¼Œäºæ˜¯æˆ‘å…´é«˜é‡‡çƒˆåœ°ç­‰å¾…ç€ä¸¤ä½ä»¥ä¸Šçš„å®¡æŸ¥è€…å¸®å¿™æ‰¹å‡†ä»£ç ï¼Œç„¶ååˆå¹¶å®ƒï¼</p>
<p>ä½†æ˜¯ï¼Œæˆ‘æ”¶åˆ°äº†æ–°çš„å»ºè®®ï¼š</p>
<p><figure><a class="lightgallery" href="https://user-images.githubusercontent.com/1651790/197553025-82f1e7e5-b8a8-4729-a9b8-0f13a34adfed.png" title="https://user-images.githubusercontent.com/1651790/197553025-82f1e7e5-b8a8-4729-a9b8-0f13a34adfed.png" data-thumbnail="https://user-images.githubusercontent.com/1651790/197553025-82f1e7e5-b8a8-4729-a9b8-0f13a34adfed.png">
        <img
            
            loading="lazy"
            src="https://user-images.githubusercontent.com/1651790/197553025-82f1e7e5-b8a8-4729-a9b8-0f13a34adfed.png"
            srcset="https://user-images.githubusercontent.com/1651790/197553025-82f1e7e5-b8a8-4729-a9b8-0f13a34adfed.png, https://user-images.githubusercontent.com/1651790/197553025-82f1e7e5-b8a8-4729-a9b8-0f13a34adfed.png 1.5x, https://user-images.githubusercontent.com/1651790/197553025-82f1e7e5-b8a8-4729-a9b8-0f13a34adfed.png 2x"
            sizes="auto"
            alt="https://user-images.githubusercontent.com/1651790/197553025-82f1e7e5-b8a8-4729-a9b8-0f13a34adfed.png">
    </a></figure></p>
<p>å¦ä¸€ä½è´¡çŒ®è€…è¯·æˆ‘æ·»åŠ  TCK çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<h4 id="tck" class="headerLink">
    <a href="#tck" class="header-mark"></a>5.2.2 TCK</h4><p>TCK çš„å…¨ç§°æ˜¯ The Cypher Technology Compatibility Kitï¼Œå®ƒæ˜¯ NebulaGraph ä» OpenCypher ç¤¾åŒºç»§æ‰¿æ¼”è¿›è€Œæ¥çš„ä¸€å¥—æµ‹è¯•æ¡†æ¶ï¼Œæˆ‘ä»¬ç”¨ Python åšäº†æµ‹è¯•ç”¨ä¾‹æ ¼å¼å…¼å®¹çš„å®ç°ã€‚</p>
<p>å®ƒçš„ä¼˜é›…åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥åƒå†™è‹±è¯­ä¸€æ ·å»æè¿°æˆ‘ä»¬æƒ³å®ç°çš„ç«¯åˆ°ç«¯åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹ï¼Œåƒè¿™æ ·ï¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tcl" data-lang="tcl"><span class="line"><span class="cl"><span class="c"># tests/tck/features/function/json_extract.feature
</span></span></span><span class="line"><span class="cl"><span class="c"></span><span class="nv">Feature</span><span class="o">:</span> json_extract Function
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nv">Background</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="nv">Test</span> json_extract function
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nv">Scenario</span><span class="o">:</span> Test Positive Cases
</span></span><span class="line"><span class="cl">    <span class="nv">When</span> executing query:
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">      YIELD JSON_EXTRACT(&#39;{&#34;</span><span class="nv">a</span><span class="s2">&#34;: &#34;</span>foo<span class="s2">&#34;, &#34;</span>b<span class="s2">&#34;: 0.2, &#34;</span>c<span class="s2">&#34;: true}&#39;) AS result;
</span></span></span><span class="line"><span class="cl"><span class="s2">      &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">Then</span> the result should be<span class="err">,</span> <span class="ow">in</span> any order:
</span></span><span class="line"><span class="cl">      <span class="o">|</span> <span class="nv">result</span>                      <span class="o">|</span>
</span></span><span class="line"><span class="cl">      <span class="o">|</span> <span class="k">{</span><span class="nv">a</span><span class="o">:</span> <span class="s2">&#34;foo&#34;</span><span class="err">,</span> b: <span class="mf">0.2</span><span class="err">,</span> c: true<span class="k">}</span> <span class="o">|</span>
</span></span><span class="line"><span class="cl">    <span class="nv">When</span> executing query:
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">      YIELD JSON_EXTRACT(&#39;{&#34;</span><span class="nv">a</span><span class="s2">&#34;: 1, &#34;</span>b<span class="s2">&#34;: {}, &#34;</span>c<span class="s2">&#34;: {&#34;</span>d<span class="s2">&#34;: true}}&#39;) AS result;
</span></span></span><span class="line"><span class="cl"><span class="s2">      &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">Then</span> the result should be<span class="err">,</span> <span class="ow">in</span> any order:
</span></span><span class="line"><span class="cl">      <span class="o">|</span> <span class="nv">result</span>                      <span class="o">|</span>
</span></span><span class="line"><span class="cl">      <span class="o">|</span> <span class="k">{</span><span class="nv">a</span><span class="o">:</span> <span class="mi">1</span><span class="err">,</span> b: <span class="k">{}</span><span class="err">,</span> c: <span class="k">{</span><span class="nv">d</span><span class="o">:</span> true<span class="k">}}</span> <span class="o">|</span>
</span></span><span class="line"><span class="cl">    <span class="nv">When</span> executing query:
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">      YIELD JSON_EXTRACT(&#39;{}&#39;) AS result;
</span></span></span><span class="line"><span class="cl"><span class="s2">      &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">Then</span> the result should be<span class="err">,</span> <span class="ow">in</span> any order:
</span></span><span class="line"><span class="cl">      <span class="o">|</span> <span class="nv">result</span> <span class="o">|</span>
</span></span><span class="line"><span class="cl">      <span class="o">|</span> <span class="k">{}</span>     <span class="o">|</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨æ·»åŠ äº†è‡ªå·±çš„ä¸€ä¸ªæ–°çš„ tck æµ‹è¯•ç”¨ä¾‹æ–‡æœ¬æ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æµ‹è¯•æ–‡ä»¶ä¸­ä¸´æ—¶å¢åŠ æ ‡ç­¾ï¼Œå¹¶åœ¨æ‰§è¡Œçš„æ—¶å€™æŒ‡å®šæ ‡ç­¾ï¼Œå°±å¯ä»¥å•ç‹¬æ‰§è¡Œæ–°å¢çš„ tck æµ‹è¯•ç”¨ä¾‹äº†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># è¿˜æ˜¯åœ¨ç¼–è¯‘å®¹å™¨å†…éƒ¨ï¼Œè¿›å…¥åˆ° tests ç›®å½•ä¸‹</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ../tests
</span></span><span class="line"><span class="cl"><span class="c1"># å®‰è£… tck æµ‹è¯•æ‰€éœ€ä¾èµ–</span>
</span></span><span class="line"><span class="cl">python3 -m pip install -r requirements.txt
</span></span><span class="line"><span class="cl">python3 -m pip install nebula3-python<span class="o">==</span>3.1.0
</span></span><span class="line"><span class="cl"><span class="c1"># è¿è¡Œä¸€ä¸ªå•ç‹¬ä¸º tck æµ‹è¯•å‡†å¤‡çš„é›†ç¾¤</span>
</span></span><span class="line"><span class="cl">make <span class="nv">CONTAINERIZED</span><span class="o">=</span><span class="nb">true</span> <span class="nv">ENABLE_SSL</span><span class="o">=</span><span class="nb">true</span> <span class="nv">CA_SIGNED</span><span class="o">=</span><span class="nb">true</span> up
</span></span><span class="line"><span class="cl"><span class="c1"># ç»™ tests/tck/features/function/json_extract.feature ä»¥@å¼€å¤´ç¬¬ä¸€è¡ŒåŠ ä¸Šæ ‡ç­¾ï¼Œæ¯”å¦‚ @wey</span>
</span></span><span class="line"><span class="cl">vi tests/tck/features/function/json_extract.feature
</span></span><span class="line"><span class="cl"><span class="c1"># æ‰§è¡Œ pytest (åŒ…å« tck ç”¨ä¾‹)ï¼Œå› ä¸ºåˆ¶å®šäº† -m &#34;wey&#34;ï¼Œåªæœ‰ tests/tck/features/function/json_extract.feature ä¼šè¢«æ‰§è¡Œ</span>
</span></span><span class="line"><span class="cl">python3 -m pytest -m <span class="s2">&#34;wey&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># å…³é—­ pytest æ‰€ä¾èµ–çš„é›†ç¾¤</span>
</span></span><span class="line"><span class="cl">make <span class="nv">CONTAINERIZED</span><span class="o">=</span><span class="nb">true</span> <span class="nv">ENABLE_SSL</span><span class="o">=</span><span class="nb">true</span> <span class="nv">CA_SIGNED</span><span class="o">=</span><span class="nb">true</span> down
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>å»¶ä¼¸é˜…è¯»ï¼š</p>
<ul>
<li>åŸºäº BDD ç†è®ºçš„ Nebula é›†æˆæµ‹è¯•æ¡†æ¶é‡æ„ï¼Œhttps://nebula-graph.com.cn/posts/bdd-testing-practice</li>
<li>å¦‚ä½•å‘ NebulaGraph å¢åŠ ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œhttps://nebula-graph.com.cn/posts/bdd-testing-practice-add-test-case</li>
</ul>
</blockquote>
<h3 id="é‚€è¯·å†æ¬¡-review" class="headerLink">
    <a href="#%e9%82%80%e8%af%b7%e5%86%8d%e6%ac%a1-review" class="header-mark"></a>5.3 é‚€è¯·å†æ¬¡ review</h3><p>å¾…æˆ‘ä»¬æŠŠéœ€è¦çš„æµ‹è¯•è°ƒé€šã€å†æ¬¡æäº¤ PR å¹¶ä¸” CI ç”¨ä¾‹å…¨éƒ½é€šè¿‡ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡é‚€è¯·ä¹‹å‰å¸®åŠ©å®¡æŸ¥ä»£ç çš„åŒå­¦åšåšæœ€åçš„æŸ¥çœ‹ï¼Œå¦‚æœä¸€åˆ‡éƒ½é¡ºåˆ©ï¼Œä»£ç å°±ä¼šè¢«åˆå¹¶äº†ï¼</p>
<p><figure><a class="lightgallery" href="https://user-images.githubusercontent.com/1651790/197557709-2c851a03-d001-4fc9-bc5a-b858219fbded.png" title="https://user-images.githubusercontent.com/1651790/197557709-2c851a03-d001-4fc9-bc5a-b858219fbded.png" data-thumbnail="https://user-images.githubusercontent.com/1651790/197557709-2c851a03-d001-4fc9-bc5a-b858219fbded.png">
        <img
            
            loading="lazy"
            src="https://user-images.githubusercontent.com/1651790/197557709-2c851a03-d001-4fc9-bc5a-b858219fbded.png"
            srcset="https://user-images.githubusercontent.com/1651790/197557709-2c851a03-d001-4fc9-bc5a-b858219fbded.png, https://user-images.githubusercontent.com/1651790/197557709-2c851a03-d001-4fc9-bc5a-b858219fbded.png 1.5x, https://user-images.githubusercontent.com/1651790/197557709-2c851a03-d001-4fc9-bc5a-b858219fbded.png 2x"
            sizes="auto"
            alt="https://user-images.githubusercontent.com/1651790/197557709-2c851a03-d001-4fc9-bc5a-b858219fbded.png">
    </a></figure></p>
<blockquote>
<p>é¢˜å›¾æ¥è‡ª <a href="https://unsplash.com/photos/TGEWJXylgJk" target="_blank" rel="noopener noreferrer">Jon</a></p>
</blockquote></div>

        


<h2>ç›¸å…³å†…å®¹</h2>
<div class="related-container">
    <div class="related-item-container">
            <div class="related-image">
                <a href="/build-open-communication-infra/"><img
        
        loading="lazy"
        src="/build-open-communication-infra/featured-image.webp"
        srcset="/build-open-communication-infra/featured-image.webp, /build-open-communication-infra/featured-image.webp 1.5x, /build-open-communication-infra/featured-image.webp 2x"
        sizes="auto"
        alt="æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚"
        title="æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚" height="200"   width="400" ></a>
            </div><h2 class="related-title">
                <a href="/build-open-communication-infra/">è¿æ¥å¾®ä¿¡ç¾¤ã€Slack å’Œ GitHubï¼šç¤¾åŒºå¼€æ”¾æ²Ÿé€šçš„åŸºç¡€è®¾æ–½æ­å»º</a>
            </h2>
        </div>
    <div class="related-item-container">
            <div class="related-image">
                <a href="/ngql-execution-plan/"><img
        
        loading="lazy"
        src="/ngql-execution-plan/featured-image.webp"
        srcset="/ngql-execution-plan/featured-image.webp, /ngql-execution-plan/featured-image.webp 1.5x, /ngql-execution-plan/featured-image.webp 2x"
        sizes="auto"
        alt="æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚"
        title="æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚" height="200"   width="400" ></a>
            </div><h2 class="related-title">
                <a href="/ngql-execution-plan/">nGQL ç®€æ˜æ•™ç¨‹ï¼Œç¬¬äºŒæœŸ nGQL æ‰§è¡Œè®¡åˆ’è¯¦è§£ä¸è°ƒä¼˜</a>
            </h2>
        </div>
    <div class="related-item-container">
            <div class="related-image">
                <a href="/ngql-tutorial/"><img
        
        loading="lazy"
        src="/ngql-tutorial/featured-image.webp"
        srcset="/ngql-tutorial/featured-image.webp, /ngql-tutorial/featured-image.webp 1.5x, /ngql-tutorial/featured-image.webp 2x"
        sizes="auto"
        alt="æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚"
        title="æœ¬æ–‡æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ä¸º NebulaGraph å†…æ ¸è´¡çŒ®ä»£ç ã€æ„å»ºã€Debug çš„ä¸€ç«™å¼æŒ‡å—ã€‚" height="200"   width="400" ></a>
            </div><h2 class="related-title">
                <a href="/ngql-tutorial/">nGQL ç®€æ˜æ•™ç¨‹ï¼Œç¬¬ä¸€æœŸ</a>
            </h2>
        </div>
    

</div>

<div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2023-02-09&nbsp;<a class="git-hash" href="github.com/siwei-io/siwei-io.github.io/commit/65e8994dcbc1b1570aa6780947c40b735a0d0f42" target="_blank" title="commit by Wey Gu(weyl.gu@gmail.com) 65e8994dcbc1b1570aa6780947c40b735a0d0f42: fixed image path, typo and title" rel="noopener noreferrer">
                                    <i class="fas fa-hashtag fa-fw"></i>65e8994</a></span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span><a class="link-to-mardown" href=/nebulagraph-hacking-guide/index.md target="_blank" rel="noopener noreferrer">é˜…è¯»åŸå§‹æ–‡æ¡£</a>
                    </span><span>|&nbsp;<a class="link-to-report" href=https://github.com/siwei-io/siwei-io.github.io/issues/new?title=[bug]%20NebulaGraph+%E5%86%85%E6%A0%B8%E8%B4%A1%E7%8C%AE%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97&body=|Field|Value|%0A|-|-|%0A|Title|NebulaGraph+%E5%86%85%E6%A0%B8%E8%B4%A1%E7%8C%AE%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97|%0A|Url|https://siwei.io/nebulagraph-hacking-guide/|%0A|Filename|posts/nebulagraph-hacking-guide/index.md| target="_blank" rel="noopener noreferrer">æŠ¥å‘Šé—®é¢˜</a>
                    </span></div>
            <div class="post-info-share"><button title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://siwei.io/nebulagraph-hacking-guide/" data-title="NebulaGraph å†…æ ¸è´¡çŒ®å¼€å‘æŒ‡å—" data-via="wey_gu" data-hashtags="NebulaGraph,contributing,open-source,å¼€å‘æŒ‡å—"><span class="fab fa-twitter fa-fw"></span></button><button title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="https://siwei.io/nebulagraph-hacking-guide/" data-hashtag="NebulaGraph"><span class="fab fa-facebook-square fa-fw"></span></button><button title="åˆ†äº«åˆ° Hacker News" data-sharer="hackernews" data-url="https://siwei.io/nebulagraph-hacking-guide/" data-title="NebulaGraph å†…æ ¸è´¡çŒ®å¼€å‘æŒ‡å—"><span class="fab fa-hacker-news fa-fw"></span></button><button title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="https://siwei.io/nebulagraph-hacking-guide/" data-title="NebulaGraph å†…æ ¸è´¡çŒ®å¼€å‘æŒ‡å—"><span data-svg-src="/lib/simple-icons/icons/line.min.svg"></span></button><button title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://siwei.io/nebulagraph-hacking-guide/" data-title="NebulaGraph å†…æ ¸è´¡çŒ®å¼€å‘æŒ‡å—" data-image="featured-image.webp" data-ralateuid="siweigu"><span class="fab fa-weibo fa-fw"></span></button><button title="åˆ†äº«åˆ° Telegram" data-sharer="telegram" data-url="https://siwei.io/nebulagraph-hacking-guide/" data-title="NebulaGraph å†…æ ¸è´¡çŒ®å¼€å‘æŒ‡å—" data-web><span class="fab fa-telegram-plane fa-fw"></span></button></div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/nebulagraph/">NebulaGraph</a>,&nbsp;<a href="/tags/contributing/">contributing</a>,&nbsp;<a href="/tags/open-source/">open-source</a>,&nbsp;<a href="/tags/%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/">å¼€å‘æŒ‡å—</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/ngql-execution-plan/" class="prev" rel="prev" title="nGQL ç®€æ˜æ•™ç¨‹ï¼Œç¬¬äºŒæœŸ nGQL æ‰§è¡Œè®¡åˆ’è¯¦è§£ä¸è°ƒä¼˜"><i class="fas fa-angle-left fa-fw"></i>nGQL ç®€æ˜æ•™ç¨‹ï¼Œç¬¬äºŒæœŸ nGQL æ‰§è¡Œè®¡åˆ’è¯¦è§£ä¸è°ƒä¼˜</a>
            <a href="/recommendation-system-with-graphdb/" class="next" rel="next" title="åŸºäºå›¾æ•°æ®åº“çš„æ¨èç³»ç»Ÿ">åŸºäºå›¾æ•°æ®åº“çš„æ¨èç³»ç»Ÿ<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="giscus"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://giscus.app/">giscus</a>.
            </noscript></div></article></div>
        </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">
                    ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer" title="Hugo 0.117.0">Hugo</a> å¼ºåŠ›é©±åŠ¨&nbsp;|&nbsp;ä¸»é¢˜ - <a href="https://github.com/HEIGE-PCloud/DoIt" target="_blank" rel="noopener noreferrer" title="DoIt 0.4.0"><i class="far fa-edit fa-fw"></i> DoIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2018 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://siwei.io" target="_blank" rel="noopener noreferrer">Wey Gu</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
            <div class="footer-line"></div>
            <div class="footer-line">
            </div>
        </div><script>
                    if('serviceWorker' in navigator) {
                        navigator.serviceWorker
                            .register('/sw.min.js', { scope: '/' })
                            .then(function(registration) {
                            });
                
                        navigator.serviceWorker
                            .ready
                            .then(function(registration) {
                            });
                    }
                </script></footer></div>

    <div id="fixed-buttons"><a href="#back-to-top" id="back-to-top-button" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
            <i class="fas fa-arrow-up fa-fw"></i>
        </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
            <i class="fas fa-comment fa-fw"></i>
        </a>
    </div><div class="assets"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/katex/copy-tex.min.css">
        <noscript><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"></noscript><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":10},"comment":{"giscus":{"darkTheme":"dark","dataCategory":"Comments","dataCategoryId":"DIC_kwDOFhiy8c4CQeuu","dataEmitMetadata":"1","dataInputPosition":"bottom","dataLang":"en","dataMapping":"title","dataReactionsEnabled":"1","dataRepo":"siwei-io/siwei-io.github.io","dataRepoId":"MDEwOlJlcG9zaXRvcnkzNzA3MTc0MjU=","dataStrict":"1","lightTheme":"light"}},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":true,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":300,"threshold":0.1,"type":"fuse","useExtendedSearch":false},"sharerjs":true,"table":{"sort":true}};</script><script type="text/javascript" src="/lib/tablesort/tablesort.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js" defer></script><script type="text/javascript" src="/lib/katex/auto-render.min.js" defer></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js" defer></script><script type="text/javascript" src="/lib/katex/mhchem.min.js" defer></script><script type="text/javascript" src="/js/katex.min.js" defer></script><script type="text/javascript" src="/js/theme.min.js" defer></script><script type="text/javascript" src="/js/giscus.min.js" defer></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-DYTTVYCRS2', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-DYTTVYCRS2" async></script></div>
</body>

</html>